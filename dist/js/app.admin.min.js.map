{"version":3,"sources":["app.admin.min.js"],"names":["domReady","fn","document","readyState","addEventListener","opacity","console","log","setTimeout","$","addClass","hasClass","imageopacity","find","each","$thisimage","this","imagesLoaded","attr","newSrc","adminapp","init"],"mappings":";;;;;;;;;AAAA,SAASA,SAASC,GAA6B,YAAtBC,SAASC,WAAqCD,SAASE,iBAAiB,mBAAmBH,GAA1DA,IAA+D,SAASI,UAAUC,QAAQC,IAAI,sBAAsBD,QAAQC,IAAI,wBAAqNC,WAA7L,WAAuBC,EAAE,QAAQC,SAAS,iBAAoBD,EAAE,QAAQE,SAAS,6BAA4BL,QAAQC,IAAI,wBAAwBE,EAAE,QAAQC,SAAS,yBAAgD,KAAM,SAASE,eAAeN,QAAQC,IAAI,8BAAkDE,EAAE,QAAQI,KAAK,wBAAwCC,KAAK,WAAWR,QAAQC,IAAI,qBAAqB,IAAIQ,EAAWN,EAAEO,MAAMD,EAAWE,aAAa,GAAG,WAAWX,QAAQC,IAAI,sBAAiCQ,EAAWG,KAAK,OAA3B,IAAkCC,EAAOJ,EAAWG,KAAK,YAAYH,EAAWG,KAAK,MAAMC,GAAQJ,EAAWL,SAAS,cAEh0B,IAAIU,SAAS,CAACC,KAAK,WAAgBf,QAAQC,IAAI,qDAAqDK,eAAeP,YAAaL,SAASoB,SAASC","file":"app.admin.min.js","sourcesContent":["function domReady(fn){if(document.readyState!=='loading'){fn();return;}document.addEventListener('DOMContentLoaded',fn);}function opacity(){console.log(\"opacity() function\");console.log(\"removed imagesloaded\");function waitloading(){$(\"body\").addClass('images-loaded');if($(\"body\").hasClass(\"page-template-page-grid\")){console.log(\"grid loader removing\");$(\"body\").addClass('page-content-loaded');}}setTimeout(waitloading,200);}function imageopacity(){console.log(\"images loaded applied here\");var $thisimageblock=$(\"body\").find(\"img.apply-image-load\");$thisimageblock.each(function(){console.log(\"each image? block\");var $thisimage=$(this);$thisimage.imagesLoaded({},function(){console.log(\"images have loaded\");var oldSrc=$thisimage.attr('src'),newSrc=$thisimage.attr('data-src');$thisimage.attr('src',newSrc);$thisimage.addClass(\"loaded\");});});}\n\nvar adminapp={init:function init(){console.log(\"Admin App js why is jquery not working - here ?! \");imageopacity();opacity();}};domReady(adminapp.init);\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaW1vbnZhbnN0aXByaWFhbi9TaXRlcy9jYWxseS0yMDIwL3dwLWNvbnRlbnQvdGhlbWVzL2NhbGx5XzIwMjAvc3JjL2pzL3V0aWxpdGllcy9oZWxwZXJzLmpzIiwiL1VzZXJzL3NpbW9udmFuc3RpcHJpYWFuL1NpdGVzL2NhbGx5LTIwMjAvd3AtY29udGVudC90aGVtZXMvY2FsbHlfMjAyMC9zcmMvanMvYXBwLmFkbWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBkb21SZWFkeShmbikge1xuICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gJ2xvYWRpbmcnKSB7XG4gICAgZm4oKTtcbiAgICByZXR1cm47XG4gIH1cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZuKTtcbn0vL2RvbVJlYWR5KGZuKVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0VG91Y2goKXtcbiAgY29uc29sZS5sb2coXCJkZXRlY3RUb3VjaCgpO1wiKVxuXG4gIC8vaHR0cHM6Ly9tZWRpdW0uY29tL0BkYXZpZC5naWxiZXJ0c29uL3RoZS1vbmx5LXdheS10by1kZXRlY3QtdG91Y2gtd2l0aC1qYXZhc2NyaXB0LTc3OTFhMzM0NjY4NVxuICAvLyB0ZXN0IHRoaXMgb24gSUUgLSByZWFkIHRoZSBjb21tZW50cyBpbiB0aGUgYXJ0aWNsZSBSRSBpc3N1ZXNcbiAgLy9odHRwczovL2dpc3QuZ2l0aHViLmNvbS9hZGJhcmlvLzRlMzNiMDdkNjE4ZDQ5OWNkODFlYjY5MWM3NDZiNDdlI2ZpbGUtanF1ZXJ5LXRvdWNoLWRldGVjdC1qc1xuICAvL2h0dHBzOi8vcGF0cmlja2hsYXVrZS5naXRodWIuaW8vdG91Y2gvdGVzdHMvdG91Y2gtZmVhdHVyZS1kZXRlY3QuaHRtbFxuICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIxMDU0MTI2L2hvdy10by1kZXRlY3QtaWYtYS1kZXZpY2UtaGFzLW1vdXNlLXN1cHBvcnRcbiAgLy9odHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80ODE3MDI5L3doYXRzLXRoZS1iZXN0LXdheS10by1kZXRlY3QtYS10b3VjaC1zY3JlZW4tZGV2aWNlLXVzaW5nLWphdmFzY3JpcHRcbiAgLy9odHRwOi8vd3d3LnN0dWNveC5jb20vYmxvZy95b3UtY2FudC1kZXRlY3QtYS10b3VjaHNjcmVlbi9cblxuICBpZiAoXCJvbnRvdWNoc3RhcnRcIiBpbiB3aW5kb3cpXG4gIHtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwidXNlciBjYW4gdG91Y2hcIik7XG4gICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoJ2lzLW5vdC10b3VjaCcpOyAgICAgIFxuICAgICQoXCJib2R5XCIpLmFkZENsYXNzKCdpcy10b3VjaCcpOyAgICAgIFxuICAgIC8vIHJ1bihcInRvdWNoXCIpO1xuICAgIFxuICAgICAvL2h0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIzODg1MjU1L2hvdy10by1yZW1vdmUtaWdub3JlLWhvdmVyLWNzcy1zdHlsZS1vbi10b3VjaC1kZXZpY2VzXG4gICAgdHJ5IHsgLy8gcHJldmVudCBleGNlcHRpb24gb24gYnJvd3NlcnMgbm90IHN1cHBvcnRpbmcgRE9NIHN0eWxlU2hlZXRzIHByb3Blcmx5XG4gICAgICAgICAgZm9yICh2YXIgc2kgaW4gZG9jdW1lbnQuc3R5bGVTaGVldHMpIHtcbiAgICAgICAgICAgICAgdmFyIHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tzaV07XG4gICAgICAgICAgICAgIGlmICghc3R5bGVTaGVldC5ydWxlcykgY29udGludWU7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgcmkgPSBzdHlsZVNoZWV0LnJ1bGVzLmxlbmd0aCAtIDE7IHJpID49IDA7IHJpLS0pIHtcbiAgICAgICAgICAgICAgICAgIGlmICghc3R5bGVTaGVldC5ydWxlc1tyaV0uc2VsZWN0b3JUZXh0KSBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlU2hlZXQucnVsZXNbcmldLnNlbGVjdG9yVGV4dC5tYXRjaCgnOmhvdmVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LmRlbGV0ZVJ1bGUocmkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXgpIHt9XG4gIFxuICB9XG4gIGVsc2VcbiAge1xuICAgIC8vY29uc29sZS5sb2coXCJ1c2VyIGNhbiB1c2UgdGhlaXIgbW91c2VcIik7XG4gICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoJ2lzLXRvdWNoJyk7ICAgICAgXG4gICAgJChcImJvZHlcIikuYWRkQ2xhc3MoJ2lzLW5vdC10b3VjaCcpOyAgICAgIFxuICAgLy8gIHJ1bihcIm1vdXNlXCIpO1xuICAgfS8vIGlmIChcIm9udG91Y2hzdGFydFwiIGluIHdpbmRvdylcblxufTsvL2RldGVjdFRvdWNoXG5cbi8vVE8gRE8gY2hhbmdlIHRvIGpxdWVyeSBtYXJrdXA/XG5leHBvcnQgZnVuY3Rpb24gU2V0QXBwSGVpZ2h0KCkge1xuIFxuICBjb25zdCBpbml0U3VibWVudUhlaWdodCA9ICgpID0+IHtcbiAgICBjb25zdCBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgIGRvYy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zdWJtZW51LWhlaWdodCcsIGAke3dpbmRvdy5pbm5lckhlaWdodH1weGApICAgXG4gfS8vYWluaXRTdWJtZW51SGVpZ2h0XG5cbiAgY29uc3QgaW5pdEhlYWRyb29tSGVpZ2h0ID0gKCkgPT4ge1xuXG4gICAgdmFyIGhlYWRIZWlnaHQgPSAkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5oZWlnaHQoKTsgICAgICBcblxuICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgIGRvYy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1oZWFkcm9vbS1oZWlnaHQnLCBoZWFkSGVpZ2h0ICsncHgnKSAgIFxuIFxuIFxuXG4gIC8vICBTZXRTdWJtZW51SGVpZ2h0KGhlYWRIZWlnaHQpO1xuIFxuICB9Ly9hcHBIZWlnaFxuIFxuXG5cblxuICBjb25zdCBhcHBIZWlnaHQgPSAoKSA9PiB7XG4gICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuICAgIGRvYy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1zaXRlLWhlaWdodCcsIGAke3dpbmRvdy5pbm5lckhlaWdodH1weGApICAgXG4gXG4gIH0vL2FwcEhlaWdoXG4gXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBhcHBIZWlnaHQpXG4gIGFwcEhlaWdodCgpO1xuICBpbml0U3VibWVudUhlaWdodCgpO1xuICBpbml0SGVhZHJvb21IZWlnaHQoKTtcblxufS8vZnVuY3Rpb24gU2V0QXBwSGVpZ2h0KClcblxuIFxuZXhwb3J0IGZ1bmN0aW9uIFNldFN1Ym1lbnVIZWlnaHQoaGVhZFJvb21TdGF0dXMpIHtcblxuXG4gIGNvbnNvbGUubG9nKFwiU2V0U3VibWVudUhlaWdodFwiKTtcbiAgY29uc29sZS5sb2coXCIgaGVhZFJvb21TdGF0dXN0XCIgKyBoZWFkUm9vbVN0YXR1cyArXCJcIik7XG5cbiAgICBjb25zdCBTdWJtZW51SGVpZ2h0ID0gKCkgPT4ge1xuICAgICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICBcbiAgICAgIGlmIChoZWFkUm9vbVN0YXR1cyA9PSBcIm9uUGluXCIpe1xuICAgICAgICB2YXIgaGVhZEhlaWdodCA9ICQoXCIjaGVhZGVyLW5hdi1hcmVhXCIpLm91dGVySGVpZ2h0KCk7ICAgICAgIFxuXG4gICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKGhlYWRSb29tU3RhdHVzID09IFwib25VbnBpblwiKXtcbiAgICAgICAgICB2YXIgaGVhZEhlaWdodCA9IDA7ICAgICAgXG5cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gY29uc29sZS5sb2coXCJoZWFkaGVpZ2h0XCIgK2hlYWRIZWlnaHQrXCJcIik7XG5cblxuICAgICAgZG9jLnN0eWxlLnNldFByb3BlcnR5KCctLXN1Ym1lbnUtaGVpZ2h0JywgYCR7KHdpbmRvdy5pbm5lckhlaWdodCAtIGhlYWRIZWlnaHQpfXB4YCkgICBcbiAgXG4gICAgfS8vU3VibWVudUhlaWdodCBcbiAgXG4gICAgY29uc3QgaGVhZHJvb21IZWlnaHQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICBpZiAoaGVhZFJvb21TdGF0dXMgPT0gXCJvblBpblwiKXtcbiAgICAgICAgdmFyIGhlYWRIZWlnaHQgPSAkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5vdXRlckhlaWdodCgpOyAgICAgIFxuXG4gICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKGhlYWRSb29tU3RhdHVzID09IFwib25VbnBpblwiKXtcbiAgICAgICAgXG4gICAgICAgICAgdmFyIGhlYWRIZWlnaHQgPSAwOyAgICAgIFxuXG4gICAgICAgIH1cbiAgICAgICAgXG5cbiAgICAgIGRvYy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1oZWFkcm9vbS1oZWlnaHQnLCBoZWFkSGVpZ2h0ICsncHgnKSAgIFxuICAgIH0vL2hlYWRIZWlnaHQgXG5cblxuXG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIFN1Ym1lbnVIZWlnaHQpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGVhZHJvb21IZWlnaHQpO1xuXG4gIFN1Ym1lbnVIZWlnaHQoKTtcbiAgaGVhZHJvb21IZWlnaHQoKTtcblxufS8vZnVuY3Rpb24gU2V0QXBwSGVpZ2h0KClcbiBcbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RBdHRyQ2hhbmdlKCkge1xuY29uc29sZS5sb2coXCJkZXRlY3RBdHRyQ2hhbmdlKClcIik7XG5cblxuICAkKFwiLndwdWYtc3VibWl0XCIpLm9uKFwicmVtb3ZlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBhbGVydChcIkVsZW1lbnQgd2FzIHJlbW92ZWRcIik7XG5cbiAgICAvLyAkKFwiLndwdWYtc3VjY2Vzc1wiKS5jc3MoXCJiYWNrZ3JvdW5kXCIsXCJyZWRcIik7XG4gICAgJChcImJvZHlcIikuYWRkQ2xhc3MoJ2Zvcm0tc3VibWl0dGVkJyk7ICAgIFxuICBcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlU3VjY2Vzcygpe1xuXG4gICAgICAgICAkKFwiLndwdWYtc3VjY2Vzc1wiKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpO1xuXG4gICAgICAgIH07IC8vd2FpdGxvYWRpbmcoKVxuICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZVN1Y2Nlc3MsIDYwMDApO1xuXG4gIH0pXG5cblxuICBcbn0vL2Z1bmN0aW9uIGRldGVjdEF0dHJDaGFuZ2UoKVxuXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50YXRpb24oKXtcbi8vIHJldmlldyB0aGlzIC0gd2UgbWlnaHQgbmVlZCBpdCB0byBlc251cmUgaW1hZ2Ugb3JpZW5hdGlvbnMgYXJlIGNvcnJlY3RcblxuLy8gIGNvbnNvbGUubG9nKFwiaGVsbG8gb3JpZW50YXRpb24gZnVuY3Rpb25cIilcblxuICB2YXIgd2lud2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTsgLy8gc2hvdWxkIGJlIGlubmVyIHdlaWR0aFxuICB2YXIgd2luaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpOyAvLyBpbm5lciBoZWlnaHRcbiAgdmFyIGlzSG9yaXpvbnRhbDtcblxuICBpZiAod2lud2lkdGggPiB3aW5oZWlnaHQgKSB7XG4gICAgLyogaG9yaXpvbnRhbCBvcmllbnRhdGlvbiAqL1xuICAgICQoXCJib2R5XCIpLmFkZENsYXNzKCdob3Jpem9udGFsJyk7XG4gICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoJ3ZlcnRpY2FsJyk7XG5cbiAgIH0gZWxzZXtcbiAgICAvKiB2ZXJ0aWNhbCBvcmllbnRhdGlvbiAqL1xuICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKCdob3Jpem9udGFsJyk7XG4gICAgJChcImJvZHlcIikuYWRkQ2xhc3MoJ3ZlcnRpY2FsJyk7XG5cbiAgfS8vZWxzZVxuXG59IC8vIGZ1bmN0aW9uIG9yaWVudGF0aW9uXG5cbmV4cG9ydCBmdW5jdGlvbiBvcGFjaXR5KCl7XG4gXG4gICAgY29uc29sZS5sb2coXCJvcGFjaXR5KCkgZnVuY3Rpb25cIilcblxuXG4gIC8vICAkKFwiYm9keVwiKS5pbWFnZXNMb2FkZWQoZnVuY3Rpb24oKXsgLy8gY29uc2lkZXIgYSBsYXpsb2Fkbmcgb3B0aW9ucz9cbiAgY29uc29sZS5sb2coXCJyZW1vdmVkIGltYWdlc2xvYWRlZFwiKVxuXG4gICAgICAvLyBjb25zb2xlLmxvZyhcIkltYWdlcyBoYXZlIGxvYWRlZCBpbiBvcGFjaXR5KCkgaW4gaGVscGVycy5qc1wiKVxuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gd2FpdGxvYWRpbmcoKXtcblxuICAgICAgICAvLyAkKFwiYm9keVwiKS5hZGRDbGFzcygnbG9hZGVkJyk7IHdhcyB0aGlzLSBiYnV0IGNoYW5nZSB0bzpcbiAgICAgICAgLy9yZWl2ZXcgYXMgaXQgbWlnaHQgY2F1c2UgaXNzdWVzXG4gICAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKCdpbWFnZXMtbG9hZGVkJyk7ICBcblxuICAgICAgICBpZiAoJChcImJvZHlcIikuaGFzQ2xhc3MoXCJwYWdlLXRlbXBsYXRlLXBhZ2UtZ3JpZFwiKSl7XG4gICAgICAgICAgLy8gYXMgaXQgdGFrZXMgYWdlcyB0byBsb2FkOyBsb2FkZXIgc2hvd25cbiAgICAgICAgICAvLyB0aGlzIGhpZGVzIGl0IGFmdGVyIGxvYWRcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImdyaWQgbG9hZGVyIHJlbW92aW5nXCIpXG4gICAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoJ3BhZ2UtY29udGVudC1sb2FkZWQnKTsgICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICB9OyAvL3dhaXRsb2FkaW5nKClcbiAgICAgICAgc2V0VGltZW91dCh3YWl0bG9hZGluZywgMjAwKTtcblxuICAgIC8vIH0pOyAvL2ltYWdlc2xvYWRlZFxuXG59Oy8vb3BhY2l0eVxuXG5leHBvcnQgZnVuY3Rpb24gaW1hZ2VvcGFjaXR5KCl7XG4gICAgY29uc29sZS5sb2coXCJpbWFnZXMgbG9hZGVkIGFwcGxpZWQgaGVyZVwiKVxuICAgIFxuICAgICAgdmFyICR0aGlzaW1hZ2VibG9jayA9ICQoXCJib2R5XCIpLmZpbmQoXCJpbWcuYXBwbHktaW1hZ2UtbG9hZFwiKTsgIC8vIGp1c3QgdGFyZ2V0IGltZz9cbiAgIFxuICAgICAgJHRoaXNpbWFnZWJsb2NrLmVhY2goZnVuY3Rpb24oKSB7ICBcbiAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiZWFjaCBpbWFnZT8gYmxvY2tcIik7XG4gICAgICAgIFxuICAgICAgICAgIHZhciAkdGhpc2ltYWdlID0gJCh0aGlzKTtcbiAgXG4gICAgICAgICAgICAgICR0aGlzaW1hZ2UuaW1hZ2VzTG9hZGVkKCB7XG4gICAgICAgICAgICAgICAgLy8gb3B0aW9ucy4uLlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW1hZ2VzIGhhdmUgbG9hZGVkXCIpO1xuICAgICAgICAgICAgICAgICAgdmFyIG9sZFNyYyA9ICR0aGlzaW1hZ2UuYXR0cignc3JjJyksXG4gICAgICAgICAgICAgICAgICAgICAgbmV3U3JjID0gJHRoaXNpbWFnZS5hdHRyKCdkYXRhLXNyYycpO1xuICAgICAgICAgICAgICAgICAgICAkdGhpc2ltYWdlLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICAgICAgICAgICR0aGlzaW1hZ2UuYWRkQ2xhc3MoXCJsb2FkZWRcIik7IC8vIHBvc3NpYmx5IG5vdCBuZWVkXG4gIFxuICAgICAgICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgICAgICk7IC8vIFxuICBcbiAgICAgICAgfSk7Ly8gICR0aGlzaW1hZ2VibG9jay5lYWNoKGZ1bmN0aW9uKClcbiAgXG59Oy8vZnVuY3Rpb24gaW1hZ2VvcGFjaXR5KClcblxuZXhwb3J0IGZ1bmN0aW9uIGRldkdyaWQoKXtcblxuLy8gY29uc29sZS5sb2coXCJkZXYgZ3JpZFwiKTtcblxuICBpZiAoJCgnLmRldi1ncmlkJykubGVuZ3RoID4gMCkgXG4gIHtcbiAgICAgIFxuICAgIHZhciBpbnRyb0hlaWdodCA9ICQoJyNpbnRyby1hcmVhJykuaGVpZ2h0KCksXG4gICAgICAgIGRvY3VtZW50R3JpZEhlaWdodCA9ICQoJyNtYWluLndyYXBwZXInKS5oZWlnaHQoKSxcbiAgICAgICAgJGJhc2VsaW5lcyA9ICQoXCIuZGV2LWJhc2UtbGluZXNcIik7XG4gICAgICAgIHB4bGluZWhlaWdodCA9ICcxMCcsLy9weFxuICAgICAgICB2d2xpbmVoZWlnaHQgPSAnMXZ3JywvL3Z3XG4gICAgICAgIGJhc2VsaW5lY291bnQgPSAgZG9jdW1lbnRHcmlkSGVpZ2h0IC8gcHhsaW5laGVpZ2h0O1xuICAgICAgICAkYmFzZWxpbmVzLmNzcyhcImhlaWdodFwiLGRvY3VtZW50R3JpZEhlaWdodCk7Ly8gc2V0IGhlaWdodCBvZiB0aGUgYmFzZWxpbmUgYXJlYSBhcyBkb2N1bWVudEdyaWRIZWlnaHRcblxuICAgICAgICAkKCcuZGV2LWJhc2UtbGluZXMgLmJhc2UtbGluZScpLnJlbW92ZSgpOyAvLyByZW1vdmUgZXhpc3RpbmcgaXRlbShzKTtcblxuICAvKiB0ZW1wIHJlbW92ZWRcbiAgICAgICAgZm9yICh2YXIgaT0wOyBpPGJhc2VsaW5lY291bnQ7IGkrKyl7XG4gICAgICAgICAgICAkKCcuZGV2LWJhc2UtbGluZXMnKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJiYXNlLWxpbmVcIj48L2Rpdj4nKTtcbiAgICAgICAgfTtcbiAgKi8gICAgIFxuXG4gICAgICAkKCcuZGV2LWdyaWQtdG9nZ2xlJykuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgIC8vY29uc29sZS5sb2coXCJjbGlja1wiKSA7ICAgICAgIFxuICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdkZXYtZ3JpZC1vbicpKSB7XG4gICAgICAgICAgLy8gdHVybiBncmlkIG9mZjpcblxuICAgICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnZGV2LWdyaWQtb24nKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHR1cm4gZ3JpZCBvbjpcbiAgICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ2Rldi1ncmlkLW9uJyk7XG5cbiAgICAgICAgfS8vIGlmIGdyaWQgb25cblxuICAgICAgfSk7IC8vIGNsaWNrXG5cbiAgICAvKlxuICAuZGV2LWdyaWRcbiAgKi9cbiAgfVxuXG4vKiBkZWxldCB0aGlzIEkgIHJlY2tvbiAtIG9yIG1heWJlIGludGVncmF0ZSB0ZWggcmVzaXplIHRvIG1ha2UgdGhpbmdzIHVwYXRlIGFjY29yZGluZ2x5ICovXG4vKlxuICB2YXIgJHRvZ2dsZSA9ICQoXCIuZGV2LXRvZ2dsZVwiKSwgXG4gICRjbGFzc3RhcmdldCA9ICQoJ2JvZHknKTsgXG5cbiAgJHRvZ2dsZS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICBpZiAoJGNsYXNzdGFyZ2V0Lmhhc0NsYXNzKCdkZXYtb24nKSl7XG4gICAgICAgICAgXG4gICAgICAgICRjbGFzc3RhcmdldC5yZW1vdmVDbGFzcygnZGV2LW9uJyk7XG5cbiAgICAgIH0gZWxzZXtcblxuICAgICAgICAkY2xhc3N0YXJnZXQuYWRkQ2xhc3MoJ2Rldi1vbicpO1xuXG4gICAgICB9OyAvLyBpZiAkKCdib2R5JykuaGFzQ2xhc3MoJ2Rldi1vbicpXG5cblxuICB9KTsgLy8gY2xpY2sgICAgICBcblxuXG4gIHZhciBydGltZWRldjtcbiAgdmFyIHRpbWVvdXRkZXYgPSBmYWxzZTtcbiAgdmFyIGRlbHRhZGV2ID0gMjAwO1xuICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgcnRpbWVkZXYgPSBuZXcgRGF0ZSgpO1xuICAgICAgaWYgKHRpbWVvdXRkZXYgPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGltZW91dGRldiA9IHRydWU7XG4gICAgICAgICAgc2V0VGltZW91dChyZXNpemVlbmRkZXYsIGRlbHRhZGV2KTtcbiAgICAgIH1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVzaXplZW5kZGV2KCkge1xuICAgIFxuICAgICAgaWYgKG5ldyBEYXRlKCkgLSBydGltZWRldiA8IGRlbHRhZGV2KSB7XG4gICAgICAgICAgc2V0VGltZW91dChyZXNpemVlbmRkZXYsIGRlbHRhZGV2KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGltZW91dGRldiA9IGZhbHNlO1xuICAgICAgICB2YXIgd2luZG93aGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICAgLy9jb25zb2xlLmxvZyhcInRoaXMgd29ya2luZyBkZXY/XCIpXG4gICAgICAgICAgb3JpZW50YXRpb24oKTsgLy92ZXJ0aWNhbCBvciBob3Jpem9udGFsXG5cbiAgICAgIH0gICAvL2Vsc2UgICAgXG5cbiAgIH07Ly9yZXNpemVlbmQgZnVjbnRpb25cbiovXG5cbn0vL2V4cG9ydCBmdW5jdGlvbiBkZXZncmlkKClcblxuZXhwb3J0IGZ1bmN0aW9uIHByZXZpZXdTaXRlKCl7XG5cbiAgLy8gcHJldmlldyBzaXRlIC0gaWYgY29va2llcyBkaWFibGVzIG9yIG5vdCBvblxuICAgIC8vIGNvbnNvbGUubG9nKFwicHJldmlld3NpdGUgZnVuY3Rpb25cIik7XG5cbiAgICAgICQoXCJib2R5XCIpLmF0dHJjaGFuZ2Uoe1xuICAgICAgICB0cmFja1ZhbHVlczogdHJ1ZSwgLy8gc2V0IHRvIHRydWUgc28gdGhhdCB0aGUgZXZlbnQgb2JqZWN0IGlzIHVwZGF0ZWQgd2l0aCBvbGQgJiBuZXcgdmFsdWVzXG4gICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihldm50KSB7XG4gICAgICAgICAgICBpZihldm50LmF0dHJpYnV0ZU5hbWUgPT0gXCJjbGFzc1wiKSB7IC8vIHdoaWNoIGF0dHJpYnV0ZSB5b3Ugd2FudCB0byB3YXRjaCBmb3IgY2hhbmdlc1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgJG5vYnV0dG9uID0gJChcIiNjbi1yZWZ1c2UtY29va2llXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHllc2J1dHRvbiA9ICQoXCIjY24tYWNjZXB0LWNvb2tpZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb3RidXR0b24gPSAkKFwiLmNuLXJldm9rZS1jb29raWVcIilcblxuXG4gICAgICAgICAgICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdjb29raWVzLWFjY2VwdGVkJykpe1xuICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRub2J1dHRvbi5ob3ZlcihmdW5jdGlvbigpeyAvLyB3YXMgI2NuLWFjY2VwdC1jb29raWUgLyNjb29raWUtbm90aWNlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInByZXZpZXctc2l0ZSBnLXNjYWxlXCIpOyAgLy9BZGQgdGhlIGFjdGl2ZSBjbGFzcyB0byB0aGUgYXJlYSBpcyBob3ZlcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInByZXZpZXctc2l0ZSBnLXNjYWxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICR5ZXNidXR0b24uaG92ZXIoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coXCJoYXMgY2xhc3MgY29va2llcy1hY2NlcHRlZCBcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInByZXZpZXctc2l0ZVwiKTsgIC8vQWRkIHRoZSBhY3RpdmUgY2xhc3MgdG8gdGhlIGFyZWEgaXMgaG92ZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJwcmV2aWV3LXNpdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ2Nvb2tpZXMtcmVmdXNlZCcpKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJG5vYnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInByZXZpZXctc2l0ZSBnLXNjYWxlXCIpOyAgLy9BZGQgdGhlIGFjdGl2ZSBjbGFzcyB0byB0aGUgYXJlYSBpcyBob3ZlcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInByZXZpZXctc2l0ZSBnLXNjYWxlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICR5ZXNidXR0b24uaG92ZXIoZnVuY3Rpb24oKXsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhcImhhcyBjbGFzcyBjb29raWVzLXJlZnVzZWQgXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJwcmV2aWV3LXNpdGVcIik7ICAvL0FkZCB0aGUgYWN0aXZlIGNsYXNzIHRvIHRoZSBhcmVhIGlzIGhvdmVyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwicHJldmlldy1zaXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZpZXcgb24gdGhlIGRvdDpcblxuICAgICAgICAgICAgICAgICAgICAgICAkZG90YnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7IFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJwcmV2aWV3LXNpdGVcIik7ICAvL0FkZCB0aGUgYWN0aXZlIGNsYXNzIHRvIHRoZSBhcmVhIGlzIGhvdmVyZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwicHJldmlldy1zaXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdjb29raWVzLW5vdC1zZXQnKSl7XG4gICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgJHllc2J1dHRvbi5ob3ZlcihmdW5jdGlvbigpeyAvLyB3YXMgI2NuLWFjY2VwdC1jb29raWUgLyNjb29raWUtbm90aWNlXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInByZXZpZXctc2l0ZVwiKTsgIC8vQWRkIHRoZSBhY3RpdmUgY2xhc3MgdG8gdGhlIGFyZWEgaXMgaG92ZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJwcmV2aWV3LXNpdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgJG5vYnV0dG9uLmhvdmVyKGZ1bmN0aW9uKCl7IC8vIHdhcyAjY24tYWNjZXB0LWNvb2tpZSAvI2Nvb2tpZS1ub3RpY2VcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInByZXZpZXctc2l0ZSBnLXNjYWxlXCIpOyAgLy9BZGQgdGhlIGFjdGl2ZSBjbGFzcyB0byB0aGUgYXJlYSBpcyBob3ZlcmVkXG4gICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwicHJldmlldy1zaXRlIGctc2NhbGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIH0vLz09IFwiY2xhc3NcIlxuXG4gICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgICAgICBcbn0vL3ByZXZpZXdTaXRlKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBtZW51UG9zaXRpb25lcigpe1xuIGNvbnNvbGUubG9nKFwibWVudXBvc2l0aW9uZXJcIik7XG5cbnZhciAkYm9keSA9ICQoJ2JvZHknKSxcbiAgICAkcG9zaXRpb25lciA9ICQoXCIjcG9zaXRpb25lclwiKSxcbiAgICAkbWVudSA9ICQoXCIjbWVudS1oZWFkZXItbmF2aWdhdGlvblwiKSxcbiAgICAkbWVudWl0ZW1zID0gJG1lbnUuY2hpbGRyZW4oKSxcbiAgICBudW1iZXJvZm1lbnVpdGVtcyA9ICRtZW51aXRlbXMubGVuZ3RoLFxuICAgICRhY3RpdmVtZW51aXRlbSA9ICRtZW51LmNoaWxkcmVuKCkuZmlsdGVyKFwiLmN1cnJlbnQtbWVudS1pdGVtXCIpLFxuICAgIHBvc2l0aW9uZXJ3aWR0aCA9ICgxMDAvbnVtYmVyb2ZtZW51aXRlbXMpO1xuICAgIFxuICAgICRtZW51aXRlbXMuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBudW1iZXIgPSAkKHRoaXMpLmluZGV4KCkgKzE7XG4gICAgLy8gJCh0aGlzKS5wcmVwZW5kKFwiPHNwYW4+XCIgKyAgKyBcIjwvc3Bhbj5cIik7XG4gICAgICAkKHRoaXMpLmF0dHIoIFwibWVudS1udW1iZXJcIiwgbnVtYmVyKTtcblxuICAgIH0pO1xuXG4gICAgaWYgKCRib2R5Lmhhc0NsYXNzKCdob21lJykpe1xuXG4gICAgICBjb25zb2xlLmxvZyhcImlzIGJvZHlcIik7XG4gIFxuICAgIH0gZWxzZSBpZiAoJGJvZHkuaGFzQ2xhc3MoJ3NpbmdsZS1uZXdzJykpe1xuXG4gICAgICBjb25zb2xlLmxvZyhcImlzIHNpbmdsZSBuZXdzIC0gYXBwbHkgYWN0aXZlIHRvIHRoZSBwYXJlbnRcIik7XG4gICAgdmFyICRhY3RpdmVtZW51aXRlbSA9ICRtZW51LmNoaWxkcmVuKCkuZmlsdGVyKFwiLm5ld3MtbGlua1wiKSxcbiAgICBcbiAgICBcbiAgICAgIGFjdGl2ZW1lbnVpdGVtbnVtYmVyID0gJGFjdGl2ZW1lbnVpdGVtLmF0dHIoIFwibWVudS1udW1iZXJcIik7XG4gICAgICBhcHBseW1hcmdpbmxlZnQgPSAoKGFjdGl2ZW1lbnVpdGVtbnVtYmVyICogcG9zaXRpb25lcndpZHRoKSAtIHBvc2l0aW9uZXJ3aWR0aCkrXCIlXCI7XG4gIFxuICAgICAgLy9jb25zb2xlLmxvZyhcImFjdGl2ZW1lbnVpdGVtbnVtYmVyXCIgK2FjdGl2ZW1lbnVpdGVtbnVtYmVyK1wiXCIpO1xuICAgICAgJHBvc2l0aW9uZXIuY3NzKFwid2lkdGhcIixwb3NpdGlvbmVyd2lkdGgrXCIlXCIpO1xuICAgICAgJHBvc2l0aW9uZXIuY3NzKFwibWFyZ2luLWxlZnRcIiwgYXBwbHltYXJnaW5sZWZ0K1wiJVwiKTtcbiAgICAgICRwb3NpdGlvbmVyLmFuaW1hdGUoe1xuICAgICAgICAgIG1hcmdpbkxlZnQ6IGFwcGx5bWFyZ2lubGVmdFxuICAgICAgfSwgNTAwKTtcblxuICAgIH0gZWxzZSB7XG5cbiAgICAvLyBkZWZhdWx0IHJ1bGVzOlxuXG4gICAgICBhY3RpdmVtZW51aXRlbW51bWJlciA9ICRhY3RpdmVtZW51aXRlbS5hdHRyKCBcIm1lbnUtbnVtYmVyXCIpO1xuICAgICAgYXBwbHltYXJnaW5sZWZ0ID0gKChhY3RpdmVtZW51aXRlbW51bWJlciAqIHBvc2l0aW9uZXJ3aWR0aCkgLSBwb3NpdGlvbmVyd2lkdGgpK1wiJVwiO1xuICBcbiAgICAgIC8vY29uc29sZS5sb2coXCJhY3RpdmVtZW51aXRlbW51bWJlclwiICthY3RpdmVtZW51aXRlbW51bWJlcitcIlwiKTtcbiAgICAgICRwb3NpdGlvbmVyLmNzcyhcIndpZHRoXCIscG9zaXRpb25lcndpZHRoK1wiJVwiKTtcbiAgICAgICRwb3NpdGlvbmVyLmNzcyhcIm1hcmdpbi1sZWZ0XCIsIGFwcGx5bWFyZ2lubGVmdCtcIiVcIik7XG4gICAgICAkcG9zaXRpb25lci5hbmltYXRlKHtcbiAgICAgICAgICBtYXJnaW5MZWZ0OiBhcHBseW1hcmdpbmxlZnRcbiAgICAgIH0sIDUwMCk7XG4gICAgICBcbiAgICB9Ly8gaWYgY2xhc3NcblxuIFxuXG59Ly9tZW51cG9zaXRpb25lcigpXG5cbmV4cG9ydCBmdW5jdGlvbiBtZW51Q2xhc3NlcyhkYXRhLCB0YXJnZXQpIHtcblxuICAkKCcubWVudS1pdGVtLicgKyB0YXJnZXQpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICQodGhpcykucmVtb3ZlQ2xhc3ModGFyZ2V0KTtcbiAgfSk7XG5cbiAgJChgLm1lbnUtaXRlbSA+IGFbaHJlZiQ9XCIkeyBkYXRhLm5leHQudXJsLnBhdGggfVwiXWApLmNsb3Nlc3QoJy5tZW51LWl0ZW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAkKHRoaXMpLmFkZENsYXNzKHRhcmdldCk7XG4gIH0pO1xuXG59IC8vbWVudUNsYXNzZXModGFyZ2V0KVxuXG5leHBvcnQgZnVuY3Rpb24gY29udGVudEhlaWdodCgpIHtcblxuICB2YXIgIFxuICAkbWFpbmNvbnRlbnQgPSAkKFwiI21haW5cIiksXG4gICRjb250YWluZXJjb250ZW50ID0gJChcIi5ncmlkLWNvbnRhaW5lci5tYWluXCIpLFxuICAkZm9vdGVyY29udGVudCA9ICQoXCIjZm9vdGVyLW5hdi1hcmVhXCIpO1xuICAkY29udGFpbmVyY29udGVudC5jc3MoXCJtaW4taGVpZ2h0XCIsXCJpbml0aWFsXCIpOy8vIHRoaXMgdG8gcmVzZXQgcHJldmlvdXMgdmFsdWVcblxuICB2YXJcbiAgbWFpbmNvbnRlbnRoZWlnaHQgPSAkbWFpbmNvbnRlbnQuaGVpZ2h0KCksXG4gIGNvbnRhaW5lcmNvbnRlbnRoZWlnaHQgPSAkY29udGFpbmVyY29udGVudC5oZWlnaHQoKSxcbiAgZm9vdGVyY29udGVudGhlaWdodCA9ICRmb290ZXJjb250ZW50Lm91dGVySGVpZ2h0KCksXG4gIHZpZXdwb3J0aGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpLFxuICBtaW5pbXVtY29udGFpbmVyaGVpZ2h0ID0gKG1haW5jb250ZW50aGVpZ2h0IC0gZm9vdGVyY29udGVudGhlaWdodCk7ICBcbiAgJGNvbnRhaW5lcmNvbnRlbnQuY3NzKFwibWluLWhlaWdodFwiLCBtaW5pbXVtY29udGFpbmVyaGVpZ2h0ICk7XG5cbn0vL2NvbnRlbnRoZWlnaHQoKTtcblxuIC8qIGJsb2NrcyBtb3ZlZFxuXG4gZXhwb3J0IGZ1bmN0aW9uIGltYWdlcygkYmxvY2spe1xuICAvLyBjb25zb2xlLmxvZyhcImltYWdlcyBsb2FkZWQgYXBwbGllZCBoZXJlXCIpXG4gIFxuICAgdmFyICR0aGlzaW1hZ2VibG9jayA9ICRibG9jay5maW5kKFwiaW1nXCIpOyAgLy8ganVzdCB0YXJnZXQgaW1nP1xuXG4gICAkdGhpc2ltYWdlYmxvY2suZWFjaChmdW5jdGlvbigpIHsgIFxuXG4gICAgICAvLyBjb25zb2xlLmxvZyhcImVhY2ggaW1hZ2U/KTtcbiAgICAgIFxuICAgICAgIHZhciAkdGhpc2ltYWdlID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgJHRoaXNpbWFnZS5pbWFnZXNMb2FkZWQoIHtcbiAgICAgICAgICAgICAvLyBvcHRpb25zLi4uXG4gICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJpbWFnZXMgaGF2ZSBsb2FkZWRcIik7XG4gICAgICAgICAgICAgICB2YXIgb2xkU3JjID0gJHRoaXNpbWFnZS5hdHRyKCdzcmMnKSxcbiAgICAgICAgICAgICAgICAgICBuZXdTcmMgPSAkdGhpc2ltYWdlLmF0dHIoJ2RhdGEtc3JjJyk7XG4gICAgICAgICAgICAgICAgICAkdGhpc2ltYWdlLmF0dHIoJ3NyYycsIG5ld1NyYyk7XG4gICAgICAgICAgICAgICAgICAkdGhpc2ltYWdlLmFkZENsYXNzKFwibG9hZGVkXCIpOyAvLyBwb3NzaWJseSBub3QgbmVlZFxuXG4gICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICk7IC8vIFxuXG4gICAgIH0pOy8vICAkdGhpc2ltYWdlYmxvY2suZWFjaChmdW5jdGlvbigpXG5cbiB9Oy8vZnVuY3Rpb24gaW1hZ2VzKCRibG9jaylcblxuXG5leHBvcnQgZnVuY3Rpb24gc2xpZGVzaG93KCRibG9jayl7IC8vIHJldmlldyB0aGlzIGZ1bmN0aW9uOyBkbyBJIG5lZWQgaXQ/XG5cbiAgXG4gIC8vJC5nZXRTY3JpcHQoIFwiXCIrdGhlbWV1cmwrJy9hc3NldHMvanMvc2l0ZS5qcycsIGZ1bmN0aW9uKCBkYXRhLCB0ZXh0U3RhdHVzLCBqcXhociApIHtcbiAgICQuZ2V0U2NyaXB0KCBcImh0dHBzOi8vbnBtY2RuLmNvbS9mbGlja2l0eUAyL2Rpc3QvZmxpY2tpdHkucGtnZC5qc1wiLCBmdW5jdGlvbiggZGF0YSwgdGV4dFN0YXR1cywganF4aHIgKSB7XG5cbiAgLy9jb25zb2xlLmxvZyhcIiBoZWxsbyBmdW5jdGlvbiBzbGlkZXNob3coJGJsb2NrKVwiKVxudmFyICR0aGlzZ2FsbGVyeSA9ICRibG9jay5maW5kKFwiLnNsaWRlc2hvdy1jYXJvdXNlbFwiKTsgIFxuXG4gICAgICR0aGlzZ2FsbGVyeS5mbGlja2l0eSh7XG4gICAgICAgICAgaW1hZ2VzTG9hZGVkOiB0cnVlLCBcbiAgICAgICAgICBzZXRHYWxsZXJ5U2l6ZTogZmFsc2UsIC8vaWYgeW91IHByZWZlciB0byBzaXplIHRoZSBjYXJvdXNlbCB3aXRoIENTUywgcmF0aGVyIHRoYW4gdXNpbmcgdGhlIHNpemUgb2YgY2VsbHMuXG4gICAgIC8vIGRlZmF1bHQgY2VsbEFsaWduOiAnY2VudGVyJ1xuICAgICAgICAgIHBlcmNlbnRQb3NpdGlvbjogZmFsc2UsIFxuICAgICAgICAgIGZyZWVTY3JvbGw6IGZhbHNlLCBcbiAgICAgICAgICB3cmFwQXJvdW5kOiB0cnVlLCBcbiAgICAgICAgICBhcnJvd1NoYXBlOiB7IFxuICAgICAgICAgICAgICB4MDogMjAsXG4gICAgICAgICAgICAgIHgxOiA1MCwgeTE6IDUwLFxuICAgICAgICAgICAgICB4MjogNjAsIHkyOiA1MCxcbiAgICAgICAgICAgICAgeDM6IDMwXG4gICAgICAgICAgICB9XG4gICAgICAgICAvLyBhcnJvd1NoYXBlOiAnODIuOTMxMjc5MyAyNC40NTAxNjI2IDg2Ljk2NTM5MTcgMjcuNTUwNDUyOCA0OS43NTc2MTQ2IDc1Ljk2NTM5MTcgMTIuNTQ5ODM3NCAyNy41NTA0NTI4IDE2LjU4Mzk0OTggMjQuNDUwMTYyNiA0OS43NTc2MTQ2IDY3LjYxNTg5NScsXG5cbiAgICAgICB9KTtcblxuICAgIH0pOy8vZ2V0IGZsaWNraXR5IHBrZyBzY3JpcHRcblxufTsgLy8gZnVuY3Rpb24gZ2FsbGVyeSgkYmxvY2spXG5cbmV4cG9ydCBmdW5jdGlvbiBtYXAoJGJsb2NrKXsgLy8gcmV2aWV3IHRoaXMgZnVuY3Rpb247IGRvIEkgbmVlZCBpdD9cblxuICAvL2NvbnNvbGUubG9nKFwiZnVuY3Rpb24gbWFwKCRibG9jaykgLSBPTkVcIilcblxuICAgICAgICBpZiAoJCgnI2ctbWFwJykubGVuZ3RoID4gMCl7IC8vaWYgZWxlbWVudCBleGlzdHMgLyBtYXAgdHVybmVkIG9uXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiI2ctbWFwLmxlbmd0aCA+IDBcIilcblxuICAgICAgICAgICAgLy92YXIgZ01hcHNMb2FkZWQgPSBmYWxzZTsgLy8gbWF5YmUgSSBuZWVkIHRvIHB1dCB0aGlzIHZhcmlhYmxlIGVsc2Ugd2hlcmU/XG4gICAgICAgICAgICB2YXIgaW5kZXg9MDtcblxuICAgICAgICAgICAgd2luZG93LmdNYXBzQ2FsbGJhY2sgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGdNYXBzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykudHJpZ2dlcignZ01hcHNMb2FkZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LmxvYWRHb29nbGVNYXBzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImdNYXBzTG9hZGVkID1cIiArIGdNYXBzTG9hZGVkICsgXCJcIik7XG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL0kgdGhpbmsgdGhpcyBpcyB0aGUgb25lIEkgbmVlZCB0byBsb2FkIC0gc28gZmluZCB0aGUgb3RoZXIgb25lICYgZGVsZXRlIGl0XG4gICAgICAgICAgICAgICAgaWYoZ01hcHNMb2FkZWQpIHJldHVybiB3aW5kb3cuZ01hcHNDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIHZhciBzY3JpcHRfdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgICAgICAgICAgc2NyaXB0X3RhZy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJ0ZXh0L2phdmFzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgc2NyaXB0X3RhZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIixcImh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9rZXk9QUl6YVN5QlVYWXJ5RTJrckNRN25JdlZjWGNGeldFUFkwY0VjWGJFJmNhbGxiYWNrPWdNYXBzQ2FsbGJhY2tcIik7XG4gICAgICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmFwcGVuZENoaWxkKHNjcmlwdF90YWcpO1xuICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplKCl7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB7bGF0OiA1MS41MTk4MDM4LCBsbmc6IC0wLjEyMjgyMjg5OTk5OTk2MDF9LFxuICAgICAgICAgICAgICAgICAgICAgIHpvb206IDE1LFxuICAgICAgICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIG1hcFR5cGVDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICBvdmVydmlld01hcENvbnRyb2w6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGVzOiBbeyBcInN0eWxlcnNcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgXCJzYXR1cmF0aW9uXCI6IFwiLTkwXCIgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXSB9IF0sXG4gICAgICAgICAgICAgICAgfVxuIFxuICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZy1tYXAnKSxtYXBPcHRpb25zKTtcbiAgICAgICAgLy8gdmFyIGltYWdlID0gXCJcIit0aGVtZXVybCsnL2Fzc2V0cy9zdmcvdF9sb2dvX3N2Zy5zdmc/aT0nKyhpbmRleCsrKTtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBcIlwiK3RoZW1ldXJsKycvYXNzZXRzL3N2Zy9tYXBfbWFya2VyX3N2Z180MHB4LnN2Zz9pPScrKGluZGV4KyspO1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZU1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7bGF0OiA1MS41MTk4MDM4LCBsbmc6IC0wLjEyMjgyMjg5OTk5OTk2MDF9LFxuICAgICAgICAgICAgICAgIG1hcDogbWFwLFxuICAgICAgICAgICAgICAgIG9wdGltaXplZDpmYWxzZSxcbiAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJCh3aW5kb3cpLmJpbmQoJ2dNYXBzTG9hZGVkJywgaW5pdGlhbGl6ZSk7XG4gICAgICAgICAgICB3aW5kb3cubG9hZEdvb2dsZU1hcHMoKTtcblxuICAgICAgICB9IC8vIGlmICNnLW1hcFxuXG59IC8vIGZ1bmN0aW9uIGdhbGxlcnkoJGJsb2NrKVxuKi9cbi8vIGVuZCBtYXAgZnVudGlvblxuXG5leHBvcnQgZnVuY3Rpb24gY2xpY2tjb29raWVyZXZva2UoKSB7XG4gIC8vIHRyaWdnZXIgYSBjbGljayBvbiB0aGUgZGVmYXVsdCByZXZva2UgYnV0dG9uXG4gICQoJ2EudGgtY29va2llLXJldm9rZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQoJy5jbi1yZXZva2UtY29va2llJylbMF0uY2xpY2soKTsgLy8gdGhpcyBkb2VzXG4gICAgfSk7XG5cbn0vL2NsaWNrY29va2llcmV2b2tlXG5cbmV4cG9ydCBmdW5jdGlvbiB0b3BBbmltYXRpb24oKXtcbiAgLy8gY29uc29sZS5sb2coXCJmdW5jdGlvbiB0b3BBbmltYXRpb24oKVwiKTtcblxuXG4gIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgXG4gICAgLy8gY29uc29sZS5sb2coXCJoZWxsb1wiKTtcblxuICAgIC8vIGNvbnNvbGUubG9nKFwic2V0VGltZW91dChmdW5jdGlvbigpXCIpO1xuXG4gICAgICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGlvbi1maXgnKTsgLy9lbnN1cmUgcGVvcGxlIGNhbiBub3cgc2Nyb2xsXG5cbiAgICAgIGlmICgkKCdib2R5JykuZGF0YSgnbW92ZS10bycpKSB7IC8vIGlmIHdlIGhhdmUgdG8gc2Nyb2xsIHRvIGEgY2VydGFpbiBwb3NpdGlvblxuXG4gICAgICAgICAgICB2YXIgYWRkYXR0ciA9ICQoJ2JvZHknKS5kYXRhKCdtb3ZlLXRvJyk7XG5cbiAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKFxuICAgICAgICAgICAgICAgIHsgc2Nyb2xsVG9wOiAkKFwiI1wiK2FkZGF0dHIrXCJcIikub2Zmc2V0KCkudG9wICsgMSB9LFxuICAgICAgICAgICAgICAgICA2MDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAvLyBBbmltYXRpb24gY29tcGxldGUuXG4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0aGlzaXRlbSA9ICQod2luZG93KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgJHRoaXNpdGVtLm9uKCdzY3JvbGwuc3RhcnRpdGVtJywgZnVuY3Rpb24oKSB7IC8vIGJpbmQgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdpbmRvd1BvcyA9ICQodGhpcykuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFpblNjcm9sbCA9ICQoJyNtYWluJykub2Zmc2V0KCkudG9wLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxIZWlnaHQgPSB3aW5kb3dQb3MgLSBtYWluU2Nyb2xsO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxIZWlnaHQgPj0gMCApIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYm9keScpLmFkZENsYXNzKCdrZWVwLWludHJvIHNob3ctbmF2LWxvZ28nKTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzaXRlbS5vZmYoJ3Njcm9sbC5zdGFydGl0ZW0nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICB9Ly9pZiAoIHNjcm9sbEhlaWdodCA+PSAwICkgICAgXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgJCgnYm9keScpLnJlbW92ZUF0dHIoJ2RhdGEtbW92ZS10bycpOyAvLyByZW1vdmUgYXR0cmlidXRlXG5cbiAgICAgICAgICAgIH0pOyAvLyBhbmltYXRlXG4gICAgICAgIFxuICAgICAgfSBlbHNle1xuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYWJvdXQgdG8gYW5pbWF0ZT9cIilcblxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZShcbiAgICAgICAgICAgIHsgc2Nyb2xsVG9wOiAkKFwiI21haW5cIikub2Zmc2V0KCkudG9wICsgMCB9LFxuICAgICAgICAgICAgIDYwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBbmltYXRpb24gY29tcGxldGUuXG4gICAgICAgICAgICAgIHZhciAkdGhpc2l0ZW0gPSAkKHdpbmRvdyk7XG4gICAgICAgXG4gICAgICAgICAgICAgICR0aGlzaXRlbS5vbignc2Nyb2xsLnN0YXJ0aXRlbScsIGZ1bmN0aW9uKCkgeyAvLyBiaW5kIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93UG9zID0gJCh0aGlzKS5zY3JvbGxUb3AoKSxcbiAgICAgICAgICAgICAgICAgICBtYWluU2Nyb2xsID0gJCgnI21haW4nKS5vZmZzZXQoKS50b3AsIFxuICAgICAgICAgICAgICAgICAgIHNjcm9sbEhlaWdodCA9IHdpbmRvd1BvcyAtIG1haW5TY3JvbGw7XG4gICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCBzY3JvbGxIZWlnaHQgPj0gMCApIHtcbiAgICAgICBcbiAgICAgICAgICAgICAgICAgICQoJ2JvZHknKS5hZGRDbGFzcygna2VlcC1pbnRybyBzaG93LW5hdi1sb2dvJyk7IFxuICAgICAgICAgICAgICAgICAgJHRoaXNpdGVtLm9mZignc2Nyb2xsLnN0YXJ0aXRlbScpO1xuICAgICAgIFxuICAgICAgICAgICAgICAgIH0vL2lmICggc2Nyb2xsSGVpZ2h0ID49IDAgKSAgICBcbiAgICAgICAgICAgXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgfSk7IC8vIGFuaW1hdGVcblxuICAgICAgfSAvLyBpZiBoYXMgbW92ZSB0byBkYXRhXG5cbiAgfSwgMjAwKTtcblxufTsvLyB0b3BhbmltYXRpb24oKVxuXG5leHBvcnQgZnVuY3Rpb24gZmFkZSgpIHtcbiAgLy8gY29uc29sZS5sb2coXCJmdW5jdGlvbiBmYWRlKClcIik7XG5cbiAgdmFyIGFuaW1hdGlvbl9oZWlnaHQgPSAkKHdpbmRvdykuaW5uZXJIZWlnaHQoKSAqIDAuMjU7IC8vIHdhcyAwLjI1XG4gIHZhciByYXRpbyA9IE1hdGgucm91bmQoICgxIC8gYW5pbWF0aW9uX2hlaWdodCkgKiAxMDAwMCApIC8gMTAwMDA7IC8vcmF0aW9cblxuICAgICAkKCcudGgtYmxvY2snKS5lYWNoKGZ1bmN0aW9uKCkgeyAvLyBtaWdodCBuZWVkIHRvIHJldmlldyB0aGlzXG5cbiAgICAgICAgICB2YXIgb2JqZWN0VG9wID0gJCh0aGlzKS5vZmZzZXQoKS50b3A7XG4gICAgICAgICAgdmFyIHdpbmRvd0JvdHRvbSA9ICQod2luZG93KS5zY3JvbGxUb3AoKSArICgkKHdpbmRvdykuaW5uZXJIZWlnaHQoKSAqMC44KTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIG9iamVjdFRvcCA8IHdpbmRvd0JvdHRvbSApIHtcblxuICAgICAgICAgICAgICBpZiAoIG9iamVjdFRvcCA8IHdpbmRvd0JvdHRvbSAtIGFuaW1hdGlvbl9oZWlnaHQgKSB7XG4gICAgICAgICAgICAgICAgIC8vICQodGhpcykuaHRtbCggJ2Z1bGx5IHZpc2libGUnICk7XG5cbiAgICAgICAgICAgICAgICAgICQodGhpcykuY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ29wYWNpdHkgMC4xcyBsaW5lYXInLFxuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJoZWxsbyBmYWRlIGludG8gMVwiKTtcblxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyAgICAkKHRoaXMpLmh0bWwoICdmYWRpbmcgaW4vb3V0JyApO1xuICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjI1cyBsaW5lYXInLFxuICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICh3aW5kb3dCb3R0b20gLSBvYmplY3RUb3ApICogcmF0aW9cbiAgICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImVsc2Ugc28gbm90IGZhZGluZyBpbnRvIDFcIik7XG5cbiAgICAgICAgICAgICAvLyAkKHRoaXMpLmh0bWwoICdub3QgdmlzaWJsZScgKTtcbiAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoICdvcGFjaXR5JywgMC4xICk7XG4gICAgICAgICAgfVxuXG4gICAgICB9KTsvLyAgJCgnLnRoLWJsb2NrJykuZWFjaChmdW5jdGlvbigpXG5cblxuICAgICAgaWYoJCh3aW5kb3cpLnNjcm9sbFRvcCgpICsgJCh3aW5kb3cpLmhlaWdodCgpID09ICQoZG9jdW1lbnQpLmhlaWdodCgpKSB7XG4gICAgICAgIC8vIGlmIGF0IHRoZSBib3R0b20gb2YgdGggcGFnZTogZW5zdXJlIGV2ZXJ5dGhpbmcgdmlzYmlsZVxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiYm90dG9tIG9mIHBhZ2VcIilcbiAgICAgICAgJCgnLnRoLWJsb2NrJykuY3NzKCB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjFzIGxpbmVhcicsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0gKTtcblxuICAgICAgfS8vXG5cbn0gLy8gZnVuY3Rpb24gZmFkZSgpXG5cbmV4cG9ydCBmdW5jdGlvbiBkZXN0cm95aGVhZHJvb20oKXtcbiAgLy8gdG8gZGVzdHJveVxuIC8vIGNvbnNvbGUubG9nKFwiZGVzdHJveWhlYWRyb29tXCIpXG5cbiAgJChcIiNoZWFkZXItbmF2LWFyZWFcIikuaGVhZHJvb20oXCJkZXN0cm95XCIpO1xuICAgcmV0dXJuO1xuXG59Ly8gZGVzdHJveWhlYWRyb29tKClcblxuZXhwb3J0IGZ1bmN0aW9uIGZyZWV6ZWhlYWRyb29tKCl7XG4gIC8vIHRvIGZyZWV6ZVxuICAgLy9jb25zb2xlLmxvZyhcImZyZWV6ZWhlYWRyb29tXCIpO1xuXG4gICQoXCIjaGVhZGVyLW5hdi1hcmVhXCIpLmhlYWRyb29tKFwiZnJlZXplXCIpO1xuICAgcmV0dXJuO1xuXG59Ly8gZnJlZXplaGVhZHJvb20oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHVuZnJlZXplaGVhZHJvb20oKXtcbiAgLy8gdG8gdW5mcmVlemVcbiAvLyBjb25zb2xlLmxvZyhcImZyZWV6ZWhlYWRyb29tXCIpO1xuXG4gICQoXCIjaGVhZGVyLW5hdi1hcmVhXCIpLmhlYWRyb29tKFwidW5mcmVlemVcIik7XG4gICByZXR1cm47XG5cbn0vLyB1bmZyZWV6ZWhlYWRyb29tKCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JjZWhlYWRyb29tcGluKCl7XG5cbiAvLyBjb25zb2xlLmxvZygnZm9yY2VoZWFkcm9vbXBpbigpOycpO1xuXG5cbiAgIGlmICgkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5oYXNDbGFzcyhcInVucGlubmVkXCIpKXtcbiAgICBcbiAgICAgICQoXCIjaGVhZGVyLW5hdi1hcmVhXCIpLnJlbW92ZUNsYXNzKFwidW5waW5uZWRcIik7XG4gICAgICAkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5hZGRDbGFzcyhcInBpbm5lZFwiKTtcblxuICAgICAgLy9jb25zb2xlLmxvZyhcInVucGlubmVkIC0gbm93IHBpbm5lZFwiKTtcblxuICAgfVxuICAgcmV0dXJuO1xuXG59Ly9mb3JjZWhlYWRyb29tXG5cbmV4cG9ydCBmdW5jdGlvbiB1bmZvcmNlaGVhZHJvb21waW4oKXtcblxuICAvLyBjb25zb2xlLmxvZygndW5mb3JjZWhlYWRyb29tcGluKCk7Jyk7XG5cbiAgIGlmICgkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5oYXNDbGFzcyhcInBpbm5lZFwiKSl7XG4gICAgXG4gICAgICAkKFwiI2hlYWRlci1uYXYtYXJlYVwiKS5yZW1vdmVDbGFzcyhcInBpbm5lZFwiKTtcbiAgICAgICQoXCIjaGVhZGVyLW5hdi1hcmVhXCIpLmFkZENsYXNzKFwidW5waW5uZWRcIik7XG5cbiAgICAgIC8vY29uc29sZS5sb2coXCJ1bnBpbm5lZCAtIG5vdyBwaW5uZWRcIik7XG5cbiAgIH1cbiAgIHJldHVybjtcblxufS8vZm9yY2VoZWFkcm9vbVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29tbWVudEJ1YmJsZSgpe1xuICAvLyBjb25zb2xlLmxvZyhcIiBmdW5jdGlvbiByZW1vdmVDb21tZW50QnViYmxlKClcIilcblxuICBpZiAoJCgnI3dwZC1idWJibGUtd3JhcHBlcicpLmxlbmd0aCl7XG4gIC8vIGNvbnNvbGUubG9nKFwiI3dwZC1idWJibGUtd3JhcHBlciBleGlzdHNcIilcbiAgJCgnI3dwZC1idWJibGUtd3JhcHBlcicpLnJlbW92ZSgpOy8vIHJlbW92ZSBpdFxuICB9IC8vaWYoJCgnI3dwZC1idWJibGUtd3JhcHBlcicpLmxlbmd0aClcblxufTsvL3JlbW92ZUNvbW1lbnRCdWJibGUoKVxuICAgXG5leHBvcnQgZnVuY3Rpb24gaG92ZXJEaXYoJHRoaXNpdGVtKSB7XG5cbiBjb25zb2xlLmxvZyhcImhvdmVyRGl2KCR0aGlzaXRlbSlcIik7XG4gICAgICR0aGlzaXRlbSA9ICR0aGlzaXRlbTtcbiAvKiB0byBkb1xuXG4gc3RpbGwgaXNzdWUgd2l0aCBzY3JpcCBydW5uaW5nIHRvIG1hbnkgdGltZXNcblxuICovXG5cblxuICAgIHZhciBjaGVja2hvdmVyRGl2ID0gZnVuY3Rpb24gKCR0aGlzaXRlbSkge1xuXG4gICAgICB2YXIgaG92ZXJtb3VzZVggPSAoJHRoaXNpdGVtLndpZHRoKCkgLyAyKSwgLy93YXMgMCxcbiAgICAgICAgICBob3Zlcm1vdXNlWSA9ICgkdGhpc2l0ZW0uaGVpZ2h0KCkgLyAyKSwgLy93YXMgMCxcbiAgICAgICAgICBob3ZlcmxpbWl0WCA9ICR0aGlzaXRlbS53aWR0aCgpLCAvLyB3YXMgOTk5OSxcbiAgICAgICAgICBob3ZlcmxpbWl0WSA9ICR0aGlzaXRlbS5oZWlnaHQoKTsgLy8gd2FzIDk5OTk7XG5cbiAgICAgICAgICAkdGhpc2l0ZW0ub24oe1xuICAgICAgICAgICAgbW91c2Vtb3ZlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICB2YXIgaG92ZXJvZmZzZXQgPSAkdGhpc2l0ZW0ub2Zmc2V0KCk7XG4gICAgICAgICAgICAgIGhvdmVybW91c2VYID0gTWF0aC5taW4oZS5wYWdlWCAtIGhvdmVyb2Zmc2V0LmxlZnQsIGhvdmVybGltaXRYKTtcbiAgICAgICAgICAgICAgaG92ZXJtb3VzZVkgPSBNYXRoLm1pbihlLnBhZ2VZIC0gaG92ZXJvZmZzZXQudG9wLCBob3ZlcmxpbWl0WSk7XG4gICAgICAgICAgICAgIGlmIChob3Zlcm1vdXNlWCA8IDApIGhvdmVybW91c2VYID0gMDtcbiAgICAgICAgICAgICAgaWYgKGhvdmVybW91c2VZIDwgMCkgaG92ZXJtb3VzZVkgPSAwO1xuXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaG92ZXJEaXYoJHRoaXNpdGVtKVwiKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gY2FjaGUgdGhlIHNlbGVjdG9yXG4gICAgICAgIHZhciBob3ZlcmZvbGxvd2VyID0gJHRoaXNpdGVtLmZpbmQoJy5pbm5lci1mb2xsb3cnKSxcbiAgICAgICAgICAgIGhvdmVyeHAgPSAwLFxuICAgICAgICAgICAgaG92ZXJ5cCA9IDA7XG5cbiAgICAgICAgICAvLyBUT0RPIGVuc3VyZSB0aGlzIGlzbid0IGNvbnN0YWx5IHJ1bm5pbmc/XG5cbiAgICAgICAgICB2YXIgaG92ZXJsb29wID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gY2hhbmdlIDEyIHRvIGFsdGVyIGRhbXBpbmcgaGlnaGVyIGlzIHNsb3dlclxuICAgICAgICAgICAgaG92ZXJ4cCArPSAoaG92ZXJtb3VzZVggLSBob3ZlcnhwKSAvIDE7Ly93YXMgMTJcbiAgICAgICAgICAgIGhvdmVyeXAgKz0gKGhvdmVybW91c2VZIC0gaG92ZXJ5cCkgLyAxOy8vd2FzIDEyXG4gICAgICAgICAgICBob3ZlcmZvbGxvd2VyLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGhvdmVyeHAsXG4gICAgICAgICAgICAgIHRvcDogaG92ZXJ5cFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9LCAxMCk7IC8vIHdhcyAzMFxuICAgXG4gICAgfTsvLyBjaGVja2hvdmVyRGl2KCR0aGlzaXRlbSlcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIC8vIGNvbnNvbGUubG9nKFwicmVzaXppbmc/XCIpO1xuXG4gICAgICAgIHZhciAkdGhpc2l0ZW0gPSAkKCcuZGV2LWxheW91dC1ncmlkLXRvZ2dsZScpO1xuICAgICAgICBjaGVja2hvdmVyRGl2ID0gbnVsbDsgLy8ga2lsbHMgcHJldmlvdXMgZnVuY3Rpb25zXG5cbiAgICAgICAgLy8gcmVkZWNsYXJlIHRoZSBmdW5jdGlvbiwgdXNpbmcgc2FtZSB2YXIgbmFtZVxuXG4gICAgICAgIHZhciBjaGVja2hvdmVyRGl2ID0gZnVuY3Rpb24gKCR0aGlzaXRlbSkge1xuXG4gICAgICAgIHZhciBob3Zlcm1vdXNlWCA9ICgkdGhpc2l0ZW0ud2lkdGgoKSAvIDIpLCAvL3dhcyAwLFxuICAgICAgICAgIGhvdmVybW91c2VZID0gKCR0aGlzaXRlbS5oZWlnaHQoKSAvIDIpLCAvL3dhcyAwLFxuICAgICAgICAgIGhvdmVybGltaXRYID0gJHRoaXNpdGVtLndpZHRoKCksIC8vIHdhcyA5OTk5LFxuICAgICAgICAgIGhvdmVybGltaXRZID0gJHRoaXNpdGVtLmhlaWdodCgpOyAvLyB3YXMgOTk5OTtcblxuICAgICAgICAkdGhpc2l0ZW0ub24oe1xuICAgICAgICAgIG1vdXNlbW92ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBob3Zlcm9mZnNldCA9ICR0aGlzaXRlbS5vZmZzZXQoKTtcbiAgICAgICAgICAgIGhvdmVybW91c2VYID0gTWF0aC5taW4oZS5wYWdlWCAtIGhvdmVyb2Zmc2V0LmxlZnQsIGhvdmVybGltaXRYKTtcbiAgICAgICAgICAgIGhvdmVybW91c2VZID0gTWF0aC5taW4oZS5wYWdlWSAtIGhvdmVyb2Zmc2V0LnRvcCwgaG92ZXJsaW1pdFkpO1xuICAgICAgICAgICAgaWYgKGhvdmVybW91c2VYIDwgMCkgaG92ZXJtb3VzZVggPSAwO1xuICAgICAgICAgICAgaWYgKGhvdmVybW91c2VZIDwgMCkgaG92ZXJtb3VzZVkgPSAwO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImhvdmVyRGl2KCR0aGlzaXRlbSlcIik7XG5cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGNhY2hlIHRoZSBzZWxlY3RvclxuICAgICAgICB2YXIgaG92ZXJmb2xsb3dlciA9ICR0aGlzaXRlbS5maW5kKCcuaW5uZXItZm9sbG93JyksXG4gICAgICAgICAgaG92ZXJ4cCA9IDAsXG4gICAgICAgICAgaG92ZXJ5cCA9IDA7XG5cbiAgICAgICAgLy8gVE9ETyBlbnN1cmUgdGhpcyBpc24ndCBjb25zdGFseSBydW5uaW5nP1xuXG4gICAgICAgIHZhciBob3Zlcmxvb3AgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gY2hhbmdlIDEyIHRvIGFsdGVyIGRhbXBpbmcgaGlnaGVyIGlzIHNsb3dlclxuICAgICAgICAgIGhvdmVyeHAgKz0gKGhvdmVybW91c2VYIC0gaG92ZXJ4cCkgLyAxOy8vd2FzIDEyXG4gICAgICAgICAgaG92ZXJ5cCArPSAoaG92ZXJtb3VzZVkgLSBob3ZlcnlwKSAvIDE7Ly93YXMgMTJcbiAgICAgICAgICBob3ZlcmZvbGxvd2VyLmNzcyh7XG4gICAgICAgICAgICBsZWZ0OiBob3ZlcnhwLFxuICAgICAgICAgICAgdG9wOiBob3ZlcnlwXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSwgMTApOyAvLyB3YXMgMzBcblxuXG5cbiAgICAgICAgfTsvLyBjaGVja2hvdmVyRGl2KCR0aGlzaXRlbSlcblxuICAgICAgICBjaGVja2hvdmVyRGl2KCR0aGlzaXRlbSk7Ly8gdHJpZ2dlclxuXG4gICAgfSk7XG5cbiAgICBjaGVja2hvdmVyRGl2KCR0aGlzaXRlbSk7Ly8gaW5pdGlhbFxuXG59IC8vZnVuY3Rpb24gaG92ZXJEaXYoJHRoaXNpdGVtKSIsIlxuIFxuLy8gVXRpbGl0aWVzLlxuaW1wb3J0IHtcbiAgICAgICAgICBkb21SZWFkeSxcbiAgICAgICAgICBvcGFjaXR5LFxuICAgICAgICAgIGltYWdlb3BhY2l0eVxuIH0gZnJvbSAnLi91dGlsaXRpZXMvaGVscGVycyc7XG5cbiBpbXBvcnQgeyBvcmllbnRhdGlvbiBcbn0gZnJvbSAnLi91dGlsaXRpZXMvaGVscGVycyc7XG5cblxuLy8gTW9kdWxlcy5cbi8vIGltcG9ydCBibG9ja3MgZnJvbSAnLi4vYmxvY2tzL2luZGV4JztcblxuY29uc3QgYWRtaW5hcHAgPSB7XG5cbiAgXG4gIGluaXQoKSB7XG4gICAgLy8gTW9kdWxlcy5cbiAgICBjb25zb2xlLmxvZyhcIkFkbWluIEFwcCBqcyB3aHkgaXMganF1ZXJ5IG5vdCB3b3JraW5nIC0gaGVyZSA/ISBcIik7XG4gICAgLy8gZXhhbXBsZSgpO1xuICAgIC8vIGRvbVJlYWR5KGJsb2Nrcyk7XG4gICAgLy8gb3JpZW50YXRpb24oKTtcbiAgICAvLyAgZG9tUmVhZHkob3JpZW50YXRpb24pO1xuICAgICBpbWFnZW9wYWNpdHkoKVxuICAgICBvcGFjaXR5KCk7XG5cbiAgfVxuXG5cbn07XG5cbmRvbVJlYWR5KGFkbWluYXBwLmluaXQpO1xuLy8gY29uc29sZS5sb2coXCJ3aGF0IHRoZSBmdWNrXCIpO1xuIl0sIm5hbWVzIjpbImRvbVJlYWR5IiwiZm4iLCJkb2N1bWVudCIsInJlYWR5U3RhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwib3BhY2l0eSIsImNvbnNvbGUiLCJsb2ciLCJ3YWl0bG9hZGluZyIsIiQiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwic2V0VGltZW91dCIsImltYWdlb3BhY2l0eSIsIiR0aGlzaW1hZ2VibG9jayIsImZpbmQiLCJlYWNoIiwiJHRoaXNpbWFnZSIsImltYWdlc0xvYWRlZCIsIm9sZFNyYyIsImF0dHIiLCJuZXdTcmMiLCJhZG1pbmFwcCIsImluaXQiXSwibWFwcGluZ3MiOiJTQUFnQkEsUUFBVCxDQUFrQkMsRUFBbEIsQ0FBc0IsQ0FDM0IsR0FBSUMsUUFBUSxDQUFDQyxVQUFULEdBQXdCLFNBQTVCLENBQXVDLENBQ3JDRixFQUFFLEdBQ0YsT0FDRCxDQUNEQyxRQUFRLENBQUNFLGdCQUFULENBQTBCLGtCQUExQixDQUE4Q0gsRUFBOUMsRUFDRCxDQUVELFNBc0xnQkksT0FBVCxFQUFrQixDQUVyQkMsT0FBTyxDQUFDQyxHQUFSLENBQVksb0JBQVosRUFJRkQsT0FBTyxDQUFDQyxHQUFSLENBQVksc0JBQVosRUFJTSxTQUFTQyxXQUFULEVBQXNCLENBSXRCQyxDQUFDLENBQUMsTUFBRCxDQUFELENBQVVDLFFBQVYsQ0FBbUIsZUFBbkIsRUFFQSxHQUFJRCxDQUFDLENBQUMsTUFBRCxDQUFELENBQVVFLFFBQVYsQ0FBbUIseUJBQW5CLENBQUosQ0FBa0QsQ0FHaERMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLHNCQUFaLEVBQ0FFLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBVUMsUUFBVixDQUFtQixxQkFBbkIsRUFDRCxDQUVBLENBQ0RFLFVBQVUsQ0FBQ0osV0FBRCxDQUFjLEdBQWQsQ0FBVixDQUlQLFVBRWVLLFlBQVQsRUFBdUIsQ0FDMUJQLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLDRCQUFaLEVBRUUsSUFBSU8sZUFBZSxDQUFHTCxDQUFDLENBQUMsTUFBRCxDQUFELENBQVVNLElBQVYsQ0FBZSxzQkFBZixDQUF0QixDQUVBRCxlQUFlLENBQUNFLElBQWhCLENBQXFCLFVBQVcsQ0FFOUJWLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG1CQUFaLEVBRUUsSUFBSVUsVUFBVSxDQUFHUixDQUFDLENBQUMsSUFBRCxDQUFsQixDQUVJUSxVQUFVLENBQUNDLFlBQVgsQ0FBeUIsRUFBekIsQ0FHRSxVQUFXLENBRVpaLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaLEVBQ0csSUFBSVksTUFBTSxDQUFHRixVQUFVLENBQUNHLElBQVgsQ0FBZ0IsS0FBaEIsQ0FBYixDQUNJQyxNQUFNLENBQUdKLFVBQVUsQ0FBQ0csSUFBWCxDQUFnQixVQUFoQixDQURiLENBRUVILFVBQVUsQ0FBQ0csSUFBWCxDQUFnQixLQUFoQixDQUF1QkMsTUFBdkIsRUFDQUosVUFBVSxDQUFDUCxRQUFYLENBQW9CLFFBQXBCLEVBRUgsQ0FYSCxFQWVMLENBckJILEVBdUJMOztBQ3hPRCxJQUFNWSxRQUFRLENBQUcsQ0FHZkMsSUFIZSxnQkFHUixDQUVMakIsT0FBTyxDQUFDQyxHQUFSLENBQVksbURBQVosRUFLQ00sWUFBWSxHQUNaUixPQUFPLEdBRVQsQ0FiYyxDQUFqQixDQWtCQUwsUUFBUSxDQUFDc0IsUUFBUSxDQUFDQyxJQUFWLENBQVIifQ=="]}