/**
 * cally_2020 - Cultivating Cally WordPress Theme
 * @author         Simon van Stipriaan <simon@svsdesign.co.uk>
 * @build          Sun, Oct 18, 2020 1:39 PM ET
 * @release        84263e876f70b824113f5bb962fe1fb0efa957c1 [master]
 * @copyright      Copyright (c) 2020, svsdesign
 * @version        v1.0.0
 * @link           https://cultivatingcally.com
 */
function domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function detectTouch(){if(console.log("detectTouch();"),"ontouchstart"in window){$("body").removeClass("is-not-touch"),$("body").addClass("is-touch");try{for(var e in document.styleSheets){var t=document.styleSheets[e];if(t.rules)for(var o=t.rules.length-1;0<=o;o--)t.rules[o].selectorText&&t.rules[o].selectorText.match(":hover")&&t.deleteRule(o)}}catch(e){}}else $("body").removeClass("is-touch"),$("body").addClass("is-not-touch")}function SetAppHeight(){function e(){document.documentElement.style.setProperty("--site-height","".concat(window.innerHeight,"px"))}var t,o=o||jQuery;window.addEventListener("resize",e),e(),document.documentElement.style.setProperty("--submenu-height","".concat(window.innerHeight,"px")),t=o("#header-nav-area").height(),document.documentElement.style.setProperty("--headroom-height",t+"px")}function SetSubmenuHeight(o){console.log("SetSubmenuHeight"),console.log(" headRoomStatust"+o);function e(){var e,t=document.documentElement;"onPin"==o?e=$("#header-nav-area").outerHeight():"onUnpin"==o&&(e=0),t.style.setProperty("--submenu-height","".concat(window.innerHeight-e,"px"))}function t(){var e,t=document.documentElement;"onPin"==o?e=$("#header-nav-area").outerHeight():"onUnpin"==o&&(e=0),t.style.setProperty("--headroom-height",e+"px")}window.addEventListener("resize",e),window.addEventListener("resize",t),e(),t()}function detectAttrChange(){$(".wpuf-submit").on("remove",function(){$("body").addClass("form-submitted"),setTimeout(function(){console.log("scroll now"),$(window).height(),$(".wpuf-success").offset().top,$(".wpuf-success").height(),$("html, body").animate({scrollTop:$(".exports-wrap").offset().top},1e3)},1),setTimeout(function(){$(".wpuf-success").css("display","none")},6e3)})}function orientation(){var e=e||jQuery;console.log("hello orientation function");var t=e(window).width();e(window).height()<t?(e("body").addClass("horizontal"),e("body").removeClass("vertical")):(e("body").removeClass("horizontal"),e("body").addClass("vertical"))}function opacity(){console.log("opacity() function");var e=e||jQuery;console.log("removed imagesloaded"),setTimeout(function(){e("body").addClass("images-loaded"),e("body").hasClass("page-template-page-grid")&&(console.log("grid loader removing"),e("body").addClass("page-content-loaded"))},200)}function imageopacity(){console.log("images loaded applied here");var e=e||jQuery;e("body").find("img.apply-image-load").each(function(){console.log("each image? block");var t=e(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function devGrid(){var e,t;0<$(".dev-grid").length&&($("#intro-area").height(),e=$("#main.wrapper").height(),t=$(".dev-base-lines"),pxlineheight="10",vwlineheight="1vw",baselinecount=e/pxlineheight,t.css("height",e),$(".dev-base-lines .base-line").remove(),$(".dev-grid-toggle").click(function(){$("body").hasClass("dev-grid-on")?$("body").removeClass("dev-grid-on"):$("body").addClass("dev-grid-on")}))}function menuPositioner(){console.log("menupositioner");var e=$("body"),t=$("#positioner"),o=$("#menu-header-navigation"),a=o.children(),n=a.length,i=o.children().filter(".current-menu-item"),r=100/n;a.each(function(){var e=$(this).index()+1;$(this).attr("menu-number",e)}),applymarginleft=e.hasClass("home")?(console.log("is body"),i.attr("menu-number")*r-r+"%"):e.hasClass("parent-pageid-101")||e.hasClass("parent-pageid-104")?(console.log("is parent of about"),(i=o.children().filter(".about-link")).attr("menu-number")*r-r+"%"):(e.hasClass("single-news")?(console.log("is single news - apply active to the parent"),(i=o.children().filter(".news-link")).attr("menu-number")):i.attr("menu-number"))*r-r+"%",t.css("width",r+"%"),t.css("margin-left",applymarginleft+"%"),t.animate({marginLeft:applymarginleft},500)}function menuClasses(e,t){$(".menu-item."+t).each(function(){$(this).removeClass(t)}),console.log("menuClasses = "+e),$('.menu-item > a[href$="'.concat(e,'"]')).closest(".menu-item").each(function(){$(this).addClass(t)})}function topAnimation(){setTimeout(function(){var e;$("body").removeClass("animation-fix"),$("body").data("move-to")?(e=$("body").data("move-to"),$("html, body").animate({scrollTop:$("#"+e).offset().top+1},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))}),$("body").removeAttr("data-move-to")})):$("html, body").animate({scrollTop:$("#main").offset().top+0},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))})})},200)}function fade(){var o=.25*$(window).innerHeight(),a=Math.round(1/o*1e4)/1e4;$(".th-block").each(function(){var e=$(this).offset().top,t=$(window).scrollTop()+.8*$(window).innerHeight();e<t?e<t-o?$(this).css({transition:"opacity 0.1s linear",opacity:1}):$(this).css({transition:"opacity 0.25s linear",opacity:(t-e)*a}):$(this).css("opacity",.1)}),$(window).scrollTop()+$(window).height()==$(document).height()&&$(".th-block").css({transition:"opacity 0.1s linear",opacity:1})}function destroyheadroom(){$("#header-nav-area").headroom("destroy")}function freezeheadroom(){$("#header-nav-area").headroom("freeze")}function unfreezeheadroom(){$("#header-nav-area").headroom("unfreeze")}function forceheadroompin(){$("#header-nav-area").hasClass("unpinned")&&($("#header-nav-area").removeClass("unpinned"),$("#header-nav-area").addClass("pinned"))}function removeCommentBubble(){$("#wpd-bubble-wrapper").length&&$("#wpd-bubble-wrapper").remove()}function hoverDiv(e){var l;window.addEventListener("resize",function(){$("body").hasClass("dev-layout-grid-on")?console.log("resizing for hover div - but grid now active"):(console.log("resizing for hover div"),e=$(".dev-layout-grid-toggle"),clearInterval(l),function(o){console.log("check hover div after resize");var a=o.width()/2,n=o.height()/2,i=o.width(),r=o.height();o.on({mousemove:function(e){var t=o.offset();a=Math.min(e.pageX-t.left,i),n=Math.min(e.pageY-t.top,r),a<0&&(a=0),n<0&&(n=0)}});var e=o.find(".inner-follow"),t=0,s=0;l=setInterval(function(){t+=a-t,s+=n-s,e.css({left:t,top:s}),console.log("interval in resize")},100)}(e))}),$(".dev-layout-grid-toggle").click(function(){clearInterval(l)}),function(o){var a=o.width()/2,n=o.height()/2,i=o.width(),r=o.height();o.on({mousemove:function(e){var t=o.offset();a=Math.min(e.pageX-t.left,i),n=Math.min(e.pageY-t.top,r),a<0&&(a=0),n<0&&(n=0)}});var e=o.find(".inner-follow"),t=0,s=0;l=setInterval(function(){t+=a-t,s+=n-s,e.css({left:t,top:s})},100)}(e)}function images(e){console.log("images loaded applied here");var t=e.find("img");t.css("backgroun","red"),t.each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function introbanner(e){console.log("images loaded applied here"),e.find("img").each(function(){console.log("each 'intro banner block image '");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function slideshow(n){$.getScript("https://npmcdn.com/flickity@2/dist/flickity.pkgd.js",function(e,t,o){console.log(" hello function slideshow($block)");var a=n.find(".slideshow-carousel");images(a),a.flickity({imagesLoaded:!0,setGallerySize:!0,percentPosition:!1,freeScroll:!0,wrapAround:!0,arrowShape:{x0:20,x1:50,y1:50,x2:60,y2:50,x3:30}})})}function map(e){var t;console.log("function map($block) - ONE"),0<$("#g-map").length&&(t=0,window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyBUXYryE2krCQ7nIvVcXcFzWEPY0cEcXbE&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},$(window).bind("gMapsLoaded",function(){map=new google.maps.Map(document.getElementById("g-map"),{center:{lat:51.5198038,lng:-.1228228999999601},zoom:15,panControl:!1,zoomControl:!1,draggable:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!0,styles:[{stylers:[{saturation:"-90"}]}]});var e=themeurl+"/assets/svg/map_marker_svg_40px.svg?i="+t++;new google.maps.Marker({position:{lat:51.5198038,lng:-.1228228999999601},map:map,optimized:!1,icon:e})}),window.loadGoogleMaps())}function blocks(){0<$(".intro-banner-block").length&&$(".intro-banner-block").each(function(){console.log("each .intro-banner-block"),introbanner($(this))}),0<$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").length&&$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").each(function(){console.log("each .image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block"),images($(this))}),0<$(".slideshow-block").length&&$(".slideshow-block").each(function(){console.log("if slideshow-block"),slideshow($(this))}),0<$(".contact-block").length&&(console.log("if contact block"),$(".contact-block").each(function(){map($(this))})),$(window).scroll(function(){fade()})}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _AwaitValue(e){this.wrapped=e}function _AsyncGenerator(i){var r,s;function l(t,e){try{var o=i[t](e),a=o.value,n=a instanceof _AwaitValue;Promise.resolve(n?a.wrapped:a).then(function(e){n?l("return"===t?"return":"next",e):d(o.done?"return":"normal",e)},function(e){l("throw",e)})}catch(e){d("throw",e)}}function d(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?l(r.key,r.arg):s=null}this._invoke=function(a,n){return new Promise(function(e,t){var o={key:a,arg:n,resolve:e,reject:t,next:null};s?s=s.next=o:(r=s=o,l(a,n))})},"function"!=typeof i.return&&(this.return=void 0)}function init$1(){$(".acf-image-edit");var t,e=$(".dev-layout-grid-toggle"),o=!0;Packery.prototype.getShiftPositions=function(t){t=t||"data-item-id";var o=this;return this.items.map(function(e){return{attr:e.element.getAttribute(t),x:e.rect.x/o.packer.width}})},Packery.prototype.initShiftLayout=function(e,n){if(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void this.layout()}n=n||"data-item-id",this._resetLayout(),this.items=e.map(function(e){var t="["+n+'="'+e.attr+'"]',o=this.element.querySelector(t),a=this.getItem(o);return a.rect.x=e.x*this.packer.width,a},this),this.shiftLayout()}else this.layout()},$("form#grid").submit(function(e){e.preventDefault();var t=$(this),o=t.attr("action"),a=t.attr("method"),n=t.serializeArray(),i=$("#modalResponse");return $("#ag_wysiwyg_editor").length&&"undefined"!=typeof tinyMCE&&n.push({name:"fields[ag_wysiwyg_editor]",value:tinyMCE.get("ag_wysiwyg_editor").getContent()}),$.ajax({url:o,method:a,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",WP_settings.nonce)},data:n,dataType:"json"}).always(function(e){i.modal("show"),$(".response-message-wrap").addClass("response-message-active"),setTimeout(function(){$(".response-message-wrap").removeClass("response-message-active")},1e3)}),!1});var w=function(){var e=$(".repeater .remove-row");1==$(".repeater > .repeater-item").length?e.hide():e.show()};function m(){console.log("canvasChange()"),$("body").hasClass("submission-previewed")&&($("body").addClass("update-available"),$("a#load-image").text("Update Preview Image"))}function a(y){var b=y.imagesLoaded(function(){$("body").addClass("images-loaded");var l,e,t,o,d=!1,c=!1;function a(){console.log("checkPackery()");var e,o,t,a,n,i=getComputedStyle(document.body,":after").content,r=i.replace(/"([^"]+(?="))"/g,"$1"),s="widescreen";console.log("breakpointName: "+i),console.log("checkbreakpointName: "+r),console.log("widescreenbreakpointName: "+s),console.log("isPackeryInit: "+d),r!==s||d?"default"===i&&d?(console.log("disable packery if default and already intialized"),b.packery("destroy"),d=!1,console.log("Hello breakpoint - mobile?"),$("body").hasClass("dev-layout-grid-on")?(l=!0,$("body").removeClass("dev-layout-grid-on")):l=!1):console.log("else - but doesnt do anything"):(console.log("init packery if widescreen & not already init"),b.packery({itemSelector:".layout-grid-item",columnWidth:".grid-sizer",percentPosition:!0,isHorizontal:!0,initLayout:!1}),t=(o=b.closest(".grid-layer").find(".coordinates")).attr("value"),0==c&&(c=!0,e=b.find(".layout-grid-item"),t=(o=b.closest(".grid-layer").find(".coordinates")).attr("value"),a=b.closest(".grid-layer").find(".repeater-wrap .add-row"),e.each(function(e){var n=$(this),i=n.find("img:not(.place-holder)"),t=i.attr("src"),o=n.find("img.place-holder"),a=n.attr("data-item-id"),r=n.find(".image-ui"),s=r.parent("label"),l=r.attr("id");0<i.length?(gridImageOrientation(n,void 0,void 0),itemEdit(n,b),imageRemove(a),convertImgToDataURLviaCanvas(t,function(e){o.attr("src",e)})):(gridImageOrientation(n,void 0,void 0),itemEdit(n,b),imageRemove(a)),$("#"+l).iconselectmenu({appendTo:s,width:"auto",style:"dropdown",change:function(e,t){console.log("change"+t);var o=$(t.item.element).attr("data-segment-image"),a=$(t.item.element).attr("data-segment-type");i.attr("src",o),i.attr("data-segment-type",a),updateImageObject(n,a)},select:function(){console.log("close this grid-item-options-toggle"),n.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar")}),a.click(function(){console.log("hello add a row");var e=$(this),t=e.closest(".grid-layer").find(".coordinates"),o=e.closest(".grid-layer").find(".repeater-item"),a=e.closest(".grid-layer").find(".repeater"),n=a.find(".repeater-item:last"),i=n.clone(),r=o.map(function(){return $(this).attr("data-item-id")}),s=Math.max.apply(Math,r)+1;$(i).insertAfter(n);var l=a.find(".repeater-item:last"),d=$(".repeater > .repeater-item").length-1,c=l.find(".image-ui"),m=c.parent("label");l.find(".ui-selectmenu-button, .ui-front").remove(),l.attr("data-item-id",s),a.find(".repeater-item:last[name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),a.find(".repeater-item:last [name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),l.find(".acf-image-edit").attr("id","acf-image-edit-"+s),l.find(".acf-image-remove").attr("id","acf-image-remove-"+s),l.attr("data-item-id-id",""+s),l.find(".input-id").attr("value",""+s),l.find(".image-ui").attr("id","acf-post-object-"+s);var g,u,p=c.attr("id"),f=l.find("img:not(.place-holder)");$("#"+p).iconselectmenu({appendTo:m,width:"auto",style:"dropdown",change:function(e,t){var o=$(t.item.element).attr("data-segment-image"),a=$(t.item.element).attr("data-segment-type");f.attr("src",o),f.attr("data-segment-type",a),updateImageObject($thisitem,a)},select:function(){l.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar"),g=$(i),(u=b).find(g).each(function(e,t){var o=new Draggabilly(t);u.packery("bindDraggabillyEvents",o)}),imageEdit(s),imageRemove(s),itemEdit($(i),b),b.packery("appended",$(i));var h=y.packery("getShiftPositions","data-item-id"),v=JSON.stringify(h);return t.val(v),w(a),localStorage.setItem("coordinates",v),$(i).addClass("item-added"),$("html, body").animate({scrollTop:$(i).offset().top},200),setTimeout(function(){$(i).removeClass("item-added")},600),!1}),$(document).on("click",".repeater .remove-row",function(){var e,t,o,a,n,i=$(".repeater > .repeater-item");return 1==i.length?i.find("input").val(""):(e=$(this).closest(".repeater-item"),t=$(this).closest(".repeater"),o=b.closest(".grid-layer").find(".coordinates"),b.packery("remove",e).packery("shiftLayout"),a=b.packery("getShiftPositions","data-item-id"),n=JSON.stringify(a),o.val(n),w(t)),!1})),$("body").hasClass("logged-in")?b.packery("initShiftLayout",t,"data-item-id"):(null==(n=localStorage.getItem("coordinates"))&&(n=t),b.packery("initShiftLayout",n,"data-item-id")),$("body").hasClass("logged-in")?(b.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);b.packery("bindDraggabillyEvents",o)}),b.on("dragItemPositioned",function(){console.log("$grid.on( 'dragItemPositioned - logged in'");var e=b.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),m(),$(".item-edit-active").length&&$(".item-edit-active").find(".grid-item-options-toggle").click()})):(b.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);b.packery("bindDraggabillyEvents",o)}),b.on("dragItemPositioned",function(){console.log("dragItemPositioned - not logged in"),b.packery("layout").trigger("layoutComplete");var e=b.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),localStorage.setItem("coordinates",t),m(),$(".item-edit-active").length&&$(".item-edit-active").find(".grid-item-options-toggle").click()})),$("body").hasClass("is-touch")&&console.log(" TO DO ensure to have touch screen message enabled"),d=!0,console.log(l+"isEditModeActive"),!0===l&&(console.log(l),$("body").addClass("dev-layout-grid-on")),setTimeout(function(){b.packery("layout").trigger("layoutComplete")},100))}a(),$(window).on("resize",(e=a,t=200,function(){o&&clearTimeout(o),setTimeout(function(){e(),o=null},t||100)}))})}$('input[name="submission_name"]').on("change",function(){var e=t=$('input[name="submission_name"]').val();$('input[name="post_title"]').val(""+e),console.log("submissionname ="+t),console.log("posttitle ="+e)}),$("#load-image").on("click",function(){console.log("load-image click"),console.log("function captureCanvas()"),$("body").addClass("capturing-image"),setTimeout(function(){$("#canvas-wrap").has("canvas").length&&(console.log("delete exisint canvas"),$("#canvas-wrap").find("canvas").remove()),$("#export-image-wrap img").length&&(console.log("delete existing image"),$("#export-image-wrap").find("img").remove());var e=1/window.innerWidth*1e3;html2canvas(document.querySelector(".grid-layer"),{scale:e,scrollY:-1*window.pageYOffset}).then(function(e){var t=document.createElement("img");t.src=e.toDataURL(),getCanvas=e,document.querySelector("#export-image-wrap").appendChild(t),$("body").find("input[name='image-data_hidden_field']").val(t.src),$("body").addClass("submission-previewed"),$(".export-options").removeClass("grid-md-9").addClass("grid-md-6"),$("body").removeClass("capturing-image"),$("body").removeClass("update-available")})},1)}),$("#download-image").on("click",function(){var e=getCanvas.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");$("#download-image").attr("download",t+"'s Freeling Street.png").attr("href",e)}),$(".dev-layout-grid-toggle").click(function(){$("body").hasClass("dev-layout-grid-on")?($("body").removeClass("dev-layout-grid-on"),$("#size-wrap").removeClass("grid-container")):($("body").addClass("dev-layout-grid-on"),$("#size-wrap").addClass("grid-container"),$("html, body").animate({scrollTop:+$(".grid-layer").offset().top},"slow")),1==o&&(console.log("starSaving Function - this should only happens"),o=!1,setInterval(function(){var e=$("#tester-grid-id");console.log("clean grid function - i.e storing data"),cleanGridContent(e)},3e4))}),function(){if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage)))try{localStorage.setItem("localStorage",1),localStorage.removeItem("localStorage")}catch(e){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert('Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.')}}(),$(".grid").each(function(){var e;$thisgrid=$(this),$("body").hasClass("logged-in")?(w($thisgrid),a($thisgrid)):null===localStorage.getItem("gridContent")?(w($thisgrid),a($thisgrid),e=document.getElementById("tester-grid-id").innerHTML):(e=LZString.decompress(localStorage.getItem("gridContent")),$("#tester-grid-id").empty(),$("#tester-grid-id").append(e),w($thisgrid),a($thisgrid),$("#clear-local-storage").click(function(){console.log("clearing local storage"),localStorage.removeItem("gridContent"),localStorage.removeItem("coordinates"),location.reload()}))}),hoverDiv(e),detectAttrChange()}function itemEdit(r,s){var l=r,e=r.find(".grid-item-options-toggle").not(".grid-item-options-toggle-rotate"),t=r.find(".grid-item-options-toggle-rotate"),d=(l.find("input.input-id").val(),l.find("input.input-width").val(),l.find("input.input-height").val(),l.find("input.input-z-index").val(),l.find("input.input-rotate").val(),l.find("input.input-image-position-x").val()+"%"),c=l.find("input.input-image-position-y").val()+"%",m=(l.find("input.input-image-scale").val(),0),o=l.find("input");$postfield=l.find(".post-object select"),e.click(function(){console.log("click; activate edit item"),l.hasClass("item-edit-active")?(l.removeClass("item-edit-active"),$("body").removeClass("edit-active")):($(".layout-grid-item.repeater-item").removeClass("item-edit-active"),l.addClass("item-edit-active"),$("body").addClass("edit-active"),l.find(".ui-button").click())}),t.click(function(){console.log("click; rotate clicking");var e,t=l.find("input.input-rotate"),o=Number(t.val());e=270==o?0:Number(o+90),t.val(e),console.log("thisnewrotatevalue"+e),l.find(".inner-grid-item").css("transform","rotate("+e+"deg)"),l.find(".grid-item-options-toggle-rotate .rotate").css("transform","rotate("+e+"deg)"),l.find("input.input-rotate").val(e)}),o.on("input",function(){console.log("$inputfields changed");var t,e,o,a=$(this),n=a.val(),i=a.attr("data-input-type");"image_rotate"==i?(console.log("rotate input on pinput change"),applyrotatevalue=n+"deg",a.attr("value",n),console.log("newvalue"+n),l.find(".inner-grid-item").css("transform","rotate("+applyrotatevalue+")")):"input-id"==i||("input-width"==i?(t="grid-item-width",e="grid-item-width-"+n/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-height"==i?(t="grid-item-height",e="grid-item-height-"+n/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-z-index"==i?(t="item-z-index",e="item-z-index-"+n,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e)):"input-image-position-x"==i?(d=n+"%",a.attr("value",n),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-position-y"==i?(c=n+"%",a.attr("value",n),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-scale"==i&&(m=n/100,a.attr("value",n),l.find(".inner-grid-item .image-wrap img").css("transform","scale("+m+")")))})}function imageEdit(e){console.log("imageedit function itemid"+e);var t=$("#acf-image-edit-".concat(e));console.log("$thisimagethumb"+t),t.click(function(){var i,e=$(this),t=(e.attr("id"),e.closest(".layout-grid-item").attr("data-item-id")),r=$(".layout-grid-item[data-item-id=".concat(t,"]")).find(".acf-image");if($.isFunction(wp.media))return i?(console.log("mediaImage"),void i.open()):((i=wp.media({library:{type:"image"},multiple:!1})).on("select",function(){console.log("mediaImage.on( 'select', function()");var e=i.state().get("selection").first().toJSON();$(".media-modal-close").trigger("click");var t=r.closest(".layout-grid-item"),o=e.width,a=e.height,n=e.url;r.val(e.id),t.find("img").remove(),t.find(".image-wrap").append($('<img src="'+e.url+'"">')),t.find(".image-wrap").append($('<img class="place-holder" src="'+e.url+'"">')),gridImageOrientation(t,o,a),convertImgToDataURLviaCanvas(n,function(e){t.find("img.place-holder").attr("src",e)}),$("html, body").animate({scrollTop:t.offset().top},200)}),i.open(),!1);console.log("! $.isFunction( wp.media )")})}function imageRemove(e){$("#acf-image-remove-".concat(e)).click(function(){var e=$(this).closest(".layout-grid-item").attr("data-item-id"),t=$(".layout-grid-item[data-item-id=".concat(e,"]"));return t.find("img").remove(),t.find("input.acf-image").val(""),!1})}function convertImgToDataURLviaCanvas(e,a){var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e,t=document.createElement("CANVAS"),o=t.getContext("2d");t.height=this.height,t.width=this.width,o.fillStyle="#000",o.fillRect(0,0,t.width,t.height),e=t.toDataURL(),a(e),t=null},t.src=e}function updateImageObject(e,t){for(var o=e.attr("class").split(" "),a=0;a<o.length;a++)-1!=o[a].indexOf("item-z-index")&&e.removeClass(o[a]);"tree"==t?(e.attr("data-item-z-index","2"),e.find("[data-input-type='input-z-index']").val("2"),e.addClass("item-z-index-2")):"normal"==t&&(e.attr("data-item-z-index","1"),e.find("[data-input-type='input-z-index']").val("1"),e.addClass("item-z-index-1"))}function cleanGridContent(e){console.log("cleanGridContent($cleangrid)");var t=e.clone();t.find(".ui-selectmenu-button").remove(),t.find(".ui-selectmenu-menu.ui-front").remove();var o=t.prop("outerHTML");localStorage.setItem("gridContent",LZString.compress(o))}function gridImageOrientation(e,t,o){var a=e,n=a.width(),i=a.height(),r=n/i,s=a.find("img");null==(t=t)&&(t=s.width(),o=s.height());var l=t/o;a.attr("item-ratio",""),s.attr("itemimage-ratio",""),a.attr("item-ratio",r),s.attr("itemimage-ratio",l),a.removeClass("square-item image-larger-than-item vertical-item horizontal-item ratio-equal image-larger-than-item"),s.removeClass("square-image vertical-image horizontal-image"),n==i?(a.addClass("square-item"),r==l||l<r&&a.addClass("image-larger-than-item")):n<i?a.addClass("vertical-item"):i<n&&(a.addClass("horizontal-item"),r==l||l<r&&a.addClass("image-larger-than-item")),t==o?s.addClass("square-image"):t<o?s.addClass("vertical-image"):o<t&&s.addClass("horizontal-image")}function init$2(){0<$("body.page-id-101.page-parent .project-overview").length&&(console.log("about page"),$("ul.sections li a").mouseenter(function(){var e=$(this).parent("li"),t=e.attr("data-section-title"),o=$('ul.sections li[data-section-title="'+t+'"]').next(".line"),a=$('ul.sections li[data-section-title="'+t+'"]').prev(".line");if(!e.hasClass("section-is-active"))return $("ul.sections li").removeClass("section-is-active"),e.addClass("section-is-active"),a.addClass("section-is-active"),o.addClass("section-is-active"),void $('ul.sections li[data-section-title="'+t+'"]').addClass("section-is-active")}))}function init(){var i=!1;barba.init({views:[{namespace:"page",afterEnter:function(){console.log("afterEnter: namespace = page"),opacity(),domReady(blocks),domReady(init$2)}},{namespace:"archive",afterEnter:function(){console.log("afterEnter: namespace = archive"),imageopacity(),opacity()}},{namespace:"single-post",afterEnter:function(){console.log("afterEnter: namespace = single-post"),imageopacity(),opacity(),domReady(blocks)}},{namespace:"layout-grid",afterEnter:function(){console.log("afterEnter: namespace = layout grid"),opacity(),domReady(init$2),domReady(init$1),domReady(blocks)}},{namespace:"front-page",afterEnter:function(){console.log("afterEnter: namespace = front-page"),imageopacity(),opacity(),domReady(blocks)}}]}),barba.hooks.beforeLeave(function(e){console.log("beforeleave"),introanimationdone=!0,i=!$("body").hasClass("is-not-touch"),devon=!!$("body").hasClass("dev-grid-on")}),barba.hooks.afterLeave(function(e){console.log("afterleave"),$("html, body").animate({scrollTop:$("body").offset().top},10);var t,o=e.next.html,a=o.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",o),n=$(a).filter("notbody").attr("class");$("body").attr("class",n),console.log("afterleave"),e.next.url.path&&(console.log("IF (data.next.url.path - apply menuclass changes"),console.log("data.next.url.path"+e.next.url.path),t=e.next.url.path,console.log("thislinkdata"+t),console.log("home_directory "+home_directory),"/"==t?(console.log("we can assume its the home url on staging or live?"),console.log("staging"+home_directory),t=home_directory+"/",console.log("staging data"+t)):"/cally-2020/"==t?(console.log("home url"),console.log("we can assume its home url on local")):console.log("else - so what kinda links we dealing wth?"),menuClasses(t,"current-menu-item"),menuClasses(t,"current_page_item"),menuClasses(t,"current-menu-ancestor"),menuClasses(t,"current-menu-parent"),menuClasses(t,"current_page_ancestor")),1==devon?$("body").addClass("dev-grid-on"):$("body").removeClass("dev-grid-on"),1==i?(console.log("apply touch"),$("body").addClass("is-touch"),$("body").removeClass("is-not-touch")):($("body").addClass("is-not-touch"),$("body").removeClass("is-touch")),1==introanimationdone?(console.log("introanimation not needed anymore"),$("body").addClass("animation-done"),$("body").addClass("animation-hide"),$("body").removeClass("animation-fix")):console.log("introanimationdone == false"),removeCommentBubble(),menuPositioner(),orientation()})}function siteLoad(){console.log("siteLoad"),0==introanimationdone?(console.log("(introanimationdone == false)"),$(".fade-item").css("opacity",0),fade(),topAnimation(),$("body").removeClass("site-loading"),$("body").addClass("animation-done"),introanimationdone=!0):(console.log("(introanimationdone == true)"),$(".fade-item").css("opacity",0),fade(),$("body").removeClass("site-loading"))}function init$3(){function e(){console.log("inithreadroom - shoul be once, intuyll we destroy it"),$("#header-nav-area").length&&(console.log("#header-nav-area exists"),$("#header-nav-area").headroom({offset:0,tolerance:5,classes:{initial:"animated",pinned:"pinned",unpinned:"unpinned",frozen:"frozen"},onPin:function(){console.log("headroom onPin function");SetSubmenuHeight("onPin")},onUnpin:function(){console.log("headroom onUnPin function"),SetSubmenuHeight("onUnpin")}}))}if(0<$("#toggle-item").length)return console.log("if #toggle-item"),0<$("#header-nav-area").length&&$("#header-nav-area").mouseenter(function(){if(console.log("#header-nav-area hover"),!$("body").hasClass("nav-on"))return console.log("nav not on mouseenter"),void forceheadroompin()}),$("#toggle-item").click(function(){console.log("click"),$("body").not("nav-off")&&$("body").not("nav-on")?$("body").hasClass("nav-on")?(console.log("turn nav off"),e(),$("body").addClass("nav-off"),$("body").removeClass("nav-on")):(console.log("turn nav on"),destroyheadroom(),$("body").addClass("nav-on"),$("body").removeClass("nav-off"),$("li.menu-item a").click(function(){console.log("$mainmenuitmes.click(function()"),$("body").addClass("nav-off"),$("body").removeClass("nav-on"),e()})):(destroyheadroom(),$("body").addClass("nav-on"),console.log("not either"))}),e(),console.log("detectopofmainfixer()"),void $(window).scroll(function(){var e=$(this).scrollTop();if($intro=$("#intro-area"),introheight=$intro.height(),reached=e-introheight,0<=reached){if(!$("body").hasClass("main-reached"))return $("body").addClass("main-reached"),void setTimeout(function(){$("body, html").scrollTop(0)},10);if(!$("body").hasClass("nav-on"))return void unfreezeheadroom()}else if(reached<0&&!$("body").hasClass("nav-on"))return void freezeheadroom()})}console.log("blocks.js"),"function"==typeof Symbol&&Symbol.asyncIterator&&(_AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),_AsyncGenerator.prototype.next=function(e){return this._invoke("next",e)},_AsyncGenerator.prototype.throw=function(e){return this._invoke("throw",e)},_AsyncGenerator.prototype.return=function(e){return this._invoke("return",e)};var inpapp={init:function(){console.log("init"),devGrid(),SetAppHeight(),orientation(),detectTouch(),init(),init$3(),menuPositioner(),siteLoad()}};domReady(inpapp.init);
//# sourceMappingURL=app.min.js.map
