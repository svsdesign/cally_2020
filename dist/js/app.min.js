/**
 * cally_2020 - Cultivating Cally WordPress Theme
 * @author         Simon van Stipriaan <simon@svsdesign.co.uk>
 * @build          Thu, Sep 10, 2020 10:50 AM ET
 * @release        6c8b14c3428c352e83d0ca45a1cc8574ef662569 [master]
 * @copyright      Copyright (c) 2020, svsdesign
 * @version        v1.0.0
 * @link           https://cultivatingcally.com
 */
function domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function detectTouch(){if(console.log("detectTouch();"),"ontouchstart"in window){$("body").removeClass("is-not-touch"),$("body").addClass("is-touch");try{for(var e in document.styleSheets){var t=document.styleSheets[e];if(t.rules)for(var o=t.rules.length-1;0<=o;o--)t.rules[o].selectorText&&t.rules[o].selectorText.match(":hover")&&t.deleteRule(o)}}catch(e){}}else $("body").removeClass("is-touch"),$("body").addClass("is-not-touch")}function SetAppHeight(){function e(){document.documentElement.style.setProperty("--site-height","".concat(window.innerHeight,"px"))}var t;window.addEventListener("resize",e),e(),document.documentElement.style.setProperty("--submenu-height","".concat(window.innerHeight,"px")),t=$("#header-nav-area").height(),document.documentElement.style.setProperty("--headroom-height",t+"px")}function SetSubmenuHeight(o){console.log("SetSubmenuHeight"),console.log(" headRoomStatust"+o);function e(){var e,t=document.documentElement;"onPin"==o?e=$("#header-nav-area").outerHeight():"onUnpin"==o&&(e=0),t.style.setProperty("--submenu-height","".concat(window.innerHeight-e,"px"))}function t(){var e,t=document.documentElement;"onPin"==o?e=$("#header-nav-area").outerHeight():"onUnpin"==o&&(e=0),t.style.setProperty("--headroom-height",e+"px")}window.addEventListener("resize",e),window.addEventListener("resize",t),e(),t()}function detectAttrChange(){console.log("detectAttrChange()"),$(".wpuf-submit").on("remove",function(){$("body").addClass("form-submitted"),setTimeout(function(){$(".wpuf-success").css("display","none")},6e3)})}function orientation(){var e=$(window).width();$(window).height()<e?($("body").addClass("horizontal"),$("body").removeClass("vertical")):($("body").removeClass("horizontal"),$("body").addClass("vertical"))}function opacity(){$("body").imagesLoaded(function(){console.log("Images have loaded in opacity() in helpers.js"),setTimeout(function(){$("body").addClass("images-loaded"),$("body").hasClass("page-template-page-grid")&&(console.log("grid loader removing"),$("body").addClass("page-content-loaded"))},200)})}function imageopacity(){$("body").find("img.apply-image-load").each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function devGrid(){var e,t;0<$(".dev-grid").length&&($("#intro-area").height(),e=$("#main.wrapper").height(),t=$(".dev-base-lines"),pxlineheight="10",vwlineheight="1vw",baselinecount=e/pxlineheight,t.css("height",e),$(".dev-base-lines .base-line").remove(),$(".dev-grid-toggle").click(function(){$("body").hasClass("dev-grid-on")?$("body").removeClass("dev-grid-on"):$("body").addClass("dev-grid-on")}))}function menuPositioner(){var e=$("#positioner");$menu=$("#menu-header-navigation"),$menuitems=$menu.children(),numberofmenuitems=$menuitems.length,$activemenuitem=$menu.children().filter(".current-menu-item"),positionerwidth=100/numberofmenuitems,$menuitems.each(function(){var e=$(this).index()+1;$(this).attr("menu-number",e)}),activemenuitemnumber=$activemenuitem.attr("menu-number"),applymarginleft=activemenuitemnumber*positionerwidth-positionerwidth+"%",e.css("width",positionerwidth+"%"),e.css("margin-left",applymarginleft+"%"),e.animate({marginLeft:applymarginleft},500)}function menuClasses(e,t){$(".menu-item."+t).each(function(){$(this).removeClass(t)}),$('.menu-item > a[href$="'.concat(e.next.url.path,'"]')).closest(".menu-item").each(function(){$(this).addClass(t)})}function topAnimation(){setTimeout(function(){var e;$("body").removeClass("animation-fix"),$("body").data("move-to")?(e=$("body").data("move-to"),$("html, body").animate({scrollTop:$("#"+e).offset().top+1},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))}),$("body").removeAttr("data-move-to")})):$("html, body").animate({scrollTop:$("#main").offset().top+0},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))})})},200)}function fade(){var o=.25*$(window).innerHeight(),i=Math.round(1/o*1e4)/1e4;$(".th-block").each(function(){var e=$(this).offset().top,t=$(window).scrollTop()+.8*$(window).innerHeight();e<t?e<t-o?$(this).css({transition:"opacity 0.1s linear",opacity:1}):$(this).css({transition:"opacity 0.25s linear",opacity:(t-e)*i}):$(this).css("opacity",.1)}),$(window).scrollTop()+$(window).height()==$(document).height()&&$(".th-block").css({transition:"opacity 0.1s linear",opacity:1})}function destroyheadroom(){$("#header-nav-area").headroom("destroy")}function freezeheadroom(){$("#header-nav-area").headroom("freeze")}function unfreezeheadroom(){$("#header-nav-area").headroom("unfreeze")}function forceheadroompin(){$("#header-nav-area").hasClass("unpinned")&&($("#header-nav-area").removeClass("unpinned"),$("#header-nav-area").addClass("pinned"))}function removeCommentBubble(){$("#wpd-bubble-wrapper").length&&$("#wpd-bubble-wrapper").remove()}function hoverDiv(o){console.log("hoverDiv($thisitem)");var i=o.width()/2,a=o.height()/2,n=o.width(),s=o.height();o.on({mousemove:function(e){var t=o.offset();i=Math.min(e.pageX-t.left,n),a=Math.min(e.pageY-t.top,s),i<0&&(i=0),a<0&&(a=0),console.log("hoverDiv($thisitem)")}});var e=o.find(".inner-follow"),t=0,r=0;setInterval(function(){t+=i-t,r+=a-r,e.css({left:t,top:r})},10)}function images(e){console.log("images loaded applied here");var t=e.find("img");t.css("backgroun","red"),t.each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function introbanner(e){console.log("images loaded applied here"),e.find("img").each(function(){console.log("each 'intro banner block image '");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function slideshow(a){$.getScript("https://npmcdn.com/flickity@2/dist/flickity.pkgd.js",function(e,t,o){console.log(" hello function slideshow($block)");var i=a.find(".slideshow-carousel");images(i),i.flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,freeScroll:!1,wrapAround:!0,arrowShape:{x0:20,x1:50,y1:50,x2:60,y2:50,x3:30}})})}function map(e){var t;console.log("function map($block) - ONE"),0<$("#g-map").length&&(t=0,window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyBUXYryE2krCQ7nIvVcXcFzWEPY0cEcXbE&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},$(window).bind("gMapsLoaded",function(){map=new google.maps.Map(document.getElementById("g-map"),{center:{lat:51.5198038,lng:-.1228228999999601},zoom:15,panControl:!1,zoomControl:!1,draggable:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!0,styles:[{stylers:[{saturation:"-90"}]}]});var e=themeurl+"/assets/svg/map_marker_svg_40px.svg?i="+t++;new google.maps.Marker({position:{lat:51.5198038,lng:-.1228228999999601},map:map,optimized:!1,icon:e})}),window.loadGoogleMaps())}function blocks(){0<$(".intro-banner-block").length&&$(".intro-banner-block").each(function(){console.log("each .intro-banner-block"),introbanner($(this))}),0<$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").length&&$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").each(function(){console.log("each .image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block"),images($(this))}),0<$(".slideshow-block").length&&$(".slideshow-block").each(function(){console.log("if slideshow-block"),slideshow($(this))}),0<$(".contact-block").length&&(console.log("if contact block"),$(".contact-block").each(function(){map($(this))})),$(window).scroll(function(){fade()})}function init$1(){$(".acf-image-edit");var o,e=$(".dev-layout-grid-toggle");Packery.prototype.getShiftPositions=function(t){t=t||"data-item-id";var o=this;return this.items.map(function(e){return{attr:e.element.getAttribute(t),x:e.rect.x/o.packer.width}})},Packery.prototype.initShiftLayout=function(e,a){if(console.log("hello here"+e),e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void this.layout()}a=a||"data-item-id",this._resetLayout(),this.items=e.map(function(e){var t="["+a+'="'+e.attr+'"]',o=this.element.querySelector(t),i=this.getItem(o);return i.rect.x=e.x*this.packer.width,i},this),this.shiftLayout()}else this.layout()},$("form#grid").submit(function(e){e.preventDefault();var t=$(this),o=t.attr("action"),i=t.attr("method"),a=t.serializeArray(),n=$("#modalResponse");return $("#ag_wysiwyg_editor").length&&"undefined"!=typeof tinyMCE&&a.push({name:"fields[ag_wysiwyg_editor]",value:tinyMCE.get("ag_wysiwyg_editor").getContent()}),$.ajax({url:o,method:i,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",WP_settings.nonce)},data:a,dataType:"json"}).always(function(e){n.modal("show"),$(".response-message-wrap").addClass("response-message-active"),setTimeout(function(){$(".response-message-wrap").removeClass("response-message-active")},1e3)}),!1});var w=function(){var e=$(".repeater .remove-row");1==$(".repeater > .repeater-item").length?e.hide():e.show()};function t(b){console.log("initiate $thisgrid"+b);var C=b.imagesLoaded(function(){$("body").addClass("images-loaded");var s,e,t,o,r=!1,l=!1;function i(){var e,o,t,i,a,n=getComputedStyle(document.body,":after").content;'"widescreen"'!==n||r?'"default"'===n&&r&&(C.packery("destroy"),r=!1,console.log("Hello breakpoint - mobile?"),$("body").hasClass("dev-layout-grid-on")?(s=!0,$("body").removeClass("dev-layout-grid-on")):s=!1):(C.packery({itemSelector:".layout-grid-item",columnWidth:".grid-sizer",percentPosition:!0,isHorizontal:!0,initLayout:!1}),t=(o=C.closest(".grid-layer").find(".coordinates")).attr("value"),0==l&&(l=!0,e=C.find(".layout-grid-item"),t=(o=C.closest(".grid-layer").find(".coordinates")).attr("value"),i=C.closest(".grid-layer").find(".repeater-wrap .add-row"),e.each(function(e){console.log("each grid item - iniitally");var a=$(this),n=a.find("img:not(.place-holder)"),t=n.attr("src"),o=a.find("img.place-holder"),i=a.attr("data-item-id"),s=a.find(".image-ui"),r=s.parent("label"),l=s.attr("id");0<n.length?(gridImageOrientation(a,void 0,void 0),itemEdit(a,C),imageRemove(i),convertImgToDataURLviaCanvas(t,function(e){o.attr("src",e)})):(gridImageOrientation(a,void 0,void 0),itemEdit(a,C),imageRemove(i)),$("#"+l).iconselectmenu({appendTo:r,width:"auto",style:"dropdown",change:function(e,t){console.log("change"+t);var o=$(t.item.element).attr("data-segment-image"),i=$(t.item.element).attr("data-segment-type");n.attr("src",o),n.attr("data-segment-type",i),updateImageObject(a,i),canvasChange()},select:function(){console.log("close this grid-item-options-toggle"),a.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar")}),i.click(function(){console.log("hello add a row");var e=$(this),t=e.closest(".grid-layer").find(".coordinates"),o=e.closest(".grid-layer").find(".repeater-item"),i=e.closest(".grid-layer").find(".repeater"),a=i.find(".repeater-item:last"),n=a.clone(),s=o.map(function(){return $(this).attr("data-item-id")}),r=Math.max.apply(Math,s)+1;$(n).insertAfter(a);var l=i.find(".repeater-item:last"),d=$(".repeater > .repeater-item").length-1,c=l.find(".image-ui"),m=c.parent("label");l.find(".ui-selectmenu-button, .ui-front").remove(),l.attr("data-item-id",r),i.find(".repeater-item:last[name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),i.find(".repeater-item:last [name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),l.find(".acf-image-edit").attr("id","acf-image-edit-"+r),l.find(".acf-image-remove").attr("id","acf-image-remove-"+r),l.attr("data-item-id-id",""+r),l.find(".input-id").attr("value",""+r),l.find(".image-ui").attr("id","acf-post-object-"+r);var g,u,p=c.attr("id"),h=l.find("img:not(.place-holder)");$("#"+p).iconselectmenu({appendTo:m,width:"auto",style:"dropdown",change:function(e,t){var o=$(t.item.element).attr("data-segment-image"),i=$(t.item.element).attr("data-segment-type");h.attr("src",o),h.attr("data-segment-type",i),updateImageObject($thisitem,i),canvasChange()},select:function(){l.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar"),g=$(n),(u=C).find(g).each(function(e,t){var o=new Draggabilly(t);u.packery("bindDraggabillyEvents",o)}),imageEdit(r),imageRemove(r),itemEdit($(n),C),C.packery("appended",$(n));var f=b.packery("getShiftPositions","data-item-id"),v=JSON.stringify(f);t.val(v),w(i),localStorage.setItem("coordinates",v);var y=document.getElementById("tester-grid-id").innerHTML;return localStorage.setItem("gridContent",y),$(n).addClass("item-added"),$("html, body").animate({scrollTop:$(n).offset().top},200),setTimeout(function(){$(n).removeClass("item-added")},600),!1}),$(document).on("click",".repeater .remove-row",function(){var e,t,o,i,a,n,s=$(".repeater > .repeater-item");return 1==s.length?s.find("input").val(""):(e=$(this).closest(".repeater-item"),t=$(this).closest(".repeater"),o=C.closest(".grid-layer").find(".coordinates"),C.packery("remove",e).packery("shiftLayout"),i=C.packery("getShiftPositions","data-item-id"),a=JSON.stringify(i),localStorage.setItem("coordinates",a),o.val(a),n=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",n),console.log("gridContent"+n),w(t)),!1})),$("body").hasClass("logged-in")?C.packery("initShiftLayout",t,"data-item-id"):(null==(a=localStorage.getItem("coordinates"))&&(a=t,console.log("initPositins"+t)),console.log("storedcoordinates - in local storage:"+a),C.packery("initShiftLayout",a,"data-item-id")),$("body").hasClass("logged-in")?(C.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);C.packery("bindDraggabillyEvents",o)}),C.on("dragItemPositioned",function(){console.log("$grid.on( 'dragItemPositioned - logged in'");var e=C.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),canvasChange(),$(".item-edit-active").length&&$(".item-edit-active").find(".grid-item-options-toggle").click()})):(console.log("not logged in"),C.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);C.packery("bindDraggabillyEvents",o)}),C.on("dragItemPositioned",function(){console.log("dragItemPositioned - not logged in"),console.log("positions"+void 0),C.packery("layout").trigger("layoutComplete");var e=C.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),localStorage.setItem("coordinates",t),canvasChange(),$(".item-edit-active").length&&$(".item-edit-active").find(".grid-item-options-toggle").click()})),$("body").hasClass("is-touch")&&console.log("ensure to have touch screen message enabled"),r=!0,console.log(s+"isEditModeActive"),!0===s&&(console.log(s),$("body").addClass("dev-layout-grid-on")),setTimeout(function(){C.packery("layout").trigger("layoutComplete")},100))}i(),$(window).on("resize",(e=i,t=200,function(){o&&clearTimeout(o),setTimeout(function(){e(),o=null},t||100)}))})}$('input[name="submission_name"]').on("change",function(){var e=o=$('input[name="submission_name"]').val();$('input[name="post_title"]').val(""+e),console.log("submissionname ="+o),console.log("posttitle ="+e)}),$("#load-image").on("click",function(){console.log("load-image click"),console.log("function captureCanvas()"),$("body").addClass("capturing-image"),setTimeout(function(){$("#canvas-wrap").has("canvas").length&&(console.log("delete exisint canvas"),$("#canvas-wrap").find("canvas").remove()),$("#export-image-wrap img").length&&(console.log("delete existing image"),$("#export-image-wrap").find("img").remove()),console.log("Window.innerWidth = "+window.innerWidth);var e=1/window.innerWidth*1e3;console.log("thescale = "+e),html2canvas(document.querySelector(".grid-layer"),{scale:e,scrollY:-1*window.pageYOffset}).then(function(e){var t=document.createElement("img");t.src=e.toDataURL(),getCanvas=e,document.querySelector("#export-image-wrap").appendChild(t),$("body").find("input[name='image-data_hidden_field']").val(t.src),$("body").addClass("submission-previewed"),$(".export-options").removeClass("grid-md-9").addClass("grid-md-6"),$("body").removeClass("capturing-image"),$("body").removeClass("update-available")})},1)}),$("#download-image").on("click",function(){var e=getCanvas.toDataURL("image/png");console.log("submissionname on download ="+o);var t=e.replace(/^data:image\/png/,"data:application/octet-stream");$("#download-image").attr("download",o+"'s Freeling Street.png").attr("href",t)}),$(".dev-layout-grid-toggle").click(function(){$("body").hasClass("dev-layout-grid-on")?($("body").removeClass("dev-layout-grid-on"),$("#size-wrap").removeClass("grid-container")):($("body").addClass("dev-layout-grid-on"),$("#size-wrap").addClass("grid-container"),console.log("scrolling to the top of grid"),$("html, body").animate({scrollTop:+$(".grid-layer").offset().top},"slow"))}),$(".grid").each(function(){var e;$thisgrid=$(this),$("body").hasClass("logged-in")?(w($thisgrid),t($thisgrid)):null===localStorage.getItem("gridContent")?(w($thisgrid),t($thisgrid),document.getElementById("tester-grid-id").innerHTML,e=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",e),console.log("gridContent"+e)):(document.getElementById("tester-grid-id").innerHTML,e=localStorage.getItem("gridContent"),$("#tester-grid-id").empty(),$("#tester-grid-id").append(e),$("#tester-grid-id").find(".ui-selectmenu-button").remove(),$("#tester-grid-id").find(".ui-selectmenu-menu.ui-front").remove(),w($thisgrid),t($thisgrid),$("#clear-local-storage").click(function(){console.log("clearing local storage"),localStorage.removeItem("gridContent"),localStorage.removeItem("coordinates"),location.reload()}))}),hoverDiv(e),detectAttrChange()}function canvasChange(){console.log("canvasChange()"),$("body").hasClass("submission-previewed")&&($("body").addClass("update-available"),$("a#load-image").text("Update Preview Image"))}function itemEdit(s,r){var l=s,e=s.find(".grid-item-options-toggle").not(".grid-item-options-toggle-rotate"),t=s.find(".grid-item-options-toggle-rotate"),d=(l.find("input.input-id").val(),l.find("input.input-width").val(),l.find("input.input-height").val(),l.find("input.input-z-index").val(),l.find("input.input-rotate").val(),l.find("input.input-image-position-x").val()+"%"),c=l.find("input.input-image-position-y").val()+"%",m=(l.find("input.input-image-scale").val(),0),o=l.find("input");$postfield=l.find(".post-object select"),e.click(function(){console.log("click; activate edit item"),l.hasClass("item-edit-active")?(l.removeClass("item-edit-active"),$("body").removeClass("edit-active")):($(".layout-grid-item.repeater-item").removeClass("item-edit-active"),l.addClass("item-edit-active"),$("body").addClass("edit-active"),l.find(".ui-button").click())}),t.click(function(){var e,t=l.find("input.input-rotate"),o=Number(t.val());e=270==o?0:Number(o+90),t.val(e),console.log("thisnewrotatevalue"+e),l.find(".inner-grid-item").css("transform","rotate("+e+"deg)"),l.find(".grid-item-options-toggle-rotate .rotate").css("transform","rotate("+e+"deg)"),l.find("input.input-rotate").val(e);var i=document.getElementById("tester-grid-id").innerHTML;localStorage.setItem("gridContent",i),canvasChange()}),o.on("input",function(){var t,e,o,i=$(this),a=i.val(),n=i.attr("data-input-type");"image_rotate"==n?(console.log("rotate input on pinput change"),applyrotatevalue=a+"deg",i.attr("value",a),console.log("newvalue"+a),l.find(".inner-grid-item").css("transform","rotate("+applyrotatevalue+")")):"input-id"==n||("input-width"==n?(t="grid-item-width",e="grid-item-width-"+a/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),r.packery("layout"),gridImageOrientation(s,void 0,void 0)):"input-height"==n?(t="grid-item-height",e="grid-item-height-"+a/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),r.packery("layout"),gridImageOrientation(s,void 0,void 0)):"input-z-index"==n?(t="item-z-index",e="item-z-index-"+a,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e)):"input-image-position-x"==n?(d=a+"%",i.attr("value",a),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-position-y"==n?(c=a+"%",i.attr("value",a),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-scale"==n&&(m=a/100,i.attr("value",a),l.find(".inner-grid-item .image-wrap img").css("transform","scale("+m+")")))});var i=document.getElementById("tester-grid-id").innerHTML;localStorage.setItem("gridContent",i)}function imageEdit(e){console.log("imageedit function itemid"+e);var t=$("#acf-image-edit-".concat(e));console.log("$thisimagethumb"+t),t.click(function(){var n,e=$(this),t=(e.attr("id"),e.closest(".layout-grid-item").attr("data-item-id")),s=$(".layout-grid-item[data-item-id=".concat(t,"]")).find(".acf-image");if($.isFunction(wp.media))return n?(console.log("mediaImage"),void n.open()):((n=wp.media({library:{type:"image"},multiple:!1})).on("select",function(){console.log("mediaImage.on( 'select', function()");var e=n.state().get("selection").first().toJSON();$(".media-modal-close").trigger("click");var t=s.closest(".layout-grid-item"),o=e.width,i=e.height,a=e.url;s.val(e.id),t.find("img").remove(),t.find(".image-wrap").append($('<img src="'+e.url+'"">')),t.find(".image-wrap").append($('<img class="place-holder" src="'+e.url+'"">')),gridImageOrientation(t,o,i),convertImgToDataURLviaCanvas(a,function(e){t.find("img.place-holder").attr("src",e)}),$("html, body").animate({scrollTop:t.offset().top},200)}),n.open(),!1);console.log("! $.isFunction( wp.media )")})}function imageRemove(e){$("#acf-image-remove-".concat(e)).click(function(){var e=$(this).closest(".layout-grid-item").attr("data-item-id"),t=$(".layout-grid-item[data-item-id=".concat(e,"]"));return t.find("img").remove(),t.find("input.acf-image").val(""),!1})}function convertImgToDataURLviaCanvas(e,i){var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e,t=document.createElement("CANVAS"),o=t.getContext("2d");t.height=this.height,t.width=this.width,o.fillStyle="#000",o.fillRect(0,0,t.width,t.height),e=t.toDataURL(),i(e),t=null},t.src=e}function updateImageObject(e,t){for(var o=e.attr("class").split(" "),i=0;i<o.length;i++)-1!=o[i].indexOf("item-z-index")&&e.removeClass(o[i]);"tree"==t?(e.attr("data-item-z-index","2"),e.find("[data-input-type='input-z-index']").val("2"),e.addClass("item-z-index-2")):"normal"==t&&(e.attr("data-item-z-index","1"),e.find("[data-input-type='input-z-index']").val("1"),e.addClass("item-z-index-1"))}function gridImageOrientation(e,t,o){var i=e,a=i.width(),n=i.height(),s=a/n,r=i.find("img");null==(t=t)&&(t=r.width(),o=r.height());var l=t/o;i.attr("item-ratio",""),r.attr("itemimage-ratio",""),i.attr("item-ratio",s),r.attr("itemimage-ratio",l),i.removeClass("square-item image-larger-than-item vertical-item horizontal-item ratio-equal image-larger-than-item"),r.removeClass("square-image vertical-image horizontal-image"),a==n?(i.addClass("square-item"),s==l||l<s&&i.addClass("image-larger-than-item")):a<n?i.addClass("vertical-item"):n<a&&(i.addClass("horizontal-item"),s==l||l<s&&i.addClass("image-larger-than-item")),t==o?r.addClass("square-image"):t<o?r.addClass("vertical-image"):o<t&&r.addClass("horizontal-image")}function init$2(){console.log("overview js functions"),0<$(".project-overview").length&&$("ul.sections li a").mouseenter(function(){var e=$(this).parent("li"),t=e.attr("data-section-title"),o=$('ul.sections li[data-section-title="'+t+'"]').next(".line"),i=$('ul.sections li[data-section-title="'+t+'"]').prev(".line");if(console.log("'ul.sections li  hover"),console.log("thissections = "+t),!e.hasClass("section-is-active"))return $("ul.sections li").removeClass("section-is-active"),$("ul.sections li").removeClass("page-is-active"),e.addClass("section-is-active"),i.addClass("section-is-active"),o.addClass("section-is-active"),void $('ul.sections li[data-section-title="'+t+'"]').addClass("section-is-active")})}function init(){var a=!1;barba.init({views:[{namespace:"page",afterEnter:function(){console.log("afterEnter: namespace = page"),opacity(),domReady(blocks),domReady(init$2)}},{namespace:"archive",afterEnter:function(){console.log("afterEnter: namespace = archive"),imageopacity(),opacity()}},{namespace:"single-post",afterEnter:function(){console.log("afterEnter: namespace = single-post"),imageopacity(),opacity(),domReady(blocks)}},{namespace:"layout-grid",afterEnter:function(){console.log("afterEnter: namespace = layout grid"),opacity(),domReady(init$1),domReady(blocks)}},{namespace:"front-page",afterEnter:function(){console.log("afterEnter: namespace = front-page"),imageopacity(),opacity(),domReady(blocks)}}]}),barba.hooks.beforeLeave(function(e){console.log("beforeleave"),introanimationdone=!0,a=!$("body").hasClass("is-not-touch"),devon=!!$("body").hasClass("dev-grid-on")}),barba.hooks.afterLeave(function(e){console.log("afterleave"),$("html, body").animate({scrollTop:$("body").offset().top},10);var t=e.next.html,o=t.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",t),i=$(o).filter("notbody").attr("class");$("body").attr("class",i),e.next.url.path&&(menuClasses(e,"current-menu-item"),menuClasses(e,"current_page_item"),menuClasses(e,"current-menu-ancestor"),menuClasses(e,"current-menu-parent"),menuClasses(e,"current_page_ancestor")),1==devon?$("body").addClass("dev-grid-on"):$("body").removeClass("dev-grid-on"),1==a?(console.log("apply touch"),$("body").addClass("is-touch"),$("body").removeClass("is-not-touch")):($("body").addClass("is-not-touch"),$("body").removeClass("is-touch")),1==introanimationdone?(console.log("introanimation not needed anymore"),$("body").addClass("animation-done"),$("body").addClass("animation-hide"),$("body").removeClass("animation-fix")):console.log("introanimationdone == false"),removeCommentBubble(),menuPositioner(),orientation()})}function siteLoad(){console.log("siteLoad"),0==introanimationdone?(console.log("(introanimationdone == false)"),$(".fade-item").css("opacity",0),fade(),topAnimation(),$("body").removeClass("site-loading"),$("body").addClass("animation-done"),introanimationdone=!0):(console.log("(introanimationdone == true)"),$(".fade-item").css("opacity",0),fade(),$("body").removeClass("site-loading"))}function init$3(){function e(){console.log("inithreadroom - shoul be once, intuyll we destroy it"),$("#header-nav-area").length&&(console.log("#header-nav-area exists"),$("#header-nav-area").headroom({offset:0,tolerance:5,classes:{initial:"animated",pinned:"pinned",unpinned:"unpinned",frozen:"frozen"},onPin:function(){console.log("headroom onPin function");SetSubmenuHeight("onPin")},onUnpin:function(){console.log("headroom onUnPin function"),SetSubmenuHeight("onUnpin")}}))}if(0<$("#toggle-item").length)return console.log("if #toggle-item"),0<$("#header-nav-area").length&&$("#header-nav-area").mouseenter(function(){if(console.log("#header-nav-area hover"),!$("body").hasClass("nav-on"))return console.log("nav not on mouseenter"),void forceheadroompin()}),$("#toggle-item").click(function(){console.log("click"),$("body").not("nav-off")&&$("body").not("nav-on")?$("body").hasClass("nav-on")?(console.log("turn nav off"),e(),$("body").addClass("nav-off"),$("body").removeClass("nav-on")):(console.log("turn nav on"),destroyheadroom(),$("body").addClass("nav-on"),$("body").removeClass("nav-off"),$("li.menu-item a").click(function(){console.log("$mainmenuitmes.click(function()"),$("body").addClass("nav-off"),$("body").removeClass("nav-on"),e()})):(destroyheadroom(),$("body").addClass("nav-on"),console.log("not either"))}),e(),console.log("detectopofmainfixer()"),void $(window).scroll(function(){var e=$(this).scrollTop();if($intro=$("#intro-area"),introheight=$intro.height(),reached=e-introheight,0<=reached){if(!$("body").hasClass("main-reached"))return $("body").addClass("main-reached"),void setTimeout(function(){$("body, html").scrollTop(0)},10);if(!$("body").hasClass("nav-on"))return void unfreezeheadroom()}else if(reached<0&&!$("body").hasClass("nav-on"))return void freezeheadroom()})}var inpapp={init:function(){console.log("init"),devGrid(),SetAppHeight(),orientation(),detectTouch(),init(),init$3(),menuPositioner(),siteLoad()}};domReady(inpapp.init);
//# sourceMappingURL=app.min.js.map
