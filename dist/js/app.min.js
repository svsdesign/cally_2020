/**
 * cally_2020 - Cultivating Cally WordPress Theme
 * @author         Simon van Stipriaan <simon@svsdesign.co.uk>
 * @build          Wed, Sep 2, 2020 8:32 PM ET
 * @release        14e820a1b8e01cb7fd7963896d0f8e078dd92169 [master]
 * @copyright      Copyright (c) 2020, svsdesign
 * @version        v1.0.0
 * @link           https://cultivatingcally.com
 */
function domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function detectTouch(){if(console.log("detectTouch();"),"ontouchstart"in window){$("body").removeClass("is-not-touch"),$("body").addClass("is-touch");try{for(var e in document.styleSheets){var t=document.styleSheets[e];if(t.rules)for(var a=t.rules.length-1;0<=a;a--)t.rules[a].selectorText&&t.rules[a].selectorText.match(":hover")&&t.deleteRule(a)}}catch(e){}}else $("body").removeClass("is-touch"),$("body").addClass("is-not-touch")}function SetAppHeight(){function e(){document.documentElement.style.setProperty("--site-height","".concat(window.innerHeight,"px"))}window.addEventListener("resize",e),e()}function detectAttrChange(){console.log("detectAttrChange()"),$(".wpuf-submit").on("remove",function(){$("body").addClass("form-submitted"),setTimeout(function(){$(".wpuf-success").css("display","none")},6e3)})}function orientation(){var e=$(window).width();$(window).height()<e?($("body").addClass("horizontal"),$("body").removeClass("vertical")):($("body").removeClass("horizontal"),$("body").addClass("vertical"))}function opacity(){$("body").imagesLoaded(function(){setTimeout(function(){$("body").addClass("images-loaded")},200)})}function imageopacity(){$("body").find("img.apply-image-load").each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function devGrid(){var e,t;0<$(".dev-grid").length&&($("#intro-area").height(),e=$("#main.wrapper").height(),t=$(".dev-base-lines"),pxlineheight="10",vwlineheight="1vw",baselinecount=e/pxlineheight,t.css("height",e),$(".dev-base-lines .base-line").remove(),$(".dev-grid-toggle").click(function(){$("body").hasClass("dev-grid-on")?$("body").removeClass("dev-grid-on"):$("body").addClass("dev-grid-on")}))}function menuPositioner(){var e=$("#positioner");$menu=$("#menu-header-navigation"),$menuitems=$menu.children(),numberofmenuitems=$menuitems.length,$activemenuitem=$menu.children().filter(".current-menu-item"),positionerwidth=100/numberofmenuitems,$menuitems.each(function(){var e=$(this).index()+1;$(this).attr("menu-number",e)}),activemenuitemnumber=$activemenuitem.attr("menu-number"),applymarginleft=activemenuitemnumber*positionerwidth-positionerwidth+"%",e.css("width",positionerwidth+"%"),e.css("margin-left",applymarginleft+"%"),e.animate({marginLeft:applymarginleft},500)}function menuClasses(e,t){$(".menu-item."+t).each(function(){$(this).removeClass(t)}),$('.menu-item > a[href$="'.concat(e.next.url.path,'"]')).closest(".menu-item").each(function(){$(this).addClass(t)})}function topAnimation(){setTimeout(function(){var e;$("body").removeClass("animation-fix"),$("body").data("move-to")?(e=$("body").data("move-to"),$("html, body").animate({scrollTop:$("#"+e).offset().top+1},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))}),$("body").removeAttr("data-move-to")})):$("html, body").animate({scrollTop:$("#main").offset().top+0},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))})})},200)}function fade(){var a=.25*$(window).innerHeight(),o=Math.round(1/a*1e4)/1e4;$(".th-block").each(function(){var e=$(this).offset().top,t=$(window).scrollTop()+.8*$(window).innerHeight();e<t?e<t-a?$(this).css({transition:"opacity 0.1s linear",opacity:1}):$(this).css({transition:"opacity 0.25s linear",opacity:(t-e)*o}):$(this).css("opacity",.1)}),$(window).scrollTop()+$(window).height()==$(document).height()&&$(".th-block").css({transition:"opacity 0.1s linear",opacity:1})}function destroyheadroom(){$("#header-nav-area").headroom("destroy")}function freezeheadroom(){$("#header-nav-area").headroom("freeze")}function unfreezeheadroom(){$("#header-nav-area").headroom("unfreeze")}function forceheadroompin(){$("#header-nav-area").hasClass("unpinned")&&($("#header-nav-area").removeClass("unpinned"),$("#header-nav-area").addClass("pinned"))}function removeCommentBubble(){$("#wpd-bubble-wrapper").length&&$("#wpd-bubble-wrapper").remove()}function images(e){console.log("images loaded applied here");var t=e.find("img");t.css("backgroun","red"),t.each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function slideshow(i){$.getScript("https://npmcdn.com/flickity@2/dist/flickity.pkgd.js",function(e,t,a){console.log(" hello function slideshow($block)");var o=i.find(".slideshow-carousel");images(o),o.flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,freeScroll:!1,wrapAround:!0,arrowShape:{x0:20,x1:50,y1:50,x2:60,y2:50,x3:30}})})}function map(e){var t;console.log("function map($block) - ONE"),0<$("#g-map").length&&(t=0,window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyBUXYryE2krCQ7nIvVcXcFzWEPY0cEcXbE&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},$(window).bind("gMapsLoaded",function(){map=new google.maps.Map(document.getElementById("g-map"),{center:{lat:51.5198038,lng:-.1228228999999601},zoom:15,panControl:!1,zoomControl:!1,draggable:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!0,styles:[{stylers:[{saturation:"-90"}]}]});var e=themeurl+"/assets/svg/map_marker_svg_40px.svg?i="+t++;new google.maps.Marker({position:{lat:51.5198038,lng:-.1228228999999601},map:map,optimized:!1,icon:e})}),window.loadGoogleMaps())}function blocks(){0<$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").length&&$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").each(function(){console.log("each .image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block"),images($(this))}),0<$(".slideshow-block").length&&$(".slideshow-block").each(function(){console.log("if slideshow-block"),slideshow($(this))}),0<$(".contact-block").length&&(console.log("if contact block"),$(".contact-block").each(function(){map($(this))})),$(window).scroll(function(){fade()})}function init$1(){Packery.prototype.getShiftPositions=function(t){t=t||"data-item-id";var a=this;return this.items.map(function(e){return{attr:e.element.getAttribute(t),x:e.rect.x/a.packer.width}})},Packery.prototype.initShiftLayout=function(e,i){if(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void this.layout()}i=i||"data-item-id",this._resetLayout(),this.items=e.map(function(e){var t="["+i+'="'+e.attr+'"]',a=this.element.querySelector(t),o=this.getItem(a);return o.rect.x=e.x*this.packer.width,o},this),this.shiftLayout()}else this.layout()},$("form#grid").submit(function(e){e.preventDefault();var t=$(this),a=t.attr("action"),o=t.attr("method"),i=t.serializeArray(),n=$("#modalResponse");return $("#ag_wysiwyg_editor").length&&"undefined"!=typeof tinyMCE&&i.push({name:"fields[ag_wysiwyg_editor]",value:tinyMCE.get("ag_wysiwyg_editor").getContent()}),$.ajax({url:a,method:o,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",WP_settings.nonce)},data:i,dataType:"json"}).always(function(e){n.modal("show"),$(".response-message-wrap").addClass("response-message-active"),setTimeout(function(){$(".response-message-wrap").removeClass("response-message-active")},1e3)}),!1});$(".acf-image-edit");var a,w=function(){var e=$(".repeater .remove-row");1==$(".repeater > .repeater-item").length?e.hide():e.show()};function t(b){console.log("initiate $thisgrid"+b);var C=b.imagesLoaded(function(){$("body").addClass("images-loaded");var r,e,t,a,s=!1,l=!1;function o(){var e,a,t,o,i,n=getComputedStyle(document.body,":after").content;'"widescreen"'!==n||s?'"default"'===n&&s&&(C.packery("destroy"),s=!1,console.log("Hellow vbreakpoint - mobile?"),$("body").hasClass("dev-layout-grid-on")?(r=!0,$("body").removeClass("dev-layout-grid-on")):r=!1):(C.packery({itemSelector:".layout-grid-item",columnWidth:".grid-sizer",percentPosition:!0,isHorizontal:!0,initLayout:!1}),t=(a=C.closest(".grid-layer").find(".coordinates")).attr("value"),0==l&&(l=!0,e=C.find(".layout-grid-item"),t=(a=C.closest(".grid-layer").find(".coordinates")).attr("value"),o=C.closest(".grid-layer").find(".repeater-wrap .add-row"),e.each(function(e){console.log("each grid item - iniitally");var i=$(this),n=i.find("img:not(.place-holder)"),t=n.attr("src"),a=i.find("img.place-holder"),o=i.attr("data-item-id"),r=i.find(".image-ui"),s=r.parent("label"),l=r.attr("id");0<n.length?(gridImageOrientation(i,void 0,void 0),itemEdit(i,C),imageRemove(o),convertImgToDataURLviaCanvas(t,function(e){console.log(" $griditems. each base64_data"),a.attr("src",e)})):(gridImageOrientation(i,void 0,void 0),itemEdit(i,C),imageRemove(o)),$("#"+l).iconselectmenu({appendTo:s,width:"auto",style:"dropdown",change:function(e,t){console.log("change"+t);var a=$(t.item.element).attr("data-segment-image"),o=$(t.item.element).attr("data-segment-type");n.attr("src",a),n.attr("data-segment-type",o),updateImageObject(i,o),canvasChange()},select:function(){console.log("close this grid-item-options-toggle"),i.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar")}),o.click(function(){console.log("hello add a row");var e=$(this),t=e.closest(".grid-layer").find(".coordinates"),a=e.closest(".grid-layer").find(".repeater-item"),o=e.closest(".grid-layer").find(".repeater"),i=o.find(".repeater-item:last"),n=i.clone(),r=a.map(function(){return $(this).attr("data-item-id")}),s=Math.max.apply(Math,r)+1;$(n).insertAfter(i);var l=o.find(".repeater-item:last"),d=$(".repeater > .repeater-item").length-1,c=l.find(".image-ui"),m=c.parent("label");l.find(".ui-selectmenu-button, .ui-front").remove(),l.attr("data-item-id",s),o.find(".repeater-item:last[name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),o.find(".repeater-item:last [name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),l.find(".acf-image-edit").attr("id","acf-image-edit-"+s),l.find(".acf-image-remove").attr("id","acf-image-remove-"+s),l.attr("data-item-id-id",""+s),l.find(".input-id").attr("value",""+s),l.find(".image-ui").attr("id","acf-post-object-"+s);var g,u,p=c.attr("id"),f=l.find("img:not(.place-holder)");console.log("$thisUiId"+p),$("#"+p).iconselectmenu({appendTo:m,width:"auto",style:"dropdown",change:function(e,t){console.log("change"+t);var a=$(t.item.element).attr("data-segment-image"),o=$(t.item.element).attr("data-segment-type");f.attr("src",a),f.attr("data-segment-type",o),updateImageObject($thisitem,o),canvasChange()},select:function(){console.log("close this grid-item-options-toggle"),l.find(".grid-item-options-toggle").click()}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar"),g=$(n),(u=C).find(g).each(function(e,t){var a=new Draggabilly(t);u.packery("bindDraggabillyEvents",a)}),imageEdit(s),imageRemove(s),itemEdit($(n),C),C.packery("appended",$(n));var h=b.packery("getShiftPositions","data-item-id"),v=JSON.stringify(h);t.val(v),w(o),localStorage.setItem("coordinates",v);var y=document.getElementById("tester-grid-id").innerHTML;return localStorage.setItem("gridContent",y),$(n).addClass("item-added"),$("html, body").animate({scrollTop:$(n).offset().top},200),setTimeout(function(){$(n).removeClass("item-added")},600),!1}),$(document).on("click",".repeater .remove-row",function(){var e,t,a,o,i,n,r=$(".repeater > .repeater-item");return 1==r.length?r.find("input").val(""):(e=$(this).closest(".repeater-item"),t=$(this).closest(".repeater"),a=C.closest(".grid-layer").find(".coordinates"),C.packery("remove",e).packery("shiftLayout"),o=C.packery("getShiftPositions","data-item-id"),i=JSON.stringify(o),localStorage.setItem("coordinates",i),a.val(i),n=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",n),console.log("gridContent"+n),w(t)),!1})),$("body").hasClass("logged-in")?(C.packery("initShiftLayout",t,"data-item-id"),console.log("storedcoordinates"+t)):(i=localStorage.getItem("coordinates"),C.packery("initShiftLayout",i,"data-item-id")),$("body").hasClass("logged-in")?(C.find(".layout-grid-item").each(function(e,t){var a=new Draggabilly(t);C.packery("bindDraggabillyEvents",a)}),C.on("dragItemPositioned",function(){console.log("$grid.on( 'dragItemPositioned'");var e=C.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);a.val(t),a.attr("value",t),canvasChange()})):(console.log("not logged in"),C.find(".layout-grid-item").each(function(e,t){var a=new Draggabilly(t);C.packery("bindDraggabillyEvents",a)}),C.on("dragItemPositioned",function(){var e=C.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);a.val(t),a.attr("value",t),localStorage.setItem("coordinates",t),canvasChange()})),$("body").hasClass("is-touch")&&console.log("ensure to have touch screen message enabled"),s=!0,console.log(r+"isEditModeActive"),!0===r&&(console.log(r),$("body").addClass("dev-layout-grid-on")),setTimeout(function(){C.packery("layout").trigger("layoutComplete")},100))}o(),$(window).on("resize",(e=o,t=200,function(){a&&clearTimeout(a),setTimeout(function(){e(),a=null},t||100)}))})}$('input[name="submission_name"]').on("change",function(){var e=a=$('input[name="submission_name"]').val();$('input[name="post_title"]').val(""+e),console.log("submissionname ="+a),console.log("posttitle ="+e)}),$("#load-image").on("click",function(){console.log("load-image click"),console.log("function captureCanvas()"),$("body").addClass("capturing-image"),setTimeout(function(){$("#canvas-wrap").has("canvas").length&&(console.log("delete exisint canvas"),$("#canvas-wrap").find("canvas").remove()),$("#export-image-wrap img").length&&(console.log("delete existing image"),$("#export-image-wrap").find("img").remove()),html2canvas(document.querySelector(".grid-layer"),{scale:2,scrollY:-1*window.pageYOffset}).then(function(e){var t=document.createElement("img");t.src=e.toDataURL(),getCanvas=e,document.querySelector("#export-image-wrap").appendChild(t),$("body").find("input[name='image-data_hidden_field']").val(t.src),$("body").addClass("submission-previewed"),$(".export-options").removeClass("grid-md-9").addClass("grid-md-6"),$("body").removeClass("capturing-image"),$("body").removeClass("update-available")})},1)}),$("#download-image").on("click",function(){var e=getCanvas.toDataURL("image/png");console.log("submissionname on download ="+a);var t=e.replace(/^data:image\/png/,"data:application/octet-stream");$("#download-image").attr("download",a+"'s Freeling Street.png").attr("href",t)}),$(".dev-layout-grid-toggle").click(function(){$("body").hasClass("dev-layout-grid-on")?$("body").removeClass("dev-layout-grid-on"):($("body").addClass("dev-layout-grid-on"),console.log("scrolling to the top of grid"),$("html, body").animate({scrollTop:+$(".grid-layer").offset().top},"slow"))}),$(".clear-local-storage").click(function(){console.log("clearing local storage"),localStorage.removeItem("gridContent"),localStorage.removeItem("coordinates")}),$(".grid").each(function(){var e;$thisgrid=$(this),$("body").hasClass("logged-in")?(w($thisgrid),t($thisgrid)):null===localStorage.getItem("gridContent")?(w($thisgrid),t($thisgrid),e=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",e),console.log("gridContent"+e)):(console.log("HAS local storage gridContent"+e),e=localStorage.getItem("gridContent"),$("#tester-grid-id").empty(),$("#tester-grid-id").append(e),w($thisgrid),t($thisgrid))}),detectAttrChange()}function canvasChange(){console.log("canvasChange()"),$("body").hasClass("submission-previewed")&&($("body").addClass("update-available"),$("a#load-image").text("Update Preview Image"))}function itemEdit(r,s){var l=r,e=r.find(".grid-item-options-toggle").not(".grid-item-options-toggle-rotate"),t=r.find(".grid-item-options-toggle-rotate"),d=(l.find("input.input-id").val(),l.find("input.input-width").val(),l.find("input.input-height").val(),l.find("input.input-z-index").val(),l.find("input.input-rotate").val(),l.find("input.input-image-position-x").val()+"%"),c=l.find("input.input-image-position-y").val()+"%",m=(l.find("input.input-image-scale").val(),0),a=l.find("input");$postfield=l.find(".post-object select"),e.click(function(){console.log("click; activate edit item"),l.hasClass("item-edit-active")?l.removeClass("item-edit-active"):($(".layout-grid-item.repeater-item").removeClass("item-edit-active"),l.addClass("item-edit-active"),l.find(".ui-button").click())}),t.click(function(){var e,t=l.find("input.input-rotate"),a=Number(t.val());e=270==a?0:Number(a+90),t.val(e),console.log("thisnewrotatevalue"+e),l.find(".inner-grid-item").css("transform","rotate("+e+"deg)"),l.find(".grid-item-options-toggle-rotate .rotate").css("transform","rotate("+e+"deg)"),l.find("input.input-rotate").val(e),canvasChange()}),a.on("input",function(){var t,e,a,o=$(this),i=o.val(),n=o.attr("data-input-type");"image_rotate"==n?(console.log("rotate input on pinput change"),applyrotatevalue=i+"deg",o.attr("value",i),console.log("newvalue"+i),l.find(".inner-grid-item").css("transform","rotate("+applyrotatevalue+")")):"input-id"==n||("input-width"==n?(t="grid-item-width",e="grid-item-width-"+i/25,a=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",a.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-height"==n?(t="grid-item-height",e="grid-item-height-"+i/25,a=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",a.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-z-index"==n?(t="item-z-index",e="item-z-index-"+i,a=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",a.join(" ").trim()),l.addClass(e)):"input-image-position-x"==n?(d=i+"%",o.attr("value",i),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-position-y"==n?(c=i+"%",o.attr("value",i),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-scale"==n&&(m=i/100,o.attr("value",i),l.find(".inner-grid-item .image-wrap img").css("transform","scale("+m+")")))})}function imageEdit(e){console.log("imageedit function itemid"+e);var t=$("#acf-image-edit-".concat(e));console.log("$thisimagethumb"+t),t.click(function(){var n,e=$(this),t=(e.attr("id"),e.closest(".layout-grid-item").attr("data-item-id")),r=$(".layout-grid-item[data-item-id=".concat(t,"]")).find(".acf-image");if($.isFunction(wp.media))return n?(console.log("mediaImage"),void n.open()):((n=wp.media({library:{type:"image"},multiple:!1})).on("select",function(){console.log("mediaImage.on( 'select', function()");var e=n.state().get("selection").first().toJSON();$(".media-modal-close").trigger("click");var t=r.closest(".layout-grid-item"),a=e.width,o=e.height,i=e.url;r.val(e.id),t.find("img").remove(),t.find(".image-wrap").append($('<img src="'+e.url+'"">')),t.find(".image-wrap").append($('<img class="place-holder" src="'+e.url+'"">')),gridImageOrientation(t,a,o),convertImgToDataURLviaCanvas(i,function(e){t.find("img.place-holder").attr("src",e)}),$("html, body").animate({scrollTop:t.offset().top},200)}),n.open(),!1);console.log("! $.isFunction( wp.media )")})}function imageRemove(e){$("#acf-image-remove-".concat(e)).click(function(){var e=$(this).closest(".layout-grid-item").attr("data-item-id"),t=$(".layout-grid-item[data-item-id=".concat(e,"]"));return t.find("img").remove(),t.find("input.acf-image").val(""),!1})}function convertImgToDataURLviaCanvas(e,o){var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e,t=document.createElement("CANVAS"),a=t.getContext("2d");t.height=this.height,t.width=this.width,a.fillStyle="#000",a.fillRect(0,0,t.width,t.height),e=t.toDataURL(),o(e),t=null},t.src=e}function updateImageObject(e,t){for(var a=e.attr("class").split(" "),o=0;o<a.length;o++)-1!=a[o].indexOf("item-z-index")&&e.removeClass(a[o]);"tree"==t?(e.attr("data-item-z-index","2"),e.find("[data-input-type='input-z-index']").val("2"),e.addClass("item-z-index-2")):"normal"==t&&(e.attr("data-item-z-index","1"),e.find("[data-input-type='input-z-index']").val("1"),e.addClass("item-z-index-1"))}function gridImageOrientation(e,t,a){var o=e,i=o.width(),n=o.height(),r=i/n,s=o.find("img");null==(t=t)&&(t=s.width(),a=s.height());var l=t/a;o.attr("item-ratio",""),s.attr("itemimage-ratio",""),o.attr("item-ratio",r),s.attr("itemimage-ratio",l),o.removeClass("square-item image-larger-than-item vertical-item horizontal-item ratio-equal image-larger-than-item"),s.removeClass("square-image vertical-image horizontal-image"),i==n?(o.addClass("square-item"),r==l||l<r&&o.addClass("image-larger-than-item")):i<n?o.addClass("vertical-item"):n<i&&(o.addClass("horizontal-item"),r==l||l<r&&o.addClass("image-larger-than-item")),t==a?s.addClass("square-image"):t<a?s.addClass("vertical-image"):a<t&&s.addClass("horizontal-image")}function init(){var i=!1;barba.init({views:[{namespace:"page",afterEnter:function(){console.log("afterEnter: namespace = page"),opacity(),domReady(blocks)}},{namespace:"archive",afterEnter:function(){console.log("afterEnter: namespace = archive"),imageopacity(),opacity()}},{namespace:"single-post",afterEnter:function(){console.log("afterEnter: namespace = single-post"),imageopacity(),opacity(),domReady(blocks)}},{namespace:"layout-grid",afterEnter:function(){console.log("afterEnter: namespace = layout grid"),opacity(),domReady(init$1),domReady(blocks)}},{namespace:"front-page",afterEnter:function(){console.log("afterEnter: namespace = front-page"),opacity()}}]}),barba.hooks.beforeLeave(function(e){console.log("beforeleave"),introanimationdone=!0,i=!$("body").hasClass("is-not-touch"),devon=!!$("body").hasClass("dev-grid-on")}),barba.hooks.afterLeave(function(e){console.log("afterleave"),$("html, body").animate({scrollTop:$("body").offset().top},10);var t=e.next.html,a=t.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",t),o=$(a).filter("notbody").attr("class");$("body").attr("class",o),e.next.url.path&&(menuClasses(e,"current-menu-item"),menuClasses(e,"current_page_item"),menuClasses(e,"current-menu-ancestor"),menuClasses(e,"current-menu-parent"),menuClasses(e,"current_page_ancestor")),1==devon?$("body").addClass("dev-grid-on"):$("body").removeClass("dev-grid-on"),1==i?(console.log("apply touch"),$("body").addClass("is-touch"),$("body").removeClass("is-not-touch")):($("body").addClass("is-not-touch"),$("body").removeClass("is-touch")),1==introanimationdone?(console.log("introanimation not needed anymore"),$("body").addClass("animation-done"),$("body").addClass("animation-hide"),$("body").removeClass("animation-fix")):console.log("introanimationdone == false"),removeCommentBubble(),menuPositioner(),orientation()})}function siteLoad(){console.log("siteLoad"),0==introanimationdone?(console.log("(introanimationdone == false)"),$(".fade-item").css("opacity",0),fade(),topAnimation(),$("body").removeClass("site-loading"),$("body").addClass("animation-done"),introanimationdone=!0):(console.log("(introanimationdone == true)"),$(".fade-item").css("opacity",0),fade(),$("body").removeClass("site-loading"))}function init$2(){function e(){console.log("inithreadroom - shoul be once, intuyll we destroy it"),$("#header-nav-area").length&&(console.log("#header-nav-area exists"),$("#header-nav-area").headroom({offset:0,tolerance:5,classes:{initial:"animated",pinned:"pinned",unpinned:"unpinned",frozen:"frozen"}}))}if(0<$("#toggle-item").length)return console.log("if #toggle-item"),0<$("#header-nav-area").length&&$("#header-nav-area").mouseenter(function(){if(console.log("#header-nav-area hover"),!$("body").hasClass("nav-on"))return console.log("nav not on mouseenter"),void forceheadroompin()}),$("#toggle-item").click(function(){console.log("click"),$("body").not("nav-off")&&$("body").not("nav-on")?$("body").hasClass("nav-on")?(console.log("turn nav off"),e(),$("body").addClass("nav-off"),$("body").removeClass("nav-on")):(console.log("turn nav on"),destroyheadroom(),$("body").addClass("nav-on"),$("body").removeClass("nav-off"),$("li.menu-item a").click(function(){console.log("$mainmenuitmes.click(function()"),$("body").addClass("nav-off"),$("body").removeClass("nav-on"),e()})):(destroyheadroom(),$("body").addClass("nav-on"),console.log("not either"))}),e(),console.log("detectopofmainfixer()"),void $(window).scroll(function(){var e=$(this).scrollTop();if($intro=$("#intro-area"),introheight=$intro.height(),reached=e-introheight,0<=reached){if(!$("body").hasClass("main-reached"))return $("body").addClass("main-reached"),void setTimeout(function(){$("body, html").scrollTop(0)},10);if(!$("body").hasClass("nav-on"))return void unfreezeheadroom()}else if(reached<0&&!$("body").hasClass("nav-on"))return void freezeheadroom()})}var inpapp={init:function(){console.log("init"),devGrid(),SetAppHeight(),orientation(),detectTouch(),init(),init$2(),menuPositioner(),siteLoad()}};domReady(inpapp.init);
//# sourceMappingURL=app.min.js.map
