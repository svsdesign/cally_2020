/**
 * cally_2020 - Cultivating Cally WordPress Theme
 * @author         Simon van Stipriaan <simon@svsdesign.co.uk>
 * @build          Fri, Aug 21, 2020 8:47 PM ET
 * @release        4dfaa25678d1f6a7ed1a2e456ddca564621ab66a [master]
 * @copyright      Copyright (c) 2020, svsdesign
 * @version        v1.0.0
 * @link           https://cultivatingcally.com
 */
function domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function detectTouch(){if(console.log("detectTouch();"),"ontouchstart"in window){$("body").removeClass("is-not-touch"),$("body").addClass("is-touch");try{for(var e in document.styleSheets){var t=document.styleSheets[e];if(t.rules)for(var o=t.rules.length-1;0<=o;o--)t.rules[o].selectorText&&t.rules[o].selectorText.match(":hover")&&t.deleteRule(o)}}catch(e){}}else $("body").removeClass("is-touch"),$("body").addClass("is-not-touch")}function SetAppHeight(){function e(){document.documentElement.style.setProperty("--site-height","".concat(window.innerHeight,"px"))}window.addEventListener("resize",e),e()}function orientation(){console.log("hello orientation function");var e=$(window).width();$(window).height()<e?($("body").addClass("horizontal"),$("body").removeClass("vertical")):($("body").removeClass("horizontal"),$("body").addClass("vertical"))}function opacity(){$("body").imagesLoaded(function(){console.log("Images have loaded"),setTimeout(function(){$("body").addClass("images-loaded")},200)})}function imageopacity(){console.log("images loaded applied here"),$("body").find("img.apply-image-load").each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function devGrid(){var e,t;0<$(".dev-grid").length&&($("#intro-area").height(),e=$("#main.wrapper").height(),t=$(".dev-base-lines"),pxlineheight="10",vwlineheight="1vw",baselinecount=e/pxlineheight,t.css("height",e),$(".dev-base-lines .base-line").remove(),$(".dev-grid-toggle").click(function(){$("body").hasClass("dev-grid-on")?$("body").removeClass("dev-grid-on"):$("body").addClass("dev-grid-on")}))}function menuPositioner(){console.log("menupositioner");var e=$("#positioner");$menu=$("#menu-header-navigation"),$menuitems=$menu.children(),numberofmenuitems=$menuitems.length,$activemenuitem=$menu.children().filter(".current-menu-item"),positionerwidth=100/numberofmenuitems,$menuitems.each(function(){var e=$(this).index()+1;$(this).attr("menu-number",e)}),activemenuitemnumber=$activemenuitem.attr("menu-number"),applymarginleft=activemenuitemnumber*positionerwidth-positionerwidth+"%",e.css("width",positionerwidth+"%"),e.css("margin-left",applymarginleft+"%"),e.animate({marginLeft:applymarginleft},500)}function menuClasses(e,t){$(".menu-item."+t).each(function(){$(this).removeClass(t)}),$('.menu-item > a[href$="'.concat(e.next.url.path,'"]')).closest(".menu-item").each(function(){$(this).addClass(t)})}function topAnimation(){console.log("function topAnimation()"),setTimeout(function(){var e;console.log("hello"),console.log("setTimeout(function()"),$("body").removeClass("animation-fix"),$("body").data("move-to")?(e=$("body").data("move-to"),$("html, body").animate({scrollTop:$("#"+e).offset().top+1},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))}),$("body").removeAttr("data-move-to")})):(console.log("about to animate?"),$("html, body").animate({scrollTop:$("#main").offset().top+0},600,function(){var e=$(window);e.on("scroll.startitem",function(){0<=$(this).scrollTop()-$("#main").offset().top&&($("body").addClass("keep-intro show-nav-logo"),e.off("scroll.startitem"))})}))},200)}function fade(){console.log("function fade()");var o=.25*$(window).innerHeight(),a=Math.round(1/o*1e4)/1e4;$(".th-block").each(function(){var e=$(this).offset().top,t=$(window).scrollTop()+.8*$(window).innerHeight();e<t?e<t-o?$(this).css({transition:"opacity 0.1s linear",opacity:1}):$(this).css({transition:"opacity 0.25s linear",opacity:(t-e)*a}):$(this).css("opacity",.1)}),$(window).scrollTop()+$(window).height()==$(document).height()&&$(".th-block").css({transition:"opacity 0.1s linear",opacity:1})}function destroyheadroom(){$("#header-nav-area").headroom("destroy")}function freezeheadroom(){$("#header-nav-area").headroom("freeze")}function unfreezeheadroom(){$("#header-nav-area").headroom("unfreeze")}function forceheadroompin(){$("#header-nav-area").hasClass("unpinned")&&($("#header-nav-area").removeClass("unpinned"),$("#header-nav-area").addClass("pinned"))}function images(e){console.log("images loaded applied here");var t=e.find("img");t.css("backgroun","red"),t.each(function(){console.log("each image? block");var t=$(this);t.imagesLoaded({},function(){console.log("images have loaded");t.attr("src");var e=t.attr("data-src");t.attr("src",e),t.addClass("loaded")})})}function slideshow(i){$.getScript("https://npmcdn.com/flickity@2/dist/flickity.pkgd.js",function(e,t,o){console.log(" hello function slideshow($block)");var a=i.find(".slideshow-carousel");images(a),a.flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,freeScroll:!1,wrapAround:!0,arrowShape:{x0:20,x1:50,y1:50,x2:60,y2:50,x3:30}})})}function map(e){var t;console.log("function map($block) - ONE"),0<$("#g-map").length&&(t=0,window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyBUXYryE2krCQ7nIvVcXcFzWEPY0cEcXbE&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)},$(window).bind("gMapsLoaded",function(){map=new google.maps.Map(document.getElementById("g-map"),{center:{lat:51.5198038,lng:-.1228228999999601},zoom:15,panControl:!1,zoomControl:!1,draggable:!0,scrollwheel:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!0,styles:[{stylers:[{saturation:"-90"}]}]});var e=themeurl+"/assets/svg/map_marker_svg_40px.svg?i="+t++;new google.maps.Marker({position:{lat:51.5198038,lng:-.1228228999999601},map:map,optimized:!1,icon:e})}),window.loadGoogleMaps())}function blocks(){0<$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").length&&$(".image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block").each(function(){console.log("each .image-one-col-block, .text-two-col-image-block-left-header, .image-multi-col-block, .text-image-two-col-block, .client-logos-block"),images($(this))}),0<$(".slideshow-block").length&&$(".slideshow-block").each(function(){console.log("if slideshow-block"),slideshow($(this))}),0<$(".contact-block").length&&(console.log("if contact block"),$(".contact-block").each(function(){map($(this))})),$(window).scroll(function(){fade()})}function init$1(){console.log("layout-grid/index.js"),Packery.prototype.getShiftPositions=function(t){t=t||"data-item-id";var o=this;return this.items.map(function(e){return{attr:e.element.getAttribute(t),x:e.rect.x/o.packer.width}})},Packery.prototype.initShiftLayout=function(e,i){if(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return void this.layout()}i=i||"data-item-id",this._resetLayout(),this.items=e.map(function(e){var t="["+i+'="'+e.attr+'"]',o=this.element.querySelector(t),a=this.getItem(o);return a.rect.x=e.x*this.packer.width,a},this),this.shiftLayout()}else this.layout()},$("form#grid").submit(function(e){e.preventDefault();var t=$(this),o=t.attr("action"),a=t.attr("method"),i=t.serializeArray(),n=(t.find('button[type="submit"]'),$("#modalResponse"));return $("#ag_wysiwyg_editor").length&&"undefined"!=typeof tinyMCE&&i.push({name:"fields[ag_wysiwyg_editor]",value:tinyMCE.get("ag_wysiwyg_editor").getContent()}),$.ajax({url:o,method:a,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",WP_settings.nonce)},data:i,dataType:"json"}).always(function(e){n.modal("show"),$(".response-message-wrap").addClass("response-message-active"),setTimeout(function(){$(".response-message-wrap").removeClass("response-message-active")},1e3)}),!1});$(".acf-image-edit");var C=function(){var e=$(".repeater .remove-row");1==$(".repeater > .repeater-item").length?e.hide():e.show()};function d(){console.log("function captureCanvas()"),$("body").addClass("capturing-image"),window.scrollTo(0,0),html2canvas(document.querySelector("#grid-wraps"),{scale:4}).then(function(e){var t=document.createElement("img");t.src=e.toDataURL(),getCanvas=e,$("#canvas-wrap").has("canvas").length&&($("#canvas-wrap").find("canvas").remove(),$("#export-image-wrap").find("img").remove()),document.querySelector("#export-image-wrap").appendChild(t),$("body").find("input[name='image-data_hidden_field']").val(t.src)}),$("body").removeClass("capturing-image")}function t(b){console.log("initiate $thisgrid"+b);var w=b.imagesLoaded(function(){$("body").addClass("images-loaded");var r,e,t,o,s=!1,l=!1;function a(){var e,o,t,a,i,n=getComputedStyle(document.body,":after").content;'"widescreen"'!==n||s?'"default"'===n&&s&&(w.packery("destroy"),s=!1,console.log("Hellow vbreakpoint - mobile?"),$("body").hasClass("dev-layout-grid-on")?(r=!0,$("body").removeClass("dev-layout-grid-on")):r=!1):(w.packery({itemSelector:".layout-grid-item",columnWidth:".grid-sizer",percentPosition:!0,isHorizontal:!0,initLayout:!1}),t=(o=w.closest(".grid-layer").find(".coordinates")).attr("value"),0==l&&(l=!0,e=w.find(".layout-grid-item"),t=(o=w.closest(".grid-layer").find(".coordinates")).attr("value"),a=w.closest(".grid-layer").find(".repeater-wrap .add-row"),e.each(function(e){console.log("each grid item - iniitally");var t=$(this),a=t.find("img:not(.place-holder)"),o=a.attr("src"),i=t.find("img.place-holder"),n=t.attr("data-item-id"),r=t.find(".image-ui"),s=r.parent("label"),l=r.attr("id");0<a.length?(gridImageOrientation(t,void 0,void 0),itemEdit(t,w),imageRemove(n),convertImgToDataURLviaCanvas(o,function(e){console.log(" $griditems. each base64_data"),i.attr("src",e)})):(gridImageOrientation(t,void 0,void 0),itemEdit(t,w),imageRemove(n)),$("#"+l).iconselectmenu({appendTo:s,maxHeight:300,style:"dropdown",change:function(e,t){console.log("change"+t);var o=$(t.item.element).attr("data-segment-image");console.log("thisimage"+o),a.attr("src",o)},select:function(){}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar")}),a.click(function(){console.log("hello add a row");var e=$(this),t=e.closest(".grid-layer").find(".coordinates"),o=e.closest(".grid-layer").find(".repeater-item"),a=e.closest(".grid-layer").find(".repeater"),i=a.find(".repeater-item:last"),n=i.clone(),r=o.map(function(){return $(this).attr("data-item-id")}),s=Math.max.apply(Math,r)+1;$(n).insertAfter(i);var l=a.find(".repeater-item:last"),d=$(".repeater > .repeater-item").length-1,c=l.find(".image-ui"),m=c.parent("label");l.find(".ui-selectmenu-button, .ui-front").remove(),l.attr("data-item-id",s),a.find(".repeater-item:last[name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),a.find(".repeater-item:last [name]").attr("name",function(e,t){return t.replace(/\[\d+\]/,"["+d+"]")}),l.find(".acf-image-edit").attr("id","acf-image-edit-"+s),l.find(".acf-image-remove").attr("id","acf-image-remove-"+s),l.attr("data-item-id-id",""+s),l.find(".input-id").attr("value",""+s),l.find(".image-ui").attr("id","acf-post-object-"+s),c.css("background","yellow");var g,u,f=c.attr("id"),p=l.find("img:not(.place-holder)");console.log("$thisUiId"+f),$("#"+f).iconselectmenu({appendTo:m,change:function(e,t){console.log("change"+t),$(t.item.element).css("background","red");var o=$(t.item.element).attr("data-segment-image");console.log("thisimage"+o),p.attr("src",o)},select:function(e,t){$(t).selectmenu("close"),console.log("close")}}).iconselectmenu("menuWidget").addClass("ui-menu-icons avatar"),g=$(n),(u=w).find(g).each(function(e,t){var o=new Draggabilly(t);u.packery("bindDraggabillyEvents",o)}),imageEdit(s),imageRemove(s),itemEdit($(n),w),w.packery("appended",$(n));var h=b.packery("getShiftPositions","data-item-id"),v=JSON.stringify(h);t.val(v),C(a),localStorage.setItem("coordinates",v);var y=document.getElementById("tester-grid-id").innerHTML;return localStorage.setItem("gridContent",y),$(n).addClass("item-added"),$("html, body").animate({scrollTop:$(n).offset().top},200),setTimeout(function(){$(n).removeClass("item-added")},600),!1}),$(document).on("click",".repeater .remove-row",function(){var e,t,o,a,i,n,r=$(".repeater > .repeater-item");return 1==r.length?r.find("input").val(""):(e=$(this).closest(".repeater-item"),t=$(this).closest(".repeater"),o=w.closest(".grid-layer").find(".coordinates"),w.packery("remove",e).packery("shiftLayout"),a=w.packery("getShiftPositions","data-item-id"),i=JSON.stringify(a),localStorage.setItem("coordinates",i),o.val(i),n=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",n),console.log("gridContent"+n),C(t)),!1})),$("body").hasClass("logged-in")?(w.packery("initShiftLayout",t,"data-item-id"),console.log("storedcoordinates"+t)):(console.log("not logged in hhere "),i=localStorage.getItem("coordinates"),console.log("storedcoordinates"+i),w.packery("initShiftLayout",i,"data-item-id")),$("body").hasClass("logged-in")?(w.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);w.packery("bindDraggabillyEvents",o)}),w.on("dragItemPositioned",function(){console.log("$grid.on( 'dragItemPositioned'");var e=w.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),d()})):(console.log("not logged in"),w.find(".layout-grid-item").each(function(e,t){var o=new Draggabilly(t);w.packery("bindDraggabillyEvents",o)}),w.on("dragItemPositioned",function(){var e=w.packery("getShiftPositions","data-item-id"),t=JSON.stringify(e);o.val(t),o.attr("value",t),localStorage.setItem("coordinates",t),d()})),$("body").hasClass("is-touch"),s=!0,console.log(r+"isEditModeActive"),!0===r&&(console.log(r),$("body").addClass("dev-layout-grid-on"))),$(window).resize(function(){console.log("resize(function()")}),setTimeout(function(){console.log("setTimeout(function)"),w.packery("layout").trigger("layoutComplete")},100)}a(),$(window).on("resize",(e=a,t=200,function(){o&&clearTimeout(o),setTimeout(function(){e(),o=null},t||100)}))})}$("#download-image").on("click",function(){console.log("hello?!");var e=getCanvas.toDataURL("image/png").replace(/^data:image\/png/,"data:application/octet-stream");$("#download-image").attr("download","your_pic_name.png").attr("href",e)}),$(".dev-layout-grid-toggle").click(function(){$("body").hasClass("dev-layout-grid-on")?$("body").removeClass("dev-layout-grid-on"):$("body").addClass("dev-layout-grid-on")}),$(".clear-local-storage").click(function(){console.log("clearing local storage"),localStorage.removeItem("gridContent"),localStorage.removeItem("coordinates")}),$(".grid").each(function(){var e;$thisgrid=$(this),$("body").hasClass("logged-in")?(C($thisgrid),t($thisgrid)):null===localStorage.getItem("gridContent")?(C($thisgrid),t($thisgrid),e=document.getElementById("tester-grid-id").innerHTML,localStorage.setItem("gridContent",e),console.log("gridContent"+e)):(console.log("HAS local storage gridContent"+e),e=localStorage.getItem("gridContent"),$("#tester-grid-id").empty(),$("#tester-grid-id").append(e),C($thisgrid),t($thisgrid))})}function gridImageOrientation(e,t,o){var a=e,i=a.width(),n=a.height(),r=i/n,s=a.find("img");null==(t=t)&&(t=s.width(),o=s.height());var l=t/o;a.attr("item-ratio",""),s.attr("itemimage-ratio",""),a.attr("item-ratio",r),s.attr("itemimage-ratio",l),a.removeClass("square-item image-larger-than-item vertical-item horizontal-item ratio-equal image-larger-than-item"),s.removeClass("square-image vertical-image horizontal-image"),i==n?(a.addClass("square-item"),r==l||l<r&&a.addClass("image-larger-than-item")):i<n?a.addClass("vertical-item"):n<i&&(a.addClass("horizontal-item"),r==l||l<r&&a.addClass("image-larger-than-item")),t==o?s.addClass("square-image"):t<o?s.addClass("vertical-image"):o<t&&s.addClass("horizontal-image")}function itemEdit(r,s){var l=r,e=r.find(".grid-item-options-toggle").not(".grid-item-options-toggle-rotate"),t=r.find(".grid-item-options-toggle-rotate"),d=(l.find("input.input-id").val(),l.find("input.input-width").val(),l.find("input.input-height").val(),l.find("input.input-z-index").val(),l.find("input.input-rotate").val(),l.find("input.input-image-position-x").val()+"%"),c=l.find("input.input-image-position-y").val()+"%",m=(l.find("input.input-image-scale").val(),0),o=l.find("input");$postfield=l.find(".post-object select"),e.click(function(){console.log("click; activate edit item"),l.hasClass("item-edit-active")?l.removeClass("item-edit-active"):($(".layout-grid-item.repeater-item").removeClass("item-edit-active"),l.addClass("item-edit-active"),l.find(".ui-button").click())}),t.click(function(){console.log("click; rotate clicking");var e,t=l.find("input.input-rotate"),o=Number(t.val());console.log("thisrotatevalue"+o),e=270==o?0:Number(o+90),t.val(e),console.log("thisnewrotatevalue"+e),l.find(".inner-grid-item").css("transform","rotate("+e+"deg)")}),o.on("input",function(){var t,e,o,a=$(this),i=a.val(),n=a.attr("data-input-type");"image_rotate"==n?(console.log("rotate input on pinput change"),applyrotatevalue=i+"deg",a.attr("value",i),console.log("newvalue"+i),l.find(".inner-grid-item").css("transform","rotate("+applyrotatevalue+")")):"input-id"==n||("input-width"==n?(t="grid-item-width",e="grid-item-width-"+i/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-height"==n?(t="grid-item-height",e="grid-item-height-"+i/25,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e),s.packery("layout"),gridImageOrientation(r,void 0,void 0)):"input-z-index"==n?(t="item-z-index",e="item-z-index-"+i,o=l.attr("class").split(" ").filter(function(e){return 0!==e.lastIndexOf(t,0)}),l.attr("class",o.join(" ").trim()),l.addClass(e)):"input-image-position-x"==n?(d=i+"%",a.attr("value",i),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-position-y"==n?(c=i+"%",a.attr("value",i),l.find(".inner-grid-item").css("transform","translateX("+d+") translateY("+c+")")):"input-image-scale"==n&&(m=i/100,a.attr("value",i),l.find(".inner-grid-item .image-wrap img").css("transform","scale("+m+")")))})}function imageEdit(e){console.log("imageedit function itemid"+e);var t=$("#acf-image-edit-".concat(e));console.log("$thisimagethumb"+t),t.click(function(){var n,e=$(this),t=(e.attr("id"),e.closest(".layout-grid-item").attr("data-item-id")),r=$(".layout-grid-item[data-item-id=".concat(t,"]")).find(".acf-image");if($.isFunction(wp.media))return n?(console.log("mediaImage"),void n.open()):((n=wp.media({library:{type:"image"},multiple:!1})).on("select",function(){console.log("mediaImage.on( 'select', function()");var e=n.state().get("selection").first().toJSON();$(".media-modal-close").trigger("click");var t=r.closest(".layout-grid-item"),o=e.width,a=e.height,i=e.url;r.val(e.id),t.find("img").remove(),t.find(".image-wrap").append($('<img src="'+e.url+'"">')),t.find(".image-wrap").append($('<img class="place-holder" src="'+e.url+'"">')),gridImageOrientation(t,o,a),convertImgToDataURLviaCanvas(i,function(e){t.find("img.place-holder").attr("src",e)}),$("html, body").animate({scrollTop:t.offset().top},200)}),n.open(),!1);console.log("! $.isFunction( wp.media )")})}function imageRemove(e){$("#acf-image-remove-".concat(e)).click(function(){var e=$(this).closest(".layout-grid-item").attr("data-item-id"),t=$(".layout-grid-item[data-item-id=".concat(e,"]"));return t.find("img").remove(),t.find("input.acf-image").val(""),!1})}function convertImgToDataURLviaCanvas(e,a){var t=new Image;t.crossOrigin="Anonymous",t.onload=function(){var e,t=document.createElement("CANVAS"),o=t.getContext("2d");t.height=this.height,t.width=this.width,o.fillStyle="#000",o.fillRect(0,0,t.width,t.height),e=t.toDataURL(),a(e),t=null},t.src=e}function init(){function l(e,t){var o,a,i;"js"==t?((o=document.querySelector('script[src="${filename}"]'))&&o.remove(),(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",e)):"css"==t&&((a=document.querySelector("link[href='".concat(e,"']")))&&a.remove(),(i=document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e)),void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)}var i=!1;barba.init({views:[{namespace:"page",afterEnter:function(){console.log("afterEnter: namespace = page"),opacity(),domReady(blocks)}},{namespace:"archive",afterEnter:function(){console.log("afterEnter: namespace = archive"),imageopacity(),opacity()}},{namespace:"single-post",afterEnter:function(){console.log("afterEnter: namespace = single-post"),imageopacity(),opacity(),domReady(blocks)}},{namespace:"layout-grid",afterEnter:function(){console.log("afterEnter: namespace = layout grid"),opacity(),domReady(init$1),domReady(blocks)}},{namespace:"front-page",afterEnter:function(){console.log("afterEnter: namespace = front-page"),opacity()}}]}),barba.hooks.beforeLeave(function(e){console.log("beforeleave"),introanimationdone=!0,i=!$("body").hasClass("is-not-touch"),devon=!!$("body").hasClass("dev-grid-on")}),barba.hooks.afterLeave(function(e){console.log("afterleave"),$("html, body").animate({scrollTop:$("body").offset().top},10);var t=e.next.html,o=t.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",t),a=$(o).filter("notbody").attr("class");$("body").attr("class",a),e.next.url.path&&(menuClasses(e,"current-menu-item"),menuClasses(e,"current_page_item"),menuClasses(e,"current-menu-ancestor"),menuClasses(e,"current-menu-parent"),menuClasses(e,"current_page_ancestor")),1==devon?$("body").addClass("dev-grid-on"):$("body").removeClass("dev-grid-on"),1==i?(console.log("apply touch"),$("body").addClass("is-touch"),$("body").removeClass("is-not-touch")):($("body").addClass("is-not-touch"),$("body").removeClass("is-touch")),1==introanimationdone?(console.log("introanimation not needed anymore"),$("body").addClass("animation-done"),$("body").addClass("animation-hide"),$("body").removeClass("animation-fix")):console.log("introanimationdone == false"),menuPositioner(),orientation(),console.log("afterleave - reload script?")}),barba.hooks.beforeEnter(function(e){var t,o,a,i=e.current,n=e.next;i.container&&(o=(t=n.html).replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",t),a=$(o).filter("notbody").attr("class"),$("body").attr("class",a)),console.log("beforeenter: reload scripts");var r=window.location.hostname;console.log("baseURL"+r);var s=n.container.querySelectorAll(".wpuf-form-add");s&&(document.createElement("script").innerHTML=wpFormVariables,l("/cally-2020/wp-content/plugins/wp-user-frontend/assets/js/frontend-form.min.js","js"),l("/cally-2020/wp-content/plugins/wp-user-frontend/assets/js/subscriptions.js","js"),s.forEach(function(e){var a=e.parentElement;a.querySelectorAll("script").forEach(function(e){var t=e.innerHTML,o=document.createElement("script");e.remove(),o.innerHTML=t,a.appendChild(o)})}))})}function siteLoad(){console.log("siteLoad"),0==introanimationdone?(console.log("(introanimationdone == false)"),$(".fade-item").css("opacity",0),fade(),topAnimation(),$("body").removeClass("site-loading"),$("body").addClass("animation-done"),introanimationdone=!0):(console.log("(introanimationdone == true)"),$(".fade-item").css("opacity",0),fade(),$("body").removeClass("site-loading"))}function init$2(){function e(){console.log("inithreadroom - shoul be once, intuyll we destroy it"),$("#header-nav-area").length&&(console.log("#header-nav-area exists"),$("#header-nav-area").headroom({offset:0,tolerance:5,classes:{initial:"animated",pinned:"pinned",unpinned:"unpinned",frozen:"frozen"}}))}if(0<$("#toggle-item").length)return console.log("if #toggle-item"),0<$("#header-nav-area").length&&$("#header-nav-area").mouseenter(function(){if(console.log("#header-nav-area hover"),!$("body").hasClass("nav-on"))return console.log("nav not on mouseenter"),void forceheadroompin()}),$("#toggle-item").click(function(){console.log("click"),$("body").not("nav-off")&&$("body").not("nav-on")?$("body").hasClass("nav-on")?(console.log("turn nav off"),e(),$("body").addClass("nav-off"),$("body").removeClass("nav-on")):(console.log("turn nav on"),destroyheadroom(),$("body").addClass("nav-on"),$("body").removeClass("nav-off"),$("li.menu-item a").click(function(){console.log("$mainmenuitmes.click(function()"),$("body").addClass("nav-off"),$("body").removeClass("nav-on"),e()})):(destroyheadroom(),$("body").addClass("nav-on"),console.log("not either"))}),e(),console.log("detectopofmainfixer()"),void $(window).scroll(function(){var e=$(this).scrollTop();if($intro=$("#intro-area"),introheight=$intro.height(),reached=e-introheight,0<=reached){if(!$("body").hasClass("main-reached"))return $("body").addClass("main-reached"),void setTimeout(function(){$("body, html").scrollTop(0)},10);if(!$("body").hasClass("nav-on"))return void unfreezeheadroom()}else if(reached<0&&!$("body").hasClass("nav-on"))return void freezeheadroom()})}var inpapp={init:function(){console.log("init"),devGrid(),SetAppHeight(),orientation(),detectTouch(),init(),init$2(),menuPositioner(),siteLoad()}};domReady(inpapp.init);
//# sourceMappingURL=app.min.js.map
