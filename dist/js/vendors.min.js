!function(s){var o=window.MutationObserver||window.WebKitMutationObserver;s.fn.attrchange=function(e,t){if("object"!=typeof e)return"string"==typeof e&&s.fn.attrchange.hasOwnProperty("extensions")&&s.fn.attrchange.extensions.hasOwnProperty(e)?s.fn.attrchange.extensions[e].call(this,t):void 0;var r={trackValues:!1,callback:s.noop};if("function"==typeof e?r.callback=e:s.extend(r,e),r.trackValues&&this.each(function(e,t){for(var r,n={},e=0,i=t.attributes,o=i.length;e<o;e++)n[(r=i.item(e)).nodeName]=r.value;s(this).data("attr-old-value",n)}),o){var n={subtree:!1,attributes:!0,attributeOldValue:r.trackValues},i=new o(function(e){e.forEach(function(e){var t=e.target;r.trackValues&&(e.newValue=s(t).attr(e.attributeName)),void 0===s(this).data("attrchange-tdisconnect")&&r.callback.call(t,e)})});return this.data("attrchange-method","Mutation Observer").data("attrchange-obs",i).each(function(){i.observe(this,n)})}return function(){var e=document.createElement("p"),t=!1;if(e.addEventListener)e.addEventListener("DOMAttrModified",function(){t=!0},!1);else{if(!e.attachEvent)return;e.attachEvent("onDOMAttrModified",function(){t=!0})}return e.setAttribute("id","target"),t}()?this.data("attrchange-method","DOMAttrModified").on("DOMAttrModified",function(e){e.originalEvent&&(e=e.originalEvent),e.attributeName=e.attrName,e.oldValue=e.prevValue,void 0===s(this).data("attrchange-tdisconnect")&&r.callback.call(this,e)}):"onpropertychange"in document.body?this.data("attrchange-method","propertychange").on("propertychange",function(e){e.attributeName=window.event.propertyName,function(e,t){var r,n;e&&(r=this.data("attr-old-value"),0<=t.attributeName.indexOf("style")?(r.style||(r.style={}),n=t.attributeName.split("."),t.attributeName=n[0],t.oldValue=r.style[n[1]],t.newValue=n[1]+":"+this.prop("style")[s.camelCase(n[1])],r.style[n[1]]=t.newValue):(t.oldValue=r[t.attributeName],t.newValue=this.attr(t.attributeName),r[t.attributeName]=t.newValue),this.data("attr-old-value",r))}.call(s(this),r.trackValues,e),void 0===s(this).data("attrchange-tdisconnect")&&r.callback.call(this,e)}):this}}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).barba=t()}(this,function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,r){return(a=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&s(i,r.prototype),i}).apply(null,arguments)}function t(e){var r="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return a(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),s(t,e)})(e)}function c(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var l,r;(r=l=l||{})[r.off=0]="off",r[r.error=1]="error",r[r.warning=2]="warning",r[r.info=3]="info",r[r.debug=4]="debug";var u=l.off,x=function(){function n(e){this.t=e}n.getLevel=function(){return u},n.setLevel=function(e){return u=l[e]};var e=n.prototype;return e.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.error,l.error,t)},e.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.warn,l.warning,t)},e.info=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.info,l.info,t)},e.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.log,l.debug,t)},e.i=function(e,t,r){t<=n.getLevel()&&e.apply(console,["["+this.t+"] "].concat(r))},n}(),h=E,p=y,d=g,f=v,m=b,S="/",P=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function g(e,t){for(var r,n=[],i=0,o=0,s="",a=t&&t.delimiter||S,l=t&&t.whitelist||void 0,u=!1;null!==(r=P.exec(e));){var h,c,p,d,f,m,g,y,v,_=r[0],b=r[1],E=r.index;s+=e.slice(o,E),o=E+_.length,b?(s+=b[1],u=!0):(h="",c=r[2],p=r[3],d=r[4],f=r[5],!u&&s.length&&(g=s[m=s.length-1],(!l||-1<l.indexOf(g))&&(h=g,s=s.slice(0,m))),s&&(n.push(s),s="",u=!1),y=p||d,v=h||a,n.push({name:c||i++,prefix:h,delimiter:v,optional:"?"===f||"*"===f,repeat:"+"===f||"*"===f,pattern:y?y.replace(/([=!:$/()])/g,"\\$1"):"[^"+C(v===a?v:v+a)+"]+?"}))}return(s||o<e.length)&&n.push(s+e.substr(o)),n}function y(u,h){return function(e,t){var r=u.exec(e);if(!r)return!1;for(var n,i=r[0],o=r.index,s={},a=t&&t.decode||decodeURIComponent,l=1;l<r.length;l++){void 0!==r[l]&&(s[(n=h[l-1]).name]=n.repeat?r[l].split(n.delimiter).map(function(e){return a(e,n)}):a(r[l],n))}return{path:i,index:o,params:s}}}function v(h,e){for(var c=new Array(h.length),t=0;t<h.length;t++)"object"==typeof h[t]&&(c[t]=new RegExp("^(?:"+h[t].pattern+")$",_(e)));return function(e,t){for(var r="",n=t&&t.encode||encodeURIComponent,i=!t||!1!==t.validate,o=0;o<h.length;o++){var s=h[o];if("string"!=typeof s){var a,l=e?e[s.name]:void 0;if(Array.isArray(l)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===l.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var u=0;u<l.length;u++){if(a=n(l[u],s),i&&!c[o].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');r+=(0===u?s.prefix:s.delimiter)+a}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"))}else{if(a=n(String(l),s),i&&!c[o].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+a+'"');r+=s.prefix+a}}else r+=s}return r}}function C(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function _(e){return e&&e.sensitive?"":"i"}function b(e,t,r){for(var n,i,o=(r=r||{}).strict,s=!1!==r.start,a=!1!==r.end,l=r.delimiter||S,u=[].concat(r.endsWith||[]).map(C).concat("$").join("|"),h=s?"^":"",c=0;c<e.length;c++){var p,d=e[c];"string"==typeof d?h+=C(d):(p=d.repeat?"(?:"+d.pattern+")(?:"+C(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern,t&&t.push(d),h+=d.optional?d.prefix?"(?:"+C(d.prefix)+"("+p+"))?":"("+p+")?":C(d.prefix)+"("+p+")")}return a?(o||(h+="(?:"+C(l)+")?"),h+="$"===u?"$":"(?="+u+")"):(i="string"==typeof(n=e[e.length-1])?n[n.length-1]===l:void 0===n,o||(h+="(?:"+C(l)+"(?="+u+"))?"),i||(h+="(?="+C(l)+"|"+u+")")),new RegExp(h,_(r))}function E(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(E(e[i],t,r).source);return new RegExp("(?:"+n.join("|")+")",_(r))}(e,t,r):(n=t,b(g(e,i=r),n,i));var n,i}h.match=function(e,t){var r=[];return y(E(e,r,t),r)},h.regexpToFunction=p,h.parse=d,h.compile=function(e,t){return v(g(e,t),t)},h.tokensToFunction=f,h.tokensToRegExp=m;function A(e,i){try{var t=function(){if(!i.next.html)return Promise.resolve(e).then(function(e){var t,r,n=i.next;e&&(t=F.toElement(e),n.namespace=F.getNamespace(t),n.container=F.getContainer(t),n.html=e,O.update({ns:n.namespace}),r=F.toDocument(e),document.title=r.title)})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}function T(){return window.location.origin}function k(e){return void 0===e&&(e=window.location.href),B(e).port}function R(e){return void 0===e&&(e=window.location.href),e.replace(/(\/#.*|\/|#.*)$/,"")}var M,D,I={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},F=((D=V.prototype).toString=function(e){return e.outerHTML},D.toDocument=function(e){return this.u.parseFromString(e,"text/html")},D.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},D.getHtml=function(e){return void 0===e&&(e=document),this.toString(e.documentElement)},D.getWrapper=function(e){return void 0===e&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},D.getContainer=function(e){return void 0===e&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},D.removeContainer=function(e){document.body.contains(e)&&e.parentNode.removeChild(e)},D.addContainer=function(e,t){var r=this.getContainer();r?this.s(e,r):t.appendChild(e)},D.getNamespace=function(e){void 0===e&&(e=document);var t=e.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return t?t.getAttribute(this.o.prefix+"-"+this.o.namespace):null},D.getHref=function(e){if(e.tagName&&"a"===e.tagName.toLowerCase()){if("string"==typeof e.href)return e.href;var t=e.getAttribute("href")||e.getAttribute("xlink:href");if(t)return this.resolveUrl(t.baseVal||t)}return null},D.resolveUrl=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.length;if(0===n)throw new Error("resolveUrl requires at least one argument; got none.");var i=document.createElement("base");if(i.href=arguments[0],1===n)return i.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(i,o.firstChild);for(var s,a=document.createElement("a"),l=1;l<n;l++)a.href=arguments[l],i.href=s=a.href;return o.removeChild(i),s},D.s=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},new V),O=((M=U.prototype).init=function(e,t){this.l="barba";var r={ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(r),this.v=0;var n={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(n,"",e)},M.change=function(e,t,r){var n,i;return r&&r.state?(i=(n=r.state).index,t=this.m(this.v-i),this.replace(n.states),this.v=i):this.add(e,t),t},M.add=function(e,t){var r=this.size,n=this.p(t),i={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(i),this.v=r;var o={from:this.l,index:r,states:[].concat(this.h)};switch(n){case"push":window.history&&window.history.pushState(o,"",e);break;case"replace":window.history&&window.history.replaceState(o,"",e)}},M.update=function(e,t){var r=t||this.v,n=w({},this.get(r),{},e);this.set(r,n)},M.remove=function(e){e?this.h.splice(e,1):this.h.pop(),this.v--},M.clear=function(){this.h=[],this.v=-1},M.replace=function(e){this.h=e},M.get=function(e){return this.h[e]},M.set=function(e,t){return this.h[e]=t},M.p=function(e){var t="push",r=e,n=I.prefix+"-"+I.history;return r.hasAttribute&&r.hasAttribute(n)&&(t=r.getAttribute(n)),t},M.m=function(e){return 1<Math.abs(e)?0<e?"forward":"back":0===e?"popstate":0<e?"back":"forward"},e(U,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),new U),L=h,N={__proto__:null,update:A,nextTick:function(){return new Promise(function(e){window.requestAnimationFrame(e)})},pathToRegexp:L},B=function(e){var t,r,n=e.match(/:\d+/);null===n?(/^http/.test(e)&&(r=80),/^https/.test(e)&&(r=443)):(t=n[0].substring(1),r=parseInt(t,10));var i,o=e.replace(T(),""),s={},a=o.indexOf("#");0<=a&&(i=o.slice(a+1),o=o.slice(0,a));var l=o.indexOf("?");return 0<=l&&(s=j(o.slice(l+1)),o=o.slice(0,l)),{hash:i,path:o,port:r,query:s}},j=function(e){return e.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})},z={__proto__:null,getHref:function(){return window.location.href},getOrigin:T,getPort:k,getPath:function(e){return void 0===e&&(e=window.location.href),B(e).path},parse:B,parseQuery:j,clean:R};function U(){this.h=[],this.v=-1}function V(){this.o=I,this.u=new DOMParser}function q(i,o,s){return void 0===o&&(o=2e3),new Promise(function(t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){var e;n.readyState===XMLHttpRequest.DONE&&(200===n.status?t(n.responseText):n.status&&(e={status:n.status,statusText:n.statusText},s(i,e),r(e)))},n.ontimeout=function(){var e=new Error("Timeout error ["+o+"]");s(i,e),r(e)},n.onerror=function(){var e=new Error("Fetch error");s(i,e),r(e)},n.open("GET",i),n.timeout=o,n.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),n.setRequestHeader("x-barba","yes"),n.send()})}function H(s,a){return void 0===a&&(a={}),function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var o=!1;return new Promise(function(r,n){a.async=function(){return o=!0,function(e,t){e?n(e):r(t)}};var e,t=s.apply(a,i);o||(!(e=t)||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.then?r(t):t.then(r,n))})}}function G(){return!window.history.pushState}function W(e){return!e.el||!e.href}function K(e){var t=e.event;return 1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey}function X(e){var t=e.el;return t.hasAttribute("target")&&"_blank"===t.target}function J(e){var t=e.el;return void 0!==t.protocol&&window.location.protocol!==t.protocol||void 0!==t.hostname&&window.location.hostname!==t.hostname}function Y(e){var t=e.el;return void 0!==t.port&&k()!==k(t.href)}function $(e){var t=e.el;return t.getAttribute&&"string"==typeof t.getAttribute("download")}function Q(e){return e.el.hasAttribute(I.prefix+"-"+I.prevent)}function Z(e){return Boolean(e.el.closest("["+I.prefix+"-"+I.prevent+'="all"]'))}function ee(e){var t=e.href;return R(t)===R()&&k(t)===k()}var te,re,ne,ie=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new x("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}i(e,t);var r=e.prototype;return r.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(r){n[r]||(n[r]=function(e,t){n.registered.has(r)||n.registered.set(r,new Set),n.registered.get(r).add({ctx:t||{},fn:e})})})},r.do=function(t){for(var r=this,e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this.registered.has(t)){var o=Promise.resolve();return this.registered.get(t).forEach(function(e){o=o.then(function(){return H(e.fn,e.ctx).apply(void 0,n)})}),o.catch(function(e){r.logger.debug("Hook error ["+t+"]"),r.logger.error(e)})}return Promise.resolve()},r.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},r.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var r=[];this.registered.forEach(function(e,t){return r.push(t)}),this.logger.info("Registered hooks: "+r.join(","))},e}(function(){})),oe=(ge.prototype.checkHref=function(e){if("boolean"==typeof this.g)return this.g;var t=B(e).path;return this.P.some(function(e){return null!==e.exec(t)})},ge),se=function(r){function e(e){var t;return(t=r.call(this,e)||this).k=new Map,t}i(e,r);var t=e.prototype;return t.set=function(e,t,r){return this.k.set(e,{action:r,request:t}),{action:r,request:t}},t.get=function(e){return this.k.get(e)},t.getRequest=function(e){return this.k.get(e).request},t.getAction=function(e){return this.k.get(e).action},t.has=function(e){return!this.checkHref(e)&&this.k.has(e)},t.delete=function(e){return this.k.delete(e)},t.update=function(e,t){var r=w({},this.k.get(e),{},t);return this.k.set(e,r),r},e}(oe),ae=function(r){function e(e){var t;return(t=r.call(this,e)||this).suite=[],t.tests=new Map,t.init(),t}i(e,r);var t=e.prototype;return t.init=function(){this.add("pushState",G),this.add("exists",W),this.add("newTab",K),this.add("blank",X),this.add("corsDomain",J),this.add("corsPort",Y),this.add("download",$),this.add("preventSelf",Q),this.add("preventAll",Z),this.add("sameUrl",ee,!1)},t.add=function(e,t,r){void 0===r&&(r=!0),this.tests.set(e,t),r&&this.suite.push(e)},t.run=function(e,t,r,n){return this.tests.get(e)({el:t,event:r,href:n})},t.checkLink=function(t,r,n){var i=this;return this.suite.some(function(e){return i.run(e,t,r,n)})},e}(oe),le=(i(me,ne=t(Error)),me),ue=((re=fe.prototype).add=function(e,t){switch(e){case"rule":this.A.splice(t.position||0,0,t.value);break;case"transition":default:this.all.push(t)}this.update()},re.resolve=function(i,e){var o=this;void 0===e&&(e={});var t,r,n=(n=e.once?this.once:this.page).filter(e.self?function(e){return e.name&&"self"===e.name}:function(e){return!e.name||"self"!==e.name}),s=new Map,a=n.find(function(t){var r=!0,n={};return!(!e.self||"self"!==t.name)||(o.A.reverse().forEach(function(e){r&&(r=o.R(t,e,i,n),t.from&&t.to&&(r=o.R(t,e,i,n,"from")&&o.R(t,e,i,n,"to")),t.from&&!t.to&&(r=o.R(t,e,i,n,"from")),!t.from&&t.to&&(r=o.R(t,e,i,n,"to")))}),s.set(t,n),r)}),l=s.get(a),u=[];return u.push(e.once?"once":"page"),e.self&&u.push("self"),l?(r=[a],0<Object.keys(l).length&&r.push(l),(t=this.logger).info.apply(t,["Transition found ["+u.join(",")+"]"].concat(r))):this.logger.info("No transition found ["+u.join(",")+"]"),a},re.update=function(){var t=this;this.all=this.all.map(function(e){return t.T(e)}).sort(function(e,t){return e.priority-t.priority}).reverse().map(function(e){return delete e.priority,e}),this.page=this.all.filter(function(e){return void 0!==e.leave||void 0!==e.enter}),this.once=this.all.filter(function(e){return void 0!==e.once})},re.R=function(e,t,r,n,i){var o=!0,s=!1,a=e,l=t.name,u=l,h=l,c=l,p=i?a[i]:a,d="to"===i?r.next:r.current;if((!i||p)&&p[l]){switch(t.type){case"strings":default:var f=Array.isArray(p[u])?p[u]:[p[u]];d[u]&&-1!==f.indexOf(d[u])&&(s=!0),-1===f.indexOf(d[u])&&(o=!1);break;case"object":var m=Array.isArray(p[h])?p[h]:[p[h]];d[h]?(d[h].name&&-1!==m.indexOf(d[h].name)&&(s=!0),-1===m.indexOf(d[h].name)&&(o=!1)):o=!1;break;case"function":p[c](r)?s=!0:o=!1}s&&(i?(n[i]=n[i]||{},n[i][l]=a[i][l]):n[l]=a[l])}return o},re.O=function(e,t,r){var n=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(n+=Math.pow(10,r),e.from&&e.from[t]&&(n+=1),e.to&&e.to[t]&&(n+=2)),n},re.T=function(r){var n=this,i=r.priority=0;return this.A.forEach(function(e,t){i+=n.O(r,e.name,t+1)}),r.priority=i,r},fe),he=((te=de.prototype).get=function(e,t){return this.store.resolve(e,t)},te.doOnce=function(e){var t=e.data,r=e.transition;try{function n(){i.S=!1}var i=this,o=r||{};i.S=!0;var s=c(function(){return Promise.resolve(i.j("beforeOnce",t,o)).then(function(){return Promise.resolve(i.once(t,o)).then(function(){return Promise.resolve(i.j("afterOnce",t,o)).then(function(){})})})},function(e){i.S=!1,i.logger.debug("Transition error [before/after/once]"),i.logger.error(e)});return Promise.resolve(s&&s.then?s.then(n):n())}catch(e){return Promise.reject(e)}},te.doPage=function(e){var n=e.data,t=e.transition,i=e.page,o=e.wrapper;try{function r(e){if(s)return e;a.S=!1}var s=!1,a=this,l=t||{},u=!0===l.sync||!1;a.S=!0;var h=c(function(){function e(){return Promise.resolve(a.j("before",n,l)).then(function(){function e(e){return Promise.resolve(a.remove(n)).then(function(){return Promise.resolve(a.j("after",n,l)).then(function(){})})}var t=function(){if(u)return c(function(){return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.j("beforeLeave",n,l)).then(function(){return Promise.resolve(a.j("beforeEnter",n,l)).then(function(){return Promise.resolve(Promise.all([a.leave(n,l),a.enter(n,l)])).then(function(){return Promise.resolve(a.j("afterLeave",n,l)).then(function(){return Promise.resolve(a.j("afterEnter",n,l)).then(function(){})})})})})})},function(e){if(a.M(e))throw new le(e,"Transition error [sync]")});function e(e){return c(function(){var e=function(){if(!1!==t)return Promise.resolve(a.add(n,o)).then(function(){return Promise.resolve(a.j("beforeEnter",n,l)).then(function(){return Promise.resolve(a.enter(n,l,t)).then(function(){return Promise.resolve(a.j("afterEnter",n,l)).then(function(){})})})})}();if(e&&e.then)return e.then(function(){})},function(e){if(a.M(e))throw new le(e,"Transition error [before/after/enter]")})}var t=!1,r=c(function(){return Promise.resolve(a.j("beforeLeave",n,l)).then(function(){return Promise.resolve(Promise.all([a.leave(n,l),A(i,n)]).then(function(e){return e[0]})).then(function(e){return t=e,Promise.resolve(a.j("afterLeave",n,l)).then(function(){})})})},function(e){if(a.M(e))throw new le(e,"Transition error [before/after/leave]")});return r&&r.then?r.then(e):e()}();return t&&t.then?t.then(e):e()})}var t=function(){if(u)return Promise.resolve(A(i,n)).then(function(){})}();return t&&t.then?t.then(e):e()},function(e){if(a.S=!1,e.name&&"BarbaError"===e.name)throw a.logger.debug(e.label),a.logger.error(e.error),e;throw a.logger.debug("Transition error [page]"),a.logger.error(e),e});return Promise.resolve(h&&h.then?h.then(r):r(h))}catch(e){return Promise.reject(e)}},te.once=function(e,t){try{return Promise.resolve(ie.do("once",e,t)).then(function(){return t.once?H(t.once,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.leave=function(e,t){try{return Promise.resolve(ie.do("leave",e,t)).then(function(){return t.leave?H(t.leave,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.enter=function(e,t,r){try{return Promise.resolve(ie.do("enter",e,t)).then(function(){return t.enter?H(t.enter,t)(e,r):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.add=function(e,t){try{return F.addContainer(e.next.container,t),ie.do("nextAdded",e),Promise.resolve()}catch(e){return Promise.reject(e)}},te.remove=function(e){try{return F.removeContainer(e.current.container),ie.do("currentRemoved",e),Promise.resolve()}catch(e){return Promise.reject(e)}},te.M=function(e){return e.message?!/Timeout error|Fetch error/.test(e.message):!e.status},te.j=function(e,t,r){try{return Promise.resolve(ie.do(e,t,r)).then(function(){return r[e]?H(r[e],r)(t):Promise.resolve()})}catch(e){return Promise.reject(e)}},e(de,[{key:"isRunning",get:function(){return this.S},set:function(e){this.S=e}},{key:"hasOnce",get:function(){return 0<this.store.once.length}},{key:"hasSelf",get:function(){return this.store.all.some(function(e){return"self"===e.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})}}]),de),ce=(pe.prototype.L=function(n){var i=this;return function(e){var t=n.match(/enter/i)?e.next:e.current,r=i.byNamespace.get(t.namespace);return r&&r[n]?H(r[n],r)(e):Promise.resolve()}},pe);function pe(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==e.length&&(e.forEach(function(e){t.byNamespace.set(e.namespace,e)}),this.names.forEach(function(e){ie[e](t.L(e))}))}function de(e){void 0===e&&(e=[]),this.logger=new x("@barba/core"),this.S=!1,this.store=new ue(e)}function fe(e){void 0===e&&(e=[]),this.logger=new x("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}function me(e,t){var r;void 0===t&&(t="Barba error");for(var n=arguments.length,i=new Array(2<n?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return(r=ne.call.apply(ne,[this].concat(i))||this).error=e,r.label=t,Error.captureStackTrace&&Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),me),r.name="BarbaError",r}function ge(e){var t;this.P=[],"boolean"==typeof e?this.g=e:(t=Array.isArray(e)?e:[e],this.P=t.map(function(e){return L(e)}))}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var ye,ve={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return(ye=_e.prototype).use=function(e,t){var r=this.plugins;-1<r.indexOf(e)?this.logger.warn("Plugin ["+e.name+"] already installed."):"function"==typeof e.install?(e.install(this,t),r.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},ye.init=function(e){var t=void 0===e?{}:e,r=t.transitions,n=void 0===r?[]:r,i=t.views,o=void 0===i?[]:i,s=t.schema,a=void 0===s?I:s,l=t.requestError,u=t.timeout,h=void 0===u?2e3:u,c=t.cacheIgnore,p=void 0!==c&&c,d=t.prefetchIgnore,f=void 0!==d&&d,m=t.preventRunning,g=void 0!==m&&m,y=t.prevent,v=void 0===y?null:y,_=t.debug,b=t.logLevel;if(x.setLevel(!0===(void 0!==_&&_)?"debug":void 0===b?"off":b),this.logger.info(this.version),Object.keys(a).forEach(function(e){I[e]&&(I[e]=a[e])}),this.$=l,this.timeout=h,this.cacheIgnore=p,this.prefetchIgnore=f,this.preventRunning=g,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var E=this.data.current;if(!E.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new se(p),this.prevent=new ae(f),this.transitions=new he(n),this.views=new ce(o),null!==v){if("function"!=typeof v)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",v)}this.history.init(E.url.href,E.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(e){return e.init()});var S=this.data;S.trigger="barba",S.next=S.current,S.current=w({},this.schemaPage),this.hooks.do("ready",S),this.once(S),this.q()},ye.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ye.force=function(e){window.location.assign(e)},ye.go=function(e,t,r){var n;if(void 0===t&&(t="barba"),this.transitions.isRunning)this.force(e);else if(!(n="popstate"===t?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return t=this.history.change(e,t,r),r&&(r.stopPropagation(),r.preventDefault()),this.page(e,t,n)},ye.once=function(r){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",r)).then(function(){function e(){return Promise.resolve(n.hooks.do("afterEnter",r)).then(function(){})}var t=function(){if(n.transitions.hasOnce){var e=n.transitions.get(r,{once:!0});return Promise.resolve(n.transitions.doOnce({transition:e,data:r})).then(function(){})}}();return t&&t.then?t.then(e):e()})}catch(r){return Promise.reject(r)}},ye.page=function(e,t,r){try{function n(){var t=i.data;return Promise.resolve(i.hooks.do("page",t)).then(function(){var e=c(function(){var e=i.transitions.get(t,{once:!1,self:r});return Promise.resolve(i.transitions.doPage({data:t,page:o,transition:e,wrapper:i._})).then(function(){i.q()})},function(){0===x.getLevel()&&i.force(t.current.url.href)});if(e&&e.then)return e.then(function(){})})}var i=this;i.data.next.url=w({href:e},i.url.parse(e)),i.data.trigger=t;var o=i.cache.has(e)?i.cache.update(e,{action:"click"}).request:i.cache.set(e,i.request(e,i.timeout,i.onRequestError.bind(i,t)),"click").request,s=function(){if(i.transitions.shouldWait)return Promise.resolve(A(o,i.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(n):n())}catch(e){return Promise.reject(e)}},ye.onRequestError=function(e){this.transitions.isRunning=!1;for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r[0],o=r[1],s=this.cache.getAction(i);return this.cache.delete(i),!(this.$&&!1===this.$(e,s,i,o)||("click"===s&&this.force(i),1))},ye.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(e){t.logger.error(e)}),"prefetch")},ye.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},ye.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},ye.B=function(e){var t,r=this,n=this.I(e);n&&(t=this.dom.getHref(n),this.prevent.checkHref(t)||this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,n)).catch(function(e){r.logger.error(e)}),"enter"))},ye.U=function(e){var t=this.I(e);if(t)return this.transitions.isRunning&&this.preventRunning?(e.preventDefault(),void e.stopPropagation()):void this.go(this.dom.getHref(t),t,e)},ye.D=function(e){this.go(this.url.getHref(),"popstate",e)},ye.I=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},ye.q=function(){var e=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:w({href:e},this.url.parse(e))};this.C={current:t,next:w({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(_e,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),new _e;function _e(){this.version="2.9.7",this.schemaPage=ve,this.Logger=x,this.logger=new x("@barba/core"),this.plugins=[],this.hooks=ie,this.dom=F,this.helpers=N,this.history=O,this.request=q,this.url=z}}),function(e,t,r){var n=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=r(n):"function"==typeof define&&define.amd?define(function(){return t[e]=r(n)}):t[e]=r(n)}("enquire",this,function(n){"use strict";function s(e,t){for(var r=0,n=e.length;r<n&&!1!==t(e[r],r);r++);}function a(e){return"function"==typeof e}function r(e){(this.options=e).deferSetup||this.setup()}function l(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=n(e);var r=this;this.listener=function(e){r.mql=e,r.assess()},this.mql.addListener(this.listener)}function e(){if(!n)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!n("only all").matches}return r.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){this.initialised||this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},l.prototype={addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(r){var n=this.handlers;s(n,function(e,t){return e.equals(r)?(e.destroy(),!n.splice(t,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){s(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";s(this.handlers,function(e){e[t]()})}},e.prototype={register:function(t,e,r){var n,i=this.queries,o=r&&this.browserIsIncapable;return i[t]||(i[t]=new l(t,o)),a(e)&&(e={match:e}),n=e,"[object Array]"===Object.prototype.toString.apply(n)||(e=[e]),s(e,function(e){a(e)&&(e={match:e}),i[t].addHandler(e)}),this},unregister:function(e,t){var r=this.queries[e];return r&&(t?r.removeHandler(t):(r.clear(),delete this.queries[e])),this}},new e}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,r){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.imagesLoaded=r(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){var o=t.jQuery,s=t.console;function a(e,t){for(var r in t)e[r]=t[r];return e}var l=Array.prototype.slice;function u(e,t,r){if(!(this instanceof u))return new u(e,t,r);var n,i=e;"string"==typeof e&&(i=document.querySelectorAll(e)),i?(this.elements=(n=i,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=a({},this.options),"function"==typeof t?r=t:a(this.options,t),r&&this.on("always",r),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(i||e))}(u.prototype=Object.create(e.prototype)).options={},u.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},u.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&h[t]){for(var r=e.querySelectorAll("img"),n=0;n<r.length;n++){var i=r[n];this.addImage(i)}if("string"==typeof this.options.background)for(var o=e.querySelectorAll(this.options.background),n=0;n<o.length;n++){var s=o[n];this.addElementBackgroundImages(s)}}};var h={1:!0,9:!0,11:!0};function r(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}return u.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var r=/url\((['"])?(.*?)\1\)/gi,n=r.exec(t.backgroundImage);null!==n;){var i=n&&n[2];i&&this.addBackground(i,e),n=r.exec(t.backgroundImage)}},u.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},u.prototype.addBackground=function(e,t){var r=new n(e,t);this.images.push(r)},u.prototype.check=function(){var n=this;function t(e,t,r){setTimeout(function(){n.progress(e,t,r)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},u.prototype.progress=function(e,t,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+r,e,t)},u.prototype.complete=function(){var e,t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(r.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(u.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(e,t){return new u(this,e,t).jqDeferred.promise(o(this))})})(),u}),function(e){function d(e,t){return e-t}function f(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]}function m(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]}var g,y,v="hasOwnProperty",_=/[\.\/]/,b=/\s*,\s*/,E={n:{}},t=Object.prototype.toString,S=String,w=Array.isArray||function(e){return e instanceof Array||"[object Array]"==t.call(e)};eve=function(e,t){var r,n=y,i=Array.prototype.slice.call(arguments,2),o=eve.listeners(e),s=0,a=[],l={},u=[],h=g;u.firstDefined=f,u.lastDefined=m,g=e;for(var c=y=0,p=o.length;c<p;c++)"zIndex"in o[c]&&(a.push(o[c].zIndex),o[c].zIndex<0&&(l[o[c].zIndex]=o[c]));for(a.sort(d);a[s]<0;)if(r=l[a[s++]],u.push(r.apply(t,i)),y)return y=n,u;for(c=0;c<p;c++)if("zIndex"in(r=o[c]))if(r.zIndex==a[s]){if(u.push(r.apply(t,i)),y)break;do{if((r=l[a[++s]])&&u.push(r.apply(t,i)),y)break}while(r)}else l[r.zIndex]=r;else if(u.push(r.apply(t,i)),y)break;return y=n,g=h,u},eve._events=E,eve.listeners=function(e){for(var t,r,n,i,o,s,a=w(e)?e:e.split(_),l=E,u=[l],h=[],c=0,p=a.length;c<p;c++){for(s=[],i=0,o=u.length;i<o;i++)for(r=[(l=u[i].n)[a[c]],l["*"]],n=2;n--;)(t=r[n])&&(s.push(t),h=h.concat(t.f||[]));u=s}return h},eve.separator=function(e){_=e?(e="["+(e=S(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",new RegExp(e)):/[\.\/]/},eve.on=function(e,s){if("function"!=typeof s)return function(){};for(var t=w(e)?w(e[0])?e:[e]:S(e).split(b),r=0,n=t.length;r<n;r++)!function(e){for(var t,r=w(e)?e:S(e).split(_),n=E,i=0,o=r.length;i<o;i++)n=(n=n.n).hasOwnProperty(r[i])&&n[r[i]]||(n[r[i]]={n:{}});for(n.f=n.f||[],i=0,o=n.f.length;i<o;i++)if(n.f[i]==s){t=!0;break}t||n.f.push(s)}(t[r]);return function(e){+e==+e&&(s.zIndex=+e)}},eve.f=function(e){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},eve.stop=function(){y=1},eve.nt=function(e){var t=w(g)?g.join("."):g;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},eve.nts=function(){return w(g)?g:g.split(_)},eve.off=eve.unbind=function(e,t){if(e){var r=w(e)?w(e[0])?e:[e]:S(e).split(b);if(1<r.length)for(var n=0,i=r.length;n<i;n++)eve.off(r[n],t);else{r=w(e)?e:S(e).split(_);var o,s,a,l=[E],u=[];for(n=0,i=r.length;n<i;n++)for(c=0;c<l.length;c+=a.length-2){if(a=[c,1],o=l[c].n,"*"!=r[n])o[r[n]]&&(a.push(o[r[n]]),u.unshift({n:o,name:r[n]}));else for(s in o)o[v](s)&&(a.push(o[s]),u.unshift({n:o,name:s}));l.splice.apply(l,a)}for(n=0,i=l.length;n<i;n++)for(o=l[n];o.n;){if(t){if(o.f){for(c=0,p=o.f.length;c<p;c++)if(o.f[c]==t){o.f.splice(c,1);break}o.f.length||delete o.f}for(s in o.n)if(o.n[v](s)&&o.n[s].f){for(var h=o.n[s].f,c=0,p=h.length;c<p;c++)if(h[c]==t){h.splice(c,1);break}h.length||delete o.n[s].f}}else for(s in delete o.f,o.n)o.n[v](s)&&o.n[s].f&&delete o.n[s].f;o=o.n}e:for(n=0,i=u.length;n<i;n++){for(s in(o=u[n]).n[o.name].f)continue e;for(s in o.n[o.name].n)continue e;delete o.n[o.name]}}}else eve._events=E={n:{}}},eve.once=function(e,t){var r=function(){return eve.off(e,r),t.apply(this,arguments)};return eve.on(e,r)},eve.version="0.5.0",eve.toString=function(){return"You are running Eve 0.5.0"},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):e.eve=eve}(this),function(t,r){var e;"function"==typeof define&&define.amd?define(["eve"],function(e){return r(t,e)}):"undefined"!=typeof exports?(e=require("eve"),module.exports=r(t,e)):r(t,t.eve)}(window||this,function(v,K){var o,s,h,a,i,c,p,e,d,f,b=(o=void 0===K?function(){}:K,h={},a=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},c=0,p="M"+(+new Date).toString(36),e=Date.now||function(){return+new Date},d=function(e){if(e){var t,r,n=0;for(var i in h){h.hasOwnProperty(i)&&(r=(t=h[i]).get(),n++,t.s=(r-t.b)/(t.dur/t.spd),1<=t.s&&(delete h[i],t.s=1,n--,function(e){setTimeout(function(){o("mina.finish."+e.id,e)})}(t)),t.update())}s=!!n&&a(d)}else s=s||a(d)},(f=function(e,t,r,n,i,o,s){var a={id:p+(c++).toString(36),start:e,end:t,b:r,s:0,dur:n-r,spd:1,get:i,set:o,easing:s||f.linear,status:m,speed:y,duration:_,stop:E,pause:S,resume:w,update:x};h[a.id]=a;var l,u=0;for(l in h)if(h.hasOwnProperty(l)&&2==++u)break;return 1==u&&d(),a}).time=e,f.getById=function(e){return h[e]||null},f.linear=function(e){return e},f.easeout=function(e){return Math.pow(e,1.7)},f.easein=function(e){return Math.pow(e,.48)},f.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,i=-r-t,o=Math.pow(Math.abs(n),1/3)*(n<0?-1:1)+Math.pow(Math.abs(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},f.backin=function(e){return 1==e?1:e*e*(2.70158*e-1.70158)},f.backout=function(e){return 0==e?0:--e*e*(2.70158*e+1.70158)+1},f.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},f.bounce=function(e){var t=7.5625,r=2.75,n=e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375;return n},v.mina=f),t=function(e){function y(e,t){if(e){if(e.nodeType)return f(e);if(h(e,"array")&&y.set)return y.set.apply(y,e);if(e instanceof l)return e;if(null==t)return f(e=m.doc.querySelector(String(e)))}return new d(e=null==e?"100%":e,t=null==t?"100%":t)}function u(e,t){if(t){if("#text"==e&&(e=m.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=m.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=u(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(L,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(N,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType)for(var r in t){var n;t[v](r)&&((n=_(t[r]))?"xlink:"==r.substring(0,6)?e.setAttributeNS(L,r.substring(6),n):"xml:"==r.substring(0,4)?e.setAttributeNS(N,r.substring(4),n):e.setAttribute(r,n):e.removeAttribute(r))}else"text"in t&&(e.nodeValue=t.text)}else e=m.doc.createElementNS(N,e);return e}function h(e,t){return"finite"==(t=_.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||n.call(e).slice(8,-1).toLowerCase()==t)}function t(i,o,s){function a(){var e=Array.prototype.slice.call(arguments,0),t=e.join("␀"),r=a.cache=a.cache||{},n=a.count=a.count||[];return r[v](t)?function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(n,t):(1e3<=n.length&&delete r[n.shift()],n.push(t),r[t]=i.apply(o,e)),s?s(r[t]):r[t]}return a}function i(e){return e%360*C/180}function c(e){return e.node.ownerSVGElement&&f(e.node.ownerSVGElement)||y.select("svg")}function o(e){h(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);for(var i=n.childNodes,t=0;t<i.length;t++)this[r++]=f(i[t]);return this}function l(e){if(e.snap in B)return B[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new d(t)),this.type=e.tagName||e.nodeName;var r=this.id=O(this);if(this.anims={},this._={transform:[]},e.snap=r,"g"==(B[r]=this).type&&(this.add=o),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var n in d.prototype)d.prototype[v](n)&&(this[n]=d.prototype[n])}function s(e){this.node=e}function p(e,t){var r=u(e);return t.appendChild(r),f(r)}function d(e,t){var r=d.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in B)return B[e.snap];var n=e.ownerDocument,i=new l(e),o=e.getElementsByTagName("desc")[0],s=e.getElementsByTagName("defs")[0];for(var a in o||((o=u("desc")).appendChild(n.createTextNode("Created with Snap")),i.node.appendChild(o)),s||(s=u("defs"),i.node.appendChild(s)),i.defs=s,r)r[v](a)&&(i[a]=r[a]);i.paper=i.root=i}else u((i=p("svg",m.doc.body)).node,{height:t,version:1.1,width:e,xmlns:N});return i}function f(e){return!e||e instanceof l||e instanceof s?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new d(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new d(e.contentDocument.getElementsByTagName("svg")[0]):new l(e)}y.version="0.5.1",y.toString=function(){return"Snap v"+this.version},y._={};var m={win:e.window,doc:e.window.document};y._.glob=m;var r,a,v="hasOwnProperty",_=String,b=parseFloat,E=parseInt,S=Math,w=S.max,x=S.min,P=S.abs,C=(S.pow,S.PI),n=(S.round,Object.prototype.toString),A=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,T=(y._.separator=/[,\s]+/,/[\s]*,[\s]*/),k={hs:1,rg:1},R=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,M=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,D=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,I=0,F="S"+(+new Date).toString(36),O=function(e){return(e&&e.type?e.type:"")+F+(I++).toString(36)},L="http://www.w3.org/1999/xlink",N="http://www.w3.org/2000/svg",B={};y.url=function(e){return"url('#"+e+"')"},y._.$=u,y._.id=O,y.format=(r=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,i){return _(e).replace(r,function(e,t){return r=e,o=n=i,t.replace(a,function(e,t,r,n,i){t=t||n,o&&(t in o&&(o=o[t]),"function"==typeof o&&i&&(o=o()))}),o=(null==o||o==n?r:o)+"";var r,n,o})}),y._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var n in t)t[v](n)&&(r[n]=e(t[n]));return r},y._.cacher=t,y.rad=i,y.deg=function(e){return 180*e/C%360},y.sin=function(e){return S.sin(y.rad(e))},y.tan=function(e){return S.tan(y.rad(e))},y.cos=function(e){return S.cos(y.rad(e))},y.asin=function(e){return y.deg(S.asin(e))},y.acos=function(e){return y.deg(S.acos(e))},y.atan=function(e){return y.deg(S.atan(e))},y.atan2=function(e){return y.deg(S.atan2(e))},y.angle=function e(t,r,n,i,o,s){if(null!=o)return e(t,r,o,s)-e(n,i,o,s);var a=t-n,l=r-i;return a||l?(180+180*S.atan2(-l,-a)/C+360)%360:0},y.len=function(e,t,r,n){return Math.sqrt(y.len2(e,t,r,n))},y.len2=function(e,t,r,n){return(e-r)*(e-r)+(t-n)*(t-n)},y.closestPoint=function(e,n,i){function t(e){var t=e.x-n,r=e.y-i;return t*t+r*r}for(var r,o,s,a,l,u,h,c,p,d,f=e.node,m=f.getTotalLength(),g=m/f.pathSegList.numberOfItems*.125,y=1/0,v=0;v<=m;v+=g)(a=t(s=f.getPointAtLength(v)))<y&&(r=s,o=v,y=a);for(g*=.5;.5<g;){0<=(h=o-g)&&(p=t(l=f.getPointAtLength(h)))<y?(r=l,o=h,y=p):(c=o+g)<=m&&(d=t(u=f.getPointAtLength(c)))<y?(r=u,o=c,y=d):g*=.5}return{x:r.x,y:r.y,length:o,distance:Math.sqrt(y)}},y.is=h,y.snapTo=function(e,t,r){if(r=h(r,"finite")?r:10,h(e,"array")){for(var n=e.length;n--;)if(P(e[n]-t)<=r)return e[n]}else{var i=t%(e=+e);if(i<r)return t-i;if(e-r<i)return t-i+e}return t},y.getRGB=t(function(e){if(!e||(e=_(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:H};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:H};if(k[v](e.toLowerCase().substring(0,2))||"#"==e.charAt()||(e=q(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:H};var t,r,n,i,o,s,a=e.match(A);return a?(a[2]&&(n=E(a[2].substring(5),16),r=E(a[2].substring(3,5),16),t=E(a[2].substring(1,3),16)),a[3]&&(n=E((o=a[3].charAt(3))+o,16),r=E((o=a[3].charAt(2))+o,16),t=E((o=a[3].charAt(1))+o,16)),a[4]&&(s=a[4].split(T),t=b(s[0]),"%"==s[0].slice(-1)&&(t*=2.55),r=b(s[1]),"%"==s[1].slice(-1)&&(r*=2.55),n=b(s[2]),"%"==s[2].slice(-1)&&(n*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(i=b(s[3])),s[3]&&"%"==s[3].slice(-1)&&(i/=100)),a[5]?(s=a[5].split(T),t=b(s[0]),"%"==s[0].slice(-1)&&(t/=100),r=b(s[1]),"%"==s[1].slice(-1)&&(r/=100),n=b(s[2]),"%"==s[2].slice(-1)&&(n/=100),"deg"!=s[0].slice(-3)&&"°"!=s[0].slice(-1)||(t/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(i=b(s[3])),s[3]&&"%"==s[3].slice(-1)&&(i/=100),y.hsb2rgb(t,r,n,i)):a[6]?(s=a[6].split(T),t=b(s[0]),"%"==s[0].slice(-1)&&(t/=100),r=b(s[1]),"%"==s[1].slice(-1)&&(r/=100),n=b(s[2]),"%"==s[2].slice(-1)&&(n/=100),"deg"!=s[0].slice(-3)&&"°"!=s[0].slice(-1)||(t/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(i=b(s[3])),s[3]&&"%"==s[3].slice(-1)&&(i/=100),y.hsl2rgb(t,r,n,i)):(t=x(S.round(t),255),r=x(S.round(r),255),n=x(S.round(n),255),i=x(w(i,0),1),(a={r:t,g:r,b:n,toString:H}).hex="#"+(16777216|n|r<<8|t<<16).toString(16).slice(1),a.opacity=h(i,"finite")?i:1,a)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:H}},y),y.hsb=t(function(e,t,r){return y.hsb2rgb(e,t,r).hex}),y.hsl=t(function(e,t,r){return y.hsl2rgb(e,t,r).hex}),y.rgb=t(function(e,t,r,n){if(h(n,"finite")){var i=S.round;return"rgba("+[i(e),i(t),i(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});function j(){return"hsb("+[this.h,this.s,this.b]+")"}function z(){return"hsl("+[this.h,this.s,this.l]+")"}function U(e,t,r){var n;return null==t&&h(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&h(e,string)&&(e=(n=y.getRGB(e)).r,t=n.g,r=n.b),(1<e||1<t||1<r)&&(e/=255,t/=255,r/=255),[e,t,r]}function V(e,t,r,n){var i={r:e=S.round(255*e),g:t=S.round(255*t),b:r=S.round(255*r),opacity:h(n,"finite")?n:1,hex:y.rgb(e,t,r),toString:H};return h(n,"finite")&&(i.opacity=n),i}var q=function(e){var r=m.doc.getElementsByTagName("head")[0]||m.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(q=t(function(e){if("red"==e.toLowerCase())return n;r.style.color=n,r.style.color=e;var t=m.doc.defaultView.getComputedStyle(r,"").getPropertyValue("color");return t==n?null:t}))(e)},H=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"};y.color=function(e){var t;return h(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=y.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):h(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=y.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(h(e,"string")&&(e=y.getRGB(e)),h(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=y.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=y.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=H,e},y.hsb2rgb=function(e,t,r,n){var i,o,s,a,l;return h(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,n=e.o,e=e.h),a=(l=r*t)*(1-P((e=(e*=360)%360/60)%2-1)),i=o=s=r-l,V(i+=[l,a,0,0,a,l][e=~~e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],n)},y.hsl2rgb=function(e,t,r,n){var i,o,s,a,l;return h(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(1<e||1<t||1<r)&&(e/=360,t/=100,r/=100),a=(l=2*t*(r<.5?r:1-r))*(1-P((e=(e*=360)%360/60)%2-1)),i=o=s=r-l/2,V(i+=[l,a,0,0,a,l][e=~~e],o+=[a,l,l,a,0,0][e],s+=[0,0,a,l,l,a][e],n)},y.rgb2hsb=function(e,t,r){var n,i;return e=(r=U(e,t,r))[0],t=r[1],r=r[2],{h:((0==(i=(n=w(e,t,r))-x(e,t,r))?null:n==e?(t-r)/i:n==t?(r-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:j}},y.rgb2hsl=function(e,t,r){var n,i,o,s;return e=(r=U(e,t,r))[0],t=r[1],r=r[2],n=((i=w(e,t,r))+(o=x(e,t,r)))/2,{h:((0==(s=i-o)?null:i==e?(t-r)/s:i==t?(r-e)/s+2:(e-t)/s+4)+360)%6*60/360,s:0==s?0:n<.5?s/(2*n):s/(2-2*n),l:n,toString:z}},y.parsePathString=function(e){if(!e)return null;var t=y.path(e);if(t.arr)return y.path.clone(t.arr);var o={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},s=[];return h(e,"array")&&h(e[0],"array")&&(s=y.path.clone(e)),s.length||_(e).replace(R,function(e,t,r){var n=[],i=t.toLowerCase();if(r.replace(D,function(e,t){t&&n.push(+t)}),"m"==i&&2<n.length&&(s.push([t].concat(n.splice(0,2))),i="l",t="m"==t?"l":"L"),"o"==i&&1==n.length&&s.push([t,n[0]]),"r"==i)s.push([t].concat(n));else for(;n.length>=o[i]&&(s.push([t].concat(n.splice(0,o[i]))),o[i]););}),s.toString=y.path.toString,t.arr=y.path.clone(s),s};var G=y.parseTransformString=function(e){if(!e)return null;var i=[];return h(e,"array")&&h(e[0],"array")&&(i=y.path.clone(e)),i.length||_(e).replace(M,function(e,t,r){var n=[];t.toLowerCase(),r.replace(D,function(e,t){t&&n.push(+t)}),i.push([t].concat(n))}),i.toString=y.path.toString,i};y._.svgTransform2string=function(e){var n=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,t,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==t&&1==r.length&&r.push(0,0),"scale"==t&&(2<r.length?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==t?n.push(["m",1,0,S.tan(i(r[0])),1,0,0]):"skewY"==t?n.push(["m",1,S.tan(i(r[0])),0,1,0,0]):n.push([t.charAt(0)].concat(r)),e}),n},y._.rgTransform=/^[a-z][\s]*-?\.?\d/i,y._.transform2matrix=function(e,t){var r=G(e),n=new y.Matrix;if(r)for(var i=0,o=r.length;i<o;i++){var s,a,l,u,h,c=r[i],p=c.length,d=_(c[0]).toLowerCase(),f=c[0]!=d,m=f?n.invert():0;"t"==d&&2==p?n.translate(c[1],0):"t"==d&&3==p?f?(s=m.x(0,0),a=m.y(0,0),l=m.x(c[1],c[2]),u=m.y(c[1],c[2]),n.translate(l-s,u-a)):n.translate(c[1],c[2]):"r"==d?2==p?(h=h||t,n.rotate(c[1],h.x+h.width/2,h.y+h.height/2)):4==p&&(f?(l=m.x(c[2],c[3]),u=m.y(c[2],c[3]),n.rotate(c[1],l,u)):n.rotate(c[1],c[2],c[3])):"s"==d?2==p||3==p?(h=h||t,n.scale(c[1],c[p-1],h.x+h.width/2,h.y+h.height/2)):4==p?f?(l=m.x(c[2],c[3]),u=m.y(c[2],c[3]),n.scale(c[1],c[1],l,u)):n.scale(c[1],c[1],c[2],c[3]):5==p&&(f?(l=m.x(c[3],c[4]),u=m.y(c[3],c[4]),n.scale(c[1],c[2],l,u)):n.scale(c[1],c[2],c[3],c[4])):"m"==d&&7==p&&n.add(c[1],c[2],c[3],c[4],c[5],c[6])}return n},y._unit2px=function(r,n,i){function e(e){if(null==e)return"";if(e==+e)return e;u(l,{width:e});try{return l.getBBox().width}catch(e){return 0}}function t(e){if(null==e)return"";if(e==+e)return e;u(l,{height:e});try{return l.getBBox().height}catch(e){return 0}}function o(e,t){null==n?a[e]=t(r.attr(e)||0):e==n&&(a=t(null==i?r.attr(e)||0:i))}var s=c(r).node,a={},l=s.querySelector(".svg---mgr");switch(l||(l=u("rect"),u(l,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),s.appendChild(l)),r.type){case"rect":o("rx",e),o("ry",t);case"image":o("width",e),o("height",t);case"text":o("x",e),o("y",t);break;case"circle":o("cx",e),o("cy",t),o("r",e);break;case"ellipse":o("cx",e),o("cy",t),o("rx",e),o("ry",t);break;case"line":o("x1",e),o("x2",e),o("y1",t),o("y2",t);break;case"marker":o("refX",e),o("markerWidth",e),o("refY",t),o("markerHeight",t);break;case"radialGradient":o("fx",e),o("fy",t);break;case"tspan":o("dx",e),o("dy",t);break;default:o(n,e)}return s.removeChild(l),a},m.doc.contains||m.doc.compareDocumentPosition,y._.getSomeDefs=function(e){var t=e.node.ownerSVGElement&&f(e.node.ownerSVGElement)||e.node.parentNode&&f(e.node.parentNode)||y.select("svg")||y(0,0),r=t.select("defs");return null!=r&&r.node||p("defs",t.node).node},y._.getSomeSVG=c,y.select=function(e){return e=_(e).replace(/([^\\]):/g,"$1\\:"),f(m.doc.querySelector(e))},y.selectAll=function(e){for(var t=m.doc.querySelectorAll(e),r=(y.set||Array)(),n=0;n<t.length;n++)r.push(f(t[n]));return r},setInterval(function(){for(var e in B){var t,r;B[v](e)&&(r=(t=B[e]).node,("svg"!=t.type&&!r.ownerSVGElement||"svg"==t.type&&(!r.parentNode||"ownerSVGElement"in r.parentNode&&!r.ownerSVGElement))&&delete B[e])}},1e4),l.prototype.attr=function(e,t){var r=this.node;if(!e){if(1!=r.nodeType)return{text:r.nodeValue};for(var n=r.attributes,i={},o=0,s=n.length;o<s;o++)i[n[o].nodeName]=n[o].nodeValue;return i}if(h(e,"string")){if(!(1<arguments.length))return K("snap.util.getattr."+e,this).firstDefined();var a={};a[e]=t,e=a}for(var l in e)e[v](l)&&K("snap.util.attr."+l,this,e[l]);return this},y.parse=function(e){var t=m.doc.createDocumentFragment(),r=!0,n=m.doc.createElement("div");if((e=_(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new s(t)},y.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=m.doc.createDocumentFragment(),r=0,n=e.length;r<n;r++){var i=e[r];i.node&&i.node.nodeType&&t.appendChild(i.node),i.nodeType&&t.appendChild(i),"string"==typeof i&&t.appendChild(y.parse(i).node)}return new s(t)},y._.make=p,y._.wrap=f,d.prototype.el=function(e,t){var r=p(e,this.node);return t&&r.attr(t),r},l.prototype.children=function(){for(var e=[],t=this.node.childNodes,r=0,n=t.length;r<n;r++)e[r]=y(t[r]);return e},l.prototype.toJSON=function(){var e=[];return function e(t,r){for(var n=0,i=t.length;n<i;n++){var o={type:t[n].type,attr:t[n].attr()},s=t[n].children();r.push(o),s.length&&e(s,o.childNodes=[])}}([this],e),e[0]},K.on("snap.util.getattr",function(){var e=K.nt(),t=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return W[v](t)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t):u(this.node,e)});var W={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};K.on("snap.util.attr",function(e){var t=K.nt(),r={};r[t=t.substring(t.lastIndexOf(".")+1)]=e;var n=t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),i=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});W[v](i)?this.node.style[n]=null==e?"":e:u(this.node,r)}),y.ajax=function(e,t,r,n){var i=new XMLHttpRequest,o=O();if(i){if(h(t,"function"))n=r,r=t,t=null;else if(h(t,"object")){var s=[];for(var a in t)t.hasOwnProperty(a)&&s.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));t=s.join("&")}return i.open(t?"POST":"GET",e,!0),t&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(K.once("snap.ajax."+o+".0",r),K.once("snap.ajax."+o+".200",r),K.once("snap.ajax."+o+".304",r)),i.onreadystatechange=function(){4==i.readyState&&K("snap.ajax."+o+"."+i.status,n,i)},4==i.readyState||i.send(t),i}},y.load=function(e,r,n){y.ajax(e,function(e){var t=y.parse(e.responseText);n?r.call(n,t):r(t)})};return y.getElementByPoint=function(e,t){var r,n,i,o,s,a,l,u,h,c,p=(this.canvas,m.doc.elementFromPoint(e,t));return m.win.opera&&"svg"==p.tagName&&(s=(o=p).getBoundingClientRect(),a=o.ownerDocument,l=a.body,u=a.documentElement,h=u.clientTop||l.clientTop||0,c=u.clientLeft||l.clientLeft||0,r={y:s.top+(g.win.pageYOffset||u.scrollTop||l.scrollTop)-h,x:s.left+(g.win.pageXOffset||u.scrollLeft||l.scrollLeft)-c},(n=p.createSVGRect()).x=e-r.x,n.y=t-r.y,n.width=n.height=1,(i=p.getIntersectionList(n,null)).length&&(p=i[i.length-1])),p?f(p):null},y.plugin=function(e){e(y,l,d,m,s)},m.win.Snap=y}(v||this);function m(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e}function y(e){return null==e?this.spd:void(this.spd=e)}function _(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))}function E(){delete h[this.id],this.update(),o("mina.stop."+this.id,this)}function S(){var e=this;e.pdif||(delete h[e.id],e.update(),e.pdif=e.get()-e.b)}function w(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,h[e.id]=e,d())}function x(){var e,t=this;if(i(t.start)){e=[];for(var r=0,n=t.start.length;r<n;r++)e[r]=+t.start[r]+(t.end[r]-t.start[r])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)}return t.plugin(function(d,e,t,r,n){function h(e,t){if(null==t){var r=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new d.Matrix;t=d._.svgTransform2string(t)}else t=d._.rgTransform.test(t)?c(t).replace(/\.{3}|\u2026/g,e._.transform||""):d._.svgTransform2string(t),a(t,"array")&&(t=d.path?d.path.toString.call(t):c(t)),e._.transform=t;var n=d._.transform2matrix(t,e.getBBox(1));return r?n:void(e.matrix=n)}function i(e){function t(r,n){var e=f(r.node,n);!(e=(e=e&&e.match(i))&&e[2])||"#"!=e.charAt()||(e=e.substring(1))&&(s[e]=(s[e]||[]).concat(function(e){var t={};t[n]=d.url(e),f(r.node,t)}))}for(var r,n=e.selectAll("*"),i=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],s={},a=0,l=n.length;a<l;a++){t(r=n[a],"fill"),t(r,"stroke"),t(r,"filter"),t(r,"mask"),t(r,"clip-path"),function(t){var e=f(t.node,"xlink:href");!e||"#"!=e.charAt()||(e=e.substring(1))&&(s[e]=(s[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)}))}(r);var u=f(r.node,"id");u&&(f(r.node,{id:r.id}),o.push({old:u,id:r.id}))}for(a=0,l=o.length;a<l;a++){var h=s[o[a].old];if(h)for(var c=0,p=h.length;c<p;c++)h[c](o[a].id)}}function o(o){return function(){var e=o?"<"+this.type:"",t=this.node.attributes,r=this.node.childNodes;if(o)for(var n=0,i=t.length;n<i;n++)e+=" "+t[n].name+'="'+t[n].value.replace(/"/g,'\\"')+'"';if(r.length){for(o&&(e+=">"),n=0,i=r.length;n<i;n++)3==r[n].nodeType?e+=r[n].nodeValue:1==r[n].nodeType&&(e+=m(r[n]).toString());o&&(e+="</"+this.type+">")}else o&&(e+="/>");return e}}var s=e.prototype,a=d.is,c=String,l=d._unit2px,f=d._.$,u=d._.make,p=d._.getSomeDefs,m=d._.wrap;s.getBBox=function(e){if("tspan"==this.type)return d._.box(this.node.getClientRects().item(0));if(!d.Matrix||!d.path)return this.node.getBBox();var t,r=this,n=new d.Matrix;if(r.removed)return d._.box();for(;"use"==r.type;){e||(n=n.add(r.transform().localMatrix.translate(r.attr("x")||0,r.attr("y")||0))),r=r.original?r.original:(t=r.attr("xlink:href"),r.original=r.node.ownerDocument.getElementById(t.substring(t.indexOf("#")+1)))}var i=r._,o=d.path.get[r.type]||d.path.get.deflt;try{return e?(i.bboxwt=o?d.path.getBBox(r.realPath=o(r)):d._.box(r.node.getBBox()),d._.box(i.bboxwt)):(r.realPath=o(r),r.matrix=r.transform().localMatrix,i.bbox=d.path.getBBox(d.path.map(r.realPath,n.add(r.matrix))),d._.box(i.bbox))}catch(e){return d._.box()}};function g(){return this.string}s.transform=function(e){var t=this._;if(null!=e)return e instanceof d.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):h(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?f(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?f(this.node,{patternTransform:this.matrix}):f(this.node,{transform:this.matrix})),this;for(var r,n=this,i=new d.Matrix(this.node.getCTM()),o=h(this),s=[o],a=new d.Matrix,l=o.toTransformString(),u=c(o)==c(this.matrix)?c(t.transform):l;"svg"!=n.type&&(n=n.parent());)s.push(h(n));for(r=s.length;r--;)a.add(s[r]);return{string:u,globalMatrix:i,totalMatrix:a,localMatrix:o,diffMatrix:i.clone().add(o.invert()),global:i.toTransformString(),total:a.toTransformString(),local:l,toString:g}},s.parent=function(){return m(this.node.parentNode)},s.append=s.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=m(e),this.node.appendChild(e.node),e.paper=this.paper}return this},s.appendTo=function(e){return e&&(e=m(e)).append(this),this},s.prepend=function(e){if(e){if("set"==e.type){var t,r=this;return e.forEach(function(e){t?t.after(e):r.prepend(e),t=e}),this}var n=(e=m(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},s.prependTo=function(e){return(e=m(e)).prepend(this),this},s.before=function(e){if("set"==e.type){var r=this;return e.forEach(function(e){var t=e.parent();r.node.parentNode.insertBefore(e.node,r.node),t&&t.add()}),this.parent().add(),this}var t=(e=m(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},s.after=function(e){var t=(e=m(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},s.insertBefore=function(e){e=m(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.insertAfter=function(e){e=m(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},s.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},s.select=function(e){return m(this.node.querySelector(e))},s.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(d.set||Array)(),n=0;n<t.length;n++)r.push(m(t[n]));return r},s.asPX=function(e,t){return null==t&&(t=this.attr(e)),+l(this,e,t)},s.use=function(){var e,t=this.node.id;return t||(t=this.id,f(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?u(this.type,this.node.parentNode):u("use",this.node.parentNode),f(e.node,{"xlink:href":"#"+t}),e.original=this,e},s.clone=function(){var e=m(this.node.cloneNode(!0));return f(e.node,"id")&&f(e.node,{id:e.id}),i(e),e.insertAfter(this),e},s.toDefs=function(){return p(this).appendChild(this.node),this},s.pattern=s.toPattern=function(e,t,r,n){var i=u("pattern",p(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),f(i.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,r,n].join(" ")}),i.node.appendChild(this.node),i},s.marker=function(e,t,r,n,i,o){var s=u("marker",p(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,i=e.refX||e.cx,o=e.refY||e.cy,e=e.x),f(s.node,{viewBox:[e,t,r,n].join(" "),markerWidth:r,markerHeight:n,orient:"auto",refX:i||0,refY:o||0,id:s.id}),s.node.appendChild(this.node),s};var y={};s.data=function(e,t){var r=y[this.id]=y[this.id]||{};if(0==arguments.length)return K("snap.data.get."+this.id,this,r,null),r;if(1!=arguments.length)return r[e]=t,K("snap.data.set."+this.id,this,t,e),this;if(d.is(e,"object")){for(var n in e)e.hasOwnProperty(n)&&this.data(n,e[n]);return this}return K("snap.data.get."+this.id,this,r[e],e),r[e]},s.removeData=function(e){return null==e?y[this.id]={}:y[this.id]&&delete y[this.id][e],this},s.outerSVG=s.toString=o(1),s.innerSVG=o(),s.toDataURL=function(){if(v&&v.btoa){var e=this.getBBox(),t=d.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t)))}},n.prototype.select=s.select,n.prototype.selectAll=s.selectAll}),t.plugin(function(e,t,r,n,i){function g(e,t,r,n){"function"!=typeof r||r.length||(n=r,r=b.linear),this.attr=e,this.dur=t,r&&(this.easing=r),n&&(this.callback=n)}var o=t.prototype,y=e.is,v=String,_="hasOwnProperty";e._.Animation=g,e.animation=function(e,t,r,n){return new g(e,t,r,n)},o.inAnim=function(){var e=[];for(var t in this.anims)this.anims[_](t)&&function(t){e.push({anim:new g(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(this.anims[t]);return e},e.animate=function(e,t,r,n,i,o){"function"!=typeof i||i.length||(o=i,i=b.linear);var s=b.time(),a=b(e,t,s,s+n,b.time,r,i);return o&&K.once("mina.finish."+a.id,o),a},o.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;t<r;t++)e[t].stop();return this},o.animate=function(e,t,r,n){"function"!=typeof r||r.length||(n=r,r=b.linear),e instanceof g&&(n=e.callback,r=e.easing,t=e.dur,e=e.attr);var i,o,s,a,l,u=[],h=[],c={},p=this;for(var d in e){e[_](d)&&(p.equal?(i=(a=p.equal(d,v(e[d]))).from,o=a.to,s=a.f):(i=+p.attr(d),o=+e[d]),l=y(i,"array")?i.length:1,c[d]=function(r,n,i){return function(e){var t=e.slice(r,n);return 1==t.length&&(t=t[0]),i?i(t):t}}(u.length,u.length+l,s),u=u.concat(i),h=h.concat(o))}var f=b.time(),m=b(u,h,f,f+t,b.time,function(e){var t={};for(var r in c)c[_](r)&&(t[r]=c[r](e));p.attr(t)},r);return(p.anims[m.id]=m)._attrs=e,m._callback=n,K("snap.animcreated."+p.id,m),K.once("mina.finish."+m.id,function(){K.off("mina.*."+m.id),delete p.anims[m.id],n&&n.call(p)}),K.once("mina.stop."+m.id,function(){K.off("mina.*."+m.id),delete p.anims[m.id]}),p}}),t.plugin(function(o,e,t,r,n){function u(e,t,r,n,i,o){return null==t&&"[object SVGMatrix]"==s.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var i,s=Object.prototype.toString,a=String,l=Math;function h(e){return e[0]*e[0]+e[1]*e[1]}function c(e){var t=l.sqrt(h(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}(i=u.prototype).add=function(e,t,r,n,i,o){if(e&&e instanceof u)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var s=e*this.a+t*this.c,a=e*this.b+t*this.d;return this.e+=i*this.a+o*this.c,this.f+=i*this.b+o*this.d,this.c=r*this.a+n*this.c,this.d=r*this.b+n*this.d,this.a=s,this.b=a,this},u.prototype.multLeft=function(e,t,r,n,i,o){if(e&&e instanceof u)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var s=e*this.a+r*this.b,a=e*this.c+r*this.d,l=e*this.e+r*this.f+i;return this.b=t*this.a+n*this.b,this.d=t*this.c+n*this.d,this.f=t*this.e+n*this.f+o,this.a=s,this.c=a,this.e=l,this},i.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new u(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},i.clone=function(){return new u(this.a,this.b,this.c,this.d,this.e,this.f)},i.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},i.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.translate(r,n),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(r||n)&&this.translate(-r,-n),this},i.rotate=function(e,t,r){e=o.rad(e),t=t||0,r=r||0;var n=+l.cos(e).toFixed(9),i=+l.sin(e).toFixed(9);return this.add(n,i,-i,n,t,r),this.add(1,0,0,1,-t,-r)},i.skewX=function(e){return this.skew(e,0)},i.skewY=function(e){return this.skew(0,e)},i.skew=function(e,t){e=e||0,t=t||0,e=o.rad(e),t=o.rad(t);var r=l.tan(e).toFixed(9),n=l.tan(t).toFixed(9);return this.add(1,n,r,1,0,0)},i.x=function(e,t){return e*this.a+t*this.c+this.e},i.y=function(e,t){return e*this.b+t*this.d+this.f},i.get=function(e){return+this[a.fromCharCode(97+e)].toFixed(4)},i.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},i.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},i.determinant=function(){return this.a*this.d-this.b*this.c},i.split=function(){var e={};e.dx=this.e,e.dy=this.f;var t=[[this.a,this.b],[this.c,this.d]];e.scalex=l.sqrt(h(t[0])),c(t[0]),e.shear=t[0][0]*t[1][0]+t[0][1]*t[1][1],t[1]=[t[1][0]-t[0][0]*e.shear,t[1][1]-t[0][1]*e.shear],e.scaley=l.sqrt(h(t[1])),c(t[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var r=t[0][1],n=t[1][1];return n<0?(e.rotate=o.deg(l.acos(n)),r<0&&(e.rotate=360-e.rotate)):e.rotate=o.deg(l.asin(r)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},i.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))},o.Matrix=u,o.matrix=function(e,t,r,n,i,o){return new u(e,t,r,n,i,o)}}),t.plugin(function(o,s,e,i,a){function t(i){return function(e){var t,r;K.stop(),e instanceof a&&1==e.node.childNodes.length&&("radialGradient"==e.node.firstChild.tagName||"linearGradient"==e.node.firstChild.tagName||"pattern"==e.node.firstChild.tagName)&&(e=e.node.firstChild,p(this).appendChild(e),e=h(e)),r=e instanceof s?"radialGradient"==e.type||"linearGradient"==e.type||"pattern"==e.type?(e.node.id||f(e.node,{id:e.id}),m(e.node.id)):e.attr(i):(r=o.color(e)).error?(t=o(p(this).ownerSVGElement).gradient(e))?(t.node.id||f(t.node,{id:t.id}),m(t.node.id)):e:g(r);var n={};n[i]=r,f(this.node,n),this.node.style[i]=""}}function r(e){K.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function n(){return K.stop(),this.node.style.fontSize}var l,u=o._.make,h=o._.wrap,c=o.is,p=o._.getSomeDefs,d=/^url\((['"]?)([^)]+)\1\)$/,f=o._.$,m=o.url,g=String,y=o._.separator;o.deurl=function(e){var t=String(e).match(d);return t?t[2]:e},K.on("snap.util.attr.mask",function(e){var t;(e instanceof s||e instanceof a)&&(K.stop(),e instanceof a&&1==e.node.childNodes.length&&(e=e.node.firstChild,p(this).appendChild(e),e=h(e)),"mask"==e.type?t=e:(t=u("mask",p(this))).node.appendChild(e.node),t.node.id||f(t.node,{id:t.id}),f(this.node,{mask:m(t.id)}))}),l=function(e){if(e instanceof s||e instanceof a){K.stop();for(var t,r=e.node;r;){if("clipPath"===r.nodeName){t=new s(r);break}if("svg"===r.nodeName){t=void 0;break}r=r.parentNode}t||((t=u("clipPath",p(this))).node.appendChild(e.node),t.node.id||f(t.node,{id:t.id})),f(this.node,{"clip-path":m(t.node.id||t.id)})}},K.on("snap.util.attr.clip",l),K.on("snap.util.attr.clip-path",l),K.on("snap.util.attr.clipPath",l),K.on("snap.util.attr.fill",t("fill")),K.on("snap.util.attr.stroke",t("stroke"));var v=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function _(t){return function(){K.stop();var e=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+t);return"none"==e?e:o(i.doc.getElementById(e.match(d)[1]))}}function b(n){return function(e){K.stop();var t="marker"+n.charAt(0).toUpperCase()+n.substring(1);if(""!=e&&e){if("marker"==e.type){var r=e.node.id;return r||f(e.node,{id:e.id}),void(this.node.style[t]=m(r))}}else this.node.style[t]="none"}}K.on("snap.util.grad.parse",function(e){function t(e,t){for(var r=(t-a)/(e-l),n=l;n<e;n++)o[n].offset=+(+a+r*(n-l)).toFixed(2);l=e,a=t}var r=(e=g(e)).match(v);if(!r)return null;var n=r[1],i=r[2],o=r[3];1==(i=i.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==i[0]&&(i=[]);var s=(o=(o=o.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t})).length,a=0,l=0;s--;for(var u=0;u<s;u++)"offset"in o[u]&&t(u,o[u].offset);return o[s].offset=o[s].offset||100,t(s,o[s].offset),{type:n,params:i,stops:o}}),K.on("snap.util.attr.d",function(e){K.stop(),c(e,"array")&&c(e[0],"array")&&(e=o.path.toString.call(e)),(e=g(e)).match(/[ruo]/i)&&(e=o.path.toAbsolute(e)),f(this.node,{d:e})})(-1),K.on("snap.util.attr.#text",function(e){K.stop(),e=g(e);for(var t=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(t)})(-1),K.on("snap.util.attr.path",function(e){K.stop(),this.attr({d:e})})(-1),K.on("snap.util.attr.class",function(e){K.stop(),this.node.className.baseVal=e})(-1),K.on("snap.util.attr.viewBox",function(e){var t=c(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):c(e,"array")?e.join(" "):e;f(this.node,{viewBox:t}),K.stop()})(-1),K.on("snap.util.attr.transform",function(e){this.transform(e),K.stop()})(-1),K.on("snap.util.attr.r",function(e){"rect"==this.type&&(K.stop(),f(this.node,{rx:e,ry:e}))})(-1),K.on("snap.util.attr.textpath",function(e){if(K.stop(),"text"==this.type){var t,r,n,i,o;if(!e&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(c(e,"string")?(i=p(this),o=h(i.parentNode).path(e),i.appendChild(o.node),t=o.id,o.attr({id:t})):(e=h(e))instanceof s&&((t=e.attr("id"))||(t=e.id,e.attr({id:t}))),t)if(r=this.textPath,n=this.node,r)r.attr({"xlink:href":"#"+t});else{for(r=f("textPath",{"xlink:href":"#"+t});n.firstChild;)r.appendChild(n.firstChild);n.appendChild(r),this.textPath=h(r)}}})(-1),K.on("snap.util.attr.text",function(e){if("text"==this.type){for(var t=this.node,n=function(e){var t=f("tspan");if(c(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};t.firstChild;)t.removeChild(t.firstChild);for(var r=n(e);r.firstChild;)t.appendChild(r.firstChild)}K.stop()})(-1),K.on("snap.util.attr.fontSize",r)(-1),K.on("snap.util.attr.font-size",r)(-1),K.on("snap.util.getattr.transform",function(){return K.stop(),this.transform()})(-1),K.on("snap.util.getattr.textpath",function(){return K.stop(),this.textPath})(-1),K.on("snap.util.getattr.marker-end",_("end"))(-1),K.on("snap.util.getattr.markerEnd",_("end"))(-1),K.on("snap.util.getattr.marker-start",_("start"))(-1),K.on("snap.util.getattr.markerStart",_("start"))(-1),K.on("snap.util.getattr.marker-mid",_("mid"))(-1),K.on("snap.util.getattr.markerMid",_("mid"))(-1),K.on("snap.util.attr.marker-end",b("end"))(-1),K.on("snap.util.attr.markerEnd",b("end"))(-1),K.on("snap.util.attr.marker-start",b("start"))(-1),K.on("snap.util.attr.markerStart",b("start"))(-1),K.on("snap.util.attr.marker-mid",b("mid"))(-1),K.on("snap.util.attr.markerMid",b("mid"))(-1),K.on("snap.util.getattr.r",function(){return"rect"==this.type&&f(this.node,"rx")==f(this.node,"ry")?(K.stop(),f(this.node,"rx")):void 0})(-1),K.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){K.stop();var e=function e(t){for(var r=[],n=t.childNodes,i=0,o=n.length;i<o;i++){var s=n[i];3==s.nodeType&&r.push(s.nodeValue),"tspan"==s.tagName&&(1==s.childNodes.length&&3==s.firstChild.nodeType?r.push(s.firstChild.nodeValue):r.push(e(s)))}return r}(this.node);return 1==e.length?e[0]:e}})(-1),K.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),K.on("snap.util.getattr.fill",function(e){if(!e){K.stop();var t=K("snap.util.getattr.fill",this,!0).firstDefined();return o(o.deurl(t))||t}})(-1),K.on("snap.util.getattr.stroke",function(e){if(!e){K.stop();var t=K("snap.util.getattr.stroke",this,!0).firstDefined();return o(o.deurl(t))||t}})(-1),K.on("snap.util.getattr.viewBox",function(){K.stop();var e=f(this.node,"viewBox");return e?(e=e.split(y),o._.box(+e[0],+e[1],+e[2],+e[3])):void 0})(-1),K.on("snap.util.getattr.points",function(){var e=f(this.node,"points");return K.stop(),e?e.split(y):void 0})(-1),K.on("snap.util.getattr.path",function(){var e=f(this.node,"d");return K.stop(),e})(-1),K.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),K.on("snap.util.getattr.fontSize",n)(-1),K.on("snap.util.getattr.font-size",n)(-1)}),t.plugin(function(e,t,r,n,i){var h=/\S+/g,u=String,o=t.prototype;o.addClass=function(e){var t,r,n,i=u(e||"").match(h)||[],o=this.node,s=o.className.baseVal,a=s.match(h)||[];if(i.length){for(t=0;r=i[t++];)~a.indexOf(r)||a.push(r);s!=(n=a.join(" "))&&(o.className.baseVal=n)}return this},o.removeClass=function(e){var t,r,n,i,o=u(e||"").match(h)||[],s=this.node,a=s.className.baseVal,l=a.match(h)||[];if(l.length){for(t=0;n=o[t++];)~(r=l.indexOf(n))&&l.splice(r,1);a!=(i=l.join(" "))&&(s.className.baseVal=i)}return this},o.hasClass=function(e){return!!~(this.node.className.baseVal.match(h)||[]).indexOf(e)},o.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);for(var r,n,i,o=(e||"").match(h)||[],s=this.node,a=s.className.baseVal,l=a.match(h)||[],u=0;n=o[u++];)~(r=l.indexOf(n))?l.splice(r,1):l.push(n);return a!=(i=l.join(" "))&&(s.className.baseVal=i),this}}),t.plugin(function(e,t,r,n,i){function l(e){return e}var u={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},h=String,c=/[a-z]+$/i,p=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;K.on("snap.util.attr",function(e){var t=h(e).match(p);if(t){var r=K.nt(),n=r.substring(r.lastIndexOf(".")+1),i=this.attr(n),o={};K.stop();var s=t[3]||"",a=i.match(c),l=u[t[1]];if(e=a&&a==s?l(parseFloat(i),+t[2]):(i=this.asPX(n),l(this.asPX(n),this.asPX(n,t[2]+s))),isNaN(i)||isNaN(e))return;o[n]=e,this.attr(o)}})(-10),K.on("snap.util.equal",function(e,t){var r,n=h(this.attr(e)||""),i=h(t).match(p);if(i){K.stop();var o=i[3]||"",s=n.match(c),a=u[i[1]];return s&&s==o?{from:parseFloat(n),to:a(parseFloat(n),+i[2]),f:(r=s,function(e){return+e.toFixed(3)+r})}:{from:n=this.asPX(e),to:a(n,this.asPX(e,i[2]+o)),f:l}}})(-10)}),t.plugin(function(a,t,e,i,r){var n=e.prototype,u=a.is;n.rect=function(e,t,r,n,i,o){var s;return null==o&&(o=i),u(e,"object")&&"[object Object]"==e?s=e:null!=e&&(s={x:e,y:t,width:r,height:n},null!=i&&(s.rx=i,s.ry=o)),this.el("rect",s)},n.circle=function(e,t,r){var n;return u(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)};var l,h=function(e,t){var r=i.doc.createElement("img"),n=i.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){t.call(r),r.onload=r.onerror=null,n.removeChild(r)},r.onerror=o,n.appendChild(r),r.src=e};function o(){this.parentNode.removeChild(this)}function c(){return this.selectAll("stop")}function p(e,t){var r=l("stop"),n={offset:+t+"%"};e=a.color(e),n["stop-color"]=e.hex,e.opacity<1&&(n["stop-opacity"]=e.opacity),l(r,n);for(var i,o=this.stops(),s=0;s<o.length;s++){if(t<parseFloat(o[s].attr("offset"))){this.node.insertBefore(r,o[s].node),i=!0;break}}return i||this.node.appendChild(r),this}function d(){if("linearGradient"==this.type){var e=l(this.node,"x1")||0,t=l(this.node,"x2")||1,r=l(this.node,"y1")||0,n=l(this.node,"y2")||0;return a._.box(e,r,math.abs(t-e),math.abs(n-r))}var i=this.node.cx||.5,o=this.node.cy||.5,s=this.node.r||0;return a._.box(i-s,o-s,2*s,2*s)}function s(e){var t=e,r=this.stops();if("string"==typeof e&&(t=K("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),a.is(t,"array")){for(var n,i,o=0;o<r.length;o++){t[o]?(n=a.color(t[o].color),(i={offset:t[o].offset+"%"})["stop-color"]=n.hex,n.opacity<1&&(i["stop-opacity"]=n.opacity),r[o].attr(i)):r[o].remove()}for(o=r.length;o<t.length;o++)this.addStop(t[o].color,t[o].offset);return this}}function f(e,t,r,n,i){var o=a._.make("linearGradient",e);return o.stops=c,o.addStop=p,o.getBBox=d,o.setStops=s,null!=t&&l(o.node,{x1:t,y1:r,x2:n,y2:i}),o}function m(e,t,r,n,i,o){var s=a._.make("radialGradient",e);return s.stops=c,s.addStop=p,s.getBBox=d,null!=t&&l(s.node,{cx:t,cy:r,r:n}),null!=i&&null!=o&&l(s.node,{fx:i,fy:o}),s}n.image=function(e,t,r,n,i){var o,s=this.el("image");return u(e,"object")&&"src"in e?s.attr(e):null!=e&&(o={"xlink:href":e,preserveAspectRatio:"none"},null!=t&&null!=r&&(o.x=t,o.y=r),null!=n&&null!=i?(o.width=n,o.height=i):h(e,function(){a._.$(s.node,{width:this.offsetWidth,height:this.offsetHeight})}),a._.$(s.node,o)),s},n.ellipse=function(e,t,r,n){var i;return u(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:r,ry:n}),this.el("ellipse",i)},n.path=function(e){var t;return u(e,"object")&&!u(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},n.group=n.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},n.svg=function(e,t,r,n,i,o,s,a){var l={};return u(e,"object")&&null==t?l=e:(null!=e&&(l.x=e),null!=t&&(l.y=t),null!=r&&(l.width=r),null!=n&&(l.height=n),null!=i&&null!=o&&null!=s&&null!=a&&(l.viewBox=[i,o,s,a])),this.el("svg",l)},n.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},n.ptrn=function(e,t,r,n,i,o,s,a){var l;return u(e,"object")?l=e:(l={patternUnits:"userSpaceOnUse"},e&&(l.x=e),t&&(l.y=t),null!=r&&(l.width=r),null!=n&&(l.height=n),l.viewBox=null!=i&&null!=o&&null!=s&&null!=a?[i,o,s,a]:[e||0,t||0,r||0,n||0]),this.el("pattern",l)},n.use=function(e){return null!=e?(e instanceof t&&(e.attr("id")||e.attr({id:a._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):t.prototype.use.call(this)},n.symbol=function(e,t,r,n){var i={};return null!=e&&null!=t&&null!=r&&null!=n&&(i.viewBox=[e,t,r,n]),this.el("symbol",i)},n.text=function(e,t,r){var n={};return u(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:r||""}),this.el("text",n)},n.line=function(e,t,r,n){var i={};return u(e,"object")?i=e:null!=e&&(i={x1:e,x2:r,y1:t,y2:n}),this.el("line",i)},n.polyline=function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments,0));var t={};return u(e,"object")&&!u(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},n.polygon=function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments,0));var t={};return u(e,"object")&&!u(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},l=a._.$,n.gradient=function(e){return function(e,t){var r,n=K("snap.util.grad.parse",null,t).firstDefined();if(!n)return null;n.params.unshift(e),r="l"==n.type.toLowerCase()?f.apply(0,n.params):m.apply(0,n.params),n.type!=n.type.toLowerCase()&&l(r.node,{gradientUnits:"userSpaceOnUse"});for(var i=n.stops,o=i.length,s=0;s<o;s++){var a=i[s];r.addStop(a.color,a.offset)}return r}(this.defs,e)},n.gradientLinear=function(e,t,r,n){return f(this.defs,e,t,r,n)},n.gradientRadial=function(e,t,r,n,i){return m(this.defs,e,t,r,n,i)},n.toString=function(){var e,t=this.node.ownerDocument,r=t.createDocumentFragment(),n=t.createElement("div"),i=this.node.cloneNode(!0);return r.appendChild(n),n.appendChild(i),a._.$(i,{xmlns:"http://www.w3.org/2000/svg"}),e=n.innerHTML,r.removeChild(r.firstChild),e},n.toDataURL=function(){return v&&v.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},n.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):n.clear.call({node:t}),t=e}}),t.plugin(function(H,g,e,t){function b(t){var r=b.ps=b.ps||{};return r[t]?r[t].sleep=100:r[t]={sleep:100},setTimeout(function(){for(var e in r)r[a](e)&&e!=t&&(r[e].sleep--,r[e].sleep||delete r[e])}),r[t]}function m(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:G.min(r,n)/2,r2:G.max(r,n)/2,r0:G.sqrt(r*r+n*n)/2,path:s(e,t,r,n),vb:[e,t,r,n].join(" ")}}function _(){return this.join(",").replace(l,"$1")}function E(e){var t=f(e);return t.toString=_,t}function y(e,t,r,n,i,o,s,a,l){return null==l?C(e,t,r,n,i,o,s,a):S(e,t,r,n,i,o,s,a,function(e,t,r,n,i,o,s,a,l){if(!(l<0||C(e,t,r,n,i,o,s,a)<l)){var u,h=.5,c=1-h;for(u=C(e,t,r,n,i,o,s,a,c);.01<K(u-l);)u=C(e,t,r,n,i,o,s,a,c+=(u<l?1:-1)*(h/=2));return c}}(e,t,r,n,i,o,s,a,l))}function r(d,f){function m(e){return+(+e).toFixed(3)}return H._.cacher(function(e,t,r){e instanceof g&&(e=e.attr("d"));for(var n,i,o,s,a,l="",u={},h=0,c=0,p=(e=D(e)).length;c<p;c++){if("M"==(o=e[c])[0])n=+o[1],i=+o[2];else{if(t<h+(s=y(n,i,o[1],o[2],o[3],o[4],o[5],o[6]))){if(f&&!u.start){if(l+=["C"+m((a=y(n,i,o[1],o[2],o[3],o[4],o[5],o[6],t-h)).start.x),m(a.start.y),m(a.m.x),m(a.m.y),m(a.x),m(a.y)],r)return l;u.start=l,l=["M"+m(a.x),m(a.y)+"C"+m(a.n.x),m(a.n.y),m(a.end.x),m(a.end.y),m(o[5]),m(o[6])].join(),h+=s,n=+o[5],i=+o[6];continue}if(!d&&!f)return y(n,i,o[1],o[2],o[3],o[4],o[5],o[6],t-h)}h+=s,n=+o[5],i=+o[6]}l+=o.shift()+o}return u.end=l,d?h:f?u:S(n,i,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,H._.clone)}function S(e,t,r,n,i,o,s,a,l){var u=1-l,h=B(u,3),c=B(u,2),p=l*l,d=p*l,f=e+2*l*(r-e)+p*(i-2*r+e),m=t+2*l*(n-t)+p*(o-2*n+t),g=r+2*l*(i-r)+p*(s-2*i+r),y=n+2*l*(o-n)+p*(a-2*o+n);return{x:h*e+3*c*l*r+3*u*l*l*i+d*s,y:h*t+3*c*l*n+3*u*l*l*o+d*a,m:{x:f,y:m},n:{x:g,y:y},start:{x:u*e+l*r,y:u*t+l*n},end:{x:u*i+l*s,y:u*o+l*a},alpha:90-180*G.atan2(f-g,m-y)/W}}function w(e,t,r,n,i,o,s,a){H.is(e,"array")||(e=[e,t,r,n,i,o,s,a]);var l=d.apply(null,e);return m(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)}function v(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function x(e,t){return e=m(e),v(t=m(t),e.x,e.y)||v(t,e.x2,e.y)||v(t,e.x,e.y2)||v(t,e.x2,e.y2)||v(e,t.x,t.y)||v(e,t.x2,t.y)||v(e,t.x,t.y2)||v(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function P(e,t,r,n,i){return e*(e*(-3*t+9*r-9*n+3*i)+6*t-12*r+6*n)-3*t+3*r}function C(e,t,r,n,i,o,s,a,l){null==l&&(l=1);for(var u=(l=1<l?1:l<0?0:l)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],c=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var f=u*h[d]+u,m=P(f,e,r,i,s),g=P(f,t,n,o,a),y=m*m+g*g;p+=c[d]*G.sqrt(y)}return u*p}function A(e,t,r){if(!x(w(e),w(t)))return r?0:[];for(var n=~~(C.apply(0,e)/8),i=~~(C.apply(0,t)/8),o=[],s=[],a={},l=r?0:[],u=0;u<1+n;u++){var h=S.apply(0,e.concat(u/n));o.push({x:h.x,y:h.y,t:u/n})}for(u=0;u<1+i;u++)h=S.apply(0,t.concat(u/i)),s.push({x:h.x,y:h.y,t:u/i});for(u=0;u<n;u++)for(var c=0;c<i;c++){var p=o[u],d=o[u+1],f=s[c],m=s[c+1],g=K(d.x-p.x)<.001?"y":"x",y=K(m.x-f.x)<.001?"y":"x",v=function(e,t,r,n,i,o,s,a){if(!(N(e,r)<L(i,s)||L(e,r)>N(i,s)||N(t,n)<L(o,a)||L(t,n)>N(o,a))){var l=(e-r)*(o-a)-(t-n)*(i-s);if(l){var u=((e*n-t*r)*(i-s)-(e-r)*(i*a-o*s))/l,h=((e*n-t*r)*(o-a)-(t-n)*(i*a-o*s))/l,c=+u.toFixed(2),p=+h.toFixed(2);if(!(c<+L(e,r).toFixed(2)||c>+N(e,r).toFixed(2)||c<+L(i,s).toFixed(2)||c>+N(i,s).toFixed(2)||p<+L(t,n).toFixed(2)||p>+N(t,n).toFixed(2)||p<+L(o,a).toFixed(2)||p>+N(o,a).toFixed(2)))return{x:u,y:h}}}}(p.x,p.y,d.x,d.y,f.x,f.y,m.x,m.y);if(v){if(a[v.x.toFixed(4)]==v.y.toFixed(4))continue;a[v.x.toFixed(4)]=v.y.toFixed(4);var _=p.t+K((v[g]-p[g])/(d[g]-p[g]))*(d.t-p.t),b=f.t+K((v[y]-f[y])/(m[y]-f[y]))*(m.t-f.t);0<=_&&_<=1&&0<=b&&b<=1&&(r?l++:l.push({x:v.x,y:v.y,t1:_,t2:b}))}}return l}function i(e,t,r){e=D(e),t=D(t);for(var n,i,o,s,a,l,u,h,c,p,d=r?0:[],f=0,m=e.length;f<m;f++){var g=e[f];if("M"==g[0])n=a=g[1],i=l=g[2];else{i="C"==g[0]?(n=(c=[n,i].concat(g.slice(1)))[6],c[7]):(c=[n,i,n,i,a,l,a,l],n=a,l);for(var y=0,v=t.length;y<v;y++){var _=t[y];if("M"==_[0])o=u=_[1],s=h=_[2];else{s="C"==_[0]?(o=(p=[o,s].concat(_.slice(1)))[6],p[7]):(p=[o,s,o,s,u,h,u,h],o=u,h);var b=A(c,p,r);if(r)d+=b;else{for(var E=0,S=b.length;E<S;E++)b[E].segment1=f,b[E].segment2=y,b[E].bez1=c,b[E].bez2=p;d=d.concat(b)}}}}}return d}function o(e){var t=b(e);if(t.bbox)return f(t.bbox);if(!e)return m();for(var r,n,i=0,o=0,s=[],a=[],l=0,u=(e=D(e)).length;l<u;l++){"M"==(r=e[l])[0]?(i=r[1],o=r[2],s.push(i),a.push(o)):(n=d(i,o,r[1],r[2],r[3],r[4],r[5],r[6]),s=s.concat(n.min.x,n.max.x),a=a.concat(n.min.y,n.max.y),i=r[5],o=r[6])}var h=L.apply(0,s),c=L.apply(0,a),p=m(h,c,N.apply(0,s)-h,N.apply(0,a)-c);return t.bbox=f(p),p}function s(e,t,r,n,i){if(i)return[["M",+e+ +i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return o.toString=_,o}function T(e,t,r,n,i){var o,s,a,l;return null==i&&null==n&&(n=r),e=+e,t=+t,r=+r,n=+n,(l=null!=i?(o=Math.PI/180,s=e+r*Math.cos(-n*o),a=e+r*Math.cos(-i*o),[["M",s,t+r*Math.sin(-n*o)],["A",r,r,0,+(180<i-n),0,a,t+r*Math.sin(-i*o)]]):[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]]).toString=_,l}function k(e){var t=b(e);if(t.abs)return E(t.abs);if(F(e,"array")&&F(e&&e[0],"array")||(e=H.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r,n=[],i=0,o=0,s=0,a=0,l=0;"M"==e[0][0]&&(s=i=+e[0][1],a=o=+e[0][2],l++,n[0]=["M",i,o]);for(var u,h,c=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),p=l,d=e.length;p<d;p++){if(n.push(u=[]),(r=(h=e[p])[0])!=r.toUpperCase())switch(u[0]=r.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+o;break;case"V":u[1]=+h[1]+o;break;case"H":u[1]=+h[1]+i;break;case"R":for(var f=[i,o].concat(h.slice(1)),m=2,g=f.length;m<g;m++)f[m]=+f[m]+i,f[++m]=+f[m]+o;n.pop(),n=n.concat(I(f,c));break;case"O":n.pop(),(f=T(i,o,h[1],h[2])).push(f[0]),n=n.concat(f);break;case"U":n.pop(),n=n.concat(T(i,o,h[1],h[2],h[3])),u=["U"].concat(n[n.length-1].slice(-2));break;case"M":s=+h[1]+i,a=+h[2]+o;default:for(m=1,g=h.length;m<g;m++)u[m]=+h[m]+(m%2?i:o)}else if("R"==r)f=[i,o].concat(h.slice(1)),n.pop(),n=n.concat(I(f,c)),u=["R"].concat(h.slice(-2));else if("O"==r)n.pop(),(f=T(i,o,h[1],h[2])).push(f[0]),n=n.concat(f);else if("U"==r)n.pop(),n=n.concat(T(i,o,h[1],h[2],h[3])),u=["U"].concat(n[n.length-1].slice(-2));else for(var y=0,v=h.length;y<v;y++)u[y]=h[y];if("O"!=(r=r.toUpperCase()))switch(u[0]){case"Z":i=+s,o=+a;break;case"H":i=u[1];break;case"V":o=u[1];break;case"M":s=u[u.length-2],a=u[u.length-1];default:i=u[u.length-2],o=u[u.length-1]}}return n.toString=_,t.abs=E(n),n}function R(e,t,r,n){return[e,t,r,n,r,n]}function M(e,t,r,n,i,o){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*i+2/3*r,1/3*o+2/3*n,i,o]}function d(e,t,r,n,i,o,s,a){for(var l,u,h,c,p,d,f,m,g=[],y=[[],[]],v=0;v<2;++v)if(h=0==v?(u=6*e-12*r+6*i,l=-3*e+9*r-9*i+3*s,3*r-3*e):(u=6*t-12*n+6*o,l=-3*t+9*n-9*o+3*a,3*n-3*t),K(l)<1e-12){if(K(u)<1e-12)continue;0<(c=-h/u)&&c<1&&g.push(c)}else f=u*u-4*h*l,m=G.sqrt(f),f<0||(0<(p=(-u+m)/(2*l))&&p<1&&g.push(p),0<(d=(-u-m)/(2*l))&&d<1&&g.push(d));for(var _,b=g.length,E=b;b--;)_=1-(c=g[b]),y[0][b]=_*_*_*e+3*_*_*c*r+3*_*c*c*i+c*c*c*s,y[1][b]=_*_*_*t+3*_*_*c*n+3*_*c*c*o+c*c*c*a;return y[0][E]=e,y[1][E]=t,y[0][E+1]=s,y[1][E+1]=a,y[0].length=y[1].length=E+2,{min:{x:L.apply(0,y[0]),y:L.apply(0,y[1])},max:{x:N.apply(0,y[0]),y:N.apply(0,y[1])}}}function D(e,t){var r=!t&&b(e);if(!t&&r.curve)return E(r.curve);function n(e,t,r){var n,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,r,n,i,o,s,a,l,u,h){var c,p,d,f,m,g,y,v,_,b,E,S=120*W/180,w=W/180*(+o||0),x=[],P=H._.cacher(function(e,t,r){return{x:e*G.cos(r)-t*G.sin(r),y:e*G.sin(r)+t*G.cos(r)}});if(!n||!i)return[t,r,l,u,l,u];h?(b=h[0],E=h[1],v=h[2],_=h[3]):(t=(c=P(t,r,-w)).x,r=c.y,l=(c=P(l,u,-w)).x,u=c.y,1<(G.cos(W/180*o),G.sin(W/180*o),f=(p=(t-l)/2)*p/(n*n)+(d=(r-u)/2)*d/(i*i))&&(n*=f=G.sqrt(f),i*=f),m=n*n,g=i*i,v=(y=(s==a?-1:1)*G.sqrt(K((m*g-m*d*d-g*p*p)/(m*d*d+g*p*p))))*n*d/i+(t+l)/2,_=y*-i*p/n+(r+u)/2,b=G.asin(((r-_)/i).toFixed(9)),E=G.asin(((u-_)/i).toFixed(9)),(b=t<v?W-b:b)<0&&(b=2*W+b),(E=l<v?W-E:E)<0&&(E=2*W+E),a&&E<b&&(b-=2*W),!a&&b<E&&(E-=2*W));var C,A,T,k=E-b;K(k)>S&&(C=E,A=l,T=u,E=b+S*(a&&b<E?1:-1),x=e(l=v+n*G.cos(E),u=_+i*G.sin(E),n,i,o,0,a,A,T,[E,C,v,_])),k=E-b;var R=G.cos(b),M=G.sin(b),D=G.cos(E),I=G.sin(E),F=G.tan(k/4),O=4/3*n*F,L=4/3*i*F,N=[t,r],B=[t+O*M,r-L*R],j=[l+O*I,u-L*D],z=[l,u];if(B[0]=2*N[0]-B[0],B[1]=2*N[1]-B[1],h)return[B,j,z].concat(x);for(var U=[],V=0,q=(x=[B,j,z].concat(x).join().split(",")).length;V<q;V++)U[V]=V%2?P(x[V-1],x[V],w).y:P(x[V],x[V+1],w).x;return U}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":i="C"==r||"S"==r?(n=2*t.x-t.bx,2*t.y-t.by):(n=t.x,t.y),e=["C",n,i].concat(e.slice(1));break;case"T":"Q"==r||"T"==r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(M(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(M(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(R(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(R(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(R(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(R(t.x,t.y,t.X,t.Y))}return e}function i(e,t){if(7<e[t].length){e[t].shift();for(var r=e[t];r.length;)h[t]="A",a&&(c[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),m=N(s.length,a&&a.length||0)}}function o(e,t,r,n,i){e&&t&&"M"==e[i][0]&&"M"!=t[i][0]&&(t.splice(i,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[i][1],r.y=e[i][2],m=N(s.length,a&&a.length||0))}for(var s=k(e),a=t&&k(t),l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=[],c=[],p="",d="",f=0,m=N(s.length,a&&a.length||0);f<m;f++){s[f]&&(p=s[f][0]),"C"!=p&&(h[f]=p,f&&(d=h[f-1])),s[f]=n(s[f],l,d),"A"!=h[f]&&"C"==p&&(h[f]="C"),i(s,f),a&&(a[f]&&(p=a[f][0]),"C"!=p&&(c[f]=p,f&&(d=c[f-1])),a[f]=n(a[f],u,d),"A"!=c[f]&&"C"==p&&(c[f]="C"),i(a,f)),o(s,a,l,u,f),o(a,s,u,l,f);var g=s[f],y=a&&a[f],v=g.length,_=a&&y.length;l.x=g[v-2],l.y=g[v-1],l.bx=O(g[v-4])||l.x,l.by=O(g[v-3])||l.y,u.bx=a&&(O(y[_-4])||u.x),u.by=a&&(O(y[_-3])||u.y),u.x=a&&y[_-2],u.y=a&&y[_-1]}return a||(r.curve=E(s)),a?[s,a]:s}function I(e,t){for(var r=[],n=0,i=e.length;n<i-2*!t;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?i-4==n?o[3]={x:+e[0],y:+e[1]}:i-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}var n=g.prototype,F=H.is,f=H._.clone,a="hasOwnProperty",l=/,?([a-z]),?/gi,O=parseFloat,G=Math,W=G.PI,L=G.min,N=G.max,B=G.pow,K=G.abs,u=r(1),h=r(),c=r(0,1),p=H._unit2px,j={path:function(e){return e.attr("path")},circle:function(e){var t=p(e);return T(t.cx,t.cy,t.r)},ellipse:function(e){var t=p(e);return T(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=p(e);return s(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=p(e);return s(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return s(t.x,t.y,t.width,t.height)}};H.path=b,H.path.getTotalLength=u,H.path.getPointAtLength=h,H.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return c(e,t).end;var n=c(e,r,1);return t?c(n,t).end:n},n.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},n.getPointAtLength=function(e){return h(this.attr("d"),e)},n.getSubpath=function(e,t){return H.path.getSubpath(this.attr("d"),e,t)},H._.box=m,H.path.findDotsAtSegment=S,H.path.bezierBBox=w,H.path.isPointInsideBBox=v,H.closest=function(e,t,r,n){for(var i=100,o=m(e-i/2,t-i/2,i,i),s=[],a=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:n[e]}},l=0;i<=1e6&&!l;){for(var u=0,h=r.length;u<h;u++){var c=a(u);if(v(o,c.x,c.y)){l++,s.push(c);break}}l||(o=m(e-(i*=2)/2,t-i/2,i,i))}if(1e6!=i){for(var p,d=1/0,u=0,h=s.length;u<h;u++){var f=H.len(e,t,s[u].x,s[u].y);f<d&&(d=f,s[u].len=f,p=s[u])}return p}},H.path.isBBoxIntersect=x,H.path.intersection=function(e,t){return i(e,t)},H.path.intersectionNumber=function(e,t){return i(e,t,1)},H.path.isPointInside=function(e,t,r){var n=o(e);return v(n,t,r)&&i(e,[["M",t,r],["H",n.x2+10]],1)%2==1},H.path.getBBox=o,H.path.get=j,H.path.toRelative=function(e){var t=b(e),r=String.prototype.toLowerCase;if(t.rel)return E(t.rel);H.is(e,"array")&&H.is(e&&e[0],"array")||(e=H.parsePathString(e));var n=[],i=0,o=0,s=0,a=0,l=0;"M"==e[0][0]&&(s=i=e[0][1],a=o=e[0][2],l++,n.push(["M",i,o]));for(var u=l,h=e.length;u<h;u++){var c=n[u]=[],p=e[u];if(p[0]!=r.call(p[0]))switch(c[0]=r.call(p[0]),c[0]){case"a":c[1]=p[1],c[2]=p[2],c[3]=p[3],c[4]=p[4],c[5]=p[5],c[6]=+(p[6]-i).toFixed(3),c[7]=+(p[7]-o).toFixed(3);break;case"v":c[1]=+(p[1]-o).toFixed(3);break;case"m":s=p[1],a=p[2];default:for(var d=1,f=p.length;d<f;d++)c[d]=+(p[d]-(d%2?i:o)).toFixed(3)}else{c=n[u]=[],"m"==p[0]&&(s=p[1]+i,a=p[2]+o);for(var m=0,g=p.length;m<g;m++)n[u][m]=p[m]}var y=n[u].length;switch(n[u][0]){case"z":i=s,o=a;break;case"h":i+=+n[u][y-1];break;case"v":o+=+n[u][y-1];break;default:i+=+n[u][y-2],o+=+n[u][y-1]}}return n.toString=_,t.rel=E(n),n},H.path.toAbsolute=k,H.path.toCubic=D,H.path.map=function(e,t){if(!t)return e;for(var r,n,i,o,s,a=0,l=(e=D(e)).length;a<l;a++)for(i=1,o=(s=e[a]).length;i<o;i+=2)r=t.x(s[i],s[i+1]),n=t.y(s[i],s[i+1]),s[i]=r,s[i+1]=n;return e},H.path.toString=_,H.path.clone=E}),t.plugin(function(c,e,t,r){function l(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,r=e.length;t<r;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)}var u=Math.max,h=Math.min,n=l.prototype;n.push=function(){for(var e,t,r=0,n=arguments.length;r<n;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},n.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},n.forEach=function(e,t){for(var r=0,n=this.items.length;r<n;r++)if(!1===e.call(t,this.items[r],r))return this;return this},n.animate=function(r,n,i,e){"function"!=typeof i||i.length||(e=i,i=b.linear),r instanceof c._.Animation&&(e=r.callback,i=r.easing,n=i.dur,r=r.attr);var o,s=arguments;c.is(r,"array")&&c.is(s[s.length-1],"array")&&(o=!0);function a(){t?this.b=t:t=this.b}var t,l=0,u=this,h=e&&function(){++l==u.length&&e.call(this)};return this.forEach(function(e,t){K.once("snap.animcreated."+e.id,a),o?s[t]&&e.animate.apply(e,s[t]):e.animate(r,n,i,h)})},n.remove=function(){for(;this.length;)this.pop().remove();return this},n.bind=function(e,t,r){var n,i={};return"function"==typeof t?this.bindings[e]=t:(n=r||e,this.bindings[e]=function(e){i[n]=e,t.attr(i)}),this},n.attr=function(e){var t={};for(var r in e)this.bindings[r]?this.bindings[r](e[r]):t[r]=e[r];for(var n=0,i=this.items.length;n<i;n++)this.items[n].attr(t);return this},n.clear=function(){for(;this.length;)this.pop()},n.splice=function(e,t,r){e=e<0?u(this.length+e,0):e,t=u(0,h(this.length-e,t));for(var n=[],i=[],o=[],s=2;s<arguments.length;s++)o.push(arguments[s]);for(s=0;s<t;s++)i.push(this[e+s]);for(;s<this.length-e;s++)n.push(this[e+s]);var a=o.length;for(s=0;s<a+n.length;s++)this.items[e+s]=this[e+s]=s<a?o[s]:n[s-a];for(s=this.items.length=this.length-=t-a;this[s];)delete this[s++];return new l(i)},n.exclude=function(e){for(var t=0,r=this.length;t<r;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},n.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},n.getBBox=function(){for(var e,t=[],r=[],n=[],i=[],o=this.items.length;o--;){this.items[o].removed||(e=this.items[o].getBBox(),t.push(e.x),r.push(e.y),n.push(e.x+e.width),i.push(e.y+e.height))}return{x:t=h.apply(0,t),y:r=h.apply(0,r),x2:n=u.apply(0,n),y2:i=u.apply(0,i),width:n-t,height:i-r,cx:t+(n-t)/2,cy:r+(i-r)/2}},n.clone=function(e){e=new l;for(var t=0,r=this.items.length;t<r;t++)e.push(this.items[t].clone());return e},n.toString=function(){return"Snap‘s set"},n.type="set",c.Set=l,c.set=function(){var e=new l;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),t.plugin(function(c,e,t,r){function p(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function d(e){return e}function f(e){return e.join(" ")}function m(e){return c.rgb(e[0],e[1],e[2],e[3])}function g(e){for(var t,r,n,i,o=0,s=[],a=0,l=e.length;a<l;a++){for(n="[",i=['"'+e[a][0]+'"'],t=1,r=e[a].length;t<r;t++)i[t]="val["+o+++"]";n+=i+"]",s[a]=n}return Function("val","return Snap.path.toString.call(["+s+"])")}function y(e){for(var t=[],r=0,n=e.length;r<n;r++)for(var i=1,o=e[r].length;i<o;i++)t.push(e[r][i]);return t}function v(e){return isFinite(e)}var _={},b=/[%a-z]+$/i,E=String;_.stroke=_.fill="colour",e.prototype.equal=function(e,t){return K("snap.util.equal",this,e,t).firstDefined()},K.on("snap.util.equal",function(e,t){var r,n,i=E(this.attr(e)||""),o=this;if("colour"==_[e])return r=c.color(i),n=c.color(t),{from:[r.r,r.g,r.b,r.opacity],to:[n.r,n.g,n.b,n.opacity],f:m};if("viewBox"==e)return{from:r=this.attr(e).vb.split(" ").map(Number),to:n=t.split(" ").map(Number),f:f};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return"string"==typeof t&&(t=E(t).replace(/\.{3}|\u2026/g,i)),function(e,t,r){e=e||new c.Matrix,t=t||new c.Matrix,e=c.parseTransformString(e.toTransformString())||[],t=c.parseTransformString(t.toTransformString())||[];for(var n,i,o,s,a=Math.max(e.length,t.length),l=[],u=[],h=0;h<a;h++){if(o=e[h]||p(t[h]),s=t[h]||p(o),o[0]!=s[0]||"r"==o[0].toLowerCase()&&(o[2]!=s[2]||o[3]!=s[3])||"s"==o[0].toLowerCase()&&(o[3]!=s[3]||o[4]!=s[4])){e=c._.transform2matrix(e,r()),t=c._.transform2matrix(t,r()),l=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],u=[["m",t.a,t.b,t.c,t.d,t.e,t.f]];break}for(l[h]=[],u[h]=[],n=0,i=Math.max(o.length,s.length);n<i;n++)n in o&&(l[h][n]=o[n]),n in s&&(u[h][n]=s[n])}return{from:y(l),to:y(u),f:g(l)}}(i=this.matrix,t=c._.rgTransform.test(t)?c._.transform2matrix(t,this.getBBox()):c._.transform2matrix(c._.svgTransform2string(t),this.getBBox()),function(){return o.getBBox(1)});if("d"==e||"path"==e)return{from:y((r=c.path.toCubic(i,t))[0]),to:y(r[1]),f:g(r[0])};if("points"==e)return{from:r=E(i).split(c._.separator),to:n=E(t).split(c._.separator),f:function(e){return e}};if(v(i)&&v(t))return{from:parseFloat(i),to:parseFloat(t),f:d};var s,a,l,u=i.match(b),h=E(t).match(b);return u&&(a=u,l=h,c.is(a,"array")&&c.is(l,"array")&&a.toString()==l.toString())?{from:parseFloat(i),to:parseFloat(t),f:(s=u,function(e){return+e.toFixed(3)+s})}:{from:this.asPX(e),to:this.asPX(e,t),f:d}})}),t.plugin(function(h,e,t,i){function p(e,t){var r="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:i.doc;return n[r in n.documentElement?"documentElement":"body"][r]}function d(){return this.originalEvent.preventDefault()}function f(){return this.originalEvent.stopPropagation()}function o(l,u,h,c){function e(e){var t=p("y",c),r=p("x",c);if(m&&g.hasOwnProperty(u))for(var n=0,i=e.targetTouches&&e.targetTouches.length;n<i;n++)if(e.targetTouches[n].target==l||l.contains(e.targetTouches[n].target)){var o=e;(e=e.targetTouches[n]).originalEvent=o,e.preventDefault=d,e.stopPropagation=f;break}var s=e.clientX+r,a=e.clientY+t;return h.call(c,e,s,a)}var t=m&&g[u]?g[u]:u;return u!==t&&l.addEventListener(u,e,!1),l.addEventListener(t,e,!1),function(){return u!==t&&l.removeEventListener(u,e,!1),l.removeEventListener(t,e,!1),!0}}function c(e){for(var t,r=e.clientX,n=e.clientY,i=p("y"),o=p("x"),s=y.length;s--;){if(t=y[s],m){for(var a,l=e.touches&&e.touches.length;l--;)if((a=e.touches[l]).identifier==t.el._drag.id||t.el.node.contains(a.target)){r=a.clientX,n=a.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var u=t.el.node;u.nextSibling,u.parentNode,u.style.display,r+=o,n+=i,K("snap.drag.move."+t.el.id,t.move_scope||t.el,r-t.el._drag.x,n-t.el._drag.y,r,n,e)}}for(var r=e.prototype,m=("createTouch"in i.doc),n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],g={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y=[],v=function(e){h.unmousemove(c).unmouseup(v);for(var t,r=y.length;r--;)(t=y[r]).el._drag={},K("snap.drag.end."+t.el.id,t.end_scope||t.start_scope||t.move_scope||t.el,e),K.off("snap.drag.*."+t.el.id);y=[]},s=n.length;s--;)!function(i){h[i]=r[i]=function(e,t){if(h.is(e,"function"))this.events=this.events||[],this.events.push({name:i,f:e,unbind:o(this.node||document,i,e,t||this)});else for(var r=0,n=this.events.length;r<n;r++)if(this.events[r].name==i)try{this.events[r].f.call(this)}catch(e){}return this},h["un"+i]=r["un"+i]=function(e){for(var t=this.events||[],r=t.length;r--;)if(t[r].name==i&&(t[r].f==e||!e))return t[r].unbind(),t.splice(r,1),t.length||delete this.events,this;return this}}(n[s]);r.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},r.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var _=[];r.drag=function(n,i,o,s,a,l){function e(e,t,r){(e.originalEvent||e).preventDefault(),u._drag.x=t,u._drag.y=r,u._drag.id=e.identifier,y.length||h.mousemove(c).mouseup(v),y.push({el:u,move_scope:s,start_scope:a,end_scope:l}),i&&K.on("snap.drag.start."+u.id,i),n&&K.on("snap.drag.move."+u.id,n),o&&K.on("snap.drag.end."+u.id,o),K("snap.drag.start."+u.id,a||s||u,t,r,e)}function t(e,t,r){K("snap.draginit."+u.id,u,e,t,r)}var r,u=this;return arguments.length?(K.on("snap.draginit."+u.id,e),u._drag={},_.push({el:u,start:e,init:t}),u.mousedown(t),u):u.drag(function(e,t){this.attr({transform:r+(r?"T":"t")+[e,t]})},function(){r=this.transform().local})},r.undrag=function(){for(var e=_.length;e--;)_[e].el==this&&(this.unmousedown(_[e].init),_.splice(e,1),K.unbind("snap.drag.*."+this.id),K.unbind("snap.draginit."+this.id));return _.length||h.unmousemove(c).unmouseup(v),this}}),t.plugin(function(o,s,e,t){var r=(s.prototype,e.prototype),n=/^\s*url\((.+)\)/,a=String,l=o._.$;o.filter={},r.filter=function(e){var t=this;"svg"!=t.type&&(t=t.paper);var r=o.parse(a(e)),n=o._.id(),i=(t.node.offsetWidth,t.node.offsetHeight,l("filter"));return l(i,{id:n,filterUnits:"userSpaceOnUse"}),i.appendChild(r.node),t.defs.appendChild(i),new s(i)},K.on("snap.util.getattr.filter",function(){K.stop();var e=l(this.node,"filter");if(e){var t=a(e).match(n);return t&&o.select(t[1])}}),K.on("snap.util.attr.filter",function(e){var t;e instanceof s&&"filter"==e.type&&(K.stop(),(t=e.node.id)||(l(e.node,{id:e.id}),t=e.id),l(this.node,{filter:o.url(t)})),e&&"none"!=e||(K.stop(),this.node.removeAttribute("filter"))}),o.filter.blur=function(e,t){null==e&&(e=2);var r=null==t?e:[e,t];return o.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},o.filter.blur.toString=function(){return this()},o.filter.shadow=function(e,t,r,n,i){return null==i&&(null==n?(i=r,r=4,n="#000"):(i=n,n=r,r=4)),null==r&&(r=4),null==i&&(i=1),null==e&&(e=0,t=2),null==t&&(t=e),n=o.color(n),o.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:n,dx:e,dy:t,blur:r,opacity:i})},o.filter.shadow.toString=function(){return this()},o.filter.grayscale=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},o.filter.grayscale.toString=function(){return this()},o.filter.sepia=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},o.filter.sepia.toString=function(){return this()},o.filter.saturate=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},o.filter.saturate.toString=function(){return this()},o.filter.hueRotate=function(e){return e=e||0,o.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},o.filter.hueRotate.toString=function(){return this()},o.filter.invert=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},o.filter.invert.toString=function(){return this()},o.filter.brightness=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},o.filter.brightness.toString=function(){return this()},o.filter.contrast=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},o.filter.contrast.toString=function(){return this()}}),t.plugin(function(e,t,r,n,i){function o(){return"T"+this.dx+","+this.dy}var s=e._.box,a=e.is,l=/^[^a-z]*([tbmlrc])/i;t.prototype.getAlign=function(e,t){null==t&&a(e,"string")&&(t=e,e=null);var r=(e=e||this.paper).getBBox?e.getBBox():s(e),n=this.getBBox(),i={};switch(t=(t=t&&t.match(l))?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=r.y-n.y;break;case"b":i.dx=0,i.dy=r.y2-n.y2;break;case"m":i.dx=0,i.dy=r.cy-n.cy;break;case"l":i.dx=r.x-n.x,i.dy=0;break;case"r":i.dx=r.x2-n.x2,i.dy=0;break;default:i.dx=r.cx-n.cx,i.dy=0}return i.toString=o,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),t.plugin(function(t,e,r,n){function i(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}t.mui={},t.flat={},t.mui.red=i("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=i("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=i("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=i("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=i("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=i("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=i("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=i("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=i("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=i("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=i("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=i("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=i("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=i("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=i("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=i("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=i("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=i("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=i("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var e in t.mui)t.mui.hasOwnProperty(e)&&(v[e]=t.mui[e])}}),t}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return i={},r.m=n=[function(l,e,u){(function(e){"use strict";var r=u(4),t=u(8),n=u(3),i=u(9),o=u(2).Promise,s=u(16),a=u(17);l.exports=e.SC={initialize:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n.set("oauth_token",e.oauth_token),n.set("client_id",e.client_id),n.set("redirect_uri",e.redirect_uri),n.set("baseURL",e.baseURL),n.set("connectURL",e.connectURL)},get:function(e,t){return r.request("GET",e,t)},post:function(e,t){return r.request("POST",e,t)},put:function(e,t){return r.request("PUT",e,t)},delete:function(e){return r.request("DELETE",e)},upload:function(e){return r.upload(e)},connect:function(e){return i(e)},isConnected:function(){return void 0!==n.get("oauth_token")},oEmbed:function(e,t){return r.oEmbed(e,t)},resolve:function(e){return r.resolve(e)},Recorder:s,Promise:o,stream:function(e,t){return a(e,t)},connectCallback:function(){t.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(e,t){function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var n,i;e.exports=(i={},r.m=n=[function(e,t,r){e.exports={SCAudio:r(1),SCAudioControllerHTML5Player:r(3),SCAudioControllerHLSMSEPlayer:r(5),SCAudioPublicApiStreamURLRetriever:r(12),MaestroCore:r(2),MaestroLoaders:r(11)}},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=99)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=r(5);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";e.exports=r(55)()?Symbol:r(54)},function(e,t,r){"use strict";var a=r(11),l=r(18),u=r(59),h=r(17);(e.exports=function(e,t){var r,n,i,o,s;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(r=i=!0,n=!1):(r=h.call(e,"c"),n=h.call(e,"e"),i=h.call(e,"w")),s={value:t,configurable:r,enumerable:n,writable:i},o?a(l(o),s):s}).gs=function(e,t,r){var n,i,o,s;return"string"!=typeof e?(o=r,r=t,t=e,e=null):o=arguments[3],null==t?t=void 0:u(t)?null==r?r=void 0:u(r)||(o=r,r=void 0):(o=t,t=r=void 0),i=null==e?!(n=!0):(n=h.call(e,"c"),h.call(e,"e")),s={get:t,set:r,configurable:n,enumerable:i},o?a(l(o),s):s}},function(e,t,r){"use strict";var n=r(22)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,e||"There was no format available that a player was able to play.")||this}return n(e,t),e.prototype.getCode=function(){return"SCAUDIO.NOT_SUPPORTED_ERROR"},e}(i.errors.PlayerFatalError);t.NotSupportedError=o},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";e.exports=r(20)()?Object.setPrototypeOf:r(19)},function(e,t,r){"use strict";var n,i=r(23),o=r(11),s=r(2),a=r(1),l=r(4),u=r(47),h=r(3),c=Object.defineProperty,p=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,o({_next:l(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[h.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(r){if(!(r>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void c(this,"__redo__",l("c",[r]));this.__redo__.forEach(function(e,t){r<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(r)}}),_onDelete:l(function(r){var e;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(r))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){r<e&&(this.__redo__[t]=--e)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),c(n.prototype,h.iterator,l(function(){return this}))},function(e,t,r){"use strict";e.exports=r(64)()?Object.assign:r(63)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppState=function(){switch(window.document.hidden){case!0:return"background";case!1:return"foreground";default:return}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97),i=r(96),o=r(95),s=r(94),a=r(93),l=r(92),u=r(91),h=r(90),c=r(89),p=r(88);t.renditions={httpMp3:n.httpMp3,httpAACHQ:p.httpAACHQ,hlsMp3:i.hlsMp3,encryptedHlsMp3:o.encryptedHlsMp3,hlsOpus:h.hlsOpus,encryptedHlsOpus:c.encryptedHlsOpus,hlsAACHQ:s.hlsAACHQ,encryptedHlsAACHQ:a.encryptedHlsAACHQ,apiMobile:l.apiMobile,maestroChromecast:u.maestroChromecast},t.allRenditions=Object.keys(t.renditions).map(function(e){return t.renditions[e]})},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=function(e){function t(){return e.call(this,"Failed to retrieve stream url.")||this}return n(t,e),t.prototype.getCode=function(){return"SCAUDIO.FAILED_RETRIEVING_URL"},t}(i.NotSupportedError);t.FailedRetrievingUrlError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=function(e){function t(){return e.call(this,"There were no stream URLs.")||this}return n(t,e),t.prototype.getCode=function(){return"SCAUDIO.NO_STREAMS"},t}(i.NotSupportedError);t.NoStreamsError=o},function(e,t,r){"use strict";var n=r(51);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";e.exports=r(58)()?String.prototype.contains:r(57)},function(e,t,r){"use strict";var n=r(5),i=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";var i,n=r(66),o=r(1),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(o(e),null===t||n(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,r;return e?(t=2===e.level?e.set?(r=e.set,function(e,t){return r.call(i(e,t),t),e}):function(e,t){return i(e,t).__proto__=t,e}:function e(t,r){var n;return i(t,r),(n=s.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,n&&a(e.nullPolyfill,"__proto__",l),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(65)},function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,r){"use strict";var n=r(70),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(1);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notSupportedError=new Error("Not supported.");var n=function(){this.supportsVolumeAutomation=!0,this.syncConfig={}};t.BaseController=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.BaseStreamUrlRetriever=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFadeIn=function(e){return new n({startPos:0,endPos:e,startLevel:0,endLevel:1,fromEnd:!1})},t.buildFadeOut=function(e){return new n({startPos:e,endPos:0,startLevel:1,endLevel:0,fromEnd:!0})};var n=function(){function e(e){var t=e.startPos,r=e.endPos,n=e.startLevel,i=e.endLevel,o=e.fromEnd,s=void 0!==o&&o;if(t<0)throw new Error("startPos invalid.");if(r<0||!s&&r<t||s&&t<r)throw new Error("endPos invalid.");if(n<0||1<n)throw new Error("startLevel invalid.");if(i<0||1<i)throw new Error("endLevel invalid.");this._startPos=t,this._endPos=r,this._startLevel=n,this._endLevel=i,this._fromEnd=s}return e.prototype.calculate=function(e,t){var r=this._fromEnd?t-500-this._startPos:this._startPos,n=this._fromEnd?t-500-this._endPos:this._endPos;if(e<r)return{level:this._startLevel,nextCalculatePosition:r-e};if(e<=n){var i=(e-r)/(n-r),o=Math.cos(i*Math.PI)/-2+.5,s=this._startLevel+(this._endLevel-this._startLevel)*o;return{level:s,nextCalculatePosition:e}}return{level:this._endLevel,nextCalculatePosition:1/0}},e}();t.Fade=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(15),o=r(14);!function(e){e.NotSupportedError=n.NotSupportedError,e.NoStreamsError=i.NoStreamsError,e.FailedRetrievingUrlError=o.FailedRetrievingUrlError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SQ="sq",e.HQ="hq"}(n=t.Quality||(t.Quality={})),t.resolveQuality=function(e){switch(e){case n.SQ:return n.SQ;case n.HQ:return n.HQ}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=function(){function e(n){var i=this;this._player=n,this._onConnectionRequired=new s.eventDispatcher.EventDispatcher,this._onConnectionRecovered=new s.eventDispatcher.EventDispatcher,this._connectionRequired=!1,this._connectionLossTimer=null,this.onConnectionRequired=this._onConnectionRequired.getHandle(),this.onConnectionRecovered=this._onConnectionRecovered.getHandle();var o=function(){return i._calculateIfConnectionRequired()};window.addEventListener("online",o),window.addEventListener("offline",o),this._calculateIfConnectionRequired(),n.onChange.subscribe(function(e){var t=e.loading,r=e.dead;r&&null!==i._connectionLossTimer&&(window.clearTimeout(i._connectionLossTimer),window.removeEventListener("online",o),window.removeEventListener("offline",o)),n.isDead()||void 0===t||i._calculateIfConnectionRequired()})}return e.prototype.isConnectionRequired=function(){return this._connectionRequired},e.prototype._calculateIfConnectionRequired=function(){var e=this,t=this._player.isLoading()&&"navigator"in window&&!window.navigator.onLine;t?null===this._connectionLossTimer&&(this._connectionLossTimer=window.setTimeout(function(){e._connectionLossTimer=null,e._connectionRequired=!0,e._onConnectionRequired.dispatch(void 0)},1500)):this._connectionRequired?(this._connectionRequired=!1,this._onConnectionRecovered.dispatch(void 0)):null!==this._connectionLossTimer&&(window.clearTimeout(this._connectionLossTimer),this._connectionLossTimer=null)},e}();t.ConnectionRequiredHelper=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLogId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<20;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},function(e,t,r){"use strict";function n(e,t){return void 0!==e?e:t}Object.defineProperty(t,"__esModule",{value:!0});var i=r(25),o=r(0);t.validatePlayerDependencies=function(e){if(!(e.streamUrlRetriever instanceof i.BaseStreamUrlRetriever))throw new Error("StreamUrlRetriever invalid.");if(void 0!==e.duration&&("number"!=typeof e.duration||e.duration<0))throw new Error("duration invalid.");if(void 0!==e.getURLOpts&&"object"!=typeof e.getURLOpts)throw new Error("getURLOpts invalid.");if(void 0!==e.preloadingEnabled&&"boolean"!=typeof e.preloadingEnabled)throw new Error("preloadingEnabled invalid.");if(void 0!==e.fadeOnPauseAndPlay&&"boolean"!=typeof e.fadeOnPauseAndPlay)throw new Error("fadeOnPauseAndPlay invalid.");if(void 0!==e.fadeOnSeek&&"boolean"!=typeof e.fadeOnSeek)throw new Error("fadeOnSeek invalid.");if(void 0!==e.mediaSessionEnabled&&"boolean"!=typeof e.mediaSessionEnabled)throw new Error("mediaSessionEnabled invalid.");if(void 0!==e.pausedMaxBufferLength&&("number"!=typeof e.pausedMaxBufferLength||e.pausedMaxBufferLength<0))throw new Error("pausedMaxBufferLength invalid.");if(void 0!==e.playingMaxBufferLength&&("number"!=typeof e.playingMaxBufferLength||e.playingMaxBufferLength<0))throw new Error("playingMaxBufferLength invalid.");if(void 0!==e.logger&&"function"!=typeof e.logger&&"object"!=typeof e.logger)throw new Error("logger invalid.");if(void 0!==e.audioReporter&&"function"!=typeof e.audioReporter)throw new Error("audioReporter invalid.");if(void 0!==e.audioCheckpointInterval&&("number"!=typeof e.audioCheckpointInterval||e.audioCheckpointInterval<0))throw new Error("audioCheckpointInterval invalid.");if(void 0!==e.audioPerformanceReporter&&"function"!=typeof e.audioPerformanceReporter)throw new Error("audioPerformanceReporter invalid.");if(void 0!==e.errorReporter&&"function"!=typeof e.errorReporter)throw new Error("errorReporter invalid.");if(void 0!==e.urlProviderRetryDelayCalculator&&"function"!=typeof e.urlProviderRetryDelayCalculator)throw new Error("urlProviderRetryDelayCalculator invalid.");return{controllers:e.controllers,streamUrlRetriever:e.streamUrlRetriever,getURLOpts:n(e.getURLOpts,{}),preloadingEnabled:n(e.preloadingEnabled,!1),pausedMaxBufferLength:n(e.pausedMaxBufferLength,2e3),playingMaxBufferLength:n(e.playingMaxBufferLength,9e4),fadeOnPauseAndPlay:n(e.fadeOnPauseAndPlay,!1),fadeOnSeek:n(e.fadeOnSeek,!1),audioCheckpointInterval:n(e.audioCheckpointInterval,3e4),urlProviderRetryDelayCalculator:n(e.urlProviderRetryDelayCalculator,o.helpers.retry.buildExponentialDelayCalculator()),streamUrlsExpire:n(e.streamUrlsExpire,!0),fetchEnabled:n(e.fetchEnabled,!0),duration:e.duration,audioReporter:e.audioReporter,audioPerformanceReporter:e.audioPerformanceReporter,errorReporter:e.errorReporter}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t(0),l=t(13);r.NoMoreAttemptsError=new Error("No more attempts to retrieve URL."),r.retrieveUrl=function(e){var i=e.streamUrlRetriever,o=e.getURLOpts,s=e.logger,t=e.urlProviderRetryDelayCalculator;return new a.helpers.abortableJob.AbortableJob(function(){var n=a.helpers.deferred.buildDeferred(),e=a.helpers.retry.retry(t,function(e){var t=e.scheduleRetry,r=i.getUrl(o);return s.debug("Retrieving a URL..."),r.onCompletion(function(e){e?e.rendition&&l.allRenditions.indexOf(e.rendition)<0?(s.warn("Unknown rendition. Skipping...",e.rendition),i.excludeRendition(e.rendition),t()):!e.success&&e.error.isTransient()?(s.warn("Transient error retrieving url.",e.error),t()):n.resolve(e):(s.debug("No URL provided."),n.resolve(null))}),r.onError(function(e){e!==a.helpers.abortableJob.abortedError&&s.error("Error retrieving URL.",e),n.reject(e)}),{onCancel:function(){return r.abort()}}},{onNoMoreRetries:function(){return n.reject(r.NoMoreAttemptsError)}}).cancel;return{result:n.promise,abort:function(){return e()}}}).run()}},function(e,t,r){"use strict";function a(e,t){var r=e.getMemoryCacheController();r&&r.setMaxCacheSize(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e,t){this._maxCacheSize=e,this._players=[],this._updateTimer=null,this._logger=n.logger.prefixLogger(t,"CacheManager"),this._logger.debug("Initialized with cache size "+e+" bytes.")}return e.prototype.setCacheSize=function(e){this._maxCacheSize!==e&&(this._logger.debug("Updating cache size to "+e+" bytes."),this._maxCacheSize=e,this._update())},e.prototype.addPlayer=function(n){var i,o=this;this._logger.debug("Adding player to cache manager."),n.isDead()?this._logger.debug("Player was dead."):(i=this._players,n.onChange.subscribe(function(e){var t=e.playing,r=e.dead;!0===r?(o._logger.debug("Removing player that became dead."),i.splice(i.indexOf(n),1),o._update()):!0===t?(o._logger.debug("Updating because player started playing."),i.splice(i.indexOf(n),1),i.unshift(n),o._update()):!1===t&&(o._logger.debug("Updating because player became paused."),o._update())}),n.isPlaying()?i.unshift(n):i.push(n),this._update())},e.prototype._update=function(){var e,t,r,n,i,o,s=this;this._updateTimer&&(window.clearTimeout(this._updateTimer),this._updateTimer=null),0!==this._players.length?(e=this._players.reduce(function(e,t){return t.isPlaying()?e.playingPlayers.push(t):e.pausedPlayers.push(t),e},{playingPlayers:[],pausedPlayers:[]}),t=e.playingPlayers,r=e.pausedPlayers,n=t.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),i=r.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),n>this._maxCacheSize?(this._logger.debug("All playing players are using more than the max cache size. Cleaning...",n,this._maxCacheSize),o=this._maxCacheSize/t.length,t.forEach(function(e){return a(e,o)}),r.forEach(function(e){return a(e,0)})):(this._logger.debug("Recalculating cache sizes...",n+i,this._maxCacheSize),t.concat(r).reduce(function(e,t){return a(t,Math.max(0,s._maxCacheSize-e)),e+(t.getMemoryCacheUsage()||0)},0)),this._updateTimer=window.setTimeout(function(){return s._update()},2e4)):this._logger.debug("There are no longer any players to manage.")},e}();t.CacheManager=i},function(e,t,r){"use strict";e.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return n.call(arguments,function(e){t[e]=!0}),t}},function(e,t,r){"use strict";e.exports=r(35)("key","value","key+value")},function(e,t,r){"use strict";var n,i=r(9),o=r(4),s=r(10),a=r(3).toStringTag,l=r(36),u=Object.defineProperties,h=s.prototype._unBind;n=e.exports=function(e,t){return this instanceof n?(s.call(this,e.__mapKeysData__,e),t&&l[t]||(t="key+value"),void u(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})):new n(e,t)},i&&i(n,s),n.prototype=Object.create(s.prototype,{constructor:o(n),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,h.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,a,o("c","Map Iterator"))},function(e,t,r){"use strict";var n,i=r(9),o=r(4),s=r(3),a=r(10),l=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),l(this,"__length__",o("",e.length))},i&&i(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:55296<=(t=r.charCodeAt(0))&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),l(n.prototype,s.toStringTag,o("c","String Iterator"))},function(e,t,r){"use strict";var a=r(2),l=r(1),u=Function.prototype.bind,h=Function.prototype.call,c=Object.keys,p=Object.prototype.propertyIsEnumerable;e.exports=function(o,s){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(l(r)),a(n),e=c(r),t&&e.sort("function"==typeof t?u.call(t,r):void 0),"function"!=typeof o&&(o=e[o]),h.call(o,e,function(e,t){return p.call(r,e)?h.call(n,i,r[e],e,r,t):s})}}},function(e,t,r){"use strict";e.exports=r(39)("forEach")},function(e,t,r){"use strict";var n=r(2),a=r(40),l=Function.prototype.call;e.exports=function(e,i){var o={},s=arguments[2];return n(i),a(e,function(e,t,r,n){o[t]=l.call(i,s,e,t,r,n)}),o}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(r(22));e.exports=function(e){return"function"==typeof e&&n.call(e)===i}},function(e,t,r){"use strict";var d=r(3).iterator,f=r(8),m=r(42),g=r(21),y=r(2),v=r(1),_=r(5),b=r(7),E=Array.isArray,S=Function.prototype.call,w={configurable:!0,enumerable:!0,writable:!0,value:null},x=Object.defineProperty;e.exports=function(e){var t,r,n,i,o,s,a,l,u,h,c=arguments[1],p=arguments[2];if(e=Object(v(e)),_(c)&&y(c),this&&this!==Array&&m(this))t=this;else{if(!c){if(f(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(E(e)){for(i=new Array(o=e.length),r=0;r<o;++r)i[r]=e[r];return i}}i=[]}if(!E(e))if(void 0!==(u=e[d])){for(a=y(u).call(e),t&&(i=new t),l=a.next(),r=0;!l.done;)h=c?S.call(c,p,l.value,r):l.value,t?(w.value=h,x(i,r,w)):i[r]=h,l=a.next(),++r;o=r}else if(b(e)){for(o=e.length,t&&(i=new t),n=r=0;r<o;++r)h=e[r],r+1<o&&(55296<=(s=h.charCodeAt(0))&&s<=56319&&(h+=e[++r])),h=c?S.call(c,p,h,n):h,t?(w.value=h,x(i,n,w)):i[n]=h,++n;o=n}if(void 0===o)for(o=g(e.length),t&&(i=new t(o)),r=0;r<o;++r)h=c?S.call(c,p,e[r],r):e[r],t?(w.value=h,x(i,r,w)):i[r]=h;return t&&(w.value=null,i.length=o),i}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";e.exports=r(44)()?Array.from:r(43)},function(e,t,r){"use strict";var o=r(45),s=r(11),a=r(1);e.exports=function(t){var e=Object(a(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var i={};return r?o(r,function(e){(n.ensure||e in t)&&(i[e]=t[e])}):s(i,t),i}},function(e,t,r){"use strict";var n,o=r(46),i=r(18),s=r(2),a=r(41),l=r(2),u=r(1),h=Function.prototype.bind,c=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=u(t)&&l(t.value);return delete(n=o(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&p.call(this,e)?i:(t.value=h.call(i,r.resolveContext?r.resolveContext(this):this),c(this,e,t),this[e])},n},e.exports=function(e){var r=i(arguments[1]);return null!=r.resolveContext&&s(r.resolveContext),a(e,function(e,t){return n(t,e,r)})}},function(e,t,r){"use strict";var n,i=r(9),o=r(17),s=r(4),a=r(3),l=r(10),u=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",u(this,"__kind__",s("",t))},i&&i(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(n.prototype,a.toStringTag,s("c","Array Iterator"))},function(e,t,r){"use strict";var n=r(8),i=r(7),o=r(48),s=r(38),a=r(16),l=r(3).iterator;e.exports=function(e){return"function"==typeof a(e)[l]?e[l]():new(!n(e)&&i(e)?s:o)(e)}},function(e,t,r){"use strict";var c=r(8),p=r(2),d=r(7),f=r(49),m=Array.isArray,g=Function.prototype.call,y=Array.prototype.some;e.exports=function(e,t){var r,n,i,o,s,a,l,u,h=arguments[2];if(m(e)||c(e)?r="array":d(e)?r="string":e=f(e),p(t),i=function(){o=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(g.call(t,h,n.value,i),o)return;n=e.next()}else for(a=e.length,s=0;s<a&&(l=e[s],s+1<a&&(55296<=(u=l.charCodeAt(0))&&u<=56319&&(l+=e[++s])),g.call(t,h,l,i),!o);++s);else y.call(e,function(e){return g.call(t,h,e,i),o})}},function(e,t,r){"use strict";var n=r(8),i=r(5),o=r(7),s=r(3).iterator,a=Array.isArray;e.exports=function(e){return!(!i(e)||!a(e)&&!o(e)&&!n(e)&&"function"!=typeof e[s])}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var n=r(52);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n,i,o,s,a=r(4),l=r(53),u=Object.create,h=Object.defineProperties,c=Object.defineProperty,p=Object.prototype,d=u(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),s=!0}catch(e){}}var f=function(){var i=u(null);return function(e){for(var t,r,n=0;i[e+(n||"")];)++n;return i[e+=n||""]=!0,c(p,t="@@"+e,a.gs(null,function(e){r||(r=!0,c(this,t,a(e)),r=!1)})),t}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return s?n(t):(r=u(o.prototype),t=void 0===t?"":String(t),h(r,{__description__:a("",t),__name__:a("",f(t))}))},h(i,{for:a(function(e){return d[e]?d[e]:d[e]=i(String(e))}),keyFor:a(function(e){var t;for(t in l(e),d)if(d[t]===e)return t}),hasInstance:a("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",n&&n.iterator||i("iterator")),match:a("",n&&n.match||i("match")),replace:a("",n&&n.replace||i("replace")),search:a("",n&&n.search||i("search")),species:a("",n&&n.species||i("species")),split:a("",n&&n.split||i("split")),toPrimitive:a("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:a("",n&&n.toStringTag||i("toStringTag")),unscopables:a("",n&&n.unscopables||i("unscopables"))}),h(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),h(i.prototype,{toString:a(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:a(function(){return l(this)})}),c(i.prototype,i.toPrimitive,a("",function(){var e=l(this);return"symbol"==typeof e?e:e.toString()})),c(i.prototype,i.toStringTag,a("c","Symbol")),c(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),c(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(e,t,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){"use strict";var i,n,o,s,a,l,u,h=r(4),c=r(2),p=Function.prototype.apply,d=Function.prototype.call,f=Object.create,m=Object.defineProperty,g=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};n=function(e,t){var r,n;return c(t),i.call(n=this,e,r=function(){o.call(n,e,r),p.call(t,this,arguments)}),r.__eeOnceListener__=t,this},a={on:i=function(e,t){var r;return c(t),y.call(this,"__ee__")?r=this.__ee__:(r=v.value=f(null),m(this,"__ee__",v),v.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:n,off:o=function(e,t){var r,n,i,o;if(c(t),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:s=function(e){var t,r,n,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)p.call(n,this,o)}else switch(arguments.length){case 1:d.call(i,this);break;case 2:d.call(i,this,arguments[1]);break;case 3:d.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];p.call(i,this,o)}}},l={on:h(i),once:h(n),off:h(o),emit:h(s)},u=g({},l),e.exports=t=function(e){return null==e?f(u):g(Object(e),l)},t.methods=a},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var n=r(5),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";e.exports=r(61)()?Object.keys:r(60)},function(e,t,r){"use strict";var s=r(62),a=r(1),l=Math.max;e.exports=function(t,r){var n,e,i,o=l(arguments.length,2);for(t=Object(a(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<o;++e)s(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var i,o=Object.create;r(20)()||(i=r(19)),e.exports=function(){var r,t,n;return!i||1!==i.level?o:(n={configurable:!(t={}),enumerable:!(r={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=n)}),Object.defineProperties(r,t),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(e,t){return o(null===e?r:e,t)})}()},function(e,t,r){"use strict";var n=r(5),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=r(68)()?Math.sign:r(67)},function(e,t,r){"use strict";var n=r(69),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&!e({})&&e(NaN)&&!e(34)}},function(e,t,r){"use strict";e.exports=r(72)()?Number.isNaN:r(71)},function(e,t,r){"use strict";var o=r(73),s=r(21),a=r(1),l=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,h=Math.abs,c=Math.floor;e.exports=function(e){var t,r,n,i;if(!o(e))return l.apply(this,arguments);for(r=s(a(this).length),n=arguments[1],n=isNaN(n)?0:0<=n?c(n):s(this.length)-c(h(n)),t=n;t<r;++t)if(u.call(this,t)&&(i=this[t],o(i)))return t;return-1}},function(e,t,r){"use strict";var i,n=r(23),o=r(74),s=r(9),a=r(2),l=r(1),u=r(4),h=r(56),c=r(3),p=r(16),d=r(50),f=r(37),m=r(34),g=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;e.exports=i=function(){var r,n,e,t=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return e=m&&s&&Map!==i?s(new Map,v(this)):this,null!=t&&p(t),y(e,{__mapKeysData__:u("c",r=[]),__mapValuesData__:u("c",n=[])}),t&&d(t,function(e){var t=l(e)[0];e=e[1],-1===o.call(r,t)&&(r.push(t),n.push(e))},e),e},m&&(s&&s(i,Map),i.prototype=Object.create(Map.prototype,{constructor:u(i)})),h(y(i.prototype,{clear:u(function(){this.__mapKeysData__.length&&(n.call(this.__mapKeysData__),n.call(this.__mapValuesData__),this.emit("_clear"))}),delete:u(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:u(function(){return new f(this,"key+value")}),forEach:u(function(e){var t,r,n=arguments[1];for(a(e),t=this.entries(),r=t._next();void 0!==r;)g.call(e,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=t._next()}),get:u(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:u(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:u(function(){return new f(this,"key")}),set:u(function(e,t){var r,n=o.call(this.__mapKeysData__,e);return-1===n&&(n=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[n]=t,r&&this.emit("_add",n,e),this}),size:u.gs(function(){return this.__mapKeysData__.length}),values:u(function(){return new f(this,"value")}),toString:u(function(){return"[object Map]"})})),Object.defineProperty(i.prototype,c.iterator,u(function(){return this.entries()})),Object.defineProperty(i.prototype,c.toStringTag,u("c","Map"))},function(e,t,r){"use strict";e.exports=function(){var e,t,r;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&3===e.size&&"function"==typeof e.clear&&"function"==typeof e.delete&&"function"==typeof e.entries&&"function"==typeof e.forEach&&"function"==typeof e.get&&"function"==typeof e.has&&"function"==typeof e.keys&&"function"==typeof e.set&&"function"==typeof e.values&&(t=e.entries(),!1===(r=t.next()).done&&!!r.value&&"raz"===r.value[0]&&"one"===r.value[1])}},function(e,t,r){"use strict";e.exports=r(76)()?Map:r(75)},function(e,t,r){"use strict";function c(e,t,r){return{name:t.name,preset:e.preset,bitrate:e.bitrate,protocol:e.rendition.scProtocol,host:function(e){var t=e.split("//",2);return 1===t.length?t[0].split("/",1)[0]:t[1]?t[1].split("/",1)[0]:""}(r),url:function(e){var t=n.exec(e);return t&&t[0]||""}(r),format:e.rendition.scFormat,quality:e.quality}}Object.defineProperty(t,"__esModule",{value:!0});var m=r(77),g=r(0),p=r(24),n=/^[^?#]*/,i=function(){function e(e){var t=e.logger,r=e.controllers,n=e.playerId,i=e.streamUrlsExpire,o=e.fetchEnabled,s=e.fadeOnPauseAndPlay,a=e.fadeOnSeek,l=e.cacheManager,u=e.providePlayer,h=e.removePlayer,c=e.streamUrlRetriever,p=e.getURLOpts,d=e.errorEventGenerator,f=e.audioPerformanceEventGenerator;this._quality=null,this._onQualityChanged=new g.eventDispatcher.EventDispatcher,this._controllerIndexByRendition=new m,this._controlledPlayerWithRendition=null,this.onQualityChanged=this._onQualityChanged.getHandle(),this._logger=g.logger.prefixLogger(t,"ControllerManager"),this._controllers=r,this._playerId=n,this._streamUrlsExpire=i,this._fetchEnabled=o,this._fadeOnPauseAndPlay=s,this._fadeOnSeek=a,this._cacheManager=l,this._providePlayer=u,this._removePlayer=h,this._streamUrlRetriever=c,this._getURLOpts=p,this._errorEventGenerator=d||null,this._audioPerformanceEventGenerator=f||null}return e.prototype.buildNextController=function(t,r){var n=this;if(this._controlledPlayerWithRendition)throw new Error("A player is already being controlled.");this._logger.debug("Building next controller.");var i,o=this._controllerIndexByRendition.get(t.rendition)||0;o>=this._controllers.length?(this._logger.debug("No more controllers for this rendition."),r({excludeRendition:!0,immediateRetry:!0})):(i=!1,this._manageController(t,this._controllers[o],function(e){if(i)throw new Error("performNextAction() already called");i=!0,"MOVE_ON"!==e&&"MOVE_ON_SAME_RENDITION"!==e||(n._logger.debug("Controller will not be used again."),n._controllerIndexByRendition.set(t.rendition,o+1)),"MOVE_ON_SAME_RENDITION"===e?n.buildNextController(t,r):r({excludeRendition:!1,immediateRetry:"MOVE_ON"===e})}))},e.prototype.releaseCurrentController=function(e){var t=e.retry;if(!this._controlledPlayerWithRendition)throw new Error("There is no player being controlled.");this._controlledPlayerWithRendition.releaseControl({retry:t})},e.prototype.getQuality=function(){return this._quality},e.prototype.getPlayerDetails=function(){if(!this._controlledPlayerWithRendition)throw new Error("There is no player being controlled.");var e=this._controlledPlayerWithRendition,t=e.initialUrlAndRendition,r=e.controller,n=e.controlledPlayer;return c(t,r,n.getUrl())},e.prototype._manageController=function(t,r,n){var i=this,o=function(){i._removePlayer(),i._controlledPlayerWithRendition=null,e&&e.kill()};if(this._logger.debug("Preparing controller.",r.name),!r.isRenditionSupported(t.rendition,{streamUrlExpires:this._streamUrlsExpire}))return this._logger.debug("Skipping controller because rendition not supported."),void n("MOVE_ON_SAME_RENDITION");var e,s=!1,a=function(e){var t=e.retry;s||(s=!0,i._logger.debug("Releasing control."),o(),n(t?"RETRY":"MOVE_ON"))};try{this._logger.debug("Building player.");var l,u,h=r.buildPlayer({logger:g.logger.prefixLogger(this._logger,r.name+"-Controller"),playerId:this._playerId,urlAndRendition:t,streamUrlExpires:this._streamUrlsExpire,fetchEnabled:this._fetchEnabled,releaseControl:a,fadeOnPauseAndPlay:this._fadeOnPauseAndPlay,fadeOnSeek:this._fadeOnSeek,getNewUrl:function(){return i._getNewUrlWithSameRendition(t.rendition)},reportError:function(e){i._errorEventGenerator&&i._errorEventGenerator.reportManualEvent(e,c(t,r,h?h.getUrl():t.url))},reportPerformance:function(e){!s&&i._audioPerformanceEventGenerator&&i._audioPerformanceEventGenerator.reportManualEvent(e)}});e=h.getPlayer(),s?(this._logger.warn("Player released during constrution."),e.kill()):e.isDead()?((l=e.getFatalError())instanceof g.errors.NotSupportedError?this._logger.debug("Player not supported (during construction)."):this._logger.error("Error during construction.",l),n("MOVE_ON_SAME_RENDITION")):(this._logger.debug("Player built."),e.onChange.subscribe(function(e){var t=e.dead,r=e.fatalError;t&&(r&&i._logger.error("Fatal player error occurred.",r),a({retry:!1}))}),this._cacheManager.addPlayer(e),this._controlledPlayerWithRendition={controller:r,controlledPlayer:h,initialUrlAndRendition:t,releaseControl:a},this._providePlayer(h.getPlayer(),r.syncConfig,r.supportsVolumeAutomation),this._logger.debug("Player provided to proxy."),u=t.quality||null,this._quality!==u&&(this._logger.debug("Quality changed.",u),this._quality=u,this._onQualityChanged.dispatch(u)))}catch(t){t===p.notSupportedError?this._logger.debug("Player not supported. Not constructed."):this._logger.error("Error during construction.",t),o(),n("MOVE_ON_SAME_RENDITION")}},e.prototype._getNewUrlWithSameRendition=function(r){var n=this,e=new g.helpers.abortableJob.AbortableJob(function(){var e=n._streamUrlRetriever.getUrl(n._getURLOpts),t=e.whenComplete().then(function(e){var t=null;return e&&e.success&&e.rendition===r&&(t=e.url),t});return{result:t,abort:function(){return e.abort()}}});return e.run()},e}();t.ControllerManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(12),n=function(){function e(e,t,r,n,i){this._checkpointTimer=null,this._logger=o.logger.prefixLogger(n,"AudioEventGenerator"),this._player=e,this._eventReporter=t,this._checkpointInterval=Math.max(1e3,r),this._getPlayerDetails=i,this._startReporting()}return e.prototype._startReporting=function(){var n=this,i=this._player;i.onChange.subscribe(function(e){var t=e.actuallyPlaying,r=e.ended;!0===t&&!i.isEnded()||!1===r&&i.isActuallyPlaying()?(n._checkpointTimer||(n._checkpointTimer=window.setInterval(function(){n._reportEvent("checkpoint")},n._checkpointInterval)),n._reportEvent("play")):(!1===t&&!i.isEnded()||!0===r&&i.isActuallyPlaying())&&(n._checkpointTimer&&(window.clearInterval(n._checkpointTimer),n._checkpointTimer=null),n._reportEvent("pause"))})},e.prototype._reportEvent=function(e){var t=this._getPlayerDetails();if(t){var r=this._player.getDuration();if(null===r)throw new Error("Duration should exist now.");var n={type:e,position:this._player.getPosition(),duration:r,preset:t.preset,quality:t.quality,playerType:t.name,appState:i.getAppState()};this._logger.debug("Generated audio event.",n),this._eventReporter(n)}else this._logger.warn("Cannot report event because there is no player.",e)},e}();t.AudioEventGenerator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._delayFactor=0,this._lastRequestTime=0}return e.prototype.getDelay=function(e){var t=void 0===e?{}:e,r=t.maxDelay,n=void 0===r?3e4:r,i=t.numInstantRuns,o=void 0===i?5:i,s=Date.now()-this._lastRequestTime;this._lastRequestTime=Date.now(),this._delayFactor=Math.max(0,this._delayFactor-s/n),this._delayFactor++;var a=this._delayFactor-o;return 0<a?Math.pow(2,a):0},e}();t.DecayingExponentialDelayCalculator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),n=r(12),i=function(){function e(e,t,r,n,i,o){this._logger=s.logger.prefixLogger(o,"ErrorGenerator"),this._player=e,this._logCollector=t,this._logId=r,this._trackId=n,this._eventReporter=i,this._listenForProxyFatalError()}return e.prototype.reportManualEvent=function(e,t){"NOT_SUPPORTED_ERROR"!==e&&"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR"!==e&&(this._logger.debug("Reporting manual error event.",e),this._reportEvent(e,t))},e.prototype._listenForProxyFatalError=function(){var t=this;this._player.onError.subscribe(function(e){e instanceof s.errors.PlayerFatalError&&t._reportEvent(e.getCode())})},e.prototype._reportEvent=function(e,t){var r={errorCode:e,log:this._logCollector.getLog(),logId:this._logId,trackId:this._trackId,protocol:t&&t.protocol,playerType:t&&t.name?t.name:"MaestroUnknown",host:t&&t.host,bitrate:t&&t.bitrate,format:t&&t.format,preset:t&&t.preset,quality:t&&t.quality,url:t&&t.url,appState:n.getAppState()};this._logger.debug("Generated audio error event.",r),this._eventReporter(r)},e}();t.ErrorEventGenerator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),a=s.helpers.find,n=function(){function e(e){var t=e.proxy,r=e.getPlayer;this._getPlayer=r;var n,i=this._position=t.getPosition(),o=this._initialActualPlayer=r();o?(n=function(e,t){var r=e.getBufferedTimeRanges();return r?a(r,function(e){return e.containsTime(t)})||new s.TimeRange(t,0):null}(o,i),this._initialBuffered=n?n.end-i:null):this._initialBuffered=null}return e.prototype.getPreloaded=function(){var e=this._initialBuffered;return null!==e&&this._initialActualPlayer&&this._getPlayer()===this._initialActualPlayer?0===e?"no":2e3<=e?"yes":"partial":null},e}();t.PreloadingCalculator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.helpers.time.now,o=function(){function e(){this._start=null,this._end=null}return e.prototype.start=function(){if(this.isComplete())throw new Error("Timer completed.");this._start=i()},e.prototype.isComplete=function(){return null!==this._end},e.prototype.stop=function(){if(null===this._start)throw new Error("Not started.");this._end=i()},e.prototype.getTime=function(){if(null===this._end)throw new Error("Not completed.");return this._end-this._start},e}();t.Timer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),_=r(83),b=r(82),s=r(12),n=function(){function e(e,t,r,n,i){this._logger=o.logger.prefixLogger(n,"AudioPerformanceEventGenerator"),this._proxy=e,this._getPlayer=t,this._eventReporter=r,this._getPlayerDetails=i,this._measureGeneralEvents()}return e.prototype.reportManualEvent=function(e){this._logger.debug("Reporting manual audio performance event.",e),this._eventReporter(e)},e.prototype._measureGeneralEvents=function(){var u=this,h=this._proxy,c=null,p=null,d=null,f=null,m=null,g=null,y=null,v=!0;h.onChange.subscribe(function(e){var t,r=e.playing,n=e.actuallyPlaying,i=e.seek,o=e.seeking,s=e.stalled,a=e.ended,l=e.dead;!0!==l&&!1!==r||!f||(f.stop(),1e3<=f.getTime()&&u._reportEvent("rageSkip",f.getTime(),null),f=null),h.isDead()?y&&window.clearTimeout(y):(t=h.getSeekState(),h.isActuallyPlaying()||f||!(!0===r||h.isPlaying()&&!0===s)||(f=new _.Timer).start(),!0===r&&(c||((c=new _.Timer).start(),p=new b.PreloadingCalculator({proxy:h,getPlayer:u._getPlayer}),y=window.setTimeout(function(){u._reportEvent("longInitialBuffering",0,null)},3e4),0===h.getPosition()&&(v=!1))),!1===r&&(y&&window.clearTimeout(y),c&&!c.isComplete()&&(c=null)),!0===n&&(f=null,c&&!c.isComplete()&&(c.stop(),y&&window.clearTimeout(y),u._reportEvent("play",c.getTime(),p.getPreloaded()))),i&&"IN_PROGRESS"===i.state&&h.isReady()&&((d=new _.Timer).start(),m=new b.PreloadingCalculator({proxy:h,getPlayer:u._getPlayer}),!0===o&&u._reportEvent("seekStart",0,null)),(i&&"COMPLETED"===i.state&&!h.isStalled()||!1===s&&t&&"COMPLETED"===t.state)&&d&&(d.stop(),u._reportEvent("seek",d.getTime(),m.getPreloaded()),d=null),!0!==s||!h.isPlaying()||t&&"IN_PROGRESS"===t.state||c&&c.isComplete()&&((g=new _.Timer).start(),u._reportEvent("rebufferingStart",h.getPosition(),null)),!1===s&&(c&&c.isComplete()&&(f=null),g&&(g.stop(),u._reportEvent("rebufferingEnd",g.getTime(),null),g=null)),!0!==a||v||(u._reportEvent("uninterruptedPlay",0,null),v=!0),t&&"IN_PROGRESS"===t.state||!0!==s||!h.isActuallyPlaying()||(v=!0))})},e.prototype._reportEvent=function(e,t,r){var n,i=this._getPlayerDetails();i?(n={type:e,latency:t,protocol:i.protocol,playerType:i.name,host:i.host,bitrate:i.bitrate,format:i.format,preset:i.preset,quality:i.quality,preloaded:r||void 0,appState:s.getAppState()},this._logger.debug("Generated audio performance event.",n),this._eventReporter(n)):this._logger.warn("Cannot report event because there is no player.",e,t)},e}();t.AudioPerformanceEventGenerator=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e=200),this._bufferSize=e,this._log=[]}return e.prototype.getLog=function(){return this._log.map(function(e){return n({},e,{data:function(e){return e.map(function(e){try{return JSON.stringify(e)}catch(e){return"<unavailable>"}})}(e.data)})})},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"debug",msg:e,data:t,time:Date.now()})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"info",msg:e,data:t,time:Date.now()})},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"warn",msg:e,data:t,time:Date.now()})},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"error",msg:e,data:t,time:Date.now()})},e.prototype._push=function(e){this._log.push(e)>this._bufferSize&&this._log.shift()},e}();t.LogCollector=i},function(e,t,r){"use strict";function l(e,t,r){return Math.min(t,Math.max(e,r))}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var f=r(0),i=r(26),m=r(85),g=r(84),y=r(81),v=r(80),_=r(79),b=r(78),o=r(33),s=r(32),a=r(6),u=r(15),E=r(31),S=r(30),w=r(29),h=r(14),c=r(13),x=f.eventDispatcher.EventDispatcher,p=f.helpers.Promise,P=f.helpers.deferred.buildDeferred,C=new o.CacheManager(15e7,f.logger.noOpLogger),A=-1,T=[],k=1,R=!1;t.setGlobalVolume=function(t){if("number"!=typeof t)throw new Error("level must be a number.");if(t<0||1<t)throw new Error("Invalid volume level.");k=t,T.forEach(function(e){return e.setVolume(t)})},t.getGlobalVolume=function(){return k},t.setGlobalMuted=function(t){if("boolean"!=typeof t)throw new Error("muteEnabled must be a boolean.");R=t,T.forEach(function(e){return e.setMuted(t)})},t.getGlobalMuted=function(){return R},t.setCacheSize=function(e){if("number"!=typeof e||e<0)throw new Error("Invalid size.");C.setCacheSize(e)};var d=function(d){function e(e){var n=d.call(this,e)||this;n._onPreloadingEnabled=new x,n._onPreloadingDisabled=new x,n._retryDelayCalculator=new v.DecayingExponentialDelayCalculator,n._errorEventGenerator=null,n._fadeOutVolumeAutomator=null,n._volumeAutomators=[],n._volumeScale=1,n._userVolume=1,n._volumeAutomationSupported=!1,n._timer=null,n._pauseFadeTimer=null,n._pauseFadeDeferred=null,n._pauseFade=null,n._executionState={state:"IDLE"},n._preloadingListeners=[],n._retrieveAndBuildTimer=null,n._hadAStreamUrl=!1;var t=n._config=E.validatePlayerDependencies(e);n._preloadingEnabled=t.preloadingEnabled,n._getURLOpts=t.getURLOpts,n._controllers=t.controllers;var r=n._connectionRequiredHelper=new w.ConnectionRequiredHelper(n);n.onPreloadingEnabled=n._onPreloadingEnabled.getHandle(),n.onPreloadingDisabled=n._onPreloadingDisabled.getHandle(),n.onConnectionRequired=r.onConnectionRequired,n.onConnectionRecovered=r.onConnectionRecovered,n.onChange.subscribe(function(e){n.isDead()||((!1===e.playing||e.positionJumped||e.stalled||e.ended)&&n._completePauseFade(),n._pauseFade&&(!1===e.actuallyPlaying||e.ended||!0===e.playing)&&(n._removeVolumeAutomator(n._pauseFade),n._pauseFade=null),!e.positionJumped&&void 0===e.actuallyPlaying&&void 0===e.stalled||n._updateVolume(),void 0!==e.playing&&n._updateMaxBufferLength())});var i="SCAudio-"+ ++A,o=t.streamUrlRetriever.getTrackId();null!==o&&(i+="-"+o);var s=new m.LogCollector,a=f.logger.cloneLogger(s,n._logger);n._logger=f.logger.prefixLogger(a,i);var l=S.generateLogId();n._logger.info("Building player...",{ua:navigator.userAgent,getURLOpts:n._getURLOpts,logId:l}),T.push(n),n.setVolume(k,R),n._updateFadeOut();var u=null,h=null;t.audioPerformanceReporter&&(u=new g.AudioPerformanceEventGenerator(n,function(){return n._getPlayer()},t.audioPerformanceReporter,n._logger,function(){return n._getActivePlayerDetails()})),t.audioReporter&&new _.AudioEventGenerator(n,t.audioReporter,t.audioCheckpointInterval,n._logger,function(){return n._getActivePlayerDetails()}),t.errorReporter&&(h=n._errorEventGenerator=new y.ErrorEventGenerator(n,s,l,o,t.errorReporter,n._logger)),n._excludeUnsupportedRenditions();var c,p=n._controllerManager=new b.ControllerManager({logger:n._logger,controllers:t.controllers,playerId:i,streamUrlsExpire:t.streamUrlsExpire,fetchEnabled:t.fetchEnabled,fadeOnPauseAndPlay:t.fadeOnPauseAndPlay,fadeOnSeek:t.fadeOnSeek,cacheManager:C,providePlayer:function(e,t,r){n._volumeAutomationSupported=r,n._providePlayer(e,t),n._updateMaxBufferLength()},removePlayer:function(){n._getPlayer()&&n._removePlayer()},streamUrlRetriever:n._config.streamUrlRetriever,getURLOpts:n._getURLOpts,errorEventGenerator:h||void 0,audioPerformanceEventGenerator:u||void 0});return n.onQualityChanged=p.onQualityChanged,void 0!==t.duration&&(n._logger.debug("Setting initial duration.",t.duration),n._setInitialDuration(t.duration)),n._preloadingEnabled?(n._logger.debug("Preloading is enabled, so performing retrieve immediately."),n._retrieveAndBuild()):(n._logger.debug("Preloading is disabled, so deferring retrieve until either a play intent or preloading is enabled."),c=function(){n._removePreloadingListeners(),n._logger.debug("Preloading now enabled or received a play request. Peforming retrieve."),n._retrieveAndBuild()},n._preloadingListeners.push(n.onPreloadingEnabled.subscribe(c),n.onPlayIntent.subscribe(c))),n}return n(e,d),e.prototype.reload=function(e){void 0===e&&(e={}),this._ensureNotDead(),this._reloadStreamUrls(e)},e.prototype.enablePreloading=function(){this.isDead()||this._preloadingEnabled||(this._preloadingEnabled=!0,this._updateMaxBufferLength(),this._onPreloadingEnabled.dispatch(void 0))},e.prototype.disablePreloading=function(){this.isDead()||this._preloadingEnabled&&(this._preloadingEnabled=!1,this._updateMaxBufferLength(),this._onPreloadingDisabled.dispatch(void 0))},e.prototype.isPreloadingEnabled=function(){return this._preloadingEnabled},e.prototype.pauseAfterFade=function(e){var t=this;if(this._ensureNotDead(),this._pauseFadeDeferred)return this._pauseFadeDeferred.promise;if(!this.isPlaying()||!this.isActuallyPlaying())return p.resolve(this.pause());var r=P();this._pauseFadeDeferred=r;var n=this.getPosition();if(this._pauseFade)throw new Error("Fade should not already be assigned.");return this._pauseFade=new i.Fade({startPos:n,endPos:n+e,startLevel:1,endLevel:0}),this._addVolumeAutomator(this._pauseFade),this._pauseFadeTimer=window.setTimeout(function(){t._pauseFadeDeferred=null,r.resolve(t.pause({fadeDuration:0}))},e+50),r.promise},e.prototype.isConnectionRequired=function(){return this._connectionRequiredHelper.isConnectionRequired()},e.prototype.getQuality=function(){return this._controllerManager.getQuality()},e.prototype.getVolume=function(){return this._volumeAutomationSupported?this._userVolume:d.prototype.getVolume.call(this)},e.prototype._handleFatalError=function(e){this._logger.warn("Fatal error from current player.",e)},e.prototype._handleVolumeChange=function(e,t){this._userVolume=e,d.prototype._notifyVolumeChange.call(this,e,t),this._calculateAndSetVolume()},e.prototype._notifyVolumeChange=function(){},e.prototype._kill=function(){d.prototype._kill.call(this),this._timer&&window.clearTimeout(this._timer),this._abortPauseFade(),this._removePreloadingListeners(),T.splice(T.indexOf(this),1),"RETRIEVING_URL"===this._executionState.state?this._executionState.retrieveJob.abort():"CONTROLLING_PLAYER"===this._executionState.state&&this._controllerManager.releaseCurrentController({retry:!1}),this._executionState={state:"DEAD"},this._retrieveAndBuildTimer&&window.clearTimeout(this._retrieveAndBuildTimer)},e.prototype._excludeUnsupportedRenditions=function(){var r=this,n={streamUrlExpires:this._config.streamUrlsExpire},e=c.allRenditions.filter(function(t){return!r._controllers.some(function(e){return e.isRenditionSupported(t,n)})});e.forEach(function(e){r._config.streamUrlRetriever.excludeRendition(e)})},e.prototype._addVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);t<0&&(this._volumeAutomators.push(e),this._updateVolume())},e.prototype._removeVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);0<=t&&(this._volumeAutomators.splice(t,1),this._updateVolume())},e.prototype._removePreloadingListeners=function(){this._preloadingListeners.forEach(function(e){return e.remove()})},e.prototype._getActivePlayerDetails=function(){return"CONTROLLING_PLAYER"!==this._executionState.state?null:this._controllerManager.getPlayerDetails()},e.prototype._updateFadeOut=function(){this._fadeOutVolumeAutomator&&this._removeVolumeAutomator(this._fadeOutVolumeAutomator),this._getURLOpts.snippet&&(this._fadeOutVolumeAutomator=i.buildFadeOut(3e3),this._addVolumeAutomator(this._fadeOutVolumeAutomator))},e.prototype._handleUnexpectedError=function(e){try{e()}catch(e){this._logger.error("Unexpected error.",e),this._triggerError(new f.errors.PlayerFatalError("An unexpected error occurred.",e))}},e.prototype._retrieveAndBuild=function(){var o=this;this._handleUnexpectedError(function(){if(-1===["IDLE","WAITING_TO_RETRIEVE"].indexOf(o._executionState.state))throw new Error("Invalid state for retrieveAndBuild().");o._logger.debug("Retrieving URL...");var e=s.retrieveUrl({streamUrlRetriever:o._config.streamUrlRetriever,urlProviderRetryDelayCalculator:o._config.urlProviderRetryDelayCalculator,getURLOpts:o._getURLOpts,logger:o._logger});o._executionState={state:"RETRIEVING_URL",retrieveJob:e},e.onCompletion(function(n){var i,e,t;o._logger.debug("Retrieved URL.",!!n),n&&n.success?(i=!(o._hadAStreamUrl=!0),e=function(e){var t=e.excludeRendition,r=e.immediateRetry;o._handleUnexpectedError(function(){if(i)throw new Error("startOver called multiple times.");var e;i=!0,t&&o._config.streamUrlRetriever.excludeRendition(n.rendition),o._executionState={state:"WAITING_TO_RETRIEVE"},o.isDead()?o._logger.debug("Stopping execution because player is dead."):r?(o._logger.debug("Moving on immediately."),o._retrieveAndBuild()):(e=o._retryDelayCalculator.getDelay(),o._logger.debug("Will move on in "+e+"ms."),e?o._retrieveAndBuildTimer=window.setTimeout(function(){return o._retrieveAndBuild()},e):o._retrieveAndBuild())})},o._handleUnexpectedError(function(){o._executionState={state:"CONTROLLING_PLAYER"},o._logger.debug("Building controller..."),o._controllerManager.buildNextController(n,e),o._logger.debug("Built controller.")})):n&&n.rendition?(o._logger.warn("Error retrieving URL. Moving on.",n.error),o._errorEventGenerator&&(t="SCAUDIO.URL_RETRIEVER_ERROR."+o._config.streamUrlRetriever.name+"."+n.error.getCode(),o._errorEventGenerator.reportManualEvent(t,{preset:n.preset,quality:n.quality,bitrate:n.bitrate,format:n.rendition.scFormat,protocol:n.rendition.scProtocol})),o._config.streamUrlRetriever.excludeRendition(n.rendition),o._executionState={state:"WAITING_TO_RETRIEVE"},o._retrieveAndBuild()):(n&&n.rendition&&o._logger.warn("Error retrieving URL for any rendition.",n.error),o._logger.info("Ran out of streams.",o._hadAStreamUrl),o._triggerError(o._hadAStreamUrl?new a.NotSupportedError:new u.NoStreamsError))}),e.onError(function(e){e!==f.helpers.abortableJob.abortedError&&(e===s.NoMoreAttemptsError?o._logger.error("Ran out of retries to retrieve URL."):o._logger.error("Unexpected error when retrieving a URL.",e),o._triggerError(new h.FailedRetrievingUrlError))})})},e.prototype._reloadStreamUrls=function(e){this._getURLOpts=e,this._updateFadeOut(),this._logger.info("Reloading stream URL's...",this._getURLOpts),"RETRIEVING_URL"===this._executionState.state?(this._logger.debug("Aborting current URL retrieve."),this._executionState.retrieveJob.abort(),this._executionState={state:"WAITING_TO_RETRIEVE"},this._retrieveAndBuild()):"CONTROLLING_PLAYER"===this._executionState.state?(this._logger.debug("Releasing controller."),this._controllerManager.releaseCurrentController({retry:!0})):this._logger.debug("Nothing to do."),this._logger.info("Reloaded stream URL's.")},e.prototype._completePauseFade=function(){var e;this._pauseFadeDeferred&&(this._pauseFadeTimer&&window.clearTimeout(this._pauseFadeTimer),e=this._pauseFadeDeferred,this._pauseFadeDeferred=null,e.resolve(this.pause()))},e.prototype._abortPauseFade=function(){this._pauseFadeTimer&&(window.clearTimeout(this._pauseFadeTimer),this._pauseFadeTimer=null),this._pauseFadeDeferred&&(this._pauseFadeDeferred.reject(new Error("Player was killed.")),this._pauseFadeDeferred=null)},e.prototype._updateVolume=function(){var i,e,o,s,a,t=this;this._volumeAutomationSupported&&(this._ensureNotDead(),this._timer&&(window.clearTimeout(this._timer),this._timer=null),null!==(i=this.getDuration())&&(e=this._volumeAutomators,o=this.getPosition(),s=1/0,a=1,e.forEach(function(e){var t=e.calculate(o,i),r=t.nextCalculatePosition,n=t.level;a*=l(0,1,n),r<s&&(s=r)}),this._volumeScale!==a&&(this._volumeScale=a,this._calculateAndSetVolume()),s<1/0&&this.isActuallyPlaying()&&!this.isStalled()&&(this._timer=window.setTimeout(function(){t._timer=null,t._updateVolume()},l(100,5e3,s-this.getPosition())))))},e.prototype._calculateAndSetVolume=function(){this._volumeAutomationSupported?d.prototype._handleVolumeChange.call(this,this._userVolume*this._volumeScale,this.getMuted()):d.prototype._handleVolumeChange.call(this,this._userVolume,this.getMuted())},e.prototype._updateMaxBufferLength=function(){var e=this._getPlayer(),t=e&&e.getBufferController();t&&(this.isPlaying()?t.setMaxBufferLength(this._config.playingMaxBufferLength):t.setMaxBufferLength(this._preloadingEnabled?this._config.pausedMaxBufferLength:0))},e}(f.ProxyPlayerBase);t.Player=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){void 0===e&&(e="UNKNOWN"),void 0===t&&(t=!1),void 0===r&&(r=null),this._code=e,this._transient=t,this._cause=r}return e.prototype.isTransient=function(){return this._transient},e.prototype.getCode=function(){return this._code},e.prototype.getCause=function(){return this._cause},e}();t.UrlRetrieverError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpAACHQ={scProtocol:"http",scFormat:"aac",maestroFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsOpus={scProtocol:"encrypted-hls",scFormat:"opus",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/ogg",audioCodec:{id:"opus"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsOpus={scProtocol:"hls",scFormat:"opus",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/ogg",audioCodec:{id:"opus"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maestroChromecast={scProtocol:"maestro.chromecast",maestroFormat:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiMobile={scProtocol:"sc.api-mobile",maestroFormat:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsAACHQ={scProtocol:"encrypted-hls",scFormat:"aac",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsAACHQ={scProtocol:"hls",scFormat:"aac",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsMp3={scProtocol:"encrypted-hls",scFormat:"mp3",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsMp3={scProtocol:"hls",scFormat:"mp3",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpMp3={scProtocol:"http",scFormat:"mp3",maestroFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26);!function(e){e.Fade=n.Fade,e.buildFadeIn=n.buildFadeIn,e.buildFadeOut=n.buildFadeOut}(t.volumeAutomation||(t.volumeAutomation={}))},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),r.version="23.1.0",r.buildNumber=845;var i=t(98);r.volumeAutomation=i.volumeAutomation;var o=t(25);r.BaseStreamUrlRetriever=o.BaseStreamUrlRetriever,n(t(24));var s=t(13);r.renditions=s.renditions,r.allRenditions=s.allRenditions;var a=t(87);r.UrlRetrieverError=a.UrlRetrieverError;var l=t(86);r.Player=l.Player,r.setGlobalVolume=l.setGlobalVolume,r.setGlobalMuted=l.setGlobalMuted,r.getGlobalVolume=l.getGlobalVolume,r.getGlobalMuted=l.getGlobalMuted,r.setCacheSize=l.setCacheSize;var u=t(28);r.Quality=u.Quality,r.resolveQuality=u.resolveQuality,n(t(27))}]))},function(e,t,r){window,e.exports=function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=97)}([function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";e.exports=r(62)()?Symbol:r(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferException=function(e){try{e()}catch(e){window.setTimeout(function(){throw e},0)}}},function(e,t,r){"use strict";var n=r(24)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"PLAYER_FATAL_ERROR"},t}(i.PlayerError);t.PlayerFatalError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(19),n=function(){function e(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}return e.prototype.subscribe=function(e){var t=this,r={fn:e,payloads:[]};return this._listeners.push(r),{remove:function(){var e=t._listeners.indexOf(r);return 0<=e&&(t._listeners.splice(e,1),!0)},retrieve:function(){return t._dispatchListenerPayloads(r)}}},e.prototype.dispatch=function(t,e){var i=this,r="number"==typeof e?{time:e}:e||{},n=void 0!==r.time?r.time:s.now(),o=this._listeners;o.forEach(function(e){return e.payloads.push({time:n,payload:t})});for(;!!o.some(function(e){var t=e.fn,r=e.payloads,n=r.shift();return!!n&&(i._callHandler(t,n),!0)}););},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype._dispatchListenerPayloads=function(e){for(var t=e.fn,r=e.payloads;;){var n=r.shift();if(!n)break;this._callHandler(t,n)}},e.prototype._callHandler=function(e,t){try{e(t.payload,t.time)}catch(e){window.setTimeout(function(){throw e},0)}},e}();t.EventDispatcher=n},function(e,t,r){"use strict";var a=r(14),l=r(23),u=r(66),h=r(22);(e.exports=function(e,t){var r,n,i,o,s;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(r=i=!0,n=!1):(r=h.call(e,"c"),n=h.call(e,"e"),i=h.call(e,"w")),s={value:t,configurable:r,enumerable:n,writable:i},o?a(l(o),s):s}).gs=function(e,t,r){var n,i,o,s;return"string"!=typeof e?(o=r,r=t,t=e,e=null):o=arguments[3],null==t?t=void 0:u(t)?null==r?r=void 0:u(r)||(o=r,r=void 0):(o=t,t=r=void 0),i=null==e?!(n=!0):(n=h.call(e,"c"),h.call(e,"e")),s={get:t,set:r,configurable:n,enumerable:i},o?a(l(o),s):s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95);t.Promise=n.Promise},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getCode=function(){return"PLAYER_ERROR"},e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.PlayerError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),i=n.isIE();t.noOpLogger={debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]}},t.consoleLogger={debug:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.debug||console.log).call.apply(t,[console,e].concat(r))},error:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.error||console.log).call.apply(t,[console,e].concat(r))},info:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.info||console.log).call.apply(t,[console,e].concat(r))},warn:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.warn||console.log).call.apply(t,[console,e].concat(r))}},t.prefixLogger=function(n,i){return{debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.debug.apply(n,["["+i+"] "+e].concat(t))},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.error.apply(n,["["+i+"] "+e].concat(t))},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.info.apply(n,["["+i+"] "+e].concat(t))},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.warn.apply(n,["["+i+"] "+e].concat(t))}}},t.cloneLogger=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return{debug:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.debug.apply(e,[t].concat(r))})},error:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.error.apply(e,[t].concat(r))})},info:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.info.apply(e,[t].concat(r))})},warn:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.warn.apply(e,[t].concat(r))})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(8);t.buildDeferred=function(){var r,n,t=!1;return{promise:new i.Promise(function(e,t){r=e,n=t}),resolve:function(e){t||(t=!0,r(e))},reject:function(e){t||(t=!0,n(e))},isSettled:function(){return t}}}},function(e,t,r){"use strict";e.exports=r(71)()?Object.assign:r(70)},function(e,t,r){"use strict";e.exports=r(27)()?Object.setPrototypeOf:r(26)},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),o=function(n){function e(e,t,r){return void 0===r&&(r="The player that the proxy was controlling had a fatal error."),n.call(this,e,t,r)||this}return i(e,n),e.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR"},e}(n.ProxyProvidedPlayerError);t.ProxyProvidedPlayerFatalError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){var r=void 0;return e.some(function(e){return!!t(e)&&(r=e,!0)}),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.always=function(e,t){return e.then(t,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Date.now();t.now=function(){return"performance"in window&&window.performance.now?window.performance.now():Date.now()-n}},function(e,t,r){"use strict";var n,i=r(58),o=r(14),s=r(1),a=r(0),l=r(7),u=r(57),h=r(2),c=Object.defineProperty,p=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");p(this,{__list__:l("w",a(e)),__context__:l("w",t),__nextIndex__:l("w",0)}),t&&(s(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,p(n.prototype,o({_next:l(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:l(function(e){return this.__list__[e]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[h.toStringTag]||"Object")+"]"})},u({_onAdd:l(function(r){if(!(r>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void c(this,"__redo__",l("c",[r]));this.__redo__.forEach(function(e,t){r<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(r)}}),_onDelete:l(function(r){var e;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(r))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){r<e&&(this.__redo__[t]=--e)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),c(n.prototype,h.iterator,l(function(){return this}))},function(e,t,r){"use strict";var n=r(10),i=r(9),o=r(63),s=r(43),a=r(42),l=r(2).iterator;e.exports=function(e){return"function"==typeof a(e)[l]?e[l]():new(!n(e)&&i(e)?s:o)(e)}},function(e,t,r){"use strict";e.exports=r(65)()?String.prototype.contains:r(64)},function(e,t,r){"use strict";var n=r(4),i=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(4),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";var i,n=r(25),o=r(0),s=Object.prototype.isPrototypeOf,a=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(o(e),null===t||n(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,r;return e?(t=2===e.level?e.set?(r=e.set,function(e,t){return r.call(i(e,t),t),e}):function(e,t){return i(e,t).__proto__=t,e}:function e(t,r){var n;return i(t,r),(n=s.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,n&&a(e.nullPolyfill,"__proto__",l),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(74)},function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(i){function e(e,t,r){void 0===r&&(r="The player that the proxy was controlling had an error.");var n=i.call(this,r)||this;return n._providedPlayerError=e,n._providedPlayer=t,n}return n(e,i),e.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_ERROR"},e.prototype.getProvidedPlayerError=function(){return this._providedPlayerError},e.prototype.getProvidedPlayer=function(){return this._providedPlayer},e}(i.PlayerError);t.ProxyProvidedPlayerError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(r){function e(e,t){return r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"IMPLEMENTATION_ERROR"},e}(i.PlayerFatalError);t.ImplementationError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=function(){function e(e,t){this._inCallback=!1,this._onExit=e,this._onEnter=t||null}return e.prototype.enter=function(e){var t=this;if(this._inCallback)return e?e(this._onEnterResultRetriever):void 0;this._inCallback=!0;var r=[],n=!1;this._onEnter&&(this._onEnterResultRetriever={getResult:function(e){n?o.deferException(function(){return e(t._onEnterError,t._onEnterResult)}):r.push(e)}});try{var i=e?e(this._onEnterResultRetriever):void 0;if(this._onEnter){this._onEnterError=void 0,this._onEnterResult=void 0;try{this._onEnterResult=this._onEnter()}catch(e){this._onEnterError=e}n=!0,r.forEach(function(e){return o.deferException(function(){return e(t._onEnterError,t._onEnterResult)})})}return i}finally{this._inCallback=!1,o.deferException(function(){return t._onExit(t._onEnterError,t._onEnterResult)})}},e}();t.OnExit=n},function(e,t,r){"use strict";function o(t){var r=Object.create(null);return Object.keys(t).forEach(function(e){r[e]=t[e]}),r}Object.defineProperty(t,"__esModule",{value:!0});var n=r(30),i=r(3),s=function(){},a=function(){function e(e,t){void 0===t&&(t={});var r=this;this._subscribers=[],this._onExit=new n.OnExit(function(){return r._after()},function(){return r._onEnter()}),this._beforeUpdateError=void 0,this._inAfterUpdate=!1,this._dead=!1,this._officiallyDead=!1,this._errors=[],this._state=o(e),this._initialState=o(e),this._beforeUpdate=t.beforeUpdate||function(){},this._afterUpdate=t.afterUpdate||s,this._afterDispatches=t.afterDispatches||s}return e.prototype.subscribe=function(t,e){var r=this;if(void 0===e&&(e=!0),this._dead){var n=!1;return{retrieve:function(){},remove:function(){return!n&&(n=!0)}}}var i={callback:t,localState:e?o(this._state):this._initialState};return this._subscribers.push(i),e||this._updateSubscriber(i),{remove:function(){var e=r._subscribers.map(function(e){return e.callback}).indexOf(t);return 0<=e&&(r._subscribers.splice(e,1),!0)},retrieve:function(){r._updateSubscriber(i)}}},e.prototype.subscribeIndividual=function(r,n,e){return this.subscribe(function(e){var t=e[r];void 0!==t&&n(t)},e)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype.getIndividualHandle=function(t){var r=this;return{subscribe:function(e){return r.subscribeIndividual(t,e)}}},e.prototype.update=function(t){var r=this;this._officiallyDead||(this._inAfterUpdate?t&&t(this._state,this._beforeUpdateError):this._onExit.enter(function(e){e.getResult(function(){try{t&&t(r._state,r._beforeUpdateError)}catch(e){r._errors.push(e)}})}))},e.prototype.getState=function(){return this._state},e.prototype.kill=function(){var e=this;this._dead||(this._dead=!0,window.setTimeout(function(){e._subscribers.splice(0),e._officiallyDead=!0},0))},e.prototype.isDead=function(){return this._dead},e.prototype._onEnter=function(){this._beforeUpdateError=void 0;try{this._beforeUpdate(this._state)}catch(e){this._beforeUpdateError=e}},e.prototype._after=function(){var t=this,e=this._errors;this._errors=[],i.deferException(function(){t._inAfterUpdate=!0;try{t._afterUpdate(t._state,{beforeUpdate:t._beforeUpdateError,update:e})}catch(e){throw t._inAfterUpdate=!1,e}t._inAfterUpdate=!1,t._subscribers.slice().forEach(function(e){return t._updateSubscriber(e)}),t._afterDispatches(t._state)})},e.prototype._updateSubscriber=function(e){var t=this._calculateDiff(e.localState);Object.keys(t).length&&(e.localState=o(this._state),i.deferException(function(){return e.callback(t,e.localState)}))},e.prototype._calculateDiff=function(r){var n=this,i=Object.create(null);return Object.keys(this._state).forEach(function(e){var t=n._state[e];t!==r[e]&&(i[e]=t)}),i},e}();t.StateManager=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LOADING=0]="LOADING",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.DEAD=3]="DEAD"}(t.State||(t.State={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(t){function e(e){return t.call(this,e||"The player cannot play the provided descriptor.")||this}return n(e,t),e.prototype.getCode=function(){return"NOT_SUPPORTED_ERROR"},e}(i.PlayerFatalError);t.NotSupportedError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),i=r(33),n=r(6),u=r(13),s=r(17),h=r(19),a=r(8),l=r(32),c=r(12),p=r(31),d=r(29),f=r(3),m="undefined"!=typeof navigator&&"mediaSession"in navigator,g=m?navigator.mediaSession:null,y=function(){function e(e){var s=this;this._stateManager=new p.StateManager({ended:!1,loading:!1,playing:!1,actuallyPlaying:!1,volume:1,muted:!1,isFading:!1,fadeRate:null,isFadingForSeek:!1,playDeferred:null,pauseDeferred:null,ready:!1,seeking:!1,seek:null,positionJumped:null,stalled:!0,duration:null,dead:!1,state:l.State.PAUSED,fatalError:null,errorOccurred:null,position:0},{afterUpdate:function(e,t){return s._afterUpdate(e,t)},afterDispatches:function(){return s._afterDispatches()},beforeUpdate:function(e){if(!e.dead&&(e.ready||!s._fatalErrorTriggered)){var t=s._getPosition(),r=e.duration;if(t<0)throw s._logger.error("Player provided invalid position.",t,r),s._triggerError(new d.ImplementationError("Player provided a position that was invalid.")),new Error("Player provided invalid position.");e.position=t,s._updateEndedInState(e)}}}),this._onError=new n.EventDispatcher,this._errors=[],this._fatalErrorTriggered=!1,this._loadingDelayTimer=null,this._stalled=!1,this._queuedDuration=null,this._readyDeferred=u.buildDeferred(),this._queuedSeekDeferreds=[],this._lastPlayError=null,this._lastPauseError=null,this._lastPlayedPosition=null,this._listenTimeBase=0,this._timePlaybackStarted=null,this._positionAfterLastUpdate=0,this._positionWhenStartedFadeOut=null,this._fadeStartAllowed=!1,this._seekFadeStartAllowed=!1,this._implementationIsFading=!1;var t=e.name;if(this._logger=c.prefixLogger(e.logger,"BasePlayer"+(t?"-"+t:"")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,e.defaultFadeDuration&&e.defaultFadeDuration<0)throw new Error("defaultFadeDuration must be >= 0.");if(e.loadingDelay&&e.loadingDelay<0)throw new Error("loadingDelay must be >= 0.");this._defaultFadeDuration=void 0!==e.defaultFadeDuration?e.defaultFadeDuration:150,this._defaultSeekFadeOutDuration=void 0!==e.defaultSeekFadeOutDuration?e.defaultSeekFadeOutDuration:25,this._defaultSeekFadeInDuration=void 0!==e.defaultSeekFadeInDuration?e.defaultSeekFadeInDuration:35,this._loadingDelay=void 0!==e.loadingDelay?e.loadingDelay:1e3,this.onError=this._onError.getHandle(),this.whenReady=this._readyDeferred.promise,this._stateManager.subscribe(function(e,t){return s._onChange(e,t)}),this._stateManager.subscribe(function(e){var t=e.actuallyPlaying,r=e.seek;!0===t&&(s._fadeStartAllowed=!1),r&&"IN_PROGRESS"!==r.state&&(s._seekFadeStartAllowed=!1)}),this._stateManager.subscribe(function(e,t){var r=e.isFading,n=t.dead;!n&&!1===r&&s._implementationIsFading&&s._triggerError(new d.ImplementationError("Fade was still running when not allowed."))}),this._stateManager.subscribe(function(e,t){var r=e.playing,n=t.dead,i=t.fadeRate;if(!n&&void 0!==r)try{s._handlePlayPauseChange(r,{fadeRate:i||void 0}),r||(s._fadeStartAllowed=!1)}catch(e){s._triggerError(new d.ImplementationError("Exception occurred whilst handling play/pause change.",e))}}),this._stateManager.subscribe(function(e,t){var r=e.seek,n=t.dead;if(!n&&r&&"IN_PROGRESS"===r.state)try{s._seekFadeStartAllowed=!0,s._handleSeekChange(r.position,{fadeRate:{beforeSeek:r.fadeRate.beforeSeek||void 0,afterSeek:r.fadeRate.afterSeek||void 0}}),s._seekFadeStartAllowed=!1}catch(e){s._triggerError(new d.ImplementationError("Exception occurred whilst handling seek change.",e))}}),this.onChange=this._buildEventHandle(function(e,t){var r=t.ready;if(void 0!==r&&!0!==r)throw new Error("Ready state is invalid.");var n=t.duration;if(void 0!==n&&null===n)throw new Error("Duration state is invalid.");var i=t.dead;if(void 0!==i&&!0!==i)throw new Error("Dead state is invalid.");var o={ready:r,ended:t.ended,duration:n,volume:t.volume,muted:t.muted,playing:t.playing,actuallyPlaying:t.actuallyPlaying,stalled:t.stalled,loading:t.loading,fading:t.isFading,fadingForSeek:t.isFadingForSeek,playRejection:!1===t.playing&&s._lastPlayError||void 0,pauseRejection:!0===t.playing&&s._lastPauseError||void 0,seeking:t.seeking,seek:t.seek||void 0,positionJumped:void 0!==t.positionJumped||void 0,state:t.state,fatalError:t.fatalError||void 0,dead:i};Object.keys(o).some(function(e){return void 0!==o[e]})&&e(o)});var r=e.registerListeners;r&&f.deferException(function(){r({onChange:s.onChange,onError:s.onError})}),this._registerMediaSessionActionHandlers(),this._notifyMediaSessionPaused(),this.onDurationChange=this._buildEventHandle(function(e,t){var r=t.duration;null!=r&&e(r)}),this.onReady=this._buildEventHandle(function(e,t){var r=t.ready;!0===r&&e(void 0)}),this.onStateChange=this._buildEventHandle(function(e,t){var r=t.state;void 0!==r&&e(r)}),this.onVolumeChange=this._buildEventHandle(function(e,t,r){var n=t.volume,i=t.muted,o=r.volume,s=r.muted;void 0===n&&void 0===i||e({volume:o,muted:s})}),this.onPlay=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;!0===r&&e(void 0)}),this.onPlayIntent=this._buildEventHandle(function(e,t){var r=t.playing;!0===r&&e(void 0)}),this.onPlayRejection=this._buildEventHandle(function(e,t){var r=t.playing;!1===r&&s._lastPlayError&&e(s._lastPlayError)}),this.onPause=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;!1===r&&e(void 0)}),this.onPauseIntent=this._buildEventHandle(function(e,t){var r=t.playing;!1===r&&e(void 0)}),this.onPauseRejection=this._buildEventHandle(function(e,t){var r=t.playing;!0===r&&s._lastPauseError&&e(s._lastPauseError)}),this.onSeek=this._buildEventHandle(function(e,t){var r=t.seek;r&&"COMPLETED"===r.state&&e(void 0)}),this.onSeekIntent=this._buildEventHandle(function(e,t){var r=t.seeking;!0===r&&e(void 0)}),this.onSeekRejection=this._buildEventHandle(function(e,t){var r=t.seek;r&&"ERROR"===r.state&&e(r.error)}),this.onPositionJumped=this._buildEventHandle(function(e,t){var r=t.positionJumped;void 0!==r&&e(void 0)}),this.onEnded=this._buildEventHandle(function(e,t){var r=t.ended;!0===r&&e(void 0)}),this.onLeftEnded=this._buildEventHandle(function(e,t){var r=t.ended;!1===r&&e(void 0)}),this.onStallStart=this._buildEventHandle(function(e,t){var r=t.stalled;!0===r&&e(void 0)}),this.onStallEnd=this._buildEventHandle(function(e,t){var r=t.stalled;!1===r&&e(void 0)}),this.onLoadStart=this._buildEventHandle(function(e,t){var r=t.loading;!0===r&&e(void 0)}),this.onLoadEnd=this._buildEventHandle(function(e,t){var r=t.loading;!1===r&&e(void 0)}),this.onFadeStart=this._buildEventHandle(function(e,t){var r=t.isFading;!0===r&&e(void 0)}),this.onFadeEnd=this._buildEventHandle(function(e,t){var r=t.isFading;!1===r&&e(void 0)}),this.onFadeForSeekStart=this._buildEventHandle(function(e,t){var r=t.isFadingForSeek;!0===r&&e(void 0)}),this.onFadeForSeekEnd=this._buildEventHandle(function(e,t){var r=t.isFadingForSeek;!1===r&&e(void 0)})}return e.prototype.isReady=function(){return this._stateManager.getState().ready},e.prototype.getPosition=function(){return this._getPositionOrPositionSeekingTo()},e.prototype.getLastPlayedPosition=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.stalled;return t&&!r?this.getPosition():this._lastPlayedPosition},e.prototype.getListenTime=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.ended,n=this._listenTimeBase;return t&&!r&&(n+=h.now()-this._timePlaybackStarted),n},e.prototype.isStalled=function(){return this._stateManager.getState().stalled},e.prototype.isLoading=function(){return this._stateManager.getState().loading},e.prototype.isFading=function(){return this._stateManager.getState().isFading},e.prototype.isFadingForSeek=function(){return this._stateManager.getState().isFadingForSeek},e.prototype.isPlaying=function(){return this._stateManager.getState().playing},e.prototype.isActuallyPlaying=function(){return this._stateManager.getState().actuallyPlaying},e.prototype.isEnded=function(){return this._stateManager.getState().ended},e.prototype.getState=function(){return this._stateManager.getState().state},e.prototype.getBufferController=function(){return null},e.prototype.getMemoryCacheMaxSize=function(){return null},e.prototype.getMemoryCacheUsage=function(){return null},e.prototype.getMemoryCacheController=function(){return null},e.prototype.getFatalError=function(){return this._stateManager.getState().fatalError},e.prototype.isDead=function(){return this._stateManager.getState().dead},e.prototype.getVolume=function(){return this._stateManager.getState().volume},e.prototype.getMuted=function(){return this._stateManager.getState().muted},e.prototype.getDuration=function(){var e=this._stateManager.getState(),t=e.ready,r=e.duration;return t?r:null},e.prototype.setVolume=function(e,t){if(e<0||1<e)throw new Error("Volume must be >= 0 and <= 1.");if(!this._stateManager.getState().dead){var r=this._stateManager.getState().muted;void 0===t&&(t=r);try{this._handleVolumeChange(e,t)}catch(e){throw this._triggerError(new d.ImplementationError("Exception occurred updating volume.",e)),e}}},e.prototype.setMuted=function(e){this.setVolume(this._stateManager.getState().volume,e)},e.prototype.getCurrentBufferedTimeRange=function(){var e=this.getBufferedTimeRanges();if(!e)return null;var t=this.getPosition();return s.find(e,function(e){return e.containsTime(t)})||null},e.prototype.play=function(r){var n=this;this._ensureNotDead(),this._logger.debug("play() called.",r);var i=u.buildDeferred();try{return this._stateManager.update(function(e){var t;e.playing?n._logger.debug("Intent is already to be playing."):(n._logger.debug("Requesting play."),e.playing=!0,t=n._extractFadeDuration(r),e.fadeRate=t?1/t:null,n._lastPlayError=null),e.playDeferred&&!e.playDeferred.isSettled()||(e.playDeferred=u.buildDeferred()),i.resolve(e.playDeferred.promise)}),i.promise}catch(r){return this._triggerError(new o.PlayerFatalError("Unexpected error when attempting to play.",r)),a.Promise.reject(r)}},e.prototype.pause=function(r){var n=this;this._ensureNotDead(),this._logger.debug("pause() called.",r);var i=u.buildDeferred();try{return this._stateManager.update(function(e){var t;e.playing?(n._logger.debug("Requesting pause."),n._positionWhenStartedFadeOut=n._getPositionOrPositionSeekingTo(),e.playing=!1,t=n._extractFadeDuration(r),e.fadeRate=t?1/t*-1:null,n._fadeStartAllowed=!0,n._lastPauseError=null):n._logger.debug("Intent is already to be paused."),e.pauseDeferred&&!e.pauseDeferred.isSettled()||(e.pauseDeferred=u.buildDeferred()),i.resolve(e.pauseDeferred.promise)}),i.promise}catch(r){return this._triggerError(new o.PlayerFatalError("Unexpected error when attempting to pause.",r)),a.Promise.reject(r)}},e.prototype.seek=function(o,s){var a=this;this._ensureNotDead(),this._logger.debug("seek() called.",o);var l=u.buildDeferred();return this._stateManager.update(function(e){var t,r,n,i;o<0?(a._logger.warn("Rejecting seek immediately as the position was negative."),l.reject(new Error("You were attempting to seek to a negative time."))):null!==e.duration&&o>e.duration?(a._logger.warn("Rejecting seek immediately as the duration is now known, and the requested positon was past it."),l.reject(new Error("You were attempting to seek past the end of the media."))):(e.stalled||!e.actuallyPlaying||e.seek&&"IN_PROGRESS"===e.seek.state||(a._lastPlayedPosition=a._getPositionOrPositionSeekingTo()),t=u.buildDeferred(),e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position===o?a._logger.debug("Seek already requested to the same position.",o):(a._logger.debug("Requesting seek.",o),e.seeking=!0,a._positionWhenStartedFadeOut=null,r=a._extractSeekFadeDurations(s,o),n=r.fadeOutDuration?1/r.fadeOutDuration*-1:null,i=r.fadeInDuration?1/r.fadeInDuration:null,e.seek={state:"IN_PROGRESS",position:o,fadeRate:{beforeSeek:n,afterSeek:i}},e.positionJumped=Object.create(null)),a._queuedSeekDeferreds.push({position:o,deferred:t}),l.resolve(t.promise))}),l.promise},e.prototype.getSeekState=function(){return this._stateManager.getState().seek},e.prototype.kill=function(){var t=this;this._stateManager.update(function(e){e.dead||(t._logger.debug("kill() called."),e.dead=!0)})},e.prototype._update=function(e){this._stateManager.update(function(){return e&&e()})},e.prototype._ensureNotDead=function(){if(this._stateManager.getState().dead)throw new Error("Player is dead.")},e.prototype._notifyStalled=function(e){this._ensureNotDead(),this._stalled!==e&&(this._logger.debug("notifyStalled() called.",e),this._stalled=e,this._stateManager.update())},e.prototype._getQueuedSeekPosition=function(){var e=this.getSeekState();return e&&"IN_PROGRESS"===e.state?e.position:null},e.prototype._provideDuration=function(r){var n=this;this._ensureNotDead(),this._stateManager.update(function(e){if(e.duration!==r){var t=n._getPositionOrPositionSeekingTo();if(r<0||e.ready&&r<t)throw n._triggerError(new d.ImplementationError("Attempt to update duration to an invalid value.")),new Error("Duration cannot be less than the current position.");n._logger.debug("provideDuration() called.",r),e.ready?e.duration=r:n._queuedDuration=r}})},e.prototype._notifyVolumeChange=function(t,r){if(t<0||1<t)throw this._triggerError(new d.ImplementationError("Volume was out of range.",t)),new Error("Volume was out of range.");this._stateManager.update(function(e){e.volume=t,e.muted=r})},e.prototype._notifyPlaying=function(t){var r=this;this._ensureNotDead(),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new d.ImplementationError("Attempt to register playback as started before ready.")),new Error("Player must be ready first.");t!==e.actuallyPlaying&&(r._logger.debug("notifyPlaying() called.",t),t||e.seeking||e.stalled||(r._lastPlayedPosition=r._getPositionOrPositionSeekingTo()),(e.actuallyPlaying=e.playing=t)?(r._lastPlayError=null,r._fadeStartAllowed=!0):(e.isFading=!1,r._fadeStartAllowed=!1,r._lastPauseError=null))})},e.prototype._notifyPlayRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new d.ImplementationError("Attempt to reject a play request before player ready.")),new Error("Player must be ready first.");if(e.actuallyPlaying||!e.playing)throw r._triggerError(new d.ImplementationError("Attempt to reject a play request when not valid.")),new Error("Playing state is incorrect.");r._logger.debug("notifyPlayRejection() called.",t),e.playing=!1,r._lastPlayError=t})},e.prototype._notifyPauseRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new d.ImplementationError("Attempt to reject pause request before player ready.")),new Error("Player must be ready first.");if(!e.actuallyPlaying||e.playing)throw r._triggerError(new d.ImplementationError("Attempt to reject pause request when not valid.")),new Error("Playing state is incorrect.");r._logger.debug("notifyPauseRejection() called.",t),e.playing=!0,e.fadeRate&&(e.fadeRate*=-1),r._lastPauseError=t})},e.prototype._notifySeekRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new d.ImplementationError("Attempt to reject seek request before player ready.")),new Error("Player must be ready first.");if(!e.seek||"IN_PROGRESS"!==e.seek.state)throw r._triggerError(new d.ImplementationError("Attempt to reject seek request when none requested.")),new Error("A seek hasn't been requested.");if(null!==e.duration&&e.position>e.duration)throw r._triggerError(new d.ImplementationError("Attempt to reject seek request after duration changed below current position.")),new Error("Attempt to reject seek request after duration changed below current position.");r._logger.debug("notifySeekRejection() called.",t),e.seeking=!1,e.seek={state:"ERROR",error:t},e.positionJumped=Object.create(null)})},e.prototype._notifyFading=function(t){var r=this;if(this._ensureNotDead(),t&&!this._fadeStartAllowed){var e="Attempt to register fade as starting when not allowed.";throw this._triggerError(new d.ImplementationError(e)),new Error(e)}this._implementationIsFading=t,this._stateManager.update(function(e){e.isFading!==t&&(r._logger.debug("notifyFading() called",t),t||e.playing||null===r._positionWhenStartedFadeOut||r.seek(r._positionWhenStartedFadeOut,{fadeInDuration:0,fadeOutDuration:0}).catch(function(e){r._logger.warn("Seek back to position where fade out started failed.",e)}),e.isFading=t)})},e.prototype._notifyFadingForSeek=function(t){var r=this;if(this._ensureNotDead(),t&&!this._seekFadeStartAllowed){var e="Attempt to register fade as starting for seek when not allowed.";throw this._triggerError(new d.ImplementationError(e)),new Error(e)}this._stateManager.update(function(e){e.isFadingForSeek!==t&&(r._logger.debug("notifyFadingForSeek() called",t),e.isFadingForSeek=t)})},e.prototype._signalReady=function(){var t=this;this._ensureNotDead(),this._stateManager.update(function(e){if(e.ready)throw t._triggerError(new d.ImplementationError("Attempt to signal ready twice.")),new Error("Ready already signalled.");if(null===t._queuedDuration)throw t._triggerError(new d.ImplementationError("Attempt to signal ready when duration unknown.")),new Error("Duration is still unknown.");t._logger.debug("signalReady() called."),e.ready=!0,e.duration=t._queuedDuration,e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>e.duration&&(e.seeking=!1,e.seek={state:"ERROR",error:new Error("You were attempting to seek past the end of the media.")})})},e.prototype._signalSeekComplete=function(){var r=this;this._ensureNotDead(),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new d.ImplementationError("Attempt to signal seek as complete before player ready.")),new Error("Player must be ready first.");if(!e.seek||"IN_PROGRESS"!==e.seek.state)throw r._triggerError(new d.ImplementationError("Attempt to signal seek as complete when none requested.")),new Error("There shouldn't be a seek in progress.");var t=e.duration;if(e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>t)throw new Error("Seek cannot have completed given it was to a time greater than the duration.");r._logger.debug("signalSeekComplete() called."),r._seekFadeStartAllowed=!0,e.seek={state:"COMPLETED",position:e.seek.position,fadeRate:e.seek.fadeRate},e.seeking=!1,e.position=e.seek.position})},e.prototype._triggerError=function(r){var n=this;r instanceof o.PlayerFatalError&&(this._fatalErrorTriggered=!0),this._stateManager.update(function(e){var t=!1;if(e.ready&&r instanceof i.NotSupportedError&&(r=new d.ImplementationError("Invalid NotSupportedError."),t=!0),r instanceof o.PlayerFatalError?(r instanceof i.NotSupportedError?n._logger.info("NotSupportedError occurred.",r):n._logger.error("Fatal error occurred.",r),e.fatalError?n._logger.warn("A fatal error already occurred.",e.fatalError):e.fatalError=r,n._errors.push(r),e.errorOccurred=Object.create(null),e.dead=!0):(n._logger.warn("Non-fatal error occurred.",r),n._errors.push(r),e.errorOccurred=Object.create(null)),t)throw new Error("Not supported errors are only valid before the player is ready.")})},e.prototype._buildEventHandle=function(n){var e=this;return{subscribe:function(t){var r=function(e){return t(e,h.now())};return e._stateManager.subscribe(function(e,t){n(r,e,t)})}}},e.prototype._finalizeState=function(e){this._updateEndedInState(e);var t,r=this._getPositionOrPositionSeekingTo();e.dead?(this._lastPlayError=new Error("Player was killed."),e.loading=!1,this._clearLoadingDelay(),!e.playing&&e.isFading&&null!==this._positionWhenStartedFadeOut&&(this._logger.debug("Fade out was in progress. Pretending it completed."),e.isFading=!1,e.position=this._positionWhenStartedFadeOut),e.stalled=!0,e.actuallyPlaying=!1,e.isFadingForSeek=!1,e.playing=!1,e.state=l.State.DEAD):((t=!e.ended&&(!e.ready||this._stalled||!(!e.seek||"IN_PROGRESS"!==e.seek.state)))&&!e.stalled&&!e.seeking&&e.actuallyPlaying&&(this._lastPlayedPosition=r),e.stalled=t,!e.ended&&!e.isFading&&!e.isFadingForSeek&&(e.playing||e.actuallyPlaying)&&(e.stalled||e.playing!==e.actuallyPlaying)?this._loadingDelay?this._scheduleLoadingDelay():e.loading=!0:(e.loading=!1,this._clearLoadingDelay()),this._positionAfterLastUpdate!==r&&(this._positionAfterLastUpdate=r,e.playing||e.actuallyPlaying||(e.positionJumped=Object.create(null))),e.state=this._calculateState(e))},e.prototype._updateEndedInState=function(e){e.ended=e.ready&&this._getPositionOrPositionSeekingTo()===e.duration},e.prototype._scheduleLoadingDelay=function(){var e=this;this._loadingDelayTimer||(this._loadingDelayTimer=window.setTimeout(function(){e._stateManager.update(function(e){return e.loading=!0})},this._loadingDelay))},e.prototype._clearLoadingDelay=function(){this._loadingDelayTimer&&(window.clearTimeout(this._loadingDelayTimer),this._loadingDelayTimer=null)},e.prototype._getPositionOrPositionSeekingTo=function(){this._stateManager.update();var e=this._stateManager.getState();return e.seek&&"IN_PROGRESS"===e.seek.state?e.seek.position:e.isFading&&!e.playing&&null!==this._positionWhenStartedFadeOut?this._positionWhenStartedFadeOut:e.ready&&null!==e.duration?e.position:0},e.prototype._calculateState=function(e){var t=e.dead,r=e.loading,n=e.playing,i=e.ended;return t?l.State.DEAD:r?l.State.LOADING:n&&!i?l.State.PLAYING:l.State.PAUSED},e.prototype._registerMediaSessionActionHandlers=function(){var e=this;this._mediaSessionEnabled&&g&&(g.setActionHandler("play",function(){e.isDead()||e.play()}),g.setActionHandler("pause",function(){e.isDead()||e.pause()}),g.setActionHandler("seekbackward",function(){e.isDead()||e.seek(Math.max(0,e.getPosition()-5e3))}),g.setActionHandler("seekforward",function(){e.isDead()||e.seek(Math.min(e.getDuration()||0,e.getPosition()+5e3))}))},e.prototype._notifyMediaSessionPlaying=function(){this._mediaSessionEnabled&&g&&(g.playbackState="playing")},e.prototype._notifyMediaSessionPaused=function(){this._mediaSessionEnabled&&g&&(g.playbackState="paused")},e.prototype._extractFadeDuration=function(e){return void 0===e&&(e={}),void 0===e.fadeDuration?!this._stateManager.getState().playing||0<this._getPositionOrPositionSeekingTo()?this._defaultFadeDuration:0:0<e.fadeDuration?e.fadeDuration:0},e.prototype._extractSeekFadeDurations=function(e,t){var r,n;return void 0===e&&(e={}),r=void 0!==e.fadeOutDuration?0<e.fadeOutDuration?e.fadeOutDuration:0:this._defaultSeekFadeOutDuration,n=void 0!==e.fadeInDuration?0<e.fadeInDuration?e.fadeInDuration:0:0<t?this._defaultSeekFadeInDuration:0,{fadeOutDuration:r,fadeInDuration:n}},e.prototype._afterUpdate=function(e,t){var r;t.beforeUpdate||0<t.update.length?(this._logger.error("Errors occurred during state update. Killing player.",t),this._triggerError(new o.PlayerFatalError("Errors occurred during state update.",t))):e.dead||!e.ready||null!==(r=e.duration)&&!e.seeking&&e.position>r&&(this._logger.error("Player provided invalid position.",e.position,r),this._triggerError(new d.ImplementationError("Player provided a position that was invalid."))),this._finalizeState(e)},e.prototype._afterDispatches=function(){var t=this,e=this._errors;this._errors=[],e.forEach(function(e){return t._onError.dispatch(e)})},e.prototype._onChange=function(e,n){var t,i=this,r=e.ready,o=e.dead,s=e.fatalError,a=e.playing,l=e.actuallyPlaying,u=e.ended;if(!0===r&&(this._logger.debug("Resolving ready deferred."),this._readyDeferred.resolve(void 0)),!0===l&&this._registerMediaSessionActionHandlers(),!0===a?this._notifyMediaSessionPlaying():!1===a&&this._notifyMediaSessionPaused(),n.pauseDeferred&&!n.pauseDeferred.isSettled()&&n.playing&&(t=this._lastPauseError||new Error("Pause request aborted."),this._logger.debug("Rejecting pause deferred.",t),n.pauseDeferred.reject(t)),!n.playDeferred||n.playDeferred.isSettled()||n.playing||(t=this._lastPlayError||new Error("Play request aborted."),this._logger.debug("Rejecting play deferred.",t),n.playDeferred.reject(t)),n.playDeferred&&!n.playDeferred.isSettled()&&n.actuallyPlaying&&(this._logger.debug("Resolving play deferred."),n.playDeferred.resolve(void 0)),!n.pauseDeferred||n.pauseDeferred.isSettled()||n.actuallyPlaying||(this._logger.debug("Resolving pause deferred."),n.pauseDeferred.resolve(void 0)),!0===l&&!n.ended||!1===u&&n.actuallyPlaying?this._timePlaybackStarted=h.now():(!1===l&&!n.ended||!0===u&&n.actuallyPlaying)&&(this._listenTimeBase+=h.now()-this._timePlaybackStarted,this._timePlaybackStarted=null),this._queuedSeekDeferreds=this._queuedSeekDeferreds.filter(function(e){var t=e.position,r=e.deferred;if(n.seek)if("IN_PROGRESS"!==n.seek.state){if(!n.stalled||"ERROR"===n.seek.state)return"ERROR"!==n.seek.state?(i._logger.debug("Resolving seek()."),r.resolve(void 0)):(i._logger.debug("Rejecting seek().",n.seek.error),r.reject(n.seek.error)),!1}else if("IN_PROGRESS"!==n.seek.state||n.seek.position!==t)return i._logger.debug("Rejecting seek() because another seek was requested.",t),r.reject(new Error("Seek request aborted because another seek was requested to a different position.")),!1;return!0}),!0===o){this._logger.debug("Calling _kill() on player.");try{this._kill(),this._logger.info("Player killed.")}catch(e){this._triggerError(new d.ImplementationError("Exception occurred in _kill().",e)),this._logger.error("Exception when implementation was being killed.",e)}n.ready||(t=s||new Error("Player was killed."),this._logger.debug("Rejecting whenReady."),this._readyDeferred.reject(t)),this._queuedSeekDeferreds.forEach(function(e){var t=e.position,r=e.deferred,n=s||new Error("Seek aborted as player killed.");i._logger.debug("Rejecting seek().",t),r.reject(n)}),this._stateManager.kill(),this._logger.debug("Player dead.")}},e}();t.BasePlayer=y},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(34),u=r(11),h=r(5),s=r(12),a=r(6),c=r(28),p=r(16),l=function(r){function e(e){var t=r.call(this,e)||this;return t._onProvidedPlayerError=new a.EventDispatcher,t._errorHandler=null,t._changeHandler=null,t._player=null,t._instanceLock=null,t._playConfig=void 0,t._pauseConfig=void 0,t._seekConfig=void 0,t._lastPlayerPosition=0,t._synced=!1,t._unsyncInProgress=!1,t._logger=s.prefixLogger(t._logger,"ProxyPlayerBase"),t.onProvidedPlayerError=t._onProvidedPlayerError.getHandle(),t}return n(e,r),e.prototype.play=function(e){return this._playConfig=e,r.prototype.play.call(this)},e.prototype.pause=function(e){return this._pauseConfig=e,r.prototype.pause.call(this)},e.prototype.seek=function(e,t){return this._seekConfig=t,r.prototype.seek.call(this,e)},e.prototype.getBufferedTimeRanges=function(){return this._player&&this._synced?this._player.getBufferedTimeRanges():null},e.prototype.getCurrentBufferedTimeRange=function(){return this._player&&this._synced?this._player.getCurrentBufferedTimeRange():null},e.prototype.getMaxBufferLength=function(){return this._player&&this._synced?this._player.getMaxBufferLength():null},e.prototype._providePlayer=function(e,t){if(void 0===t&&(t={}),t=i({syncPosition:!0,syncVolume:!0},t),this._ensureNotDead(),this._player)throw new Error("A player has already been provided.");this._logger.debug("providePlayer() called."),this._instanceLock=Object.create(null),this._player=e,this._sync(t)},e.prototype._removePlayer=function(){var t=this;if(this._ensureNotDead(),!this._player)throw new Error("There is no player to remove.");if(this._unsyncInProgress)throw new Error("Player is currently unsyncing.");this._logger.debug("removePlayer() called."),this._instanceLock=null,this._unsync(),this._player=null,this.isReady()&&!this.isDead()&&this._update(function(){var e=null!==t._getQueuedSeekPosition();t._notifyFading(!1),e||null===t._getQueuedSeekPosition()||t._signalSeekComplete(),t._notifyFadingForSeek(!1),t._notifyStalled(!0)})},e.prototype._setInitialDuration=function(e){var t=this;if(this._ensureNotDead(),e<0)throw new Error("Cannot set duration to a value < 0.");null===this.getDuration()&&this._update(function(){t._ensureBelowPosition(e),t._provideDuration(e),t.isReady()||(t._signalReady(),t._handleSkippedSeek())})},e.prototype._triggerError=function(e){r.prototype._triggerError.call(this,e)},e.prototype._getPlayer=function(){return this.isDead()?null:this._player},e.prototype._handleVolumeChange=function(e,t){this._synced&&this._player?this._player.setVolume(e,t):this._notifyVolumeChange(e,t)},e.prototype._handlePlayPauseChange=function(e){var t=this,r=this._player;r&&this._update(function(){e?t._playAndHandleAbort(r):(t._pauseAndHandleAbort(r),r.isFading()&&t._notifyFading(!0))})},e.prototype._handleSeekChange=function(e){var t,r=this._player;r&&this._synced&&(t=this._seekConfig,this._seekConfig=void 0,r.seek(e,t),r.isFadingForSeek()&&this._notifyFadingForSeek(!0))},e.prototype._getPosition=function(){if(this._player&&this._synced){if(!this._changeHandler)throw new Error("Handler should exist.");if(this._changeHandler.retrieve(),this._synced)return this._player.getPosition()}return this._lastPlayerPosition},e.prototype._kill=function(){this._player&&(this._unsync(),this._player.kill()),this._player=null},e.prototype._handleSkippedSeek=function(){var e,t;this._player&&this._synced&&(e=this.getSeekState(),t=this._player.getSeekState(),!e||"IN_PROGRESS"!==e.state||t&&"IN_PROGRESS"===t.state||(this._logger.debug("Signalling seek as complete on proxy because provided player isn't seeking."),this._signalSeekComplete()))},e.prototype._ensureBelowPosition=function(e){this.getPosition()>e&&(this._logger.debug("Capping position.",e),this.seek(e),this.isReady()&&(this._lastPlayerPosition=e,this._signalSeekComplete()))},e.prototype._sync=function(s){var e,a=this,l=this._player;if(!l)throw new Error("Player should have become available by now.");this._logger.debug("Syncing...",this.isPlaying(),this.isActuallyPlaying()),l.isDead()?(this._logger.debug("Provided player is dead."),(e=l.getFatalError())&&this._handleFatalError(e,l)):(this._errorHandler=l.onError.subscribe(function(e){e instanceof h.PlayerFatalError?a._onProvidedPlayerError.dispatch(new p.ProxyProvidedPlayerFatalError(e,l)):(a._triggerError(e),a._onProvidedPlayerError.dispatch(new c.ProxyProvidedPlayerError(e,l)))}),this._changeHandler=l.onChange.subscribe(function(t){a._update(function(){return a._logger.debug("Handling changes.",t),t.dead?(a._logger.debug("Player has gone to DEAD state."),a._unsync(),void(a.isDead()||t.fatalError&&a._handleFatalError(t.fatalError,l))):(void 0===t.volume&&void 0===t.muted||a._notifyVolumeChange(l.getVolume(),l.getMuted()),void 0!==t.duration&&(a._ensureBelowPosition(t.duration),a._provideDuration(t.duration),a.isReady()||(a._signalReady(),a._handleSkippedSeek(),a._notifyStalled(l.isStalled()))),t.seek&&((e=a.getSeekState())&&"IN_PROGRESS"===e.state||"IN_PROGRESS"!==t.seek.state?e&&"IN_PROGRESS"===e.state&&("COMPLETED"===t.seek.state&&e.position===t.seek.position?(a._signalSeekComplete(),l.isFadingForSeek()&&a._notifyFadingForSeek(!0)):"COMPLETED"===t.seek.state&&e.position!==t.seek.position?a._notifySeekRejection(new Error("Another seek occurred to a different position.")):"IN_PROGRESS"===t.seek.state&&e.position!==t.seek.position?a.seek(t.seek.position):"ERROR"===t.seek.state&&a._notifySeekRejection(t.seek.error)):a.seek(t.seek.position)),void 0!==t.stalled&&a._notifyStalled(t.stalled),!1===t.playing&&t.playRejection?a.isActuallyPlaying()?(a._triggerError(new u.PlayerError("Paused because a player was provided that refused to play.")),a._notifyPlaying(!1)):a._notifyPlayRejection(t.playRejection):!1===t.playing&&(l.isActuallyPlaying()?a.pause():void 0===t.actuallyPlaying&&a.isReady()&&a._notifyPlaying(!1)),!0===t.playing&&t.pauseRejection?a._notifyPauseRejection(t.pauseRejection):!0===t.playing&&a.play(),void 0!==t.actuallyPlaying&&t.actuallyPlaying!==a.isActuallyPlaying()&&(a._notifyPlaying(t.actuallyPlaying),t.actuallyPlaying&&l.isFading()&&a._notifyFading(!0)),!1===t.fading&&a._notifyFading(!1),void(!1===t.fadingForSeek&&a._notifyFadingForSeek(!1)));var e})}),this._update(function(){var e,t=a._instanceLock;try{if(a._notifyStalled(l.isStalled()),l.isReady()&&(e=l.getDuration(),a._ensureBelowPosition(e),a._provideDuration(e),a.isReady()||(a._logger.debug("Provided player is already ready. Making proxy player ready."),a._signalReady())),s.syncVolume&&(l.setVolume(a.getVolume(),a.getMuted()),a._instanceLock!==t))return;var r,n,i,o=a.getSeekState();if(s.syncPosition?(a._logger.debug("Seeking to match position."),r=a.getPosition(),l.getPosition()!==r?l.seek(r):(a._logger.debug("Skipping seek because already at same position."),a.isReady()&&o&&"IN_PROGRESS"===o.state&&a._signalSeekComplete())):o&&"IN_PROGRESS"===o.state?(a._logger.debug("Seeking to match position because a seek has been queued."),n=a._seekConfig,a._seekConfig=void 0,l.seek(a.getPosition(),n)):(i=l.getSeekState())&&"IN_PROGRESS"===i.state&&(a._logger.debug("Seeking on proxy to match seek that is in progress on provided player."),a.seek(i.position)),a._instanceLock!==t)return;if(l.isActuallyPlaying()?(a._logger.debug("Provided player is already playing."),a.isActuallyPlaying()||(a._notifyPlaying(!0),l.isFading()&&a._notifyFading(!0))):l.isPlaying()?(a._logger.debug("Provided player is preparing to play."),a.play()):a.isPlaying()?(a._logger.debug("Calling play() on provided player to match proxy."),a._playAndHandleAbort(l)):a.isReady()&&a.isActuallyPlaying()&&(a._logger.debug("Switching to paused state, as provided player and proxy intended state is paused."),a._notifyPlaying(!1)),a._instanceLock!==t)return;a._synced=!0,a._notifyVolumeChange(l.getVolume(),l.getMuted())}catch(e){a._triggerError(new h.PlayerFatalError("Unexpected error occurred whilst syncing.",e))}}))},e.prototype._playAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling play() on provided player.");var r=this._playConfig;this._playConfig=this._pauseConfig=void 0,e.play(r),this._instanceLock===t&&!e.isPlaying()&&this.isPlaying()&&(this._logger.debug("Provided player was not playing after play() call completed."),this.isActuallyPlaying()?(this._triggerError(new u.PlayerError("Paused because a player was provided that refused to play.")),this._notifyPlaying(!1)):this.pause())},e.prototype._pauseAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling pause() on provided player.");var r=this._pauseConfig;this._playConfig=this._pauseConfig=void 0,e.pause(r),this._instanceLock===t&&e.isPlaying()&&!this.isPlaying()&&(this._logger.debug("Provided player was not paused after pause() call completed."),this.play())},e.prototype._unsync=function(){if(this._logger.debug("Unsyncing..."),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._errorHandler&&(this._errorHandler.remove(),this._errorHandler=null),this._synced){this._synced=!1,this._unsyncInProgress=!0;var e=this._player;if(e)try{this._lastPlayerPosition=e.getPosition()}catch(e){this._logger.error("Error whilst unsyncing.",e)}this._unsyncInProgress=!1,this._logger.debug("Unsynced.",this.isPlaying(),this.isActuallyPlaying())}else this._logger.debug("Unsynced. (Sync never completed)")},e}(o.BasePlayer);t.ProxyPlayerBase=l},function(e,t,r){"use strict";function n(e){var t=navigator.userAgent.match(e);if(t&&3<=t.length){var r=parseInt(t[1],10),n=parseInt(t[2],10);if(!isNaN(r)&&!isNaN(n))return{major:r,minor:n}}return null}Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof navigator?navigator.userAgent:"",o=!/chrome|opera/i.test(i)&&/safari/i.test(i),s=0<=i.indexOf("MSIE ")||0<=i.indexOf("Trident/"),a=0<=i.indexOf("Edge/"),l=/Chrom(?:e|ium)/.test(i),u=0<=i.toLowerCase().indexOf("firefox"),h=/version\/(\d+)\.(\d+)/i,c=/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)/,p=/Firefox\/(\d+)\.(\d+)/;t.isSafari=function(){return o},t.isFirefox=function(){return u},t.isChrome=function(){return l},t.isIE=function(){return s},t.isEdge=function(){return a},t.getSafariVersion=function(){return n(h)},t.getChromeVersion=function(){return n(c)},t.getFirefoxVersion=function(){return n(p)}},function(e,c,t){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var p=t(8),d=t(13),f=t(18),m=t(3),l=t(6);c.abortedError=new Error("Job aborted."),c.map=function(e,t){var o=t.convertResult,s=t.convertProgressUpdate,r=t.abortableJobOpts,n=t.passThroughAbort,a=void 0===n||n;return new i(function(){var r=e(),t=new l.EventDispatcher,n=!0,i=d.buildDeferred();return s&&r.onProgressUpdate(function(e){t.dispatch(s(e,n)),n=!1},{skipPast:!0}),r.onCompletion(function(e){try{i.resolve(o(e))}catch(e){i.reject(e)}}),r.onError(i.reject),{result:i.promise,progressUpdates:s?{onProgressUpdate:t,getProgressSoFar:function(){var e=r.getProgressSoFar();if(e){var t=s(e,n);return n=!1,t}return null}}:void 0,abort:function(){return a&&r.abort()}}},r)};var i=function(){function e(e,t){void 0===t&&(t={}),this._job=e,this._opts=t,this._counter=0,this._jobControl=null,this._promise=null,this._jobCompleted=!1}return e.prototype.run=function(){var i,e=this;if(this._jobControl)i=this._jobControl;else{try{i=this._jobControl=this._job()}catch(e){i=this._jobControl={result:p.Promise.reject(e)}}this._promise=i.result,f.always(this._promise,function(){e._jobCompleted=!0,e._opts.storeResult||(e._jobCompleted=!1,e._promise=null,e._jobControl=null)})}var t=this._promise;this._counter++;var r=d.buildDeferred(),o=!1,n=!1,s=void 0,a=!1,l=[],u=[],h=[];return f.always(t,function(){a||(o=!0,e._counter--),l.forEach(function(e){return e.remove()})}),t.then(function(t){a||(s=t,u.forEach(function(e){return m.deferException(function(){return e(t)})}),u.splice(0),r.resolve(t))},function(t){a||(n=!0,s=t,h.forEach(function(e){return e(t)}),h.splice(0),r.reject(t))}),{whenComplete:function(){return r.promise},onProgressUpdate:function(t,e){var r,n;void 0===e&&(e={}),i.progressUpdates&&(a||o||(r=i.progressUpdates.onProgressUpdate.subscribe(function(e){return t(e)}),l.push(r)),e.skipPast||(n=i.progressUpdates.getProgressSoFar())&&t(n))},getProgressSoFar:function(){return i.progressUpdates?i.progressUpdates.getProgressSoFar():null},onCompletion:function(e){o?n||m.deferException(function(){return e(s)}):u.push(e)},onError:function(e){a?m.deferException(function(){return e(c.abortedError)}):o?n&&m.deferException(function(){return e(s)}):h.push(e)},hasCompleted:function(){return o},hasErrored:function(){return n},isAborted:function(){return a},abort:function(){a||o||(a=!0,l.forEach(function(e){return e.remove()}),0==--e._counter&&!e._jobCompleted&&e._jobControl&&e._jobControl.abort&&(e._jobControl.abort(),e._promise=null,e._jobControl=null),h.forEach(function(e){return m.deferException(function(){return e(c.abortedError)})}),r.reject(c.abortedError))}}},e}();c.AbortableJob=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){if(this.start=e,(this.duration=t)<0)throw new RangeError("Duration must be >= 0.");this.end=e+t}return n.normalizeRawTimeRanges=function(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,r){var n=e.length-1;return 0<r&&e[n].end>=t.start?e[n].end=t.end:e.push(t),e},[])},n.normalize=function(e){return n.normalizeRawTimeRanges(e.map(function(e){return{start:e.start,end:e.end}})).map(function(e){return new n(e.start,e.end-e.start)})},n.getCoverage=function(e){if(0===e.length)return new n(0,0);var t=1/0,r=0;return e.forEach(function(e){e.start<t&&(t=e.start),e.end>r&&(r=e.end)}),new n(t,r-t)},n.rangesContainTime=function(t,e){return e.some(function(e){return e.containsTime(t)})},n.prototype.containsTime=function(e){return this.start<=e&&this.end>e},n}();t.TimeRange=n},function(e,t,r){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(e,t,r){"use strict";var c=r(10),p=r(1),d=r(9),f=r(21),m=Array.isArray,g=Function.prototype.call,y=Array.prototype.some;e.exports=function(e,t){var r,n,i,o,s,a,l,u,h=arguments[2];if(m(e)||c(e)?r="array":d(e)?r="string":e=f(e),p(t),i=function(){o=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(g.call(t,h,n.value,i),o)return;n=e.next()}else for(a=e.length,s=0;s<a&&(l=e[s],s+1<a&&(55296<=(u=l.charCodeAt(0))&&u<=56319&&(l+=e[++s])),g.call(t,h,l,i),!o);++s);else y.call(e,function(e){return g.call(t,h,e,i),o})}},function(e,t,r){"use strict";var n=r(10),i=r(4),o=r(9),s=r(2).iterator,a=Array.isArray;e.exports=function(e){return!(!i(e)||!a(e)&&!o(e)&&!n(e)&&"function"!=typeof e[s])}},function(e,t,r){"use strict";var n=r(41);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";var n,i=r(15),o=r(7),s=r(2),a=r(20),l=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),a.call(this,e),l(this,"__length__",o("",e.length))},i&&i(n,a),delete n.prototype.constructor,n.prototype=Object.create(a.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:55296<=(t=r.charCodeAt(0))&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),l(n.prototype,s.toStringTag,o("c","String Iterator"))},function(e,t,r){"use strict";var a=r(1),l=r(0),u=Function.prototype.bind,h=Function.prototype.call,c=Object.keys,p=Object.prototype.propertyIsEnumerable;e.exports=function(o,s){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(l(r)),a(n),e=c(r),t&&e.sort("function"==typeof t?u.call(t,r):void 0),"function"!=typeof o&&(o=e[o]),h.call(o,e,function(e,t){return p.call(r,e)?h.call(n,i,r[e],e,r,t):s})}}},function(e,t,r){"use strict";e.exports=r(44)("forEach")},function(e,t,r){"use strict";var n=r(1),a=r(45),l=Function.prototype.call;e.exports=function(e,i){var o={},s=arguments[2];return n(i),a(e,function(e,t,r,n){o[t]=l.call(i,s,e,t,r,n)}),o}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=r(48)()?Math.sign:r(47)},function(e,t,r){"use strict";var n=r(49),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},function(e,t,r){"use strict";var n=r(50),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(r(24));e.exports=function(e){return"function"==typeof e&&n.call(e)===i}},function(e,t,r){"use strict";var d=r(2).iterator,f=r(10),m=r(52),g=r(51),y=r(1),v=r(0),_=r(4),b=r(9),E=Array.isArray,S=Function.prototype.call,w={configurable:!0,enumerable:!0,writable:!0,value:null},x=Object.defineProperty;e.exports=function(e){var t,r,n,i,o,s,a,l,u,h,c=arguments[1],p=arguments[2];if(e=Object(v(e)),_(c)&&y(c),this&&this!==Array&&m(this))t=this;else{if(!c){if(f(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(E(e)){for(i=new Array(o=e.length),r=0;r<o;++r)i[r]=e[r];return i}}i=[]}if(!E(e))if(void 0!==(u=e[d])){for(a=y(u).call(e),t&&(i=new t),l=a.next(),r=0;!l.done;)h=c?S.call(c,p,l.value,r):l.value,t?(w.value=h,x(i,r,w)):i[r]=h,l=a.next(),++r;o=r}else if(b(e)){for(o=e.length,t&&(i=new t),n=r=0;r<o;++r)h=e[r],r+1<o&&(55296<=(s=h.charCodeAt(0))&&s<=56319&&(h+=e[++r])),h=c?S.call(c,p,h,n):h,t?(w.value=h,x(i,n,w)):i[n]=h,++n;o=n}if(void 0===o)for(o=g(e.length),t&&(i=new t(o)),r=0;r<o;++r)h=c?S.call(c,p,e[r],r):e[r],t?(w.value=h,x(i,r,w)):i[r]=h;return t&&(w.value=null,i.length=o),i}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";e.exports=r(54)()?Array.from:r(53)},function(e,t,r){"use strict";var o=r(55),s=r(14),a=r(0);e.exports=function(t){var e=Object(a(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var i={};return r?o(r,function(e){(n.ensure||e in t)&&(i[e]=t[e])}):s(i,t),i}},function(e,t,r){"use strict";var n,o=r(56),i=r(23),s=r(1),a=r(46),l=r(1),u=r(0),h=Function.prototype.bind,c=Object.defineProperty,p=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=u(t)&&l(t.value);return delete(n=o(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&p.call(this,e)?i:(t.value=h.call(i,r.resolveContext?r.resolveContext(this):this),c(this,e,t),this[e])},n},e.exports=function(e){var r=i(arguments[1]);return null!=r.resolveContext&&s(r.resolveContext),a(e,function(e,t){return n(t,e,r)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var n=r(59);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n,i,o,s,a=r(7),l=r(60),u=Object.create,h=Object.defineProperties,c=Object.defineProperty,p=Object.prototype,d=u(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),s=!0}catch(e){}}var f=function(){var i=u(null);return function(e){for(var t,r,n=0;i[e+(n||"")];)++n;return i[e+=n||""]=!0,c(p,t="@@"+e,a.gs(null,function(e){r||(r=!0,c(this,t,a(e)),r=!1)})),t}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return s?n(t):(r=u(o.prototype),t=void 0===t?"":String(t),h(r,{__description__:a("",t),__name__:a("",f(t))}))},h(i,{for:a(function(e){return d[e]?d[e]:d[e]=i(String(e))}),keyFor:a(function(e){var t;for(t in l(e),d)if(d[t]===e)return t}),hasInstance:a("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:a("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:a("",n&&n.iterator||i("iterator")),match:a("",n&&n.match||i("match")),replace:a("",n&&n.replace||i("replace")),search:a("",n&&n.search||i("search")),species:a("",n&&n.species||i("species")),split:a("",n&&n.split||i("split")),toPrimitive:a("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:a("",n&&n.toStringTag||i("toStringTag")),unscopables:a("",n&&n.unscopables||i("unscopables"))}),h(o.prototype,{constructor:a(i),toString:a("",function(){return this.__name__})}),h(i.prototype,{toString:a(function(){return"Symbol ("+l(this).__description__+")"}),valueOf:a(function(){return l(this)})}),c(i.prototype,i.toPrimitive,a("",function(){var e=l(this);return"symbol"==typeof e?e:e.toString()})),c(i.prototype,i.toStringTag,a("c","Symbol")),c(o.prototype,i.toStringTag,a("c",i.prototype[i.toStringTag])),c(o.prototype,i.toPrimitive,a("c",i.prototype[i.toPrimitive]))},function(e,t,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){"use strict";var n,i=r(15),o=r(22),s=r(7),a=r(2),l=r(20),u=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",u(this,"__kind__",s("",t))},i&&i(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:s(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(n.prototype,a.toStringTag,s("c","Array Iterator"))},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var n=r(4),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";e.exports=r(68)()?Object.keys:r(67)},function(e,t,r){"use strict";var s=r(69),a=r(0),l=Math.max;e.exports=function(t,r){var n,e,i,o=l(arguments.length,2);for(t=Object(a(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<o;++e)s(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=Object.create(null),i=Math.random;e.exports=function(){for(var e;e=i().toString(36).slice(2),n[e];);return e}},function(e,t,r){"use strict";var n=r(25);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},function(e,t,r){"use strict";var i,o=Object.create;r(27)()||(i=r(26)),e.exports=function(){var r,t,n;return!i||1!==i.level?o:(n={configurable:!(t={}),enumerable:!(r={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=n)}),Object.defineProperties(r,t),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(e,t){return o(null===e?r:e,t)})}()},function(e,t,r){"use strict";var n,i=r(15),o=r(73),s=r(0),a=r(72),l=r(7),u=r(21),h=r(40),c=r(2).toStringTag,p=r(39),d=Array.isArray,f=Object.defineProperty,m=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=p&&i&&WeakMap!==n?i(new WeakMap,g(this)):this,null!=e&&(d(e)||(e=u(e))),f(t,"__weakMapData__",l("c","$weakMap$"+a())),e&&h(e,function(e){s(e),t.set(e[0],e[1])}),t},p&&(i&&i(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:l(n)})),Object.defineProperties(n.prototype,{delete:l(function(e){return!!m.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:l(function(e){if(m.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:l(function(e){return m.call(o(e),this.__weakMapData__)}),set:l(function(e,t){return f(o(e),this.__weakMapData__,l("c",t)),this}),toString:l(function(){return"[object WeakMap]"})}),f(n.prototype,c,l("c","WeakMap"))},function(e,t,r){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},function(e,t,r){"use strict";e.exports=r(76)()?WeakMap:r(75)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(77),i=function(){function e(){this._map=new n}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.set=function(e,t){this._map.set(e,t)},e.prototype.has=function(e){return this._map.has(e)},e.prototype.delete=function(e){return this._map.delete(e)},e}();t.SCWeakMap=i},function(e,t,r){!function(){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,h=/^([^\/?#]*)(.*)$/,t=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,c={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=c.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=c.normalizePath(n.path),c.buildURLFromParts(n)}var i=c.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=c.normalizePath(i.path),c.buildURLFromParts(i)):t;var o,s=c.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");!s.netLoc&&s.path&&"/"!==s.path[0]&&(o=h.exec(s.path),s.netLoc=o[1],s.path=o[2]),s.netLoc&&!s.path&&(s.path="/");var a,l,u={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(u.netLoc=s.netLoc,"/"===i.path[0])||(i.path?(a=s.path,l=a.substring(0,a.lastIndexOf("/")+1)+i.path,u.path=c.normalizePath(l)):(u.path=s.path,i.params||(u.params=s.params,i.query||(u.query=s.query)))),null===u.path&&(u.path=r.alwaysNormalize?c.normalizePath(i.path):i.path),c.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(t,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=c}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79),i=/^.*\.([^\.;\?#]*).*$/;t.getExtension=function(e){var t=i.exec(e);return t?t[1].toLowerCase():null},t.buildAbsoluteUrl=function(e,t){return n.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){var t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0)),r=0;return e.forEach(function(e){t.set(e,r),r+=e.byteLength}),t},t.fill=function(e,t){if(Uint8Array.prototype.fill)e.fill(t);else for(var r=0;r<e.length;r++)e[r]=t},t.forEach=function(e,t){if(Uint8Array.prototype.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r)},t.numberToUint8Array=function(e,t){if(void 0===t&&(t=!1),(e=Math.round(e))<0)throw new Error("Negative numbers not supported.");for(var r=Math.max(1,Math.ceil(Math.log(e+1)/Math.log(2)/8)),n=new Uint8Array(r),i=0;i<r;i++)n[t?i:r-1-i]=255&e,e>>>=8;return n},t.createVintBuffer=function(e){if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: "+e);var t;for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);for(var r=new Uint8Array(t),n=1;n<=t;n++){var i=255&e;r[t-n]=i,e-=i,e/=Math.pow(2,8)}return r[0]|=1<<8-t,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compact=function(e){return e.filter(function(e){return null!=e})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(8),a=r(18);t.promiseWithTimeout=function(n,i,o){return void 0===o&&(o=new Error("Timed out.")),new s.Promise(function(e,t){var r=window.setTimeout(function(){t(o)},i);a.always(n,function(e){return window.clearTimeout(r),e}).then(e,t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i="undefined"!=typeof window&&"Map"in window;t.buildCache=function(){return i?new window.Map:new o};var o=function(){function e(){this._store=[]}return e.prototype.set=function(t,e){var r=n.find(this._store,function(e){return e.key===t});r?r.val=e:this._store.push({key:t,val:e})},e.prototype.get=function(t){var e=n.find(this._store,function(e){return e.key===t});if(e)return e.val},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r(3);t.retry=function(n,t,i){void 0===i&&(i={});var o=null,s=0,a=!1,l=null,u=function(){function e(){if(r)throw new Error("scheduleRetry() already called.");if(r=!0,l=null,!a){var e=n(++s);if(null!==e)return o=window.setTimeout(u,e),1;var t=i.onNoMoreRetries;return t&&h.deferException(function(){return t()}),0}}var r=!1;l=t({attemptNum:s,scheduleRetry:e})||null};return u(),{cancel:function(){a||(a=!0,o&&(window.clearTimeout(o),o=null),l&&l.onCancel())}}},t.buildExponentialDelayCalculator=function(e){var t=void 0===e?{}:e,r=t.timeBase,n=void 0===r?500:r,i=t.threshold,o=void 0===i?3:i,s=t.delayCap,a=void 0===s?45e3:s,l=t.jitter,u=void 0===l?200:l,h=t.maxAttempts,c=void 0===h?null:h;if(n<=0)throw new Error("Time base must be > 0.");if(o<=0)throw new Error("Threshold must be > 0.");if(null!==a&&a<=0)throw new Error("Delay cap must be null or > 0.");if(null!==c&&c<1)throw new Error("Max attempts must be >= 1.");return function(e){if(null!==c&&c<=e)return null;var t=0<e?Math.pow(2,e/o-1):0;return Math.min(t*n,a||1/0)+Math.round(Math.random()*u)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(37),o=r(85),s=r(30),a=r(17),l=r(84),u=r(19),h=r(8),c=r(83),p=r(18),d=r(82),f=r(81),m=r(3),g=r(36),y=r(80),v=r(78);!function(e){e.OnExit=s.OnExit,e.find=a.find,e.Promise=h.Promise,e.promiseWithTimeout=c.promiseWithTimeout,e.always=p.always,e.compact=d.compact,e.deferException=m.deferException,e.SCWeakMap=v.SCWeakMap,function(e){e.buildCache=l.buildCache}(e.cache||(e.cache={})),function(e){e.buildDeferred=n.buildDeferred}(e.deferred||(e.deferred={})),function(e){e.getExtension=y.getExtension,e.buildAbsoluteUrl=y.buildAbsoluteUrl}(e.url||(e.url={})),function(e){e.AbortableJob=i.AbortableJob,e.map=i.map,e.abortedError=i.abortedError}(e.abortableJob||(e.abortableJob={})),function(e){e.retry=o.retry,e.buildExponentialDelayCalculator=o.buildExponentialDelayCalculator}(e.retry||(e.retry={})),function(e){e.isSafari=g.isSafari,e.getSafariVersion=g.getSafariVersion,e.isIE=g.isIE,e.isEdge=g.isEdge,e.isFirefox=g.isFirefox,e.isChrome=g.isChrome,e.getChromeVersion=g.getChromeVersion,e.getFirefoxVersion=g.getFirefoxVersion}(e.browser||(e.browser={})),function(e){e.combine=f.combine,e.fill=f.fill,e.forEach=f.forEach,e.numberToUint8Array=f.numberToUint8Array,e.createVintBuffer=f.createVintBuffer}(e.arrayBuffer||(e.arrayBuffer={})),function(e){e.now=u.now}(e.time||(e.time={}))}(t.helpers||(t.helpers={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.LoaderError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(87);!function(e){e.LoaderError=n.LoaderError}(t.loaderErrors||(t.loaderErrors={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(r){function e(e,t){return r.call(this,e||"The URL update failed for some reason.",t)||this}return n(e,r),e.prototype.getCode=function(){return"URL_UPDATE_ERROR"},e}(i.PlayerFatalError);t.URLUpdateError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i=r(89),o=r(29),s=r(16),a=r(11),l=r(5);!function(e){e.PlayerError=a.PlayerError,e.PlayerFatalError=l.PlayerFatalError,e.NotSupportedError=n.NotSupportedError,e.URLUpdateError=i.URLUpdateError,e.ImplementationError=o.ImplementationError,e.ProxyProvidedPlayerFatalError=s.ProxyProvidedPlayerFatalError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(12),s=r(35),a=r(16),l=function(r){function e(e){var t=r.call(this,e)||this;return t._onPlayerProvided=new i.EventDispatcher,t._onPlayerRemoved=new i.EventDispatcher,t._shouldPassThroughFatalErrors=!!e.shouldPassThroughFatalErrors,t.onPlayerProvided=t._onPlayerProvided.getHandle(),t.onPlayerRemoved=t._onPlayerRemoved.getHandle(),t._logger=o.prefixLogger(t._logger,"ProxyPlayer"),t}return n(e,r),e.prototype.providePlayer=function(e,t){void 0===t&&(t={}),this._providePlayer(e,t),this._onPlayerProvided.dispatch(e)},e.prototype.removePlayer=function(){var e=this._getPlayer();if(!e)throw new Error("There is no player to remove.");this._removePlayer(),this._onPlayerRemoved.dispatch(e)},e.prototype.setInitialDuration=function(e){this._setInitialDuration(e)},e.prototype.getPlayer=function(){return this._getPlayer()},e.prototype._handleFatalError=function(e,t){this._shouldPassThroughFatalErrors?this._triggerError(e):this._triggerError(new a.ProxyProvidedPlayerFatalError(e,t))},e}(s.ProxyPlayerBase);t.ProxyPlayer=l},function(e,t){},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(){f&&p&&(f=!1,p.length?d=p.concat(d):m=-1,d.length&&s())}function s(){if(!f){var e=i(o);f=!0;for(var t=d.length;t;){for(p=d,d=[];++m<t;)p&&p[m].run();m=-1,t=d.length}p=null,f=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var u,h,c=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var p,d=[],f=!1,m=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new a(e,t)),1!==d.length||f||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,he){(function(le,ue){e.exports=function(){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function e(e){W=e}function t(e){K=e}function n(){return function(){return le.nextTick(l)}}function i(){return void 0!==G?function(){G(l)}:a()}function o(){var e=0,t=new Y(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}function a(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;e<H;e+=2){var t=Z[e],r=Z[e+1];t(r),Z[e]=void 0,Z[e+1]=void 0}H=0}function h(){try{var e=he(92);return G=e.runOnLoop||e.runOnContext,i()}catch(e){return a()}}function c(e,t){var r=arguments,n=this,i=new this.constructor(d);void 0===i[te]&&D(i);var o=n._state;return o?!function(){var e=r[o-1];K(function(){return k(o,i,e,n._result)})}():P(n,i,e,t),i}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(d);return E(r,e),r}function d(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(e){return oe.error=e,oe}}function y(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function v(e,n,i){K(function(t){var r=!1,e=y(i,n,function(e){r||(r=!0,(n!==e?E:w)(t,e))},function(e){r||(r=!0,x(t,e))},t._label);!r&&e&&(r=!0,x(t,e))},e)}function _(t,e){e._state===ne?w(t,e._result):e._state===ie?x(t,e._result):P(e,void 0,function(e){return E(t,e)},function(e){return x(t,e)})}function b(e,t,r){t.constructor===e.constructor&&r===c&&t.constructor.resolve===p?_(e,t):r===oe?x(e,oe.error):void 0===r?w(e,t):u(r)?v(e,t,r):w(e,t)}function E(e,t){e===t?x(e,f()):r(t)?b(e,t,g(t)):w(e,t)}function S(e){e._onerror&&e._onerror(e._result),C(e)}function w(e,t){e._state===re&&(e._result=t,e._state=ne,0!==e._subscribers.length&&K(C,e))}function x(e,t){e._state===re&&(e._state=ie,e._result=t,K(S,e))}function P(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=r,i[o+ie]=n,0===o&&e._state&&K(C,e)}function C(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?k(r,n,i,o):i(o);e._subscribers.length=0}}function A(){this.error=null}function T(e,t){try{return e(t)}catch(e){return se.error=e,se}}function k(e,t,r,n){var i=u(r),o=void 0,s=void 0,a=void 0,l=void 0;if(i){if(o=T(r,n),o===se?(l=!0,s=o.error,o=null):a=!0,t===o)return void x(t,m())}else o=n,a=!0;t._state!==re||(i&&a?E(t,o):l?x(t,s):e===ne?w(t,o):e===ie&&x(t,o))}function R(t,e){try{e(function(e){E(t,e)},function(e){x(t,e)})}catch(e){x(t,e)}}function M(){return ae++}function D(e){e[te]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function I(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[te]||D(this.promise),q(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):x(this.promise,F())}function F(){return new Error("Array Methods must be provided an Array")}function O(e){return new I(this,e).promise}function L(i){var o=this;return new o(q(i)?function(e,t){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=new this(d);return x(t,e),t}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[te]=M(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&B(),this instanceof z?R(this,e):j())}function U(){var e=void 0;if(void 0!==ue)e=ue;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var V=void 0,q=V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},H=0,G=void 0,W=void 0,K=function(e,t){Z[H]=e,Z[H+1]=t,H+=2,2===H&&(W?W(l):ee())},X="undefined"!=typeof window?window:void 0,J=X||{},Y=J.MutationObserver||J.WebKitMutationObserver,$="undefined"==typeof self&&"undefined"!=typeof le&&"[object process]"==={}.toString.call(le),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),ee=void 0;ee=$?n():Y?o():Q?s():void 0===X?h():a();var te=Math.random().toString(36).substring(16),re=void 0,ne=1,ie=2,oe=new A,se=new A,ae=0;return I.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===re&&r<e;r++)this._eachEntry(t[r],r)},I.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===p){var i=g(t);if(i===c&&t._state!==re)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===z){var o=new r(d);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},I.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===re&&(this._remaining--,e===ie?x(n,r):this._result[t]=r),0===this._remaining&&w(n,this._result)},I.prototype._willSettleAt=function(e,t){var r=this;P(e,void 0,function(e){return r._settledAt(ne,t,e)},function(e){return r._settledAt(ie,t,e)})},z.all=O,z.race=L,z.resolve=p,z.reject=N,z._setScheduler=e,z._setAsap=t,z._asap=K,z.prototype={constructor:z,then:c,catch:function(e){return this.then(null,e)}},z.polyfill=U,z.Promise=z}()}).call(this,he(94),he(93))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(13),o=r(6),s=r(37),a=r(3);!function(e){e[e.PENDING=0]="PENDING",e[e.WAITING=1]="WAITING",e[e.IN_PROGRESS=2]="IN_PROGRESS",e[e.COMPLETED=3]="COMPLETED",e[e.ERRORED=4]="ERRORED"}(n=t.ResponseState||(t.ResponseState={}));var l=function(){function e(){var e=this;this._responseDeferred=i.buildDeferred(),this._requestStartCallbacks=[],this._parts=[],this._progressEventDispatcher=new o.EventDispatcher,this._cachedCompleteParts=null,this._state=n.PENDING,this._statusAndHeaders=null,this._getProgressSoFar=function(){if(!e._parts.length)return null;if(!e._statusAndHeaders)throw new Error("Headers should be set.");return{initial:!0,statusCode:e._statusAndHeaders.statusCode,headers:e._statusAndHeaders.headers,part:e._getDataSoFar()}};var t=new s.AbortableJob(function(){return{result:e._responseDeferred.promise,progressUpdates:{getProgressSoFar:e._getProgressSoFar,onProgressUpdate:e._progressEventDispatcher}}},{storeResult:!0});this._jobHandle=t.run()}return e.prototype.onProgress=function(e){this._jobHandle.onProgressUpdate(e)},e.prototype.getResponse=function(){return this._jobHandle.whenComplete()},e.prototype.onRequestStart=function(e){this._state!==n.PENDING?a.deferException(e):this._requestStartCallbacks.push(e)},e.prototype.onResponseReceived=function(e){this._jobHandle.onCompletion(e)},e.prototype.onError=function(e){this._jobHandle.onError(e)},e.prototype.hasRequestStarted=function(){return this._state!==n.PENDING},e.prototype.hasCompleted=function(){return this._state===n.COMPLETED||this._state===n.ERRORED},e.prototype.getState=function(){return this._state},e.prototype.abort=function(){-1===[n.ERRORED,n.COMPLETED].indexOf(this._state)&&(this._jobHandle.abort(),this._state=n.ERRORED,this._abort())},e.prototype._signalRequestStart=function(){this._enforceState(n.PENDING),this._state=n.WAITING,this._requestStartCallbacks.splice(0).forEach(function(e){return a.deferException(e)})},e.prototype._signalTimeout=function(){this._enforceState(n.WAITING,n.IN_PROGRESS),this._state=n.COMPLETED,this._requestStartCallbacks.splice(0),this._responseDeferred.resolve(null)},e.prototype._provideStatusAndHeaders=function(e,t){this._enforceState(n.WAITING),this._statusAndHeaders=e,this._state=n.IN_PROGRESS,this._providePart(t)},e.prototype._providePart=function(e){this._enforceState(n.IN_PROGRESS);var t=!this._parts.length;if(this._parts.push(e),!this._statusAndHeaders)throw new Error("Headers should be set.");this._progressEventDispatcher.dispatch({initial:t,statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,part:e})},e.prototype._finalize=function(e){var t=this;if(e)this._enforceState(n.PENDING,n.WAITING,n.IN_PROGRESS),this._state=n.ERRORED,this._requestStartCallbacks.splice(0),this._responseDeferred.reject(e);else{if(this._enforceState(n.IN_PROGRESS),this._state=n.COMPLETED,!this._statusAndHeaders)throw new Error("Headers should be set.");this._responseDeferred.resolve({statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,getData:function(){if(!t._parts.length)throw new Error("Unexpected error. No parts.");return t._cachedCompleteParts?t._cachedCompleteParts:t._cachedCompleteParts=t._getDataSoFar()}})}},e.prototype._getDataSoFar=function(){var e=this._parts.length;if(!e)throw new Error("No parts.");return 1===e?this._parts[0]:this._reduceParts(this._parts)},e.prototype._enforceState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(-1===e.indexOf(this._state))throw new Error("Invalid state. Got "+this._state+" Expecting one of "+e.join(","))},e}();t.LoaderRequest=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(6),i=r(96),o=r(12),s=r(91);t.ProxyPlayer=s.ProxyPlayer;var a=r(35);t.ProxyPlayerBase=a.ProxyPlayerBase;var l=r(90);t.errors=l.errors;var u=r(88);t.loaderErrors=u.loaderErrors;var h=r(86);t.helpers=h.helpers;var c=r(34);t.BasePlayer=c.BasePlayer;var p=r(32);t.State=p.State;var d=r(31);t.StateManager=d.StateManager;var f=r(38);t.TimeRange=f.TimeRange,function(e){e.EventDispatcher=n.EventDispatcher}(t.eventDispatcher||(t.eventDispatcher={})),function(e){e.LoaderRequest=i.LoaderRequest,e.ResponseState=i.ResponseState}(t.loader||(t.loader={})),function(e){e.noOpLogger=o.noOpLogger,e.consoleLogger=o.consoleLogger,e.prefixLogger=o.prefixLogger,e.cloneLogger=o.cloneLogger}(t.logger||(t.logger={}))}])},function(e,t,r){var n,i,o;window,e.exports=(n=r(4),i=r(2),o=r(1),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=new i.WebAudioContext,s=function(){function e(e,t){this._playerListeners=new n.helpers.SCWeakMap,this._playerWithElement=null,this._canActivate=!0,this._provideMediaElementErrorRunCheck={},this._element=document.createElement(e),this._logger=n.logger.prefixLogger(t,"MediaElementManager")}return e.prototype.activate=function(){this._canActivate&&(this._logger.debug("Activating media element."),this._element.load()),this._logger.debug("Activating web audio context."),o.activate()},e.prototype.registerPlayer=function(r,n){var i=this;if(this._playerListeners.has(r))throw new Error("Player already registered.");var o=function(){var t;r.getMediaElement()!==i._element&&(i._playerWithElement&&(i._playerWithElement.getMediaElement()===i._element&&(i._logger.debug("Revoking media element from previous player."),i._playerWithElement.isPlaying()&&i._logger.warn("Revoking media element from a playing player."),i._playerWithElement.revokeMediaElement()),i._playerWithElement=null),i._canActivate=!1,t=i._provideMediaElementErrorRunCheck={},i._logger.debug("Providing media element to new player."),r.provideMediaElement(i._element).catch(function(e){r.isDead()||i._provideMediaElementErrorRunCheck!==t||(i._logger.error("Error occurred providing media element to new player.",e),n(e))}),i._playerWithElement=r)},e=r.onChange.subscribe(function(e){var t=e.playing;t&&o()});this._playerListeners.set(r,e),r.getMediaElement()&&r.revokeMediaElement(),r.isPlaying()&&o()},e.prototype.unregisterPlayer=function(e){var t=this._playerListeners.get(e);t&&(t.remove(),this._playerWithElement===e&&(this._playerWithElement=null,e.getMediaElement()===this._element&&e.revokeMediaElement()),this._playerListeners.delete(e))},e.prototype.getWebAudioContext=function(){return o},e}();t.MediaElementManager=s},function(e,t){e.exports=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(1),f=r(0),m=function(r){function e(e){var t=r.call(this)||this;return t._mediaElementManager=e,t.name="MaestroHTML5",t}return n(e,r),e.errorQualifiesAbort=function(e){return!(e instanceof f.errors.WebAudioInitializeError)},e.prototype.isRenditionSupported=function(e,t){return("http"===e.scProtocol||-1!==["hls","encrypted-hls"].indexOf(e.scProtocol)&&!t.streamUrlExpires)&&f.HTML5Player.isFormatSupported(e.maestroFormat)},e.prototype.buildPlayer=function(e){var t=e.urlAndRendition,r=t.rendition,n=t.timeRetrieved;if(e.streamUrlExpires&&(0<=["hls","encrypted-hls"].indexOf(r.scProtocol)||void 0===n))throw i.notSupportedError;return new s(e,this._mediaElementManager)},e}(i.BaseController);t.HTML5PlayerController=m;var s=function(){function e(e,t){var s=this;this._config=e,this._mediaElementManager=t;var r=e.logger,n=e.playerId,i=e.urlAndRendition,o=e.streamUrlExpires,a=e.reportError,l=e.fadeOnPauseAndPlay,u=e.fadeOnSeek,h=e.releaseControl;this._logger=r;var c=i.rendition,p=i.timeRetrieved;if(o){if(void 0===p)throw new Error("Expecting timeUrlRetrieved to be set.");this._expirationConfig={urlExpires:!0,timeUrlRetrieved:p}}else this._expirationConfig={urlExpires:!1};var d=this._player=new f.HTML5Player({url:i.url,format:c.maestroFormat},{name:n,mediaElement:null,fadeSupportEnabled:l||u,defaultFadeDuration:l?void 0:0,defaultSeekFadeInDuration:u?void 0:0,defaultSeekFadeOutDuration:u?void 0:0,webAudioContext:this._mediaElementManager.getWebAudioContext(),logger:this._logger,registerListeners:function(e){var t=e.onError,r=e.onChange;t.subscribe(function(e){e instanceof f.errors.NetworkError&&s._hasExpired()?(s._logger.info("Releasing control as a network error occurred, and the URL has expired."),h({retry:!0})):(a(e.getCode()),m.errorQualifiesAbort(e)&&h({retry:!1}))}),r.subscribe(function(e){var t=e.dead,r=e.playing,n=e.actuallyPlaying,i=e.seeking,o=e.duration;return t?void h({retry:!1}):o===1/0?(s._logger.info("Releasing control because the duration was Infinity."),void h({retry:!1})):void(s._expirationConfig.urlExpires&&(r||n||i)&&s._checkIfUrlWillExpireBeforeEnd())})}});this._mediaElementManager.registerPlayer(d,function(){return h({retry:!1})})}return e.prototype.getPlayer=function(){return this._player},e.prototype.getUrl=function(){return this._config.urlAndRendition.url},e.prototype._checkIfUrlWillExpireBeforeEnd=function(){var e,t=this._player.getDuration(),r=this._getExpireTime();null!==t&&null!==r&&(e=t-this._player.getPosition(),o.helpers.time.now()+e>r&&(this._logger.info("Releasing control because stream URL would expire before reaching end."),this._config.releaseControl({retry:!0})))},e.prototype._getExpireTime=function(){if(!this._expirationConfig.urlExpires)return null;var e=this._player.getDuration();return null===e?null:this._expirationConfig.timeUrlRetrieved+e+105e3},e.prototype._hasExpired=function(){var e=this._getExpireTime();return null!==e&&e<=o.helpers.time.now()},e}();t.ControlledPlayer=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(4);t.HTML5PlayerController=n.HTML5PlayerController;var i=r(2);t.MediaElementManager=i.MediaElementManager;var o=r(0);t.HTML5Player=o.HTML5Player}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0);t.buildMimeTypeFromFormat=function(e,t){void 0===t&&(t={});var r=e.mimeType||t.mimeType;if(!r)return null;var n=e.audioCodec||t.audioCodec,i=e.videoCodec||t.videoCodec,o=a.helpers.compact([n,i]),s=0<o.length?'; codecs="'+o.map(function(e){return e.id}).join(",")+'"':"";return r+s}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e,t){return void 0===e&&(e="An error occurred when initializing web audio."),r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_INITIALIZE_ERROR"},e}(i.errors.PlayerError);t.WebAudioInitializeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e,t){return void 0===e&&(e="An error occurred when activating web audio."),r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_ACTIVATION_ERROR"},e}(i.errors.PlayerFatalError);t.WebAudioActivationError=o},function(e,t,r){"use strict";function n(){return"AudioContext"in window&&(o.helpers.browser.isChrome()||a&&48<=a.major||o.helpers.browser.isEdge())}function i(){if(l)return l;if(!n())throw new Error("Web audio is not enabled.");var e=new window.AudioContext;if(!e.destination.maxChannelCount)throw t.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR;return l={context:e,suspender:new s.WebAudioContextSuspender(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(15),a=o.helpers.browser.getFirefoxVersion();t.WEB_AUDIO_ACTIVATION_TIMEOUT=5e3,t.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR=new Error("Web audio activation timed out."),t.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR=new Error("Web audio found no output channels.");var l=null,u=function(){function e(){}return e.prototype.getAudioContextWithSuspender=function(){return n()?i():null},e.prototype.activate=function(){if(!n())return o.helpers.Promise.resolve(void 0);try{var e=i().context;return function(e){return e.state&&e.resume&&"running"!==e.state?o.helpers.promiseWithTimeout(e.resume(),t.WEB_AUDIO_ACTIVATION_TIMEOUT,t.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR):o.helpers.Promise.resolve()}(e)}catch(e){return o.helpers.Promise.reject(e)}},e}();t.WebAudioContext=u},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=function(t){function e(e){return t.call(this,"Web audio found no channels.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_INITIALIZE_NO_CHANNELS_ERROR"},e}(i.WebAudioInitializeError);t.WebAudioInitializeNoChannelsError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(t){function e(e){return t.call(this,"We timed out when trying to activate web audio.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR"},e}(i.WebAudioActivationError);t.WebAudioActivationTimeoutError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e){var t=r.call(this,"Unexpected error from media element.",e)||this;return t._error=e,t}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.UNEXPECTED_MEDIA_ELEMENT_ERROR_"+(this._error&&this._error.code||"UNKNWON")},e}(i.errors.PlayerFatalError);t.MediaElementError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"An unrecoverable error occurred whilst decoding.")||this}return n(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.DECODE_ERROR"},t}(i.errors.PlayerFatalError);t.DecodeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"An unrecoverable network error occurred.")||this}return n(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.NETWORK_ERROR"},t}(i.errors.PlayerFatalError);t.NetworkError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);t.buildTimeRanges=function(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push({end:1e3*e.end(n),start:1e3*e.start(n)});return i.TimeRange.normalizeRawTimeRanges(t).map(function(e){return new i.TimeRange(e.start,e.end-e.start)})}},function(e,t,r){"use strict";function i(e){try{var t=document.createElement("audio");return!!t.canPlayType(e)}catch(e){return!1}}var o=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),s=r(10),h=r(17),a=r(9),l=r(8),c=r(7),p=r(16),d=r(6),f=r(2),m=r(5),g=r(3),y=r(4),v=r(1),_=u.helpers.deferred.buildDeferred,b=u.helpers.url.getExtension,E=u.helpers.Promise,S=u.helpers.browser,w=u.logger.prefixLogger,x=u.errors.NotSupportedError,P=u.errors.PlayerFatalError,C=new Error("Media element was revoked."),A=[],T=new u.helpers.SCWeakMap,k=null,R=u.helpers.retry.buildExponentialDelayCalculator({jitter:0,timeBase:50}),n=function(n){function e(e){var a=n.call(this,e)||this;a._duration=null,a._stallDetected=!1,a._fadeManagers=null,a._shouldCoverGlitch=!0,a._initialized=!1,a._muted=!1,a._volume=1,a._deferredProvideMediaElementCallback=null,a._playInProgress={inProgress:!1},a._lastStallCheckPos=null,a._stallCheckTimerId=null,a._timeWhenPositionChanged=0,a._endedOverride=!1,a._pauseEventTimer=null,a._positionWhenMediaElementRevoked=0,a._playingWhenMediaElementRevoked=!1,a._provideMediaElementDeferred=null,a._mediaElementAndState=null,a._listeners=[],a._currentSeek=null,a._playDetectionPosition=0,a._playDetectionTimer=null,a._playDetectionTimerNumAttempts=0,a._fadeRate=null,a._seekFadeRate=null,a._webAudioOrchestration=null,a._fadeEndedHandle=null,a._onSeekFadeOutCompleted=null,a._fadeRateAfterSeek=1/0,a._mediaElPlayShouldBeAborted=new u.helpers.SCWeakMap,a._mediaElPaused=new u.helpers.SCWeakMap,a._mediaElPlayTracker=null,a._logger=w(a._logger,"HTML5PlayerBase"),a._playerDependencies=e,a._webAudioContext=e.webAudioContext||(k=k||new y.WebAudioContext);var t=a._webAudioOrchestration=e.fadeSupportEnabled?a._initWebAudio():null;t&&(a._logger.debug("Fading supported."),a._fadeManagers={pausePlay:new h.FadeManager(t.context,t.gainNodes.pausePlay),seek:new h.FadeManager(t.context,t.gainNodes.seek)}),a._handleDurationUpdates();var r=void 0!==e.mediaElement?e.mediaElement:a._createDefaultMediaElement();r&&a.provideMediaElement(r).catch(function(e){return e===C?void a._logger.debug("Initial provideMediaElement() call was aborted."):void a._triggerError(new p.InitializeError(e))});var l=a._fadeManagers;return l&&a.onChange.subscribe(function(e){var t,r,n,i=e.stalled,o=e.seek,s=e.ended;s&&l.seek.getDirection()===h.FadeDirection.UP&&l.seek.isFading()?(a._logger.debug("Completing fade in after seek early because reached end."),l.seek.performFade(1/0),a._notifyFadingForSeek(!1)):(t=a.getSeekState(),r=t&&"COMPLETED"===t.state,n=o&&"COMPLETED"===o.state,(!1===i&&r||n&&!a.isStalled())&&l.seek.getDirection()===h.FadeDirection.DOWN&&(a._logger.debug("Fading in after seek.",a._fadeRateAfterSeek),l.seek.performFade(a._fadeRateAfterSeek,function(){return a._notifyFadingForSeek(!1)})))}),a._logger.info("Checking if the player can play the provided descriptor."),a._canPlayTimer=window.setTimeout(function(){a._canPlay().then(function(e){if(!a.isDead())return e instanceof u.errors.NotSupportedError?(a._logger.info("Player not supported.",e),void a._triggerError(e)):e?(a._logger.info("Player supported."),void a._initialize()):(a._logger.info("Player not supported."),void a._triggerError(new x))}).catch(function(e){a._logger.error("Unexpected error during can play check.",e),a._triggerError(new P("An unexpected error occured during initialization.",e))})},0),a}return o(e,n),e.isFormatSupported=function(e){var t=v.buildMimeTypeFromFormat(e);return!!t&&i(t)},e.prototype.getMediaElement=function(){return this._mediaElementAndState&&this._mediaElementAndState.element},e.prototype.provideMediaElement=function(o){var s=this;if(this._ensureNotDead(),this._mediaElementAndState)throw new Error("Already have a media element.");if(0<=A.indexOf(o))throw new Error("The same media element is currently being used in another player.");if(!this._webAudioOrchestration&&T.has(o))throw new Error("The same media element has been used in another player with fading enabled.");A.push(o);var a=this._provideMediaElementDeferred=_();return this._update(function(){s._logger.debug("provideMediaElement() called.",o),s._initMediaElementLocal(o,!1);var i=s._mediaElementAndState={element:o,state:"INITIALIZING"},e=function(){s._logger.debug("Initializing media element."),s._initMediaElement(o,!0),s._addPausedHandlers(o),s._attachListeners();var e=s._listenToOnce("error",function(){s._provideMediaElementDeferred=null;var e=o.error,t=e?e.code:"unknown";s._logger.error("Error whilst initializing media element.",t),s.revokeMediaElement(),a.reject(new Error("Error when initializing media element. Error: "+t))},{earlyAttach:!0}),t=function(){null===s._getQueuedSeekPosition()&&0<s._positionWhenMediaElementRevoked?(s._logger.debug("Seeking to expected position..."),s._performSeek(s._positionWhenMediaElementRevoked,function(e){return void 0!==e?(s._provideMediaElementDeferred=null,s._logger.error("An error occurred when trying to seek to the expected position."),s.revokeMediaElement(),void a.reject(new Error("An error occurred when trying to restore the position."))):(s._logger.debug("Seeked to expected position."),void r())})):r()},r=function(){s.isPlaying()===s.isActuallyPlaying()&&s._playingWhenMediaElementRevoked?(s._logger.debug("Calling play to match previous state..."),s._mediaElementPlay().catch(function(e){s._provideMediaElementDeferred=null,s._logger.error("An error occurred when trying to play.",e),i===s._mediaElementAndState&&s.revokeMediaElement(),a.reject(new Error("Browser refused play() request on media element."))}),s._listenToOnce("play",function(){s._logger.debug("Play succeeded."),n()},{earlyAttach:!0})):n()},n=function(){return s._mediaElementAndState!==i?void s._triggerError(new P("Media element switched unexpectedly.")):(s._provideMediaElementDeferred=null,e.remove(),a.resolve(void 0),s._mediaElementAndState.state="STABLE",s._logger.debug("Finished putting element in expected state."),s._shouldCoverGlitch=!0,void(null!==s._duration&&s._update(function(){s.isReady()||s._signalReady(),s._handleDeferredPauseAndSeek()})))};s._listenToOnce("emptied",function(){s._logger.debug("Got emptied event from media element."),s._logger.debug("Putting media element in the state that is expected..."),t()},{earlyAttach:!0})};s._initialized?e():s._deferredProvideMediaElementCallback=e}),a.promise},e.prototype.revokeMediaElement=function(){var e=this;if(!this._mediaElementAndState)throw new Error("There is no media element to revoke.");this._deferredProvideMediaElementCallback=null,this._provideMediaElementDeferred&&(this._provideMediaElementDeferred.reject(C),this._provideMediaElementDeferred=null),this._logger.debug("revokeMediaElement() called."),this._detachListeners();var t=this._mediaElementAndState.element,r=A.indexOf(t);0<=r&&A.splice(r,1),this._onSeekFadeOutCompleted=null,this.isDead()||(this._positionWhenMediaElementRevoked=this.getPosition(),this._playingWhenMediaElementRevoked=this.isPlaying()),this._mediaElementAndState=null,this._initMediaElement(t,!1),this._removePausedHandlers(t),this._completeCurrentFade(),this._completeSeekFadeOutAndIn(),this._update(function(){e.isDead()||(!e.isPlaying()&&e.isActuallyPlaying()&&e._notifyPlaying(!1),e._handleStalled())})},e.prototype.getBufferedTimeRanges=function(){return this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state?s.buildTimeRanges(this._mediaElementAndState.element.buffered):[]},e.prototype.getMaxBufferLength=function(){return null},e.prototype._hasInitialized=function(){return this._initialized},e.prototype._inferFormat=function(e){var t=b(e);switch(t){case"mp3":return{mimeType:"audio/mpeg"};case"opus":return{mimeType:"audio/ogg",audioCodec:{id:"opus"}};case"mp4":return{mimeType:"video/mp4"};case"m4a":return{mimeType:"audio/mp4"};case"m3u8":return{mimeType:"application/x-mpegURL"};default:return{}}},e.prototype._canPlayType=i,e.prototype._initialize=function(){var t=this;this._initialized=!0,this._listenTo("error",function(){if("INITIALIZING"!==t._mediaElementAndState.state){var e=t._mediaElementAndState.element.error;switch(e&&e.code){case 2:t._triggerError(new a.NetworkError);break;case 3:t._triggerError(new l.DecodeError);break;default:t._logger.error("Unexpected error from media element.",e&&e.code,e&&e.message),t._triggerError(new c.MediaElementError(e))}}else t._logger.debug("An error occurred, but the media element is initializing, so ignoring...")},{earlyAttach:!0}),this._listenTo("play",function(){t._logger.debug("Media element play event."),t.isPlaying()||t.isActuallyPlaying()||!t._mediaElementAndState||t._isMediaElementPaused(t._mediaElementAndState.element)||(t._logger.debug("Calling play() because something external called play() on media element."),t.play())}),this._listenTo("playing",function(){t._logger.debug("Media element playing event."),t._mediaElementAndState&&!t._isMediaElementPaused(t._mediaElementAndState.element)?t._handlePlayingEvent():t._logger.debug("Ignoring playing event because media element is reporting it is paused.")}),this._listenTo("timeupdate",function(){return t._determineIfPlaying()}),this._listenTo("pause",function(){t._logger.debug("Media element pause event."),t._mediaElementAndState&&t._isMediaElementPaused(t._mediaElementAndState.element)?t._handlePauseEvent():t._logger.debug("Ignoring pause event because media element is reporting it is not paused.")}),this._listenTo("ended",function(){t._logger.debug("Media element ended event."),t._mediaElementAndState&&t._mediaElementAndState.element.ended?t._handleEndedEvent():t._logger.debug("Ignoring ended event because media element is reporting it is not ended.")}),this._listenTo("stalled",function(){t._logger.debug("Media element stalled event."),t._checkIfStalled()}),this._listenTo("volumechange",function(){t._mediaElementAndState&&t._notifyVolumeChangeFromMediaEl(t._mediaElementAndState.element)}),this._stallCheckTimerId=window.setInterval(function(){return t._checkIfStalled()},400),this._deferredProvideMediaElementCallback&&this._deferredProvideMediaElementCallback()},e.prototype._handleDurationChange=function(){var e=this,t=this._duration;null!==t&&this._update(function(){e._provideDuration(t),e._mediaElementAndState&&"STABLE"===e._mediaElementAndState.state&&(e._signalReady(),e._handleDeferredPauseAndSeek())})},e.prototype._createDefaultMediaElement=function(){return document.createElement(this._playerDependencies.mediaElementType||"audio")},e.prototype._handlePauseEvent=function(){var e=this;if(!this._mediaElementAndState)throw new Error("Media element should exist.");var t=this._mediaElementAndState.element;this.isActuallyPlaying()&&this._update(function(){t.ended||(e._notifyNotStalled(),e._completeCurrentFade(),e._completeSeekFadeOutAndIn(),e._notifyPlaying(!1))})},e.prototype._handlePlayingEvent=function(){var e=this,t=this._duration;if(null===t)throw new Error("Expecting duration to exist.");var r=this._getTruePosition();return t<=r?void this._logger.warn("Got a media element playing event and the positon was >= the duration.",r,t):this.isEnded()||this._shouldBeEnded()?void this._logger.warn("Got a media element playing event when the player is/should be ended."):void this._update(function(){e._notifyNotStalled(),e._determineIfPlaying(),e.isActuallyPlaying()||(e._playDetectionTimerNumAttempts=0,e._playDetectionTimer||(e._playDetectionTimer=window.setInterval(function(){return e._determineIfPlaying()},10)))})},e.prototype._handleEndedEvent=function(){return null!==this._getQueuedSeekPosition()?void this._logger.warn("Got a media element ended event but ignoring because a seek is in progress."):void this._update()},e.prototype._shouldBeEnded=function(){return this._endedOverride||this._mediaElementReportingEnded()},e.prototype._mediaElementReportingEnded=function(){return!!(this._mediaElementAndState&&this._mediaElementAndState.element.ended&&this._mediaElementAndState.element.paused)},e.prototype._handleDurationUpdates=function(){var e=this;this._listenToOnce("loadedmetadata",function(){return e._updateDurationFromMediaElement()},{reattach:!0,earlyAttach:!0}),this._listenTo("durationchange",function(){return e._updateDurationFromMediaElement()})},e.prototype._updateDurationFromMediaElement=function(){var e=this._mediaElementAndState;e&&(this._duration=1e3*e.element.duration,this._handleDurationChange())},e.prototype._handlePlayPauseChange=function(e,t){var r=this,n=t.fadeRate;this._fadeRate=n||null;var i,o=function(){r._mediaElementAndState&&"USABLE"===r._mediaElementAndState.state&&r._callMediaElementPause(r._mediaElementAndState.element),r._notifyFading(!1),r._completeSeekFadeOutAndIn(),r._notifyPlaying(!1)};this.isEnded()?e?this._notifyPlaying(!0):o():this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&(i=this._playInProgress.inProgress||!this._isMediaElementPaused(this._mediaElementAndState.element),e&&!i?(this._fadeManagers&&this._fadeManagers.pausePlay.performFade(-1/0),this._playDetectionPosition=this._getTruePosition(),this._play(function(e){return r._notifyPlayRejection(e)})):!e&&i?this._update(function(){r._fadeManagers&&r._fadeManagers.pausePlay.getDirection()===h.FadeDirection.UP?(r._notifyFading(!0),r._fadeManagers.pausePlay.performFade(n||-1/0,o)):o()}):e&&i?this._update(function(){r._fadeManagers&&r._fadeManagers.pausePlay.getDirection()===h.FadeDirection.DOWN&&r._fadeManagers.pausePlay.performFade(n||1/0,function(){return r._notifyFading(!1)}),r._notifyPlaying(!0)}):this._notifyPlaying(e))},e.prototype._handleVolumeChange=function(e,t){var r;this._mediaElementAndState?((r=this._mediaElementAndState.element).muted=t,r.volume=e,this._notifyVolumeChangeFromMediaEl(r)):(this._muted=t,this._volume=e,this._notifyVolumeChange(e,t))},e.prototype._handleSeekChange=function(t,e){var r=this,n=e.fadeRate;this._seekFadeRate=n,this._fadeRateAfterSeek=n.afterSeek||1/0;var i,o,s,a=this._mediaElementAndState;a&&"USABLE"===a.state&&(this._onSeekFadeOutCompleted=function(){r._onSeekFadeOutCompleted=null,o&&o.remove(),i&&i.seek.getDirection()===h.FadeDirection.DOWN&&(r._logger.debug("Fade out for seek completed.",t,n),i.seek.performFade(-1/0),r._notifyFadingForSeek(!1));var e=r._mediaElementReportingEnded();r._endedOverride=!1,r._performSeek(t,function(e){return void 0!==e?void r._triggerError(new u.errors.PlayerFatalError("An error occurred when trying to seek.",e)):(t===r._duration&&(r._endedOverride=!0),void r._update(function(){r.isActuallyPlaying()&&r._assumeStalled(),r._signalSeekComplete(),i&&(!r.isActuallyPlaying()||r._fadeRateAfterSeek===1/0||r.isEnded()?i.seek.performFade(1/0):r._notifyFadingForSeek(!0))}))}),e&&r.isPlaying()&&r._play(function(e){r._triggerError(new u.errors.PlayerFatalError("Error when trying to play after seek from end.",e))})},this._fadeEndedHandle&&(this._fadeEndedHandle.remove(),this._fadeEndedHandle=null),i=this._fadeManagers,o=null,s=function(){r._onSeekFadeOutCompleted&&r._onSeekFadeOutCompleted()},this._update(function(){i&&(n.beforeSeek||n.afterSeek)?(r._logger.debug("Fading out ready for seek.",t,n),(i.seek.getDirection()===h.FadeDirection.UP||i.seek.isFading())&&r.isActuallyPlaying()&&n.beforeSeek&&!r._mediaElementReportingEnded()?(r._notifyFadingForSeek(!0),o=r._fadeEndedHandle=r._listenToOnce("ended",s),i.seek.performFade(n.beforeSeek||-1/0,s)):(i.seek.performFade(-1/0),s())):s()}))},e.prototype._performSeek=function(n,i){var o=this,e=this._mediaElementAndState;if(!e)throw new Error("Media element does not exist.");var t=this._currentSeek;t&&(this._currentSeek=null,t.abort());var s,a,l=e.element;l.currentTime!==n/1e3?(s=0,(a=function(){var e=[];try{l.currentTime=n/1e3}catch(e){o._logger.warn("Error when trying to seek.",e,n)}o._playDetectionPosition=1e3*l.currentTime;var t=window.setTimeout(function(){o._logger.warn("Seek attempt failed. Retrying...",n,s),r(),a()},R(++s));e.push(o._listenToOnce("seeking",function(){window.clearTimeout(t)},{earlyAttach:!0})),e.push(o._listenToOnce("seeked",function(){var e=1e3*l.currentTime;Math.abs(e-n)<=100?(o._currentSeek&&(o._currentSeek.abort(),o._currentSeek=null),i()):(o._logger.warn("Seek attempt failed. Incorect position. Retrying...",e,n),r(),a())},{earlyAttach:!0}));var r=function(){e.forEach(function(e){return e.remove()}),window.clearTimeout(t)};o._currentSeek={abort:r}})()):i()},e.prototype._getPosition=function(){var e=null!==this._duration?this._duration:1/0;if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)return this._positionWhenMediaElementRevoked;this._determineIfPlaying();var t=Math.min(this._getTruePosition(),e);return this._shouldBeEnded()?e:t},e.prototype._getTruePosition=function(){if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)throw new Error("Media element does not exist or is in invalid state.");var e=this._mediaElementAndState.element;return 1e3*e.currentTime},e.prototype._kill=function(){window.clearTimeout(this._canPlayTimer),this._playDetectionTimer&&window.clearInterval(this._playDetectionTimer),this._mediaElementAndState&&this.revokeMediaElement(),this._stallCheckTimerId&&window.clearInterval(this._stallCheckTimerId),this._webAudioOrchestration&&this._webAudioOrchestration.gainNodes.glitchCoverup.disconnect(this._webAudioOrchestration.context.destination),this._listeners=[]},e.prototype._listenToOnce=function(e,t,r){void 0===r&&(r={});var n=r.reattach,i=r.earlyAttach;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=this._listenTo(e,function(e){o.remove(),t(e)},{reattach:n,earlyAttach:i});return o},e.prototype._listenTo=function(r,n,e){var i=this;void 0===e&&(e={});var t=e.reattach,o=e.earlyAttach;void 0===t&&(t=!0),void 0===o&&(o=!1);var s=function(e){if(a.attachedToElement)switch(r){case"play":var t=i._mediaElPlayShouldBeAborted.get(a.attachedToElement);if(i._mediaElPlayShouldBeAborted.delete(a.attachedToElement),t){i._logger.warn("Calling pause() on media element because the play request should have been rejected."),a.attachedToElement.pause();break}default:n(e)}else i._logger.warn("Got media element event after handler was removed. Ignoring.",e)},a={attachedToElement:null,handler:s,eventType:r,once:!1,reattach:t,earlyAttach:o};if(this._listeners.push(a),!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state&&!o)return{remove:function(){var e=i._listeners.indexOf(a);0<=e&&i._listeners.splice(e,1)}};var l=this._mediaElementAndState.element;return l.addEventListener(r,s,!1),a.attachedToElement=l,{remove:function(){var e=i._listeners.indexOf(a);0<=e&&(i._listeners.splice(e,1),a.attachedToElement=null,l.removeEventListener(r,s,!1))}}},e.prototype._notifyNotStalled=function(){this._stallDetected=!1,this._lastStallCheckPos=null,this._handleStalled()},e.prototype._assumeStalled=function(){this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&(this._lastStallCheckPos=this._mediaElementAndState.element.currentTime,this._timeWhenPositionChanged=0,this._stallDetected=!0,this._handleStalled())},e.prototype._initMediaElement=function(e,t){this._initMediaElementLocal(e,t)},e.prototype._callMediaElementPlay=function(e){var t=this;S.isEdge()&&this._mediaElPlayShouldBeAborted.set(e,!1);var r=this._mediaElPaused.get(e);r&&(r.paused=!1);var n=this._mediaElPlayTracker={},i=e.play();return r&&i&&i.catch&&i.catch(function(){n===t._mediaElPlayTracker&&(r.paused=!0)}),i},e.prototype._callMediaElementPause=function(e){this._playInProgress.inProgress=!1,S.isEdge()&&this._mediaElPlayShouldBeAborted.has(e)&&this._mediaElPlayShouldBeAborted.set(e,!0);var t=this._mediaElPaused.get(e);t&&(t.paused=!0),e.pause()},e.prototype._isMediaElementPaused=function(e){var t=this._mediaElPaused.get(e);return!t||t.paused},e.prototype._completeCurrentFade=function(){var e=this._fadeManagers;e&&(e.pausePlay.performFade(this.isPlaying()?1/0:-1/0),this.isDead()||this._notifyFading(!1))},e.prototype._completeSeekFadeOutAndIn=function(){var e=this,t=this._fadeManagers;t&&this._update(function(){t.seek.performFade(1/0),e.isDead()||(e._notifyFadingForSeek(!1),e._onSeekFadeOutCompleted&&e._onSeekFadeOutCompleted())})},e.prototype._determineIfPlaying=function(){var e=this;this._playDetectionTimer&&(!this.isPlaying()||200<=++this._playDetectionTimerNumAttempts)&&(window.clearInterval(this._playDetectionTimer),this._playDetectionTimer=null),this._update(function(){e._mediaElementAndState&&"USABLE"===e._mediaElementAndState.state&&(e.isDead()||!e.isReady()||!e.isPlaying()||e.isActuallyPlaying()||e._isMediaElementPaused(e._mediaElementAndState.element)||e._getTruePosition()===e._playDetectionPosition||(e._logger.debug("Detected that playback has started."),e._playDetectionTimer&&(window.clearInterval(e._playDetectionTimer),e._playDetectionTimer=null),e._notifyPlaying(!0),e._fadeManagers&&(e._notifyFading(!0),e._fadeManagers.pausePlay.performFade(e._fadeRate||1/0,function(){return e._notifyFading(!1)}))))})},e.prototype._initMediaElementLocal=function(e,t){var r,n,i,o;e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e.removeAttribute("src"),e.load(),this._activateWebAudio(),this._pauseEventTimer&&(this._logger.debug("Clearing pause event timer."),window.clearTimeout(this._pauseEventTimer),this._pauseEventTimer=null),this._webAudioOrchestration&&this._webAudioOrchestration.mediaElementSource&&(this._logger.debug("Disconnecting media element from gain node."),this._webAudioOrchestration.mediaElementSource.disconnect(this._webAudioOrchestration.gainNodes.pausePlay),this._webAudioOrchestration.mediaElementSource=void 0),this._currentSeek&&(this._logger.debug("Aborting seek attempt."),this._currentSeek.abort(),this._currentSeek=null),t&&(this._webAudioOrchestration&&(this._logger.debug("Adding crossorigin attribute to media element because fading enabled."),e.setAttribute("crossorigin","anonymous")),r=this._getUrlForMediaElement(),this._logger.debug("Setting media element src.",r),e.src=r,e.volume=this._volume,e.muted=this._muted,this._webAudioOrchestration&&this._fadeManagers&&(this._logger.debug("Creating media element source node..."),(n=T.get(e))?this._logger.debug("Reusing media element source node."):(n=this._webAudioOrchestration.context.createMediaElementSource(e),T.set(e,n)),(this._webAudioOrchestration.mediaElementSource=n).connect(this._webAudioOrchestration.gainNodes.pausePlay),this._logger.debug("Created media element source node."),this._shouldCoverGlitch&&(i=this._webAudioOrchestration.context.currentTime,(o=this._webAudioOrchestration.gainNodes.glitchCoverup).gain.setValueAtTime(0,i),o.gain.setValueAtTime(1,i+.1),this._shouldCoverGlitch=!1))),e.playbackRate=1,e.setAttribute("preload","metadata"),this._callMediaElementPause(e),e.load()},e.prototype._addPausedHandlers=function(e){var t={removeListeners:function(){e.removeEventListener("play",r),e.removeEventListener("playing",r),e.removeEventListener("pause",r),e.removeEventListener("ended",r)},paused:!1},r=function(){t.paused=e.paused};r(),e.addEventListener("play",r),e.addEventListener("playing",r),e.addEventListener("pause",r),e.addEventListener("ended",r),this._mediaElPaused.set(e,t)},e.prototype._removePausedHandlers=function(e){var t=this._mediaElPaused.get(e);t&&t.removeListeners(),this._mediaElPaused.delete(e)},e.prototype._checkIfStalled=function(){var e,t,r;this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&this.isActuallyPlaying()&&(e=this._mediaElementAndState.element,t=e.currentTime,r=u.helpers.time.now(),t!==this._lastStallCheckPos&&(this._timeWhenPositionChanged=r),this._stallDetected=e.readyState<=2||this._timeWhenPositionChanged<=r-500,this._lastStallCheckPos=t,this._handleStalled())},e.prototype._handleStalled=function(){this._shouldBeEnded()&&null===this._getQueuedSeekPosition()?this.isEnded()||(this._logger.debug("Updating because stalled near end."),this._update()):this._notifyStalled(this._stallDetected||!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)},e.prototype._play=function(t){var r=this,e=this._activateWebAudio(),n={inProgress:!0};this._playInProgress=n,this._mediaElementPlay().then(function(){n.inProgress=!1,e.catch(function(e){r._logger.error("Error activating web audio.",e),e===y.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR?r._triggerError(new d.WebAudioActivationTimeoutError):r._triggerError(new g.WebAudioActivationError)})}).catch(function(e){return r._playInProgress!==n?void r._logger.debug("Ignoring play error because paused since.",e):(n.inProgress=!1,void(t&&t(e)))})},e.prototype._mediaElementPlay=function(){var n=this;if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");if(this._mediaElementReportingEnded())return this._logger.debug("Not calling play() because we are at the end. It will be called after a seek."),E.resolve();var e=this._mediaElementAndState.element,i=this._callMediaElementPlay(e);return new E(function(t,r){i?(i=i.then(function(){return t()})).catch&&(i=i.catch(function(e){"AbortError"===e.name?(n._logger.debug("Media element play() promise rejected with AbortError."),t()):r(e)})):t()})},e.prototype._notifyVolumeChangeFromMediaEl=function(e){this._volume=e.volume,this._muted=e.muted,this._notifyVolumeChange(e.volume,e.muted)},e.prototype._initWebAudio=function(){try{var e=this._webAudioContext.getAudioContextWithSuspender();if(!e)return this._logger.debug("WebAudio not supported/enabled."),null;this._logger.debug("WebAudio supported.");var t=e.context,r=e.suspender;r.watchPlayer(this);var n=t.createGain(),i=t.createGain(),o=t.createGain();return n.connect(i),i.connect(o),o.connect(t.destination),{context:t,suspender:r,gainNodes:{glitchCoverup:o,pausePlay:n,seek:i}}}catch(e){return e===y.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR?this._triggerError(new m.WebAudioInitializeNoChannelsError(e)):this._triggerError(new f.WebAudioInitializeError(e)),this._logger.error("Failed initializing web audio.",e),null}},e.prototype._activateWebAudio=function(){return this._webAudioOrchestration?this._webAudioContext.activate():E.resolve(void 0)},e.prototype._handleDeferredPauseAndSeek=function(){var r=this;if(!this._mediaElementAndState||"STABLE"!==this._mediaElementAndState.state)throw new Error("Media element must be in the STABLE state.");this._logger.debug("Handling deferred pause and seek..."),this._mediaElementAndState.state="USABLE",this._attachListeners(),this._update(function(){r._handleStalled();var e,t=r._getQueuedSeekPosition();null!==t&&(e=r._seekFadeRate?r._seekFadeRate.afterSeek:void 0,r._handleSeekChange(t,{fadeRate:{afterSeek:e}})),r.isPlaying()!==r.isActuallyPlaying()&&r._handlePlayPauseChange(r.isPlaying(),{fadeRate:r._fadeRate||void 0})})},e.prototype._detachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");var t=this._mediaElementAndState.element;this._listeners.forEach(function(e){e.attachedToElement&&(e.attachedToElement=null,t.removeEventListener(e.eventType,e.handler,!1))}),this._listeners=this._listeners.filter(function(e){return e.reattach})},e.prototype._attachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");this._logger.debug("Attaching listeners...");var e=this._mediaElementAndState,t=e.element,r=e.state;this._listeners.forEach(function(e){e.attachedToElement||!e.reattach||"USABLE"!==r&&!e.earlyAttach||(t.addEventListener(e.eventType,e.handler,!1),e.attachedToElement=t)}),this._logger.debug("Attached listeners.")},e}(u.BasePlayer);t.HTML5PlayerBase=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(1);!function(e){!function(e){e.buildTimeRanges=n.buildTimeRanges}(e.timeRanges||(e.timeRanges={})),function(e){e.buildMimeTypeFromFormat=i.buildMimeTypeFromFormat}(e.mimeType||(e.mimeType={}))}(t.helpers||(t.helpers={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(9),o=r(7),s=r(2),a=r(5),l=r(3),u=r(6);!function(e){e.DecodeError=n.DecodeError,e.NetworkError=i.NetworkError,e.MediaElementError=o.MediaElementError,e.WebAudioInitializeError=s.WebAudioInitializeError,e.WebAudioInitializeNoChannelsError=a.WebAudioInitializeNoChannelsError,e.WebAudioActivationError=l.WebAudioActivationError,e.WebAudioActivationTimeoutError=u.WebAudioActivationTimeoutError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(11),s=r(1),a=n.helpers.Promise,l=function(n){function e(e,t){var r=n.call(this,t)||this;return r._descriptor=e,r._mimeType=e.format.mimeType||s.buildMimeTypeFromFormat(e.format,r._inferFormat(e.url)),r}return i(e,n),e.prototype._getUrlForMediaElement=function(){return this._descriptor.url},e.prototype._canPlay=function(){return this._mimeType&&this._canPlayType(this._mimeType)?a.resolve(!0):a.resolve(!1)},e}(o.HTML5PlayerBase);t.HTML5Player=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===t&&(t=2e4),this._audioContext=e,this._idleTime=t,this._players=[],this._prevPlayingCount=0,this._playingCount=0,this._timerId=null,this._suspendTimerId=null,this._suspendSupported="function"==typeof e.suspend}return e.prototype.watchPlayer=function(i){var o=this;!this._suspendSupported||i.isDead()||0<=this._players.indexOf(i)||(i.onChange.subscribe(function(e){var t,r=e.dead,n=e.playing;void 0!==n&&o._handleCountChange(n),r&&0<=(t=o._players.indexOf(i))&&(o._players.splice(t,1),!o._players.length&&o._suspendTimerId&&(window.clearInterval(o._suspendTimerId),o._suspendTimerId=null))}),this._players.length||(this._suspendTimerId=window.setInterval(function(){0===o._playingCount&&null===o._timerId&&"suspended"!==o._audioContext.state&&o._scheduleSuspend(5e3)},5e3)),this._players.push(i),i.isPlaying()&&this._handleCountChange(!0))},e.prototype._handleCountChange=function(e){e?this._playingCount++:this._playingCount--,this._playingCount!==this._prevPlayingCount&&(this._prevPlayingCount=this._playingCount,0===this._playingCount?this._scheduleSuspend(this._idleTime):1===this._playingCount&&this._abortSuspend())},e.prototype._scheduleSuspend=function(e){var t=this;this._timerId=window.setTimeout(function(){t._timerId=null,t._audioContext.suspend()},e)},e.prototype._abortSuspend=function(){this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null)},e}();t.WebAudioContextSuspender=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred when initializing the media element.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.INITIALIZE_ERROR"},e}(i.errors.PlayerFatalError);t.InitializeError=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(n=t.FadeDirection||(t.FadeDirection={}));var i=function(){function e(e,t){this._context=e,this._gain=t,this._currentFade={startTime:0,startValue:1,rate:0},this._fadeEndTimer=null}return e.prototype.isFading=function(){return!!this._fadeEndTimer},e.prototype.getDirection=function(){var e=this._currentFade,t=e.rate,r=e.startValue;return 0===t?0===r?n.DOWN:n.UP:t<0?n.DOWN:n.UP},e.prototype.performFade=function(e,t){var r=this;if(0===e)throw new Error("Rate cannot be 0.");this._fadeEndTimer&&window.clearTimeout(this._fadeEndTimer);var n,i,o,s,a,l=this._context.currentTime,u=this._gain;e===1/0||e===-1/0?(u.gain.cancelScheduledValues(l),n=e===1/0?1:0,u.gain.setValueAtTime(n,l),this._currentFade={startTime:l,startValue:n,rate:0},this._fadeEndTimer=null,t&&t()):(i=this._currentFade,o=function(e,t,r){return Math.min(t,Math.max(e,r))}(0,1,i.startValue+1e3*i.rate*(l-i.startTime)),s=(0<e?1-o:o)*(1/Math.abs(1e3*e)),a=l+s,this._currentFade={startTime:l,rate:e,startValue:o},u.gain.cancelScheduledValues(l),u.gain.setValueAtTime(o,l),u.gain.linearRampToValueAtTime(0<e?1:0,a),this._fadeEndTimer=window.setTimeout(function(){r._fadeEndTimer=null,t&&t()},1e3*s))},e}();t.FadeManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(11);t.HTML5PlayerBase=n.HTML5PlayerBase;var i=r(14);t.HTML5Player=i.HTML5Player;var o=r(13);t.errors=o.errors;var s=r(12);t.helpers=s.helpers;var a=r(4);t.WebAudioContext=a.WebAudioContext}]))},function(e,t,r){var n,i,o,s,a,l;window,e.exports=(n=r(6),i=r(10),o=r(11),s=r(2),a=r(3),l=r(1),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t){e.exports=l},function(e,t,r){"use strict";function m(e){return e.match(a)[0]}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),g=r(4),y=r(3),o=r(2),s=r(1),v=r(0),a=/^[^\?#]*/,l=function(r){function e(e){var t=r.call(this)||this;return t._mediaElementManager=e,t.name="MaestroHLSMSE",t}return n(e,r),e.prototype.isRenditionSupported=function(e){return-1!==["hls","encrypted-hls"].indexOf(e.scProtocol)&&v.HLSMSEPlayer.isFormatSupported(e.maestroSegmentFormat||{})},e.prototype.buildPlayer=function(e){return new u(e,this._mediaElementManager)},e}(i.BaseController);t.HLSMSEPlayerController=l;var u=function(){function e(e,t){var n=this;this._config=e,this._mediaElementManager=t,this._urlRefreshRetrieveHandle=null;var i=e.logger,r=e.playerId,o=e.urlAndRendition,s=e.streamUrlExpires,a=e.reportError,l=e.fadeOnPauseAndPlay,u=e.fadeOnSeek,h=e.releaseControl,c=e.getNewUrl;this._currentUrl=o.url;var p=o.rendition.maestroSegmentFormat||{},d=this._buildPlaylist(o.url),f=this._player=new v.HLSMSEPlayer({playlist:d,segmentFormat:p},{name:r,mediaElement:null,fadeSupportEnabled:l||u,defaultFadeDuration:l?void 0:0,defaultSeekFadeInDuration:u?void 0:0,defaultSeekFadeOutDuration:u?void 0:0,logger:i,registerListeners:function(e){var t=e.onError,r=e.onChange;t.subscribe(function(e){if(s){if(e instanceof y.errors.URLUpdateError)return i.error("URL refresh failed for some reason.",e),void h({retry:!0});if(n._isErrorWhichShouldTriggerURLRefresh(e)){if(n._urlRefreshRetrieveHandle)return void i.debug("Got a 403 status code, but URL refresh already in progress.");i.info("Got a 403 status code. Peforming a URL refresh...");var t=n._urlRefreshRetrieveHandle=c();return void t.whenComplete().then(function(e){n._urlRefreshRetrieveHandle=null,e?m(e)!==m(n._currentUrl)?(i.warn("Got a new URL but the rendition did not match the original."),h({retry:!1})):(n._currentUrl=e,i.info("Got a new URL. Updating..."),f.switchPlaylist(n._buildPlaylist(e))):(i.warn("Could not get a new URL."),h({retry:!1}))}).catch(function(e){i.error("Unexpected error when trying to retrieve a new URL.",e),h({retry:!1})})}}a(e.getCode()),g.HTML5PlayerController.errorQualifiesAbort(e)&&h({retry:!1})}),r.subscribe(function(e){var t=e.dead;t&&(n._urlRefreshRetrieveHandle&&(n._urlRefreshRetrieveHandle.abort(),n._urlRefreshRetrieveHandle=null),h({retry:!1}))})}});this._mediaElementManager.registerPlayer(f,function(){return h({retry:!1})})}return e.prototype.getPlayer=function(){return this._player},e.prototype.getUrl=function(){return this._currentUrl},e.prototype._buildPlaylist=function(e){var t=new o.ArrayBufferLoader({fetchEnabled:this._config.fetchEnabled});return new s.PlaylistHLS({url:e,playlistLoader:o.stringLoader,segmentLoader:t,keyLoader:t,segmentFormat:this._config.urlAndRendition.rendition.maestroSegmentFormat||{},logger:this._config.logger})},e.prototype._isErrorWhichShouldTriggerURLRefresh=function(e){if(e instanceof v.errors.RetrievalError){var t=e.getCause();if(t instanceof v.retrievalErrors.UnacceptableResponseStatusCodeError)return 403===t.getStatusCode()}return!1},e}();t.ControlledPlayer=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(6);t.HLSMSEPlayerController=n.HLSMSEPlayerController;var i=r(0);t.HLSMSEPlayer=i.HLSMSEPlayer}]))},function(e,t,r){var n,i,o;window,e.exports=(n=r(2),i=r(4),o=r(7),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.PLAYLIST_UPDATE_ERROR"},t}(i.errors.PlayerFatalError);t.PlaylistUpdateError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"A transmuxer could not be found.")||this}return n(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR"},t}(i.errors.NotSupportedError);t.NoTransmuxerError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e){var t=r.call(this,"An error occurred when trying to retrieve a playlist/segment/key.",e)||this;return t._internalRetrievalError=e,t}return n(e,r),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.RETRIEVAL_ERROR."+this._internalRetrievalError.getCode()},e}(i.errors.PlayerError);t.RetrievalError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred trying to initialize the buffer.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.INITIALIZE_ERROR"},e}(i.errors.PlayerFatalError);t.InitializeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred trying to append to the buffer.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.APPEND_ERROR"},e}(i.errors.PlayerError);t.AppendError=o},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(4),o=r(1),s=r(2),a=r(3);!function(e){e.AppendError=n.AppendError,e.InitializeError=i.InitializeError,e.PlaylistUpdateError=o.PlaylistUpdateError,e.NoTransmuxerError=s.NoTransmuxerError,e.RetrievalError=a.RetrievalError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),s=c.eventDispatcher.EventDispatcher,a=c.logger.prefixLogger,l=c.logger.noOpLogger,n=function(){function e(e,t,r,n,i){void 0===i&&(i=l);var o=this;this._onAppendQueued=new s,this._onAppendEnd=new s,this._needsInitData=!0,this._updateTimerId=null,this._gcTimerId=null,this._waitingForData=!1,this._started=!1,this._error=null,this._currentRetrieveHandle=null,this._logger=a(i,"SimpleMSE"),this.onAppendQueued=this._onAppendQueued.getHandle(),this.onAppendEnd=this._onAppendEnd.getHandle(),this._mse=e,this._getNextSegmentData=t,this._getPosition=r,this._onError=n,e.whenInitialized().then(function(){!o._error&&o._started&&(o._logger.debug("MSE initialized. Preparing to update."),o._prepareUpdate())}).catch(function(e){o._error||(o._logger.error("Error when waiting for MSE to initialize.",e),o._handleError(e||new Error("Error waiting for MSE to initialize.")))})}return e.prototype.start=function(){if(this._checkNotErrored(),this._started)throw new Error("Already started.");this._logger.debug("start() called."),this._scheduleGC(),this._started=!0,this._prepareUpdate()},e.prototype.kill=function(){this._error||(this._logger.debug("kill() called."),this._error=new Error("Killed."),this._clearTimers(),this._logger.debug("Killed."))},e.prototype.waitingForSegmentData=function(){return this._checkNotErrored(),this._waitingForData},e.prototype.provideNextSegmentData=function(e){if(this._checkNotErrored(),!this._waitingForData)throw new Error("Not waiting for data.");this._logger.debug("Segment data provided."),this._waitingForData=!1,this._update(e)},e.prototype._prepareUpdate=function(){var e,t;this._updateTimerId||(e=this._mse).hasInitialized()&&(c.TimeRange.getCoverage(e.getBuffered()).end<=this._getPosition()+15e3?(this._logger.debug("Requesting next segment data."),(t=this._getNextSegmentData())?(this._logger.debug("Got segment data."),this._update(t)):(this._logger.debug("Did not get any data."),this._waitingForData=!0)):this._scheduleUpdate())},e.prototype._gc=function(){var e,t,r,n=this,i=this._mse;i.hasInitialized()?(e=c.TimeRange.getCoverage(i.getBuffered()),t=this._getPosition()-5e3,e.start<t?(r=new c.TimeRange(e.start,t-e.start),this._logger.debug("Removing media that has been played.",r),i.remove(r).then(function(){n._logger.debug("Removed media that has been played.",r),n._error||n._scheduleGC()}).catch(function(e){n._logger.error("Error when attempting to remove media that has been played.",r,e),n._error||n._scheduleGC()})):this._scheduleGC()):this._scheduleGC()},e.prototype._update=function(e){var r=this,t=e.data,n=e.eventRepresentation,i=this._mse;this._onAppendQueued.dispatch({segment:n}),this._logger.debug("Appending...",n);var o=[],s=!1,a=!1,l=!1,u=this._currentRetrieveHandle=t.run(),h=function(){var e;s||r._error||((e=o.shift())&&!e.byteLength?(r._logger.warn("Got 0 bytes to append. Skipping..."),h()):e?(s=!0,r._logger.debug("Appending part...",n,e.byteLength),i.append(e).then(function(){a=!(s=!1),h()}).catch(function(e){r._error||(r._logger.error("Error updating MSE.",e,n),r._handleError(e||new Error("Error updating MSE.")))})):l&&(r._logger.debug("Append finished.",n),a||r._logger.warn("There was nothing to append."),r._currentRetrieveHandle=null,r._onAppendEnd.dispatch({segment:n}),r._prepareUpdate()))};u.onProgressUpdate(function(e){var t;t=r._needsInitData&&e.initData?c.helpers.arrayBuffer.combine([e.initData,e.data]):e.data,r._needsInitData=!1,o.push(t),h()}),u.onError(function(e){r._error||(r._logger.error("Error whilst retrieving data.",e,n),r._handleError(e||new Error("Error retrieving data for MSE.")))}),u.onCompletion(function(){r._logger.debug("Got all data for append.",n),l=!0,h()})},e.prototype._scheduleUpdate=function(){var e=this;this._updateTimerId=window.setTimeout(function(){e._updateTimerId=null,e._prepareUpdate()},500)},e.prototype._scheduleGC=function(){var e=this;this._gcTimerId||(this._gcTimerId=window.setTimeout(function(){e._gcTimerId=null,e._gc()},2e4))},e.prototype._checkNotErrored=function(){if(this._error)throw this._error},e.prototype._clearTimers=function(){this._updateTimerId&&(this._logger.debug("Clearing update timer."),window.clearTimeout(this._updateTimerId),this._updateTimerId=null),this._gcTimerId&&(window.clearTimeout(this._gcTimerId),this._gcTimerId=null),this._currentRetrieveHandle&&(this._currentRetrieveHandle.abort(),this._currentRetrieveHandle=null)},e.prototype._handleError=function(e){this._error||(this._error=e,this._logger.error("Error occurred.",e),this._clearTimers(),this._onError(e))},e}();t.SimpleMSE=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r,t){(function(e){var t,X=function(u){"use strict";function d(e,t){return void 0===e?d[0]:void 0===t||10==+t?L(e):K(e,t)}function f(e,t){this.value=e,this.sign=t,this.isSmall=!1}function m(e){this.value=e,this.sign=e<0,this.isSmall=!0}function p(e){return-j<e&&e<j}function g(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function y(e){v(e);var t=e.length;if(t<4&&T(e,z)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*N;default:return e[0]+(e[1]+e[2]*N)*N}return e}function v(e){for(var t=e.length;0===e[--t];);e.length=t+1}function _(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function b(e){return 0<e?Math.floor(e):Math.ceil(e)}function r(e,t){var r,n,i=e.length,o=t.length,s=new Array(i),a=0,l=N;for(n=0;n<o;n++)r=e[n]+t[n]+a,a=l<=r?1:0,s[n]=r-a*l;for(;n<i;)r=e[n]+a,a=r===l?1:0,s[n++]=r-a*l;return 0<a&&s.push(a),s}function E(e,t){return e.length>=t.length?r(e,t):r(t,e)}function i(e,t){var r,n,i=e.length,o=new Array(i),s=N;for(n=0;n<i;n++)r=e[n]-s+t,t=Math.floor(r/s),o[n]=r-t*s,t+=1;for(;0<t;)o[n++]=t%s,t=Math.floor(t/s);return o}function S(e,t){var r,n,i=e.length,o=t.length,s=new Array(i),a=0,l=N;for(r=0;r<o;r++)n=e[r]-a-t[r],a=n<0?(n+=l,1):0,s[r]=n;for(r=o;r<i;r++){if(!((n=e[r]-a)<0)){s[r++]=n;break}n+=l,s[r]=n}for(;r<i;r++)s[r]=e[r];return v(s),s}function o(e,t,r){var n,i,o=e.length,s=new Array(o),a=-t,l=N;for(n=0;n<o;n++)i=e[n]+a,a=Math.floor(i/l),i%=l,s[n]=i<0?i+l:i;return"number"==typeof(s=y(s))?(r&&(s=-s),new m(s)):new f(s,r)}function w(e,t){var r,n,i,o,s,a=e.length,l=t.length,u=a+l,h=_(u),c=N;for(i=0;i<a;++i){o=e[i];for(var p=0;p<l;++p)s=t[p],r=o*s+h[i+p],n=Math.floor(r/c),h[i+p]=r-n*c,h[i+p+1]+=n}return v(h),h}function x(e,t){var r,n,i=e.length,o=new Array(i),s=N,a=0;for(n=0;n<i;n++)r=e[n]*t+a,a=Math.floor(r/s),o[n]=r-a*s;for(;0<a;)o[n++]=a%s,a=Math.floor(a/s);return o}function P(e,t){for(var r=[];0<t--;)r.push(0);return r.concat(e)}function t(e,t,r){return new f(e<N?x(t,e):w(t,g(e)),r)}function n(e){var t,r,n,i,o,s=e.length,a=_(s+s),l=N;for(n=0;n<s;n++){i=e[n],r=0-i*i;for(var u=n;u<s;u++)o=e[u],t=i*o*2+a[n+u]+r,r=Math.floor(t/l),a[n+u]=t-r*l;a[n+s]=r}return v(a),a}function C(e,t){var r,n,i,o,s=e.length,a=_(s),l=N;for(i=0,r=s-1;0<=r;--r)o=i*l+e[r],n=b(o/t),i=o-n*t,a[r]=0|n;return[a,0|i]}function A(e,t){var r,n,i=L(t),o=e.value,s=i.value;if(0===s)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new m(b(o/s)),new m(o%s)]:[d[0],e];if(i.isSmall){if(1===s)return[e,d[0]];if(-1==s)return[e.negate(),d[0]];var a=Math.abs(s);if(a<N){r=C(o,a),n=y(r[0]);var l=r[1];return e.sign&&(l=-l),"number"==typeof n?(e.sign!==i.sign&&(n=-n),[new m(n),new m(l)]):[new f(n,e.sign!==i.sign),new m(l)]}s=g(a)}var u=T(o,s);if(-1===u)return[d[0],e];if(0===u)return[d[e.sign===i.sign?1:-1],d[0]];r=(o.length+s.length<=200?function(e,t){var r,n,i,o,s,a,l,u=e.length,h=t.length,c=N,p=_(t.length),d=t[h-1],f=Math.ceil(c/(2*d)),m=x(e,f),g=x(t,f);for(m.length<=u&&m.push(0),g.push(0),d=g[h-1],n=u-h;0<=n;n--){for(r=c-1,m[n+h]!==d&&(r=Math.floor((m[n+h]*c+m[n+h-1])/d)),o=i=0,a=g.length,s=0;s<a;s++)i+=r*g[s],l=Math.floor(i/c),o+=m[n+s]-(i-l*c),i=l,o=o<0?(m[n+s]=o+c,-1):(m[n+s]=o,0);for(;0!==o;){for(--r,s=i=0;s<a;s++)i=(i+=m[n+s]-c+g[s])<0?(m[n+s]=i+c,0):(m[n+s]=i,1);o+=i}p[n]=r}return m=C(m,f)[0],[y(p),y(m)]}:function(e,t){for(var r,n,i,o,s,a=e.length,l=t.length,u=[],h=[],c=N;a;)if(h.unshift(e[--a]),v(h),T(h,t)<0)u.push(0);else{n=h.length,i=h[n-1]*c+h[n-2],o=t[l-1]*c+t[l-2],l<n&&(i=(i+1)*c),r=Math.ceil(i/o);do{if(T(s=x(t,r),h)<=0)break;r--}while(r);u.push(r),h=S(h,s)}return u.reverse(),[y(u),y(h)]})(o,s),n=r[0];var h=e.sign!==i.sign,c=r[1],p=e.sign;return n="number"==typeof n?(h&&(n=-n),new m(n)):new f(n,h),c="number"==typeof c?(p&&(c=-c),new m(c)):new f(c,p),[n,c]}function T(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;0<=r;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function h(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(25)||void 0))}function s(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=N||e instanceof f&&e.value.length<=1}function a(e,t,r){t=L(t);for(var n=e.isNegative(),i=t.isNegative(),o=n?e.not():e,s=i?t.not():t,a=0,l=0,u=null,h=null,c=[];!o.isZero()||!s.isZero();)u=A(o,H),a=u[1].toJSNumber(),n&&(a=H-1-a),h=A(s,H),l=h[1].toJSNumber(),i&&(l=H-1-l),o=u[0],s=h[0],c.push(r(a,l));for(var p=X(0!==r(n?1:0,i?1:0)?-1:0),d=c.length-1;0<=d;--d)p=p.multiply(H).add(X(c[d]));return p}function l(e){var t=e.value,r="number"==typeof t?t|G:t[0]+t[1]*N|W;return r&-r}function c(e,t){return e=L(e),t=L(t),e.greater(t)?e:t}function k(e,t){return e=L(e),t=L(t),e.lesser(t)?e:t}function R(e,t){if(e=L(e).abs(),t=L(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=d[1];e.isEven()&&t.isEven();)r=Math.min(l(e),l(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(l(e));do{for(;t.isEven();)t=t.divide(l(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}function M(e,t,r){var n,i=d[0],o=d[1];for(n=e.length-1;0<=n;n--)i=i.add(e[n].times(o)),o=o.times(t);return r?i.negate():i}function D(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function I(e,t){if((t=X(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var i,o=[],s=e;s.isNegative()||0<=s.compareAbs(t);){s=(i=s.divmod(t)).quotient;var a=i.remainder;a.isNegative()&&(a=t.minus(a).abs(),s=s.next()),o.push(a.toJSNumber())}return o.push(s.toJSNumber()),{value:o.reverse(),isNegative:n}}function F(e,t){var r=I(e,t);return(r.isNegative?"-":"")+r.value.map(D).join("")}function O(e){if(p(+e)){var t=+e;if(t===b(t))return new m(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(2<n.length)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==b(i)||!p(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var o=n[0],s=o.indexOf(".");if(0<=s&&(i-=o.length-s-1,o=o.slice(0,s)+o.slice(s+1)),i<0)throw new Error("Cannot include negative exponent part for integers");o+=new Array(i+1).join("0"),e=o}var a=/^([0-9][0-9]*)$/.test(e);if(!a)throw new Error("Invalid integer: "+e);for(var l=[],u=e.length,h=B,c=u-h;0<u;)l.push(+e.slice(c,u)),(c-=h)<0&&(c=0),u-=h;return v(l),new f(l,r)}function L(e){return"number"==typeof e?function(e){if(p(e)){if(e!==b(e))throw new Error(e+" is not an integer.");return new m(e)}return O(e.toString())}(e):"string"==typeof e?O(e):e}var N=1e7,B=7,j=9007199254740992,z=g(j),U=Math.log(j);f.prototype=Object.create(d.prototype),m.prototype=Object.create(d.prototype),f.prototype.plus=f.prototype.add=function(e){var t=L(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new f(i(r,Math.abs(n)),this.sign):new f(E(r,n),this.sign)},m.prototype.plus=m.prototype.add=function(e){var t=L(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(p(r+n))return new m(r+n);n=g(Math.abs(n))}return new f(i(n,Math.abs(r)),r<0)},f.prototype.minus=f.prototype.subtract=function(e){var t=L(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?o(r,Math.abs(n),this.sign):function(e,t,r){var n;return 0<=T(e,t)?n=S(e,t):(n=S(t,e),r=!r),"number"==typeof(n=y(n))?(r&&(n=-n),new m(n)):new f(n,r)}(r,n,this.sign)},m.prototype.minus=m.prototype.subtract=function(e){var t=L(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new m(r-n):o(n,Math.abs(r),0<=r)},f.prototype.negate=function(){return new f(this.value,!this.sign)},m.prototype.negate=function(){var e=this.sign,t=new m(-this.value);return t.sign=!e,t},f.prototype.abs=function(){return new f(this.value,!1)},m.prototype.abs=function(){return new m(Math.abs(this.value))},f.prototype.times=f.prototype.multiply=function(e){var t,r=L(e),n=this.value,i=r.value,o=this.sign!==r.sign;if(r.isSmall){if(0===i)return d[0];if(1===i)return this;if(-1===i)return this.negate();if((t=Math.abs(i))<N)return new f(x(n,t),o);i=g(t)}return function(e,t){return 0<-.012*e-.012*t+15e-6*e*t}(n.length,i.length)?new f(function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return w(t,r);n=Math.ceil(n/2);var i=t.slice(n),o=t.slice(0,n),s=r.slice(n),a=r.slice(0,n),l=e(o,a),u=e(i,s),h=e(E(o,i),E(a,s)),c=E(E(l,P(S(S(h,l),u),n)),P(u,2*n));return v(c),c}(n,i),o):new f(w(n,i),o)},m.prototype._multiplyBySmall=function(e){return p(e.value*this.value)?new m(e.value*this.value):t(Math.abs(e.value),g(Math.abs(this.value)),this.sign!==e.sign)},f.prototype._multiplyBySmall=function(e){return 0===e.value?d[0]:1===e.value?this:-1===e.value?this.negate():t(Math.abs(e.value),this.value,this.sign!==e.sign)},m.prototype.times=m.prototype.multiply=function(e){return L(e)._multiplyBySmall(this)},f.prototype.square=function(){return new f(n(this.value),!1)},m.prototype.square=function(){var e=this.value*this.value;return p(e)?new m(e):new f(n(g(Math.abs(this.value))),!1)},m.prototype.divmod=f.prototype.divmod=function(e){var t=A(this,e);return{quotient:t[0],remainder:t[1]}},m.prototype.over=m.prototype.divide=f.prototype.over=f.prototype.divide=function(e){return A(this,e)[0]},m.prototype.remainder=m.prototype.mod=f.prototype.remainder=f.prototype.mod=function(e){return A(this,e)[1]},f.prototype.pow=function(e){var t,r,n,i=L(e),o=this.value,s=i.value;if(0===s)return d[1];if(0===o)return d[0];if(1===o)return d[1];if(-1===o)return i.isEven()?d[1]:d[-1];if(i.sign)return d[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&p(t=Math.pow(o,s)))return new m(b(t));for(r=this,n=d[1];!0&s&&(n=n.times(r),--s),0!==s;)s/=2,r=r.square();return n},m.prototype.pow=f.prototype.pow,m.prototype.modPow=f.prototype.modPow=function(e,t){if(e=L(e),(t=L(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=d[1],n=this.mod(t);e.isPositive();){if(n.isZero())return d[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},f.prototype.compareAbs=function(e){var t=L(e),r=this.value,n=t.value;return t.isSmall?1:T(r,n)},m.prototype.compareAbs=function(e){var t=L(e),r=Math.abs(this.value),n=t.value;return t.isSmall?(n=Math.abs(n),r===n?0:n<r?1:-1):-1},f.prototype.compareTo=f.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=L(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:T(r,n)*(this.sign?-1:1)},m.prototype.compareTo=m.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=L(e),r=this.value,n=t.value;return t.isSmall?r==n?0:n<r?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},m.prototype.eq=m.prototype.equals=f.prototype.eq=f.prototype.equals=function(e){return 0===this.compare(e)},m.prototype.neq=m.prototype.notEquals=f.prototype.neq=f.prototype.notEquals=function(e){return 0!==this.compare(e)},m.prototype.gt=m.prototype.greater=f.prototype.gt=f.prototype.greater=function(e){return 0<this.compare(e)},m.prototype.lt=m.prototype.lesser=f.prototype.lt=f.prototype.lesser=function(e){return this.compare(e)<0},m.prototype.geq=m.prototype.greaterOrEquals=f.prototype.geq=f.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},m.prototype.leq=m.prototype.lesserOrEquals=f.prototype.leq=f.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},f.prototype.isEven=function(){return 0==(1&this.value[0])},m.prototype.isEven=function(){return 0==(1&this.value)},f.prototype.isOdd=function(){return 1==(1&this.value[0])},m.prototype.isOdd=function(){return 1==(1&this.value)},f.prototype.isPositive=function(){return!this.sign},m.prototype.isPositive=function(){return 0<this.value},f.prototype.isNegative=function(){return this.sign},m.prototype.isNegative=function(){return this.value<0},f.prototype.isUnit=function(){return!1},m.prototype.isUnit=function(){return 1===Math.abs(this.value)},f.prototype.isZero=function(){return!1},m.prototype.isZero=function(){return 0===this.value},m.prototype.isDivisibleBy=f.prototype.isDivisibleBy=function(e){var t=L(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(d[0])))},m.prototype.isPrime=f.prototype.isPrime=function(){var e=h(this);if(e!==u)return e;for(var t,r,n,i,o=this.abs(),s=o.prev(),a=[2,3,5,7,11,13,17,19],l=s;l.isEven();)l=l.divide(2);for(n=0;n<a.length;n++)if(!(i=X(a[n]).modPow(l,o)).equals(d[1])&&!i.equals(s)){for(r=!0,t=l;r&&t.lesser(s);t=t.multiply(2))(i=i.square().mod(o)).equals(s)&&(r=!1);if(r)return!1}return!0},m.prototype.isProbablePrime=f.prototype.isProbablePrime=function(e){var t=h(this);if(t!==u)return t;for(var r=this.abs(),n=e===u?5:e,i=0;i<n;i++){var o=X.randBetween(2,r.minus(2));if(!o.modPow(r.prev(),r).isUnit())return!1}return!0},m.prototype.modInv=f.prototype.modInv=function(e){for(var t,r,n,i=X.zero,o=X.one,s=L(e),a=this.abs();!a.equals(X.zero);)t=s.divide(a),r=i,n=s,i=o,s=a,o=r.subtract(t.multiply(o)),a=n.subtract(t.multiply(a));if(!s.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},f.prototype.next=function(){var e=this.value;return this.sign?o(e,1,this.sign):new f(i(e,1),this.sign)},m.prototype.next=function(){var e=this.value;return e+1<j?new m(e+1):new f(z,!1)},f.prototype.prev=function(){var e=this.value;return this.sign?new f(i(e,1),!0):o(e,1,this.sign)},m.prototype.prev=function(){var e=this.value;return-j<e-1?new m(e-1):new f(z,!0)};for(var V=[1];2*V[V.length-1]<=N;)V.push(2*V[V.length-1]);var q=V.length,H=V[q-1];m.prototype.shiftLeft=f.prototype.shiftLeft=function(e){if(!s(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;q<=e;)t=t.multiply(H),e-=q-1;return t.multiply(V[e])},m.prototype.shiftRight=f.prototype.shiftRight=function(e){var t;if(!s(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;q<=e;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;t=A(r,H),r=t[1].isNegative()?t[0].prev():t[0],e-=q-1}return(t=A(r,V[e]))[1].isNegative()?t[0].prev():t[0]},m.prototype.not=f.prototype.not=function(){return this.negate().prev()},m.prototype.and=f.prototype.and=function(e){return a(this,e,function(e,t){return e&t})},m.prototype.or=f.prototype.or=function(e){return a(this,e,function(e,t){return e|t})},m.prototype.xor=f.prototype.xor=function(e){return a(this,e,function(e,t){return e^t})};var G=1<<30,W=(N&-N)*(N&-N)|G;m.prototype.bitLength=f.prototype.bitLength=function(){var e=this;return e.compareTo(X(0))<0&&(e=e.negate().subtract(X(1))),0===e.compareTo(X(0))?X(0):X(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,o=n.e,s=i.multiply(r);return s.compareTo(t)<=0?{p:s,e:2*o+1}:{p:i,e:2*o}}return{p:X(1),e:0}}(e,X(2)).e).add(X(1))};var K=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++){var o=e[i].toLowerCase();if("-"!==o&&/[a-z0-9]/.test(o)){if(/[0-9]/.test(o)&&n<=+o){if("1"===o&&1===n)continue;throw new Error(o+" is not a valid digit in base "+t+".")}if(o.charCodeAt(0)-87>=n)throw new Error(o+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=U/Math.log(t)){var s=parseInt(e,t);if(isNaN(s))throw new Error(o+" is not a valid digit in base "+t+".");return new m(parseInt(e,t))}t=L(t);var a=[],l="-"===e[0];for(i=l?1:0;i<e.length;i++){var o=e[i].toLowerCase(),u=o.charCodeAt(0);if(48<=u&&u<=57)a.push(L(o));else if(97<=u&&u<=122)a.push(L(o.charCodeAt(0)-87));else{if("<"!==o)throw new Error(o+" is not a valid character");for(var h=i;">"!==e[++i];);a.push(L(e.slice(h+1,i)))}}return M(a,t,l)};f.prototype.toArray=function(e){return I(this,e)},m.prototype.toArray=function(e){return I(this,e)},f.prototype.toString=function(e){if(e===u&&(e=10),10!==e)return F(this,e);for(var t,r=this.value,n=r.length,i=String(r[--n]);0<=--n;)t=String(r[n]),i+="0000000".slice(t.length)+t;var o=this.sign?"-":"";return o+i},m.prototype.toString=function(e){return e===u&&(e=10),10!=e?F(this,e):String(this.value)},f.prototype.toJSON=m.prototype.toJSON=function(){return this.toString()},f.prototype.toJSNumber=f.prototype.valueOf=function(){return parseInt(this.toString(),10)},m.prototype.toJSNumber=m.prototype.valueOf=function(){return this.value};for(var e=0;e<1e3;e++)d[e]=new m(e),0<e&&(d[-e]=new m(-e));return d.one=d[1],d.zero=d[0],d.minusOne=d[-1],d.max=c,d.min=k,d.gcd=R,d.lcm=function(e,t){return e=L(e).abs(),t=L(t).abs(),e.divide(R(e,t)).multiply(t)},d.isInstance=function(e){return e instanceof f||e instanceof m},d.randBetween=function(e,t){e=L(e),t=L(t);var r=k(e,t),n=c(e,t).subtract(r).add(1);if(n.isSmall)return r.add(Math.floor(Math.random()*n));for(var i=n.value.length-1,o=[],s=!0,a=i;0<=a;a--){var l=s?n.value[a]:N,u=b(Math.random()*l);o.unshift(u),u<l&&(s=!1)}return o=y(o),r.add("number"==typeof o?new m(o):new f(o,!1))},d.fromArray=function(e,t,r){return M(e.map(L),L(t||10),r)},d}();void 0!==e&&e.hasOwnProperty("exports")&&(e.exports=X),void 0===(t=function(){return X}.apply(r,[]))||(e.exports=t)}).call(this,t(10)(e))},function(e,t,r){"use strict";function l(e,t){for(var r=e.byteLength,n=0;n<r;){var i=e.getUint32(n);if(1===i)throw new Error("Large atom size not supported.");0===i&&(i=r-n);var o=e.getUint32(n+4);if(t(o,new DataView(e.buffer,e.byteOffset+n+s,i-s)))break;n+=i}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),h=r(11),s=8;t.clearMP4InternalTimestamp=function(e,n){void 0===n&&(n=!1);function r(e){var t=e.getUint8(0);e.setUint32(12,0),0<t&&e.setUint32(16,0)}function i(e){l(e,function(e,t){return 1953653094===e&&(o(t),1)})}var o=function(e){l(e,function(e,t){return 1952867444===e&&(s(t),1)})},s=function(e){var t=e.getUint8(0),r=n?h(0):(r=h(e.getUint32(4)),0<t&&(r=(r=r.shiftLeft(32)).add(e.getUint32(8))),null===a&&(a=r),r.subtract(a));0<t?(e.setUint32(4,r.shiftRight(32).toJSNumber()),e.setUint32(8,r.and(65535).toJSNumber())):e.setUint32(4,r.toJSNumber())},t=u.helpers.arrayBuffer.combine([e]),a=null;return l(new DataView(t.buffer,t.byteOffset,t.byteLength),function(e,t){switch(e){case 1936286840:r(t);break;case 1836019558:i(t)}}),t}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(0),n=t(6),i=t(12),s=o.helpers.deferred.buildDeferred,a=n.helpers.timeRanges.buildTimeRanges,l=o.helpers.Promise,u=o.logger.prefixLogger,h=o.logger.noOpLogger,c=o.helpers.browser.isIE(),p=o.helpers.browser.isSafari(),d='audio/mp4; codecs="mp3"',f=o.helpers.browser.getSafariVersion(),m=o.helpers.browser.getChromeVersion(),g=p||!!(m&&m.major<=49),y=!!f&&f.major<10||!!m&&m.major<=49;r.killedError=new Error("MSE killed.");var v=function(){function e(e,t){var r=this.constructor;if(void 0===t&&(t=h),this._sourceBuffer=null,this._initialized=!1,this._initializeDeferred=s(),this._whenIdleDeferred=s(),this._error=null,this._dead=!1,this._eosSignalled=!1,this._pendingActions=[],this._currentAction=null,this._logger=u(t,"MSE"),this._onMediaSourceInit=this._onMediaSourceInit.bind(this),this._onMediaSourceEnded=this._onMediaSourceEnded.bind(this),this._onMediaSourceError=this._onMediaSourceError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),!r.isSupported(e))throw this._logger.error("Not supported."),new Error("Not supported.");p&&e===d&&(e="audio/mp4"),this._type=e,this._useSegmentsMode=y&&0===e.indexOf("audio/mp4"),this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.addEventListener("error",this._onMediaSourceError,!1),this._url=URL.createObjectURL(this._mediaSource),this._logger.debug("Created URL.",this._url)}return e.isSupported=function(e){return!c&&"MediaSource"in window&&(!e||!(!p||e!==d)||!(f&&f.major<10&&"audio/mpeg"===e)&&!(m&&m.major<50&&'audio/webm; codecs="opus"'===e)&&MediaSource.isTypeSupported(e))},e.prototype.whenInitialized=function(){return this._initializeDeferred.promise},e.prototype.whenIdle=function(){return this._whenIdleDeferred?this._whenIdleDeferred.promise:l.resolve(void 0)},e.prototype.isIdle=function(){return this._dead||!this._whenIdleDeferred},e.prototype.hasInitialized=function(){return this._initialized},e.prototype.getError=function(){return this._error},e.prototype.getUrl=function(){return this._ensureNotDead(),this._url},e.prototype.getBuffered=function(){if(this._ensureNotDead(),!this._sourceBuffer)return[];try{return a(this._sourceBuffer.buffered)}catch(e){if("InvalidStateError"===e.name&&"Failed to read the 'buffered' property from 'SourceBuffer': This SourceBuffer has been removed from the parent media source."===e.message)return[];throw e}},e.prototype.append=function(e){if(this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("append() called."),g&&0===this._type.indexOf("audio/mp4")){this._logger.debug("Rewriting internal timestamp to 0.");try{e=i.clearMP4InternalTimestamp(e,!this._useSegmentsMode)}catch(e){return this._logger.error("Error rewriting timestamps.",e),this._handleError(e),l.reject(e)}}var t=s();return this._pendingActions.push({type:"append",data:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.remove=function(e){if(0===e.duration)throw new Error("Remove range must have a duration > 0.");this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("remove() called.",e);var t=s();return this._pendingActions.push({type:"remove",range:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.signalEOS=function(){this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("signalEOS() called."),this._eosSignalled=!0;var e=s();return this._pendingActions.push({type:"eos",deferred:e}),this._performNextAction(),e.promise},e.prototype.eosSignalled=function(){return this._eosSignalled},e.prototype.kill=function(){if(!this._dead){if(this._logger.debug("kill() called."),this._dead=!0,this._sourceBuffer){this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.removeEventListener("error",this._onSourceBufferError,!1);try{this._mediaSource.removeSourceBuffer(this._sourceBuffer)}catch(t){this._logger.error("Error from removeSourceBuffer()",t)}}this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.removeEventListener("sourceended",this._onMediaSourceEnded,!1),this._mediaSource.removeEventListener("error",this._onMediaSourceError,!1),URL.revokeObjectURL(this._url);var t=this._error||r.killedError,e=this._currentAction?[this._currentAction]:[];(e=e.concat(this._pendingActions)).forEach(function(e){e.deferred.reject(t)}),this._whenIdleDeferred||(this._whenIdleDeferred=s()),this._whenIdleDeferred.reject(t),this._initialized||this._initializeDeferred.reject(t),this._pendingActions.length=0,this._logger.debug("Killed.")}},e.prototype._ensureInitialized=function(){if(!this._initialized)throw new Error("Not initialized yet.")},e.prototype._ensureNotEOS=function(){if(this._eosSignalled)throw new Error("EOS signalled.")},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("MSE is dead.")},e.prototype._onMediaSourceInit=function(){this._logger.debug("MSE initialized."),this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1);try{this._logger.debug("Creating source buffer.",this._type),this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.mode=this._useSegmentsMode?"segments":"sequence",this._logger.debug("Using append mode: "+this._sourceBuffer.mode),this._sourceBuffer.addEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.addEventListener("error",this._onSourceBufferError,!1)}catch(e){this._handleError(e)}this._initializeDeferred.resolve(void 0),this._whenIdleDeferred.resolve(void 0),this._initialized=!0,this._performNextAction()},e.prototype._onMediaSourceEnded=function(){this._onSourceBufferUpdateEnd()},e.prototype._onMediaSourceError=function(e){this._handleError(e)},e.prototype._handleError=function(e){this._ensureNotDead(),this._logger.error("Error occurred.",e),this._error=e||new Error("Unknown error."),this.kill()},e.prototype._onSourceBufferUpdateEnd=function(){var e=this._currentAction;return this._logger.debug("Update ended.",this.getBuffered()),e?(this._currentAction=null,e.deferred.resolve(void 0),void this._performNextAction()):void this._handleError(new Error("No action in progress."))},e.prototype._onSourceBufferError=function(e){this._handleError(e)},e.prototype._performNextAction=function(){var e=this._whenIdleDeferred;if(!this._currentAction&&this._sourceBuffer){var t=this._pendingActions.shift();if(!t)return this._logger.debug("No more actions."),void(e&&(this._whenIdleDeferred=null,e.resolve(void 0)));switch(e||(this._whenIdleDeferred=s()),this._currentAction=t,this._logger.debug("Performing next action..."),t.type){case"append":var r=o.TimeRange.getCoverage(this.getBuffered());try{if("segments"===this._sourceBuffer.mode){var n=r.end/1e3;this._logger.debug("Setting timestampOffset because detected safari.",n);try{this._sourceBuffer.timestampOffset=n}catch(e){if(11!==e.code)throw e;this._logger.debug("Failed to set timestampOffset.",e)}}this._logger.debug("Calling appendBuffer()."),this._sourceBuffer.appendBuffer(t.data)}catch(e){this._handleError(e)}break;case"remove":try{var i=t.range;this._logger.debug("Calling remove().",i.start,i.end),this._sourceBuffer.remove(i.start/1e3,i.end/1e3)}catch(e){this._handleError(e)}break;case"eos":try{this._logger.debug("Calling endOfStream()."),this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._mediaSource.addEventListener("sourceended",this._onMediaSourceEnded,!1),this._mediaSource.endOfStream()}catch(e){this._handleError(e)}}}},e}();r.MSE=v},function(e,t,r){"use strict";function a(e){if(e.hasEnded()){var t=e.getCompleteDuration();if(null===t)throw new Error("Expected playlist duration to be available.");return t}return 1/0}function n(r){var e=l.TransmuxerFactory.retrieveTransmuxers(r),t=y(e,function(e){var t=o.helpers.mimeType.buildMimeTypeFromFormat(e.getOutputFormat(),r);return!!t&&s.MSE.isSupported(t)})||null;if(!t)return null;var n=t.getOutputFormat(),i=o.helpers.mimeType.buildMimeTypeFromFormat(n,r);return i?{transmuxer:t,mimeType:i}:null}var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),l=r(7),o=r(6),s=r(13),u=r(9),h=r(5),d=r(4),f=r(3),m=r(2),g=r(1),y=p.helpers.find,v=p.helpers.Promise,_=p.helpers.time.now,b=p.errors.PlayerFatalError,E=p.eventDispatcher.EventDispatcher,S=p.logger.prefixLogger,w=p.helpers.abortableJob.abortedError,x=p.helpers.browser.getSafariVersion(),P=p.helpers.browser.isSafari(),C=p.helpers.browser.isFirefox(),A=p.helpers.browser.isEdge(),c=function(c){function e(e,t){var r=c.call(this,t)||this;if(r._onSegmentRequestQueued=new E,r._onSegmentRequestStart=new E,r._onSegmentRetrieved=new E,r._onSegmentRequestFailed=new E,r._onSegmentReady=new E,r._onSegmentAppendQueued=new E,r._onSegmentAppendEnd=new E,r._playlist=null,r._playlistSegmentRetriever=null,r._playlistUpdateJob=null,r._initialPlaylistRetrieveCompleted=!1,r._playlistUpdateTimer=null,r._earliestAllowedNextUpdateTime=_(),r._mse=null,r._simpleMSE=null,r._html5PlayerReady=!1,r._startPositionOffset=0,r._transmuxerAndMimeType=null,r._lastSegmentAppended=null,r._maxBufferLength=null,r._cacheSize=null,r._onFirstSegmentRetrieved=null,r._firstSegmentOffset=0,r._seekAttemptTimer=null,r._seekMetadataEventHandle=null,r._playlistUpdateEventHandle=null,r._playlistDuration=null,r._logger=S(r._logger,"HLSMSEPlayer"),void 0!==t.maxBufferLength&&t.maxBufferLength<0)throw new Error("maxBufferLength cannot be < 0.");if(void 0!==t.memoryCacheSize&&t.memoryCacheSize<0)throw new Error("memoryCacheSize cannot be < 0.");return r.onSegmentRequestQueued=r._onSegmentRequestQueued.getHandle(),r.onSegmentRequestStart=r._onSegmentRequestStart.getHandle(),r.onSegmentRetrieved=r._onSegmentRetrieved.getHandle(),r.onSegmentRequestFailed=r._onSegmentRequestFailed.getHandle(),r.onSegmentReady=r._onSegmentReady.getHandle(),r.onSegmentAppendQueued=r._onSegmentAppendQueued.getHandle(),r.onSegmentAppendEnd=r._onSegmentAppendEnd.getHandle(),r.__descriptor=e,r.__playerDependencies=t,r._queuedPlaylist=e.playlist,r}return i(e,c),e.isFormatSupported=function(e){return!!s.MSE.isSupported()&&!!n(e)},e.prototype.getBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?p.TimeRange.normalize(e.getSegmentsWithData().map(function(e){return e.segment.getTimeRange()})):[]},e.prototype.getCompleteBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?p.TimeRange.normalize(e.getSegmentsWithData().filter(function(e){return e.complete}).map(function(e){return e.segment.getTimeRange()})):[]},e.prototype.getMaxBufferLength=function(){return this._maxBufferLength},e.prototype.getBufferController=function(){var t=this;return{setMaxBufferLength:function(e){if(e<0)throw new Error("Max buffer length cannot be < 0.");t._logger.debug("Updating max buffer length.",e),t._maxBufferLength=e,t._playlistSegmentRetriever?t._playlistSegmentRetriever.updateMaxBufferLength(e):t._logger.debug("Cannot update right now. Playlist segment retriever doesn't exist.")}}},e.prototype.switchPlaylist=function(e){return this._logger.debug("Updating playlist."),this._hasInitialized()?(this._playlistSegmentRetriever&&(this._playlistSegmentRetriever.switchPlaylist(null),this._logger.debug("Removed current URL.")),this._disposePlaylist(),void this._setPlaylist(e)):(this._logger.debug("Cannot update right now. Still initializing."),void(this._queuedPlaylist=e))},e.prototype.getMemoryCacheMaxSize=function(){return null!==this._cacheSize?this._cacheSize:1e8},e.prototype.getMemoryCacheUsage=function(){return this._playlistSegmentRetriever?this._playlistSegmentRetriever.getCacheUsage():0},e.prototype.getMemoryCacheController=function(){var t=this;return{setMaxCacheSize:function(e){if(e<0)throw new Error("Max size cannot be < 0.");t._cacheSize=e,t._playlistSegmentRetriever&&t._playlistSegmentRetriever.updateCacheSize(e)}}},e.prototype._canPlay=function(){if(!s.MSE.isSupported())return this._logger.debug("MSE not supported."),v.resolve(!1);var e=this.__descriptor.segmentFormat,t=n(e);return t?(this._transmuxerAndMimeType=t,v.resolve(!0)):(this._logger.debug("No transmuxer found."),v.resolve(new m.NoTransmuxerError))},e.prototype._getUrlForMediaElement=function(){if(!this._mse)throw new Error("MSE does not exist.");return this._mse.getUrl()},e.prototype._handleDurationUpdates=function(){},e.prototype._signalReady=function(){this._html5PlayerReady=!0,this._initialPlaylistRetrieveCompleted&&c.prototype._signalReady.call(this)},e.prototype._initialize=function(){var e=this.__playerDependencies;if(null===this._maxBufferLength&&(void 0!==e.maxBufferLength?this._maxBufferLength=e.maxBufferLength:this._maxBufferLength=3e4),this._logger.debug("Initialized max buffer length.",this._maxBufferLength),null===this._cacheSize&&(void 0!==e.memoryCacheSize?this._cacheSize=e.memoryCacheSize:this._cacheSize=1e8),this._logger.debug("Initialized cache size.",this._cacheSize),c.prototype._initialize.call(this),!this._queuedPlaylist)throw new Error("Playlist should exist.");this._setPlaylist(this._queuedPlaylist),this._queuedPlaylist=null},e.prototype._initMediaElement=function(e,t){this._simpleMSE&&(this._simpleMSE.kill(),this._simpleMSE=null,this._logger.debug("Killed SimpleMSE.")),this._mse&&(this._mse.kill(),this._mse=null,this._logger.debug("Killed MSE.")),null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled seek attempt timer.")),this._onFirstSegmentRetrieved=null,this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null),t?(this._initMSE(),c.prototype._initMediaElement.call(this,e,!0)):c.prototype._initMediaElement.call(this,e,!1)},e.prototype._shouldBeEnded=function(){var e=this._lastSegmentAppended;if(!e||!e.isFinalSegment())return!1;if(!P)return c.prototype._shouldBeEnded.call(this);if(c.prototype._shouldBeEnded.call(this))return!0;if(!this.getMediaElement())return!1;var t=this._duration;return this._stallDetected&&null!==t&&this._getTruePosition()>=t-600},e.prototype._getTruePosition=function(){var e=this.getMediaElement();if(!e)throw new Error("Media element should exist.");return this._startPositionOffset+this._getMediaElementPosition()},e.prototype._handleSeekChange=function(e,t){c.prototype._handleSeekChange.call(this,e,t),this._playlistSegmentRetriever&&(this._logger.debug("Explicitly updating playlist segment retriever, as seek requested."),this._playlistSegmentRetriever.update(),this._findSegmentAndAppendToMSE())},e.prototype._performSeek=function(e,o){var s=this,t=this._simpleMSE,r=this._mse,a=this.getMediaElement();if(!r)throw new Error("MSE should exist.");if(!a)throw new Error("Media element should exist.");var n=!this._isMediaElementPaused(a);null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled previous seek attempt timer.")),this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null,this._logger.debug("Removed previous loaded metadata event handler.")),t&&t.kill(),r.kill(),this._logger.debug("SimpleMSE and MSE destroyed."),this._startPositionOffset=e;var i=!1;this._onFirstSegmentRetrieved=function(){return i=!0},this._logger.debug("Initializing MSE and SimpleMSE for new position."),this._initMSE();var l,u=this._mse.getUrl();this._logger.debug("Updated media element MSE src.",u),c.prototype._initMediaElement.call(this,a,!0),n&&(this._logger.debug("Calling play() on media element as it was playing previously."),(l=this._callMediaElementPlay(a))&&l.catch&&l.catch(function(e){"AbortError"!==e.name&&(s._logger.error("Unexpected play() error.",e),s._triggerError(new b("Exception from calling play() after seek.",e)))}));var h=function(i){(x&&x.major<11||C)&&i<50&&(s._logger.debug("Tweaking offset to fix glitch issue."),i=50);var e=function(){s._startPositionOffset=Math.max(0,s._startPositionOffset-i),s._logger.debug("Updated start position offset.",s._startPositionOffset,i);var n=function(){s._seekAttemptTimer=null,s._logger.debug("Attempting to seek to the required offset.",i);var e=s._mse?s._mse.getBuffered():[];if(!p.TimeRange.rangesContainTime(i,e))return s._logger.debug("Holding seek because not buffered yet.",i,e),void(s._seekAttemptTimer=window.setTimeout(n,50));a.currentTime=i/1e3;var t=1e3*a.currentTime,r=t-i;Math.abs(r)<=100?(s._logger.debug("Seeked to the required offset.",i,t,r),o()):(s._logger.warn("Seek attempt failed. Trying again shortly.",i,t,r),s._seekAttemptTimer=window.setTimeout(n,50))};n()};s._onFirstSegmentRetrieved=null,A||a.readyState===a.HAVE_METADATA?(s._logger.debug("Media element has metadata. Seeking to offset."),e()):(s._logger.debug("Media element has not loaded metadata. Waiting for metadata..."),s._seekMetadataEventHandle=s._listenToOnce("loadedmetadata",function(){s._seekMetadataEventHandle=null,s._logger.debug("Got metadata. Seeking to offset."),e()},{earlyAttach:!0}))};i?(this._logger.debug("First segment already retrieved. Preparing to seek to initial offset."),h(this._firstSegmentOffset)):(this._logger.debug("Waiting for first segment to be retrieved."),this._onFirstSegmentRetrieved=function(){s._logger.debug("First segment retrieved. Preparing to seek to initial offset."),h(s._firstSegmentOffset)})},e.prototype._kill=function(){this._simpleMSE&&(this._logger.debug("Killing SimpleMSE."),this._simpleMSE.kill(),this._simpleMSE=null),this._mse&&(this._logger.debug("Killing MSE."),this._mse.kill(),this._mse=null),this._playlistSegmentRetriever&&(this._logger.debug("Killing playlist segment retriever."),this._playlistSegmentRetriever.kill(),this._playlistSegmentRetriever=null),this._disposePlaylist(),c.prototype._kill.call(this)},e.prototype._disposePlaylist=function(){this._playlistUpdateJob&&(this._logger.debug("Aborting playlist retrieve job."),this._playlistUpdateJob.abort(),this._playlistUpdateJob=null),this._playlistUpdateTimer&&(window.clearTimeout(this._playlistUpdateTimer),this._playlistUpdateTimer=null),this._playlistUpdateEventHandle&&(this._playlistUpdateEventHandle.remove(),this._playlistUpdateEventHandle=null),this._playlist=null},e.prototype._initMSE=function(){var r=this;if(!this._transmuxerAndMimeType)throw new Error("Transmuxer should have been configured.");this._lastSegmentAppended=null;var e=new s.MSE(this._transmuxerAndMimeType.mimeType,this._logger),t=new u.SimpleMSE(e,function(){return r._getSegmentDataToAppendNext()},function(){return r._getMediaElementPosition()},function(e){r._triggerError(new h.AppendError(e))},this._logger);t.onAppendQueued.subscribe(this._onSegmentAppendQueued.dispatch),t.onAppendEnd.subscribe(function(e){var t;!P||(t=r.getMediaElement())&&r._isMediaElementPaused(t)&&r.isActuallyPlaying()&&(r._logger.debug("Calling play() on media element because we just appended something and should be playing."),r._callMediaElementPlay(t)),r._onSegmentAppendEnd.dispatch(e)}),(this._simpleMSE=t).start(),(this._mse=e).whenInitialized().catch(function(e){e!==s.killedError&&(r._logger.error("Error during mse initialization.",e),r._triggerError(new d.InitializeError(e)))})},e.prototype._getMediaElementPosition=function(){var e=this.getMediaElement();if(!e)throw new Error("No media element.");return 1e3*e.currentTime},e.prototype._whenPlaylistRetrieved=function(){var r=this,e=this._playlist;if(!e)throw new Error("Playlist should have been retrieved.");this._playlistUpdateEventHandle=e.onUpdated.subscribe(function(){r._updateLocalDurationsFromPlaylist(),r._handleDurationChange(),r._schedulePlaylistUpdate()});var t=!this._initialPlaylistRetrieveCompleted;if(t)this._initialPlaylistRetrieveCompleted=!0;else{var n=a(e);if(this._playlistDuration<n)return this._logger.error("The duration from the new playlist was less than the previous one."),void this._triggerError(new g.PlaylistUpdateError("The duration from the new playlist was less than the previous one.",{oldDuration:this._playlistDuration,newDuration:n}))}if(!this._transmuxerAndMimeType)throw new Error("Transmuxer should have been configured.");if(this._playlistSegmentRetriever)this._logger.debug("Switching playlist for playlist segment retriever."),this._playlistSegmentRetriever.switchPlaylist(e);else{var i=this._maxBufferLength;if(null===i)throw new Error("maxBufferLength should have been initiaized by now.");this._logger.debug("Creating playlist segment retriever.");var o=this._cacheSize;if(null===o)throw new Error("cacheSize should be set.");var s=new l.PlaylistSegmentRetriever({playlist:e,getPosition:function(){return r.getPosition()},maxBufferLength:i,cacheSize:o,transmuxer:this._transmuxerAndMimeType.transmuxer,logger:this._logger});s.onSegmentRequestQueued.subscribe(this._onSegmentRequestQueued.dispatch),s.onSegmentRequestStart.subscribe(this._onSegmentRequestStart.dispatch),s.onSegmentRetrieved.subscribe(this._onSegmentRetrieved.dispatch),s.onSegmentRequestFailed.subscribe(this._onSegmentRequestFailed.dispatch),(this._playlistSegmentRetriever=s).onError.subscribe(function(e){r._logger.error("Error from playlist segment retriever.",e),e instanceof l.retrievalErrors.RetrievalError?r._triggerError(new f.RetrievalError(e)):r._triggerError(new b("Unexpected error when trying to retrieve segment.",e))}),s.onSegmentDataRetrieveStarted.subscribe(function(e){var t=e.segment;r._logger.debug("Segment retrieve started.",t.getEventRepresentation()),r._findSegmentAndAppendToMSE(),r._updateLocalDurationsFromPlaylist(),r._handleDurationChange(),r._onSegmentReady.dispatch({segment:t.getEventRepresentation()})})}this._initialPlaylistRetrieveCompleted=!0,e.hasEnded()||this._schedulePlaylistUpdate(),this._updateLocalDurationsFromPlaylist(),this._update(function(){t&&r._html5PlayerReady&&c.prototype._signalReady.call(r),r._handleDurationChange()})},e.prototype._schedulePlaylistUpdate=function(){var e,t,r,n,i,o=this,s=this._playlist;if(!s)throw new Error("Playlist should exist.");this._playlistUpdateJob&&!this._playlistUpdateJob.hasCompleted()||(this._playlistUpdateTimer&&(window.clearTimeout(this._playlistUpdateTimer),this._playlistUpdateTimer=null),s.hasEnded())||(e=this.isPlaying()?s.getDuration()-this.getPosition()-1e4:1/0,t=s.getExpireTime(),r=t?_()-t:1/0,n=Math.max(0,this._earliestAllowedNextUpdateTime-_()),(i=Math.max(n,Math.min(e,r,s.getType()===l.PlaylistType.EVENT?1e4:1/0)))<1/0&&(this._earliestAllowedNextUpdateTime=_()+2e3,this._playlistUpdateTimer=window.setTimeout(function(){o._playlistUpdateTimer=null;var e=o._playlistUpdateJob=s.update();e.onError(function(e){e!==w&&(o._handlePlaylistUpdateError(e),o._schedulePlaylistUpdate())})},i)))},e.prototype._updateLocalDurationsFromPlaylist=function(){var e=this._playlist;if(!e)throw new Error("Missing playlist.");this._duration=a(e),this._playlistDuration=e.getDuration()},e.prototype._findSegmentAndAppendToMSE=function(){var e,t=this._simpleMSE;t&&t.waitingForSegmentData()&&((e=this._getSegmentDataToAppendNext())&&(this._logger.debug("Providing segment to SimpleMSE.",e.eventRepresentation),t.provideNextSegmentData(e)))},e.prototype._setPlaylist=function(e){var t=this;if(this._playlist)throw new Error("Playlist already exists.");this._playlist=e,this._playlistUpdateJob=this._playlist.update(),this._playlistUpdateJob.onCompletion(function(){t._logger.debug("Playlist retrieved."),t._whenPlaylistRetrieved()}),this._playlistUpdateJob.onError(function(e){e!==w&&t._handlePlaylistUpdateError(e)})},e.prototype._handlePlaylistUpdateError=function(e){this._logger.error("Error when retrieving playlist.",e),e instanceof l.retrievalErrors.RetrievalError?this._triggerError(new f.RetrievalError(e)):this._triggerError(new b("Unexpected error when retrieving playlist.",e))},e.prototype._getSegmentDataToAppendNext=function(){var e=this._lastSegmentAppended;this._logger.debug("Looking for segment to append next.",!!e);var t=this._playlistSegmentRetriever;if(!t)return this._logger.debug("No segment retriever."),null;if(e){var r=this._getSubsequentSegment(e);if(!r)return this._logger.debug("No segment found."),e.isFinalSegment()&&(this._logger.debug("The last segment we appended was the last one in the stream. Signalling EOS."),this._signalEOS()),null;var n=r.segment;return this._logger.debug("Found segment.",n.getEventRepresentation()),this._lastSegmentAppended=n,{data:r.dataRetrieveJob,eventRepresentation:n.getEventRepresentation()}}var i=this.getPosition(),r=y(t.getSegmentsWithData(),function(e){return e.segment.getTimeRange().containsTime(i)});if(!r)return this._logger.debug("No segment found.",i),null;var n=r.segment,o=r.dataRetrieveJob,s=this._firstSegmentOffset=i-n.getTimeRange().start,a=this.getMediaElement();if(!a)throw new Error("Media element should exist.");var l={data:o,eventRepresentation:n.getEventRepresentation()};if(!n.isFinalSegment())for(var u=n.getTimeRange().duration-s;u<1e3;){var h=this._getSubsequentSegment(n);if(!h)return this._logger.debug("Not enough segments to cover min append duration.",u),null;h.segment.isFinalSegment()?u=1/0:u+=h.segment.getTimeRange().duration}return this._logger.debug("Found initial segment.",n.getEventRepresentation()),this._lastSegmentAppended=n,this._onFirstSegmentRetrieved&&this._onFirstSegmentRetrieved(),l},e.prototype._getSubsequentSegment=function(e){var t=this._playlistSegmentRetriever;if(!t)return this._logger.debug("No segment retriever."),null;var r=t.getSegmentsWithData(),n=r[r.map(function(e){return e.segment.getSequenceNumber()}).indexOf(e.getSequenceNumber())+1];return n&&n.segment.getTimeRange().start===e.getTimeRange().end?n:null},e.prototype._signalEOS=function(){var t=this;this._logger.debug("Signalling EOS."),this._simpleMSE&&(this._simpleMSE.kill(),this._logger.debug("Killed SimpleMSE."),this._simpleMSE=null);var r=this._mse;r&&!r.eosSignalled()&&r.signalEOS().catch(function(e){if(r===t._mse){if("InvalidStateError"===e.name)return void t._logger.error("InvalidStateError occurred when signalling EOS.",e);t._logger.error("Error occurred when signalling EOS.",e),t._triggerError(new h.AppendError(e))}})},e}(o.HTML5PlayerBase);t.HLSMSEPlayer=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(14);t.HLSMSEPlayer=n.HLSMSEPlayer;var i=r(8);t.errors=i.errors;var o=r(7);t.retrievalErrors=o.retrievalErrors}]))},function(e,t,r){var n,i,o;window,e.exports=(n=r(2),i=r(8),o=r(9),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getCode=function(){return"GENERIC"},e}();t.RetrievalError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPartialMatch=function(e,t){return!(e.mimeType&&t.mimeType!==e.mimeType||e.audioCodec&&(!t.audioCodec||t.audioCodec.id!==e.audioCodec.id)||e.videoCodec&&(!t.videoCodec||t.videoCodec.id!==e.videoCodec.id))}},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),d=r(5),f=r(21),m={rate:44100,id:3},g=m.rate;t.MP3ToMP4={getInputFormat:function(){return{mimeType:"audio/mpeg"}},getOutputFormat:function(){return{mimeType:"audio/mp4",audioCodec:{id:"mp3"}}},transmux:function(c){var e=new p.helpers.abortableJob.AbortableJob(function(){function t(){u.close(),h.flush()}function n(e){l=!0;try{t()}catch(e){}r.reject(e),c.abort()}var r=p.helpers.deferred.buildDeferred(),i=new p.eventDispatcher.EventDispatcher,o=[],s=!1,a=null,l=!1,u=new d.MP3Parser,h=new f.MP4Mux({audioTrackId:0,videoTrackId:-1,tracks:[{codecId:2,channels:2,samplerate:m.rate,samplesize:16,timescale:g}]});return h.ondata=function(e){l||(a?(o.push(e),i.dispatch({initData:a,data:e})):a=e)},u.onFrame=function(e){if(!l)try{var t=new Uint8Array(e.length+1),r=32;r|=m.id<<2,r|=2,r|=1,t[0]=r,t.set(e,1);h.pushPacket(8,t,0)}catch(e){n(e)}},c.onProgressUpdate(function(e){var t=e.data;!s&&e.initData&&(t=p.helpers.arrayBuffer.combine([e.initData,e.data])),s=!0;try{u.push(t)}catch(e){n(e)}}),c.onCompletion(function(e){try{t(),r.resolve(e)}catch(e){n(e)}}),c.onError(n),{result:r.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return o.length?{initData:a,data:p.helpers.arrayBuffer.combine(o)}:null}},abort:function(){l=!0,c.abort(),t()}}});return e.run()}}},function(e,t,r){"use strict";function n(){this.buffer=null,this.bufferSize=0}t.__esModule=!0,t.MP3Parser=n;var m=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],g=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];n.prototype.push=function(e){var t,r,n;t=0<this.bufferSize?(r=e.length+this.bufferSize,(!this.buffer||this.buffer.length<r)&&(n=new Uint8Array(r),0<this.bufferSize&&n.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=n),this.buffer.set(e,this.bufferSize),this.bufferSize=r,e=this.buffer,r):e.length;for(var i,o=0;o<t&&0<(i=this._parse(e,o,t));)o+=i;var s=t-o;0<s&&(!this.buffer||this.buffer.length<s?this.buffer=new Uint8Array(e.subarray(o,t)):this.buffer.set(e.subarray(o,t))),this.bufferSize=s},n.prototype._parse=function(e,t,r){if(r<t+2)return-1;if(255===e[t]||224==(224&e[t+1])){if(r<t+24)return-1;var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,s=e[t+2]>>2&3,a=!!(2&e[t+2]);if(1!=n&&0!=o&&15!=o&&3!=s){var l=3==n?3-i:3==i?3:4,u=1e3*m[14*l+o-1],h=3==n?0:2==n?1:2,c=g[3*h+s],p=a?1:0,d=3==i?(3==n?12:6)*u/c+p<<2:(3==n?144:72)*u/c+p|0;return r<t+d?-1:(this.onFrame&&this.onFrame(new Uint8Array(e.subarray(t,t+d))),d)}}for(var f=t+2;f<r;){if(255===e[f-1]&&224==(224&e[f]))return this.onNoise&&this.onNoise(new Uint8Array(e.subarray(t,f-1))),f-t-1;f++}return-1},n.prototype.close=function(){0<this.bufferSize&&this.onNoise&&this.onNoise(new Uint8Array(this.buffer.subarray(0,this.bufferSize))),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassThrough={getInputFormat:function(){return{}},getOutputFormat:function(){return{}},transmux:function(e){return e}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"NO_DECRYPTOR"},t}(i.RetrievalError);t.NoDecryptorError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._statusCode=e,t}return n(e,r),e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.getCode=function(){return"UNACCEPTABLE_RESPONSE_STATUS_CODE"},e}(i.RetrievalError);t.UnacceptableResponseStatusCodeError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this._playlist=e,this._url=t,this._sequenceNumber=r}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e}();t.Segment=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._code=e,t}return n(e,r),e.prototype.getCode=function(){return"OGG_PARSER."+this._code},e}(i.RetrievalError);t.OggParserError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._url=e}return e.prototype.getUrl=function(){return this._url},e}();t.Playlist=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.Key=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.InitData=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(12),o=r(11),s=r(9);!function(e){e.InitData=n.InitData,e.Key=i.Key,e.Playlist=o.Playlist,e.Segment=s.Segment}(t.events||(t.events={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"UNSUPPORTED_ENCRYPTION_ERROR"},t}(i.RetrievalError);t.UnsupportedEncryptionError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._details=e,t}return n(e,r),e.prototype.getDetails=function(){return this._details},e.prototype.getCode=function(){return"PLAYLIST_PARSE"},e}(i.RetrievalError);t.PlaylistParseError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(16),o=r(10),s=r(1),a=r(8),l=r(15);!function(e){e.NoDecryptorError=n.NoDecryptorError,e.PlaylistParseError=i.PlaylistParseError,e.OggParserError=o.OggParserError,e.RetrievalError=s.RetrievalError,e.UnacceptableResponseStatusCodeError=a.UnacceptableResponseStatusCodeError,e.UnsupportedEncryptionError=l.UnsupportedEncryptionError}(t.retrievalErrors||(t.retrievalErrors={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r(0);t.MP4ToMP4={getInputFormat:function(){return{mimeType:"audio/mp4"}},getOutputFormat:function(){return{mimeType:"audio/mp4"}},transmux:function(r){var e=new c.helpers.abortableJob.AbortableJob(function(){function i(e){t.reject(e),r.abort()}var t=c.helpers.deferred.buildDeferred(),o=new c.eventDispatcher.EventDispatcher,s=[],a=[],l=new Uint8Array(0),n=null,u=!1,h=function(e){if(e.byteLength<4)l=e;else{if(null===n){var t=new DataView(e.buffer).getUint32(0);if(1===t)throw new Error("Large atom size not supported.");n=t}var r;0!==n&&e.byteLength>=n?(r=new Uint8Array(e.buffer.slice(0,n)),a.push(r),l=new Uint8Array(e.buffer.slice(n)),n=null,h(l)):l=e}};return r.onProgressUpdate(function(e){var t=e.data;!u&&e.initData&&(t=c.helpers.arrayBuffer.combine([e.initData,e.data])),u=!0;try{var r,n=c.helpers.arrayBuffer.combine([l,t]);h(n),a.length&&(r=c.helpers.arrayBuffer.combine(a),a.splice(0),s.push(r),o.dispatch({data:r}))}catch(e){i(e)}}),r.onCompletion(function(e){try{if(0===n)s.push(l),o.dispatch({data:l});else if(l.byteLength)throw new Error("Part way through an atom.");t.resolve(e)}catch(e){i(e)}}),r.onError(i),{result:t.promise,progressUpdates:{onProgressUpdate:o,getProgressSoFar:function(){return s.length?{data:c.helpers.arrayBuffer.combine(s)}:null}},abort:function(){r.abort()}}});return e.run()}}},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=r(0),y=r(3),v=r(19);t.OggOpusToWebm={getInputFormat:function(){return{mimeType:"audio/ogg",audioCodec:{id:"opus"}}},getOutputFormat:function(){return{mimeType:"audio/webm",audioCodec:{id:"opus"}}},transmux:function(r){var e=new g.helpers.abortableJob.AbortableJob(function(){function l(e){m=!0,t.reject(e),r.abort()}var t=g.helpers.deferred.buildDeferred(),u=new g.eventDispatcher.EventDispatcher,h=[],c=null,p=new Uint8Array(0),d=!1,f=null,m=!1;return r.onProgressUpdate(function(e){if(!m){var t=[p,e.data];!d&&e.initData&&(t=[e.initData].concat(t)),d=!0;var r=g.helpers.arrayBuffer.combine(t);try{var n=y.retrievePages(r).pages,i=n.reduce(function(e,t){return e+t.entirePage.byteLength},0);p=new Uint8Array(r.buffer.slice(i));var o,s=y.retrievePackets(n);if(s.length&&!c){if(s.length<2)throw new Error("Expecting at least 2 opus packets.");var a=v.parseOpusHead(s[0]);-2<a.outputGain&&v.setOutputGain(s[0],-2),c=[s[0],s[1]],s=s.slice(2)}s.length&&c&&(h.push.apply(h,s),o=v.buildWebm(c.concat(s)),f=f||o.initData,u.dispatch({initData:f,data:o.data}))}catch(e){l(e)}}}),r.onCompletion(function(e){p.byteLength?t.reject(new Error("Still data left in buffer.")):t.resolve(e)}),r.onError(l),{result:t.promise,progressUpdates:{onProgressUpdate:u,getProgressSoFar:function(){if(h.length&&c){var e=v.buildWebm(c.concat(h)).data;return{initData:f,data:e}}return null}},abort:function(){m=!0,r.abort()}}});return e.run()}}},function(e,t,r){"use strict";t.__esModule=!0;var n,K,X=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){e.utf8decode=function(e){for(var t=new Uint8Array(4*e.length),r=0,n=0,i=e.length;n<i;n++){var o,s=e.charCodeAt(n);s<=127?t[r++]=s:(55296<=s&&s<=56319&&(56320<=(o=e.charCodeAt(n+1))&&o<=57343&&(s=((1023&s)<<10)+(1023&o)+65536,++n)),0!=(4292870144&s)?(t[r++]=248|s>>>24&3,t[r++]=128|s>>>18&63,t[r++]=128|s>>>12&63,t[r++]=128|s>>>6&63):0!=(4294901760&s)?(t[r++]=240|s>>>18&7,t[r++]=128|s>>>12&63,t[r++]=128|s>>>6&63):0!=(4294965248&s)?(t[r++]=224|s>>>12&15,t[r++]=128|s>>>6&63):t[r++]=192|s>>>6&31,t[r++]=128|63&s)}return t.subarray(0,r)},e.utf8encode=function(e){for(var t=0,r="";t<e.length;){var n=255&e[t++];if(n<=127)r+=String.fromCharCode(n);else{var i=192,o=5;do{if((n&(i>>1|128))===i)break;i=i>>1|128,--o}while(0<=o);if(o<=0)throw new Error("Invalid UTF8 character");for(var s=n&(1<<o)-1,a=5;o<=a;--a){var l=e[t++];if(128!=(192&l))throw new Error("Invalid UTF8 character sequence");s=s<<6|63&l}r+=65536<=s?String.fromCharCode(s-65536>>10&1023|55296,1023&s|56320):String.fromCharCode(s)}}return r}}(e.StringUtilities||(e.StringUtilities={}))}(K=K||{}),function(e){!function(L){function S(e){for(var t=e.length>>1,r=new Uint8Array(t),n=0;n<t;n++)r[n]=parseInt(e.substr(2*n,2),16);return r}var p,d=[5500,11025,22050,44100],f=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"];!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(p=p||{});var N,a,l=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"];!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(N=N||{}),function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(a=a||{});var w;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(w=w||{});var e=function(){function e(e){var n=this;this.oncodecinfo=function(e){},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,t){var r={trackId:t+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return n.metadata.audioTrackId===t&&(n.audioTrackState=r),n.metadata.videoTrackId===t&&(n.videoTrackState=r),r},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return e.prototype.pushPacket=function(e,t,r){switch(this.state===w.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case 8:var n=this.audioTrackState,i=function(e){var t,r=0,n=p.RAW,i=e[r],o=i>>4,s=i>>2&3,a=2&i?16:8,l=1&i?2:1;switch(r++,o){case 10:var u=e[r++];n=u,t=1024;break;case 2:var h=e[r+1]>>3&3,c=e[r+1]>>1&3;t=1==c?3==h?1152:576:3==c?384:1152}return{codecDescription:f[o],codecId:o,data:e.subarray(r),rate:d[s],size:a,channels:l,samples:t,packetType:n}}(t);if(!n||n.trackInfo.codecId!==i.codecId)throw new Error("Unexpected audio packet codec: "+i.codecDescription);switch(i.codecId){default:throw new Error("Unsupported audio codec: "+i.codecDescription);case 2:break;case 10:if(i.packetType===p.HEADER)return void n.initializationData.push(i.data)}this.cachedPackets.push({packet:i,timestamp:r,trackId:n.trackId});break;case 9:var o=this.videoTrackState,s=function(e){var t=0,r=e[t]>>4,n=15&e[t];t++;var i={frameType:r,codecId:n,codecDescription:l[n]};switch(n){case 7:var o=e[t++];i.packetType=o,i.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case 4:i.packetType=a.NALU,i.horizontalOffset=e[t]>>4&15,i.verticalOffset=15&e[t],i.compositionTime=0,t++}return i.data=e.subarray(t),i}(t);if(!o||o.trackInfo.codecId!==s.codecId)throw new Error("Unexpected video packet codec: "+s.codecDescription);switch(s.codecId){default:throw new Error("unsupported video codec: "+s.codecDescription);case 4:break;case 7:if(s.packetType===a.HEADER)return void o.initializationData.push(s.data)}this.cachedPackets.push({packet:s,timestamp:r,trackId:o.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===w.NEED_HEADER_DATA&&this._tryGenerateHeader(),50<=this.cachedPackets.length&&this.state===w.MAIN_PACKETS&&this._chunk()},e.prototype.flush=function(){0<this.cachedPackets.length&&this._chunk()},e.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return 10===e.trackInfo.codecId||7===e.trackInfo.codecId})?this.state=w.NEED_HEADER_DATA:this.state=w.CAN_GENERATE_HEADER},e.prototype._tryGenerateHeader=function(){var e=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case 10:case 7:return 0<e.initializationData.length;default:return!0}});if(e){for(var t=["isom"],r=[],n=0;n<this.trackStates.length;n++){var i,o=this.trackStates[n],s=o.trackInfo;switch(s.codecId){case 10:var a=o.initializationData[0];i=new L.Iso.AudioSampleEntry("mp4a",1,s.channels,s.samplesize,s.samplerate);var l=new Uint8Array(41+a.length);l.set(S("0000000003808080"),0),l[8]=32+a.length,l.set(S("00020004808080"),9),l[16]=18+a.length,l.set(S("40150000000000FA000000000005808080"),17),l[34]=a.length,l.set(a,35),l.set(S("068080800102"),35+a.length),i.otherBoxes=[new L.Iso.RawTag("esds",l)];var u=a[0]>>3;o.mimeTypeCodec="mp4a.40."+u;break;case 2:i=new L.Iso.AudioSampleEntry(".mp3",1,s.channels,s.samplesize,s.samplerate),o.mimeTypeCodec="mp3";break;case 7:var h=o.initializationData[0];(i=new L.Iso.VideoSampleEntry("avc1",1,s.width,s.height)).otherBoxes=[new L.Iso.RawTag("avcC",h)];var c=h[1]<<16|h[2]<<8|h[3];o.mimeTypeCodec="avc1."+(16777216|c).toString(16).substr(1),t.push("iso2","avc1","mp41");break;case 4:(i=new L.Iso.VideoSampleEntry("VP6F",1,s.width,s.height)).otherBoxes=[new L.Iso.RawTag("glbl",S("00"))],o.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var p,d=L.Iso.TrackHeaderFlags.TRACK_ENABLED|L.Iso.TrackHeaderFlags.TRACK_IN_MOVIE;o===this.audioTrackState?p=new L.Iso.TrackBox(new L.Iso.TrackHeaderBox(d,o.trackId,-1,0,0,1,n),new L.Iso.MediaBox(new L.Iso.MediaHeaderBox(s.timescale,-1,s.language),new L.Iso.HandlerBox("soun","SoundHandler"),new L.Iso.MediaInformationBox(new L.Iso.SoundMediaHeaderBox,new L.Iso.DataInformationBox(new L.Iso.DataReferenceBox([new L.Iso.DataEntryUrlBox(L.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new L.Iso.SampleTableBox(new L.Iso.SampleDescriptionBox([i]),new L.Iso.RawTag("stts",S("0000000000000000")),new L.Iso.RawTag("stsc",S("0000000000000000")),new L.Iso.RawTag("stsz",S("000000000000000000000000")),new L.Iso.RawTag("stco",S("0000000000000000")))))):o===this.videoTrackState&&(p=new L.Iso.TrackBox(new L.Iso.TrackHeaderBox(d,o.trackId,-1,s.width,s.height,0,n),new L.Iso.MediaBox(new L.Iso.MediaHeaderBox(s.timescale,-1,s.language),new L.Iso.HandlerBox("vide","VideoHandler"),new L.Iso.MediaInformationBox(new L.Iso.VideoMediaHeaderBox,new L.Iso.DataInformationBox(new L.Iso.DataReferenceBox([new L.Iso.DataEntryUrlBox(L.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new L.Iso.SampleTableBox(new L.Iso.SampleDescriptionBox([i]),new L.Iso.RawTag("stts",S("0000000000000000")),new L.Iso.RawTag("stsc",S("0000000000000000")),new L.Iso.RawTag("stsz",S("000000000000000000000000")),new L.Iso.RawTag("stco",S("0000000000000000"))))))),r.push(p)}var f=new L.Iso.MovieExtendsBox(null,[new L.Iso.TrackExtendsBox(1,1,0,0,0),new L.Iso.TrackExtendsBox(2,1,0,0,0)],null),m=new L.Iso.BoxContainerBox("udat",[new L.Iso.MetaBox(new L.Iso.RawTag("hdlr",S("00000000000000006D6469726170706C000000000000000000")),[new L.Iso.RawTag("ilst",S("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),g=new L.Iso.MovieHeaderBox(1e3,0,this.trackStates.length+1),y=new L.Iso.MovieBox(g,r,f,m),v=new L.Iso.FileTypeBox("isom",512,t),_=v.layout(0),b=y.layout(_),E=new Uint8Array(_+b);v.write(E),y.write(E),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(E),this.filePos+=E.length,this.state=w.MAIN_PACKETS}},e.prototype._chunk=function(){var e=this.cachedPackets;if(this.videoTrackState){for(var t=e.length-1,r=this.videoTrackState.trackId;0<t&&(e[t].trackId!==r||e[t].packet.frameType!==N.KEY);)t--;0<t&&(e=e.slice(0,t))}if(0!==e.length){for(var n=[],i=0,o=[],s=[],a=0;a<this.trackStates.length;a++){var l=this.trackStates[a],u=l.trackInfo,h=l.trackId,c=e.filter(function(e){return e.trackId===h});if(0!==c.length){var p,d,f,m=new L.Iso.TrackFragmentBaseMediaDecodeTimeBox(l.cachedDuration);switch(s.push(i),u.codecId){case 10:case 2:f=[];for(var t=0;t<c.length;t++){var g=c[t].packet,y=Math.round(g.samples*u.timescale/u.samplerate);n.push(g.data),i+=g.data.length,f.push({duration:y,size:g.data.length}),l.samplesProcessed+=g.samples}var v=L.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;p=new L.Iso.TrackFragmentHeaderBox(v,h,0,0,0,0,L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var _=L.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|L.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|L.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT;d=new L.Iso.TrackRunBox(_,f,0,0),l.cachedDuration=Math.round(l.samplesProcessed*u.timescale/u.samplerate);break;case 7:case 4:f=[];for(var b=l.samplesProcessed,E=b*u.timescale/u.framerate,S=Math.round(E),t=0;t<c.length;t++){var w=c[t].packet;b++;var x=Math.round(b*u.timescale/u.framerate),P=x-S;S=x;var C=Math.round(b*u.timescale/u.framerate+w.compositionTime*u.timescale/1e3);n.push(w.data),i+=w.data.length;var A=w.frameType===N.KEY?L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|L.Iso.SampleFlags.SAMPLE_IS_NOT_SYNC;f.push({duration:P,size:w.data.length,flags:A,compositionTimeOffset:C-x})}var v=L.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;p=new L.Iso.TrackFragmentHeaderBox(v,h,0,0,0,0,L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var _=L.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|L.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|L.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT|L.Iso.TrackRunFlags.SAMPLE_FLAGS_PRESENT|L.Iso.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;d=new L.Iso.TrackRunBox(_,f,0,0),l.cachedDuration=S,l.samplesProcessed=b;break;default:throw new Error("Un codec")}var T=new L.Iso.TrackFragmentBox(p,m,d);o.push(T)}}this.cachedPackets.splice(0,e.length);for(var k=new L.Iso.MovieFragmentHeaderBox(++this.chunkIndex),R=new L.Iso.MovieFragmentBox(k,o),M=R.layout(0),D=new L.Iso.MediaDataBox(n),I=D.layout(M),F=M+8,a=0;a<o.length;a++)o[a].run.dataOffset=F+s[a];var O=new Uint8Array(M+I);R.write(O),D.write(O),this.ondata(O),this.filePos+=O.length}},e}();L.MP4Mux=e,L.parseFLVMetadata=function(e){var t,r,n=[],i=-1,o=-1,s=+e.asGetPublicProperty("duration"),a=e.asGetPublicProperty("audiocodecid");switch(a){case 2:case"mp3":t="mp3",r=2;break;case 10:case"mp4a":t="mp4a",r=10;break;default:if(!isNaN(a))throw new Error("Unsupported audio codec: "+a);t=null,r=-1}var l,u,h=e.asGetPublicProperty("videocodecid");switch(h){case 4:case"vp6f":l="vp6f",u=4;break;case 7:case"avc1":l="avc1",u=7;break;default:if(!isNaN(h))throw new Error("Unsupported video codec: "+h);l=null,u=-1}var c=null===t?null:{codecDescription:t,codecId:r,language:"und",timescale:+e.asGetPublicProperty("audiosamplerate")||44100,samplerate:+e.asGetPublicProperty("audiosamplerate")||44100,channels:+e.asGetPublicProperty("audiochannels")||2,samplesize:16},p=null===l?null:{codecDescription:l,codecId:u,language:"und",timescale:6e4,framerate:+e.asGetPublicProperty("videoframerate")||+e.asGetPublicProperty("framerate"),width:+e.asGetPublicProperty("width"),height:+e.asGetPublicProperty("height")},d=e.asGetPublicProperty("trackinfo");if(d)for(var f=0;f<d.length;f++){var m=d[f],g=m.asGetPublicProperty("sampledescription")[0];g.asGetPublicProperty("sampletype")===a?(c.language=m.asGetPublicProperty("language"),c.timescale=+m.asGetPublicProperty("timescale")):g.asGetPublicProperty("sampletype")===h&&(p.language=m.asGetPublicProperty("language"),p.timescale=+m.asGetPublicProperty("timescale"))}return p&&(o=n.length,n.push(p)),c&&(i=n.length,n.push(c)),{tracks:n,duration:s,audioTrackId:i,videoTrackId:o}},L.splitMetadata=function(e){var t=[];return 0<=e.audioTrackId&&t.push({tracks:[e.tracks[e.audioTrackId]],duration:e.duration,audioTrackId:0,videoTrackId:-1}),0<=e.videoTrackId&&t.push({tracks:[e.tracks[e.videoTrackId]],duration:e.duration,audioTrackId:-1,videoTrackId:0}),t}}(e.MP4||(e.MP4={}))}(n=n||{}),function(e){!function(e){!function(p){function s(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Array.prototype.concat.apply(e,t)}function h(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function o(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function r(e){return(e-d)/1e3|0}function n(e){return 65536*e|0}function i(e){return 1073741824*e|0}function a(e){return 256*e|0}var l=K.StringUtilities.utf8decode,d=-20828448e5,f=[1,0,0,0,1,0,0,0,1],u=[0,0,0],e=function(){function e(e,t){"uuid"===(this.boxtype=e)&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t},e.prototype.write=function(e){return h(e,this.offset,this.size),h(e,this.offset+4,o(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}(),t=function(i){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=i.call(this,e)||this;return n.version=t,n.flags=r,n}return X(e,i),e.prototype.layout=function(e){return this.size=i.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=i.prototype.write.call(this,e);return h(e,this.offset+t,this.version<<24|this.flags),t+4},e}(p.Box=e);p.FullBox=t;var c=function(i){function e(e,t,r){var n=i.call(this,"ftype")||this;return n.majorBrand=e,n.minorVersion=t,n.compatibleBrands=r,n}return X(e,i),e.prototype.layout=function(e){return this.size=i.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(t){var r=this,n=i.prototype.write.call(this,t);return h(t,this.offset+n,o(this.majorBrand)),h(t,this.offset+n+4,this.minorVersion),n+=8,this.compatibleBrands.forEach(function(e){h(t,r.offset+n,o(e)),n+=4},this),n},e}(e);p.FileTypeBox=c;var m=function(n){function e(e,t){var r=n.call(this,e)||this;return r.children=t,r}return X(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(r+=e.layout(t+r))}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(r+=e.write(t))}),r},e}(e),g=function(o){function e(e,t,r,n){var i=o.call(this,"moov",s([e],t,[r,n]))||this;return i.header=e,i.tracks=t,i.extendsBox=r,i.userData=n,i}return X(e,o),e}(p.BoxContainerBox=m);p.MovieBox=g;var y=function(u){function e(e,t,r,n,i,o,s,a){void 0===n&&(n=1),void 0===i&&(i=1),void 0===o&&(o=f),void 0===s&&(s=d),void 0===a&&(a=d);var l=u.call(this,"mvhd",0,0)||this;return l.timescale=e,l.duration=t,l.nextTrackId=r,l.rate=n,l.volume=i,l.matrix=o,l.creationTime=s,l.modificationTime=a,l}return X(e,u),e.prototype.layout=function(e){return this.size=u.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var t=u.prototype.write.call(this,e);return h(e,this.offset+t,r(this.creationTime)),h(e,this.offset+t+4,r(this.modificationTime)),h(e,this.offset+t+8,this.timescale),h(e,this.offset+t+12,this.duration),t+=16,h(e,this.offset+t,n(this.rate)),h(e,this.offset+t+4,a(this.volume)<<16),h(e,this.offset+t+8,0),h(e,this.offset+t+12,0),t+=16,h(e,this.offset+t,n(this.matrix[0])),h(e,this.offset+t+4,n(this.matrix[1])),h(e,this.offset+t+8,n(this.matrix[2])),h(e,this.offset+t+12,n(this.matrix[3])),h(e,this.offset+t+16,n(this.matrix[4])),h(e,this.offset+t+20,n(this.matrix[5])),h(e,this.offset+t+24,i(this.matrix[6])),h(e,this.offset+t+28,i(this.matrix[7])),h(e,this.offset+t+32,i(this.matrix[8])),t+=36,h(e,this.offset+t,0),h(e,this.offset+t+4,0),h(e,this.offset+t+8,0),h(e,this.offset+t+12,0),h(e,this.offset+t+16,0),h(e,this.offset+t+20,0),t+=24,h(e,this.offset+t,this.nextTrackId),t+=4},e}(t);p.MovieHeaderBox=y,function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(p.TrackHeaderFlags||(p.TrackHeaderFlags={}));var v=function(p){function e(e,t,r,n,i,o,s,a,l,u,h){void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=f),void 0===u&&(u=d),void 0===h&&(h=d);var c=p.call(this,"tkhd",0,e)||this;return c.trackId=t,c.duration=r,c.width=n,c.height=i,c.volume=o,c.alternateGroup=s,c.layer=a,c.matrix=l,c.creationTime=u,c.modificationTime=h,c}return X(e,p),e.prototype.layout=function(e){return this.size=p.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var t=p.prototype.write.call(this,e);return h(e,this.offset+t,r(this.creationTime)),h(e,this.offset+t+4,r(this.modificationTime)),h(e,this.offset+t+8,this.trackId),h(e,this.offset+t+12,0),h(e,this.offset+t+16,this.duration),t+=20,h(e,this.offset+t,0),h(e,this.offset+t+4,0),h(e,this.offset+t+8,this.layer<<16|this.alternateGroup),h(e,this.offset+t+12,a(this.volume)<<16),t+=16,h(e,this.offset+t,n(this.matrix[0])),h(e,this.offset+t+4,n(this.matrix[1])),h(e,this.offset+t+8,n(this.matrix[2])),h(e,this.offset+t+12,n(this.matrix[3])),h(e,this.offset+t+16,n(this.matrix[4])),h(e,this.offset+t+20,n(this.matrix[5])),h(e,this.offset+t+24,i(this.matrix[6])),h(e,this.offset+t+28,i(this.matrix[7])),h(e,this.offset+t+32,i(this.matrix[8])),t+=36,h(e,this.offset+t,n(this.width)),h(e,this.offset+t+4,n(this.height)),t+=8},e}(t);p.TrackHeaderBox=v;var _=function(s){function e(e,t,r,n,i){void 0===r&&(r="unk"),void 0===n&&(n=d),void 0===i&&(i=d);var o=s.call(this,"mdhd",0,0)||this;return o.timescale=e,o.duration=t,o.language=r,o.creationTime=n,o.modificationTime=i,o}return X(e,s),e.prototype.layout=function(e){return this.size=s.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var t=s.prototype.write.call(this,e);return h(e,this.offset+t,r(this.creationTime)),h(e,this.offset+t+4,r(this.modificationTime)),h(e,this.offset+t+8,this.timescale),h(e,this.offset+t+12,this.duration),h(e,this.offset+t+16,function(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}(this.language)<<16),t+20},e}(t);p.MediaHeaderBox=_;var b=function(n){function e(e,t){var r=n.call(this,"hdlr",0,0)||this;return r.handlerType=e,r.name=t,r._encodedName=l(r.name),r}return X(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return h(e,this.offset+t,0),h(e,this.offset+t+4,o(this.handlerType)),h(e,this.offset+t+8,0),h(e,this.offset+t+12,0),h(e,this.offset+t+16,0),t+=20,e.set(this._encodedName,this.offset+t),e[this.offset+t+this._encodedName.length]=0,t+=this._encodedName.length+1},e}(t);p.HandlerBox=b;var E=function(r){function e(e){void 0===e&&(e=0);var t=r.call(this,"smhd",0,0)||this;return t.balance=e,t}return X(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return h(e,this.offset+t,a(this.balance)<<16),t+4},e}(t);p.SoundMediaHeaderBox=E;var S=function(n){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=u);var r=n.call(this,"vmhd",0,0)||this;return r.graphicsMode=e,r.opColor=t,r}return X(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return h(e,this.offset+t,this.graphicsMode<<16|this.opColor[0]),h(e,this.offset+t+4,this.opColor[1]<<16|this.opColor[2]),t+8},e}(t);p.VideoMediaHeaderBox=S,p.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var w=function(n){function e(e,t){void 0===t&&(t=null);var r=n.call(this,"url ",0,e)||this;return r.location=t,e&p.SELF_CONTAINED_DATA_REFERENCE_FLAG||(r._encodedLocation=l(t)),r}return X(e,n),e.prototype.layout=function(e){var t=n.prototype.layout.call(this,e);return this._encodedLocation&&(t+=this._encodedLocation.length+1),this.size=t},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+t),e[this.offset+t+this._encodedLocation.length]=0,t+=this._encodedLocation.length),t},e}(t);p.DataEntryUrlBox=w;var x=function(n){function e(e){var t=n.call(this,"dref",0,0)||this;return t.entries=e,t}return X(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return h(t,this.offset+r,this.entries.length),this.entries.forEach(function(e){r+=e.write(t)}),r},e}(t);p.DataReferenceBox=x;var P=function(r){function e(e){var t=r.call(this,"dinf",[e])||this;return t.dataReference=e,t}return X(e,r),e}(m);p.DataInformationBox=P;var C=function(n){function e(e){var t=n.call(this,"stsd",0,0)||this;return t.entries=e,t}return X(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return r+=4,this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return h(t,this.offset+r,this.entries.length),r+=4,this.entries.forEach(function(e){r+=e.write(t)}),r},e}(t);p.SampleDescriptionBox=C;var A=function(s){function e(e,t,r,n,i){var o=s.call(this,"stbl",[e,t,r,n,i])||this;return o.sampleDescriptions=e,o.timeToSample=t,o.sampleToChunk=r,o.sampleSizes=n,o.chunkOffset=i,o}return X(e,s),e}(m);p.SampleTableBox=A;var T=function(i){function e(e,t,r){var n=i.call(this,"minf",[e,t,r])||this;return n.header=e,n.info=t,n.sampleTable=r,n}return X(e,i),e}(m);p.MediaInformationBox=T;var k=function(i){function e(e,t,r){var n=i.call(this,"mdia",[e,t,r])||this;return n.header=e,n.handler=t,n.info=r,n}return X(e,i),e}(m);p.MediaBox=k;var R=function(n){function e(e,t){var r=n.call(this,"trak",[e,t])||this;return r.header=e,r.media=t,r}return X(e,n),e}(m);p.TrackBox=R;var M=function(s){function e(e,t,r,n,i){var o=s.call(this,"trex",0,0)||this;return o.trackId=e,o.defaultSampleDescriptionIndex=t,o.defaultSampleDuration=r,o.defaultSampleSize=n,o.defaultSampleFlags=i,o}return X(e,s),e.prototype.layout=function(e){return this.size=s.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var t=s.prototype.write.call(this,e);return h(e,this.offset+t,this.trackId),h(e,this.offset+t+4,this.defaultSampleDescriptionIndex),h(e,this.offset+t+8,this.defaultSampleDuration),h(e,this.offset+t+12,this.defaultSampleSize),h(e,this.offset+t+16,this.defaultSampleFlags),t+20},e}(t);p.TrackExtendsBox=M;var D=function(i){function e(e,t,r){var n=i.call(this,"mvex",s([e],t,[r]))||this;return n.header=e,n.tracDefaults=t,n.levels=r,n}return X(e,i),e}(m);p.MovieExtendsBox=D;var I=function(n){function e(e,t){var r=n.call(this,"meta",0,0)||this;return r.handler=e,r.otherBoxes=t,r}return X(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return r+=this.handler.layout(t+r),this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return r+=this.handler.write(t),this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(t);p.MetaBox=I;var F,O=function(r){function e(e){var t=r.call(this,"mfhd",0,0)||this;return t.sequenceNumber=e,t}return X(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return h(e,this.offset+t,this.sequenceNumber),t+4},e}(t);p.MovieFragmentHeaderBox=O,function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(F=p.TrackFragmentFlags||(p.TrackFragmentFlags={}));var L=function(l){function e(e,t,r,n,i,o,s){var a=l.call(this,"tfhd",0,e)||this;return a.trackId=t,a.baseDataOffset=r,a.sampleDescriptionIndex=n,a.defaultSampleDuration=i,a.defaultSampleSize=o,a.defaultSampleFlags=s,a}return X(e,l),e.prototype.layout=function(e){var t=l.prototype.layout.call(this,e)+4,r=this.flags;return r&F.BASE_DATA_OFFSET_PRESENT&&(t+=8),r&F.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(t+=4),r&F.DEFAULT_SAMPLE_DURATION_PRESENT&&(t+=4),r&F.DEFAULT_SAMPLE_SIZE_PRESENT&&(t+=4),r&F.DEFAULT_SAMPLE_FLAGS_PRESENT&&(t+=4),this.size=t},e.prototype.write=function(e){var t=l.prototype.write.call(this,e),r=this.flags;return h(e,this.offset+t,this.trackId),t+=4,r&F.BASE_DATA_OFFSET_PRESENT&&(h(e,this.offset+t,0),h(e,this.offset+t+4,this.baseDataOffset),t+=8),r&F.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(h(e,this.offset+t,this.sampleDescriptionIndex),t+=4),r&F.DEFAULT_SAMPLE_DURATION_PRESENT&&(h(e,this.offset+t,this.defaultSampleDuration),t+=4),r&F.DEFAULT_SAMPLE_SIZE_PRESENT&&(h(e,this.offset+t,this.defaultSampleSize),t+=4),r&F.DEFAULT_SAMPLE_FLAGS_PRESENT&&(h(e,this.offset+t,this.defaultSampleFlags),t+=4),t},e}(t);p.TrackFragmentHeaderBox=L;var N=function(r){function e(e){var t=r.call(this,"tfdt",0,0)||this;return t.baseMediaDecodeTime=e,t}return X(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return h(e,this.offset+t,this.baseMediaDecodeTime),t+4},e}(t);p.TrackFragmentBaseMediaDecodeTimeBox=N;var B,j=function(i){function e(e,t,r){var n=i.call(this,"traf",[e,t,r])||this;return n.header=e,n.decodeTime=t,n.run=r,n}return X(e,i),e}(m);p.TrackFragmentBox=j,function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(p.SampleFlags||(p.SampleFlags={})),function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(B=p.TrackRunFlags||(p.TrackRunFlags={}));var z=function(s){function e(e,t,r,n){var i=s.call(this,"trun",1,e)||this;return i.samples=t,i.dataOffset=r,i.firstSampleFlags=n,i}return X(e,s),e.prototype.layout=function(e){var t=s.prototype.layout.call(this,e)+4,r=this.samples.length,n=this.flags;return n&B.DATA_OFFSET_PRESENT&&(t+=4),n&B.FIRST_SAMPLE_FLAGS_PRESENT&&(t+=4),n&B.SAMPLE_DURATION_PRESENT&&(t+=4*r),n&B.SAMPLE_SIZE_PRESENT&&(t+=4*r),n&B.SAMPLE_FLAGS_PRESENT&&(t+=4*r),n&B.SAMPLE_COMPOSITION_TIME_OFFSET&&(t+=4*r),this.size=t},e.prototype.write=function(e){var t=s.prototype.write.call(this,e),r=this.samples.length,n=this.flags;h(e,this.offset+t,r),t+=4,n&B.DATA_OFFSET_PRESENT&&(h(e,this.offset+t,this.dataOffset),t+=4),n&B.FIRST_SAMPLE_FLAGS_PRESENT&&(h(e,this.offset+t,this.firstSampleFlags),t+=4);for(var i=0;i<r;i++){var o=this.samples[i];n&B.SAMPLE_DURATION_PRESENT&&(h(e,this.offset+t,o.duration),t+=4),n&B.SAMPLE_SIZE_PRESENT&&(h(e,this.offset+t,o.size),t+=4),n&B.SAMPLE_FLAGS_PRESENT&&(h(e,this.offset+t,o.flags),t+=4),n&B.SAMPLE_COMPOSITION_TIME_OFFSET&&(h(e,this.offset+t,o.compositionTimeOffset),t+=4)}return t},e}(t);p.TrackRunBox=z;var U=function(n){function e(e,t){var r=n.call(this,"moof",s([e],t))||this;return r.header=e,r.trafs=t,r}return X(e,n),e}(m);p.MovieFragmentBox=U;var V=function(i){function e(e){var t=i.call(this,"mdat")||this;return t.chunks=e,t}return X(e,i),e.prototype.layout=function(e){var t=i.prototype.layout.call(this,e);return this.chunks.forEach(function(e){t+=e.length}),this.size=t},e.prototype.write=function(t){var r=this,n=i.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,r.offset+n),n+=e.length},this),n},e}(e);p.MediaDataBox=V;var q=function(n){function e(e,t){var r=n.call(this,e)||this;return r.dataReferenceIndex=t,r}return X(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return h(e,this.offset+t,0),h(e,this.offset+t+4,this.dataReferenceIndex),t+8},e}(e),H=function(a){function e(e,t,r,n,i,o){void 0===r&&(r=2),void 0===n&&(n=16),void 0===i&&(i=44100),void 0===o&&(o=null);var s=a.call(this,e,t)||this;return s.channelCount=r,s.sampleSize=n,s.sampleRate=i,s.otherBoxes=o,s}return X(e,a),e.prototype.layout=function(t){var r=a.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=a.prototype.write.call(this,t);return h(t,this.offset+r,0),h(t,this.offset+r+4,0),h(t,this.offset+r+8,this.channelCount<<16|this.sampleSize),h(t,this.offset+r+12,0),h(t,this.offset+r+16,this.sampleRate<<16),r+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(p.SampleEntry=q);p.AudioSampleEntry=H,p.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var G=function(c){function e(e,t,r,n,i,o,s,a,l,u){void 0===i&&(i=""),void 0===o&&(o=72),void 0===s&&(s=72),void 0===a&&(a=1),void 0===l&&(l=p.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===u&&(u=null);var h=c.call(this,e,t)||this;if(h.width=r,h.height=n,h.compressorName=i,h.horizResolution=o,h.vertResolution=s,h.frameCount=a,h.depth=l,h.otherBoxes=u,31<i.length)throw new Error("invalid compressor name");return h}return X(e,c),e.prototype.layout=function(t){var r=c.prototype.layout.call(this,t)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=c.prototype.write.call(this,t);h(t,this.offset+r,0),h(t,this.offset+r+4,0),h(t,this.offset+r+8,0),h(t,this.offset+r+12,0),r+=16,h(t,this.offset+r,this.width<<16|this.height),h(t,this.offset+r+4,n(this.horizResolution)),h(t,this.offset+r+8,n(this.vertResolution)),r+=12,h(t,this.offset+r,0),h(t,this.offset+r+4,this.frameCount<<16),r+=6,t[this.offset+r]=this.compressorName.length;for(var e=0;e<31;e++)t[this.offset+r+e+1]=e<this.compressorName.length?127&this.compressorName.charCodeAt(e):0;return r+=32,h(t,this.offset+r,this.depth<<16|65535),r+=4,this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(q);p.VideoSampleEntry=G;var W=function(n){function e(e,t){var r=n.call(this,e)||this;return r.data=t,r}return X(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return e.set(this.data,this.offset+t),t+this.data.length},e}(e);p.RawTag=W}(e.Iso||(e.Iso={}))}(e.MP4||(e.MP4={}))}(n=n||{}),t.MP4Mux=n.MP4.MP4Mux},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),p=r(5);t.MP3ToMP3={getInputFormat:function(){return{mimeType:"audio/mpeg"}},getOutputFormat:function(){return{mimeType:"audio/mpeg"}},transmux:function(h){var e=new c.helpers.abortableJob.AbortableJob(function(){function t(){u.close()}function n(e){l=!0;try{t()}catch(e){}r.reject(e),h.abort()}var r=c.helpers.deferred.buildDeferred(),i=new c.eventDispatcher.EventDispatcher,o=[],s=[],a=!1,l=!1,u=new p.MP3Parser;return u.onFrame=function(e){if(!l)try{s.push(e)}catch(e){n(e)}},h.onProgressUpdate(function(e){var t,r=e.data;!a&&e.initData&&(r=c.helpers.arrayBuffer.combine([e.initData,e.data])),a=!0;try{u.push(r),s.length&&(t=c.helpers.arrayBuffer.combine(s),o.push(t),s.splice(0),i.dispatch({data:t}))}catch(e){n(e)}}),h.onCompletion(function(e){try{t(),r.resolve(e)}catch(e){n(e)}}),h.onError(n),{result:r.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return o.length?{data:c.helpers.arrayBuffer.combine(o)}:null}},abort:function(){l=!0,h.abort(),t()}}});return e.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(22),o=r(4),s=r(20),a=r(18),l=[i.MP3ToMP3,a.MP4ToMP4,n.PassThrough,o.MP3ToMP4,s.OggOpusToWebm];t.default=l},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(2),s=t(23);r.TransmuxerFactory={retrieveTransmuxers:function(n,i){return s.default.filter(function(e){var t=e.getInputFormat(),r=e.getOutputFormat();return(!n||o.isPartialMatch(t,n))&&(!i||o.isPartialMatch(r,i))})},retrieveTransmuxer:function(e,t){return r.TransmuxerFactory.retrieveTransmuxers(e,t)[0]||null}}},function(e,t,r){"use strict";function F(e){var t=e.byteLength,r=new DataView(e),n=t&&r.getUint8(t-1);if(n){for(var i=t-n,o=new Uint8Array(i),s=0;s<i;s++)o[s]=r.getUint8(s);return o.buffer}return e}t.__esModule=!0,t.removePadding=F;var n=t.AESDecryptor=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],s=r[3],a=this.invSubMix,l=a[0],u=a[1],h=a[2],c=a[3],p=new Uint32Array(256),d=0,f=0,m=0;for(m=0;m<256;m++)p[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var g=f^f<<1^f<<2^f<<3^f<<4;g=g>>>8^255&g^99,e[d]=g,t[g]=d;var y=p[d],v=p[y],_=p[v],b=257*p[g]^16843008*g;n[d]=b<<24|b>>>8,i[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,s[d]=b,b=16843009*_^65537*v^257*y^16843008*d,l[g]=b<<24|b>>>8,u[g]=b<<16|b>>>16,h[g]=b<<8|b>>>24,c[g]=b,d?(d=y^p[p[p[_^y]]],f^=p[p[f]]):d=f=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),s=void 0,a=void 0,l=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),h=this.sBox,c=this.rcon,p=this.invSubMix,d=p[0],f=p[1],m=p[2],g=p[3],y=void 0,v=void 0;for(s=0;s<o;s++)s<i?y=l[s]=t[s]:(v=y,s%i==0?(v=h[(v=v<<8|v>>>24)>>>24]<<24|h[v>>>16&255]<<16|h[v>>>8&255]<<8|h[255&v],v^=c[s/i|0]<<24):6<i&&s%i==4&&(v=h[v>>>24]<<24|h[v>>>16&255]<<16|h[v>>>8&255]<<8|h[255&v]),l[s]=y=(l[s-i]^v)>>>0);for(a=0;a<o;a++)s=o-a,v=3&a?l[s]:l[s-4],u[a]=a<4||s<=4?v:d[h[v>>>24]]^f[h[v>>>16&255]]^m[h[v>>>8&255]]^g[h[255&v]],u[a]=u[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,n){for(var i=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,l=a[0],u=a[1],h=a[2],c=a[3],p=this.uint8ArrayToUint32Array_(r),d=p[0],f=p[1],m=p[2],g=p[3],y=new Int32Array(e),v=new Int32Array(y.length),_=void 0,b=void 0,E=void 0,S=void 0,w=void 0,x=void 0,P=void 0,C=void 0,A=void 0,T=void 0,k=void 0,R=void 0,M=void 0,D=void 0,I=this.networkToHostOrderSwap;t<y.length;){for(A=I(y[t]),T=I(y[t+1]),k=I(y[t+2]),R=I(y[t+3]),w=A^o[0],x=R^o[1],P=k^o[2],C=T^o[3],M=4,D=1;D<i;D++)_=l[w>>>24]^u[x>>16&255]^h[P>>8&255]^c[255&C]^o[M],b=l[x>>>24]^u[P>>16&255]^h[C>>8&255]^c[255&w]^o[M+1],E=l[P>>>24]^u[C>>16&255]^h[w>>8&255]^c[255&x]^o[M+2],S=l[C>>>24]^u[w>>16&255]^h[x>>8&255]^c[255&P]^o[M+3],w=_,x=b,P=E,C=S,M+=4;_=s[w>>>24]<<24^s[x>>16&255]<<16^s[P>>8&255]<<8^s[255&C]^o[M],b=s[x>>>24]<<24^s[P>>16&255]<<16^s[C>>8&255]<<8^s[255&w]^o[M+1],E=s[P>>>24]<<24^s[C>>16&255]<<16^s[w>>8&255]<<8^s[255&x]^o[M+2],S=s[C>>>24]<<24^s[w>>16&255]<<16^s[x>>8&255]<<8^s[255&P]^o[M+3],M+=3,v[t]=I(_^d),v[t+1]=I(S^f),v[t+2]=I(E^m),v[t+3]=I(b^g),d=A,f=T,m=k,g=R,t+=4}return n?F(v.buffer):v.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),d=r(25),n=null,f=16;t.JSCrypto={canDecrypt:function(e){return"AES-CBC"===e.cipher},decrypt:function(e,h){var c=n=n||new d.AESDecryptor,t=new p.helpers.abortableJob.AbortableJob(function(){var t,i=new p.eventDispatcher.EventDispatcher,r=p.helpers.deferred.buildDeferred(),o=[],s=null,n=[],a=0,l=new Uint8Array(h.iv),u=!1;c.expandKey(h.key.buffer);return e.onProgressUpdate(function(e){u||(p.helpers.arrayBuffer.forEach(e,function(e){u||(a||(t=new Uint8Array(16)),t[a++]=e,16===a&&(n.push(t),a=0))}),n.length&&(function(e){var t=s;s=new Uint8Array(c.decrypt(e.buffer,0,l.buffer,!1));var r=e.byteLength-f;if(r<0)throw new Error("lastBlockOffset invalid.");for(var n=0;n<f;n++)l[n]=e[r+n];t&&(o.push(t),i.dispatch(t))}(p.helpers.arrayBuffer.combine(n)),n=[]))}),e.onCompletion(function(e){var t;u||(a?r.reject(new Error("Reached end part way through block.")):(s&&(t=new Uint8Array(d.removePadding(s.buffer)),o.push(t),i.dispatch(t)),r.resolve(e)))}),e.onError(r.reject),{result:r.promise,abort:function(){u=!0,e.abort()},progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return p.helpers.arrayBuffer.combine(o)}}}});return t.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),i=[n.JSCrypto];t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(27),o=n.helpers.find;t.DecryptorFactory={retrieveDecryptor:function(t){return o(i.default,function(e){return e.canDecrypt(t)})||null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),h=r(28),c=r(7);t.getSegmentDownloadAndDecryptJob=function(e){var s=e.encryptionConfig,a=e.downloadAbortableJob,l=e.logger;return new u.helpers.abortableJob.AbortableJob(function(){var t=new u.eventDispatcher.EventDispatcher,r=u.helpers.deferred.buildDeferred(),e=null;if(s&&(l.info("Finding a decryptor..."),!(e=h.DecryptorFactory.retrieveDecryptor(s))))return l.error("Could not find a decryptor."),r.reject(new c.NoDecryptorError),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:function(){return null}}};var n=a.run(),i=null,o=[];return s&&e?((i=e.decrypt(n,s)).onProgressUpdate(function(e){o.push(e),t.dispatch(e)}),i.onError(function(e){e!==u.helpers.abortableJob.abortedError&&l.error("Error occurred during decryption.",e),r.reject(e),n.abort()})):n.onProgressUpdate(function(e){o.push(e),t.dispatch(e)}),n.onCompletion(function(){function e(){return r.resolve(void 0)}i?i.whenComplete().then(e):e()}),n.onError(r.reject),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:function(){return o.length?u.helpers.arrayBuffer.combine(o):null}},abort:function(){n.abort(),i&&i.abort()}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var E=r(0),S=r(8);t.getSegmentDownloadJob=function(e){var t=e.delayCalculator,d=e.segmentEventRepresentation,f=e.url,r=e.loader,n=e.onSegmentRequestQueued,m=e.onSegmentRequestStart,g=e.onSegmentRequestFailed,y=e.onSegmentRetrieved,v=e.isResponseCodeAcceptable,_=e.isResponseCodeRetryable,b=e.logger;return new E.helpers.abortableJob.AbortableJob(function(){var u=E.helpers.deferred.buildDeferred(),h=new E.eventDispatcher.EventDispatcher,c=[],p=0,e=E.helpers.retry.retry(t,function(e){var o=e.scheduleRetry,s=!1,i=0;n.dispatch({segment:d}),b.debug("Requesting segment.",f);var a=r.request({url:f});a.onRequestStart(function(){return m.dispatch({segment:d})});function l(e){var t,r,n=e.byteLength;n&&((i+=n)<=p?b.debug("Already downloaded this part. Skipping...",i,p):(t=n-(i-p),r=new Uint8Array(e,t),p=i,c.push(r),h.dispatch(r)))}return a.onProgress(function(e){var t,r=e.initial,n=e.statusCode,i=e.part;r?v(n)?(b.debug("Segment response started.",f,n),l(i)):(t=null,_(n)?b.debug("Segment response code was not acceptable. Will retry.",f,n):(b.debug("Segment response code was not acceptable.",f,n),t=new S.UnacceptableResponseStatusCodeError(n)),a.abort(),g.dispatch({segment:d,statusCode:n}),t?u.reject(t):(s=!0,o())):(b.debug("Got segment response part.",f,n),l(i))}),a.onResponseReceived(function(e){s||(e?(y.dispatch({segment:d,statusCode:e.statusCode}),u.resolve(void 0)):(b.warn("Segment request timed out.",f),g.dispatch({segment:d,statusCode:null}),o()))}),a.onError(function(e){s||e!==E.helpers.abortableJob.abortedError&&(e instanceof E.loaderErrors.LoaderError?(b.warn("Error from loader. Will retry",f,e),o()):(b.error("Unexpected error when requesting segment.",e),u.reject(e)))}),{onCancel:function(){b.debug("Aborting segment request.",f),a.hasCompleted()||a.abort(),g.dispatch({segment:d,aborted:!0})}}},{onNoMoreRetries:function(){return u.reject(new Error("No more retries for requesting segment."))}}).cancel;return{result:u.promise,progressUpdates:{onProgressUpdate:h,getProgressSoFar:function(){return c.length?E.helpers.arrayBuffer.combine(c):null}},abort:function(){return e()}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.DefaultSegmentParser={getFormat:function(){return{}},parseSegmentData:function(e){return n.helpers.abortableJob.map(function(){return e},{convertProgressUpdate:function(e){return{data:e}},convertResult:function(e){return e}}).run()}}},function(e,d,t){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var f=t(0),m=t(3),n=f.helpers.abortableJob.AbortableJob,g=f.helpers.arrayBuffer.combine,y=new f.helpers.SCWeakMap;d.OggOpusSegmentParser={getFormat:function(){return{mimeType:"audio/ogg",audioCodec:{id:"opus"}}},parseSegmentData:function(r,c,p){var e=new n(function(){var t=f.helpers.deferred.buildDeferred(),i=new f.eventDispatcher.EventDispatcher,o=[],s=null,a=null,l=null,u=function(e){t.reject(e),r.abort()},h=function(e){y.set(p,e),i.dispatch({initData:e,data:g(o)})};return r.onProgressUpdate(function(e){var t,r,n;s&&"PRESENT"===s.state&&s.initDataEnded?(o.push(e),i.dispatch({initData:s.initData,data:e})):s&&"NOT_PRESENT"===s.state?o.push(e):(o.push(e),t=g(o),(s=function(e){var t=m.retrievePages(e).pages;if(t.length){var r=m.retrievePackets([t[0]])[0];if(r&&r.first){var n=1,i=t.slice(1).some(function(e,t){var r=!!(1&e.header.type[0]);return 0<t&&!r||(n=t+2,!1)});return{state:"PRESENT",initData:g(t.slice(0,n).map(function(e){return e.entirePage})),initDataEnded:i}}return{state:"NOT_PRESENT"}}return null}(t))&&("NOT_PRESENT"===s.state?(r=y.get(p),c.getSequenceNumber()<=p.getFirstSegmentIndex()?u(new Error("Could not find init data.")):r?h((s={state:"PRESENT",initData:r,initDataEnded:!0}).initData):((a=p.getSegment(p.getFirstSegmentIndex())).onCompletion(function(e){var n=l=d.OggOpusSegmentParser.parseSegmentData(f.helpers.abortableJob.map(function(){return e.retrieveData()},{convertProgressUpdate:function(e){return e.initData?f.helpers.arrayBuffer.combine([e.initData,e.data]):e.data},convertResult:function(e){return e}}).run(),e,p);n.onProgressUpdate(function(e){var t=e.initData;if(n.abort(),!t){var r=new Error("OggOpusSegmentParser should always provide init data.");throw u(r),r}s={state:"PRESENT",initData:t,initDataEnded:!0},h(t)}),n.onError(function(e){e!==f.helpers.abortableJob.abortedError&&u(e)})}),a.onError(u))):"PRESENT"===s.state&&s.initDataEnded&&(o.splice(0),t.byteLength>s.initData.byteLength&&(n=new Uint8Array(t.buffer.slice(s.initData.byteLength)),o.push(n)),h(s.initData))))}),r.onCompletion(function(e){s&&"PRESENT"===s.state&&!s.initDataEnded?(h(s.initData),t.resolve(e)):s&&"PRESENT"===s.state?t.resolve(e):t.reject(new Error("Could not find init data."))}),r.onError(u),{result:t.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return s&&"PRESENT"===s.state&&s.initDataEnded?{initData:s.initData,data:g(o)}:null}},abort:function(){r.abort(),a&&a.abort(),l&&l.abort()}}});return e.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32),i=r(31),o=[n.OggOpusSegmentParser,i.DefaultSegmentParser];t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(2),o=r(33),s=n.helpers.find;t.SegmentParserFactory={retrieveSegmentParser:function(t){var e=s(o.default,function(e){return i.isPartialMatch(e.getFormat(),t)});if(!e)throw new Error("No segment parser found.");return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var S=r(0),w=r(9),x=r(34),P=r(30),C=r(29),A=S.helpers.abortableJob.AbortableJob,T=S.eventDispatcher.EventDispatcher,k=S.logger.noOpLogger,n=function(){function e(e){var t=e.url,r=e.sequenceNumber,n=e.playlist,i=e.timeRange,o=e.encryptionConfig,s=e.initData,a=e.format,l=e.loader,u=e.playlistEventRepresentation,h=e.logger,c=void 0===h?k:h,p=e.delayCalculator,d=void 0===p?S.helpers.retry.buildExponentialDelayCalculator():p,f=e.isResponseCodeAcceptable,m=void 0===f?function(e){return 200===e}:f,g=e.isResponseCodeRetryable,y=void 0===g?function(e){return!(400<=e&&e<500)}:g,v=this;this._onSegmentRequestQueued=new T,this._onSegmentRequestStart=new T,this._onSegmentRetrieved=new T,this._onSegmentRequestFailed=new T,this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this._sequenceNumber=r,this._playlist=n,this._timeRange=i,this._format=a;var _=this._segmentEventRepresentation=new w.Segment(u,t,r),b=P.getSegmentDownloadJob({delayCalculator:d,segmentEventRepresentation:_,url:t,loader:l,onSegmentRequestQueued:this._onSegmentRequestQueued,onSegmentRequestStart:this._onSegmentRequestStart,onSegmentRequestFailed:this._onSegmentRequestFailed,onSegmentRetrieved:this._onSegmentRetrieved,isResponseCodeAcceptable:m,isResponseCodeRetryable:y,logger:c}),E=C.getSegmentDownloadAndDecryptJob({encryptionConfig:o,downloadAbortableJob:b,logger:c});this._retrieveAbortableJob=new A(function(){var e=x.SegmentParserFactory.retrieveSegmentParser(v._format),t=new T,r=S.helpers.deferred.buildDeferred(),n=e.parseSegmentData(S.helpers.abortableJob.map(function(){return E.run()},{convertProgressUpdate:function(e,t){return t&&s?S.helpers.arrayBuffer.combine([s,e]):e},convertResult:function(e){return e}}).run(),v,v._playlist);return n.onProgressUpdate(t.dispatch,{skipPast:!0}),n.onCompletion(function(){return r.resolve(void 0)}),n.onError(r.reject),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:n.getProgressSoFar},abort:n.abort}})}return e.prototype.getFormat=function(){return this._format},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e.prototype.isFinalSegment=function(){var e=this._playlist;return e.hasEnded()&&e.getFirstSegmentIndex()+e.getSegmentCount()-1===this._sequenceNumber},e.prototype.getTimeRange=function(){return this._timeRange},e.prototype.getEventRepresentation=function(){return this._segmentEventRepresentation},e.prototype.retrieveData=function(){var r=this,e=new A(function(){var e=S.helpers.deferred.buildDeferred(),n=new T,i=[],t=r._retrieveAbortableJob.run(),o=void 0;return t.onProgressUpdate(function(e){var t=e.data,r=e.initData;i.length||(o=r),i.push(t),n.dispatch({data:t,initData:o})}),t.onCompletion(function(){e.resolve(void 0)}),t.onError(e.reject),{result:e.promise,progressUpdates:{onProgressUpdate:n,getProgressSoFar:function(){return i.length?{initData:o,data:S.helpers.arrayBuffer.combine(i)}:null}},abort:function(){return t.abort()}}});return e.run()},e}();t.Segment=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.eventDispatcher.EventDispatcher;!function(e){e[e.LIVE=0]="LIVE",e[e.EVENT=1]="EVENT",e[e.VOD=2]="VOD"}(t.PlaylistType||(t.PlaylistType={}));var o=function(){function e(){this._onPlaylistRequestQueued=new i,this._onPlaylistRequestStart=new i,this._onPlaylistRetrieved=new i,this._onPlaylistRequestFailed=new i,this._onPlaylistParseStart=new i,this._onPlaylistParseEnd=new i,this._onKeyRequestQueued=new i,this._onKeyRequestStart=new i,this._onKeyRetrieved=new i,this._onKeyRequestFailed=new i,this._onInitDataRequestQueued=new i,this._onInitDataRequestStart=new i,this._onInitDataRetrieved=new i,this._onInitDataRequestFailed=new i,this._onUpdated=new i,this.onPlaylistRequestQueued=this._onPlaylistRequestQueued.getHandle(),this.onPlaylistRequestStart=this._onPlaylistRequestStart.getHandle(),this.onPlaylistRetrieved=this._onPlaylistRetrieved.getHandle(),this.onPlaylistRequestFailed=this._onPlaylistRequestFailed.getHandle(),this.onPlaylistParseStart=this._onPlaylistParseStart.getHandle(),this.onPlaylistParseEnd=this._onPlaylistParseEnd.getHandle(),this.onKeyRequestQueued=this._onKeyRequestQueued.getHandle(),this.onKeyRequestStart=this._onKeyRequestStart.getHandle(),this.onKeyRetrieved=this._onKeyRetrieved.getHandle(),this.onKeyRequestFailed=this._onKeyRequestFailed.getHandle(),this.onInitDataRequestQueued=this._onInitDataRequestQueued.getHandle(),this.onInitDataRequestStart=this._onInitDataRequestStart.getHandle(),this.onInitDataRetrieved=this._onInitDataRetrieved.getHandle(),this.onInitDataRequestFailed=this._onInitDataRequestFailed.getHandle(),this.onUpdated=this._onUpdated.getHandle()}return e.prototype.update=function(){var e=this,t=this._update();return t.onCompletion(function(){return e._onUpdated.dispatch(void 0)}),t},e.prototype.getSegment=function(e){return this.getSegments(e,e+1)[0]},e.prototype.getSegments=function(e,t){var r=this.getSegmentCount(),n=this.getFirstSegmentIndex();if(void 0===t&&(t=n+r),void 0===e&&(e=n),e<n||t<e||n+r<t)throw new Error("Invalid range of segments.");for(var i=[],o=e;o<t;o++)i.push(this._getSegment(o));return i},e}();t.Playlist=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,u=r(0),h=r(3),c=r(10),a=r(2),p=u.helpers.find,d=u.eventDispatcher.EventDispatcher,f=u.helpers.abortableJob.abortedError,m=u.logger.prefixLogger,g=u.logger.noOpLogger;!function(e){e[e.RETRIEVING_SEGMENT=0]="RETRIEVING_SEGMENT",e[e.RETRIEVED_SEGMENT=1]="RETRIEVED_SEGMENT",e[e.RETRIEVING_DATA=2]="RETRIEVING_DATA",e[e.COMPLETE=3]="COMPLETE"}(l=l||{});var n=function(){function e(e){this._onSegmentRequestQueued=new d,this._onSegmentRequestStart=new d,this._onSegmentRetrieved=new d,this._onSegmentRequestFailed=new d,this._onSegmentDataRetrieveStarted=new d,this._onSegmentReady=new d,this._onError=new d,this._segments=[],this._retrievingSegment=null,this._timerId=null,this._dead=!1;var t=e.playlist,r=e.getPosition,n=e.maxBufferLength,i=e.cacheSize,o=e.transmuxer,s=e.logger,a=void 0===s?g:s;if(this._logger=m(a,"PlaylistSegmentRetriever"),t&&!t.hasInitialUpdateCompleted())throw new Error("Playlist retrieve has not completed.");if(n<0)throw new Error("Max buffer length must be > 0.");if(i<0)throw new Error("Cache size must be > 0.");this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDataRetrieveStarted=this._onSegmentDataRetrieveStarted.getHandle(),this.onSegmentReady=this._onSegmentReady.getHandle(),this.onError=this._onError.getHandle(),this._playlist=t,this._transmuxer=o,this._getPosition=r,this._maxBufferLength=n,this._cacheSize=i,this.update()}return e.prototype.updateMaxBufferLength=function(e){if(this._ensureNotDead(),e<0)throw new Error("Max buffer length must be > 0.");this._logger.debug("updateMaxBufferLength() called.",e),this._maxBufferLength=e,this.update()},e.prototype.updateCacheSize=function(e){if(this._ensureNotDead(),e<0)throw new Error("Cache size must be > 0.");this._cacheSize=e,this.update()},e.prototype.getCacheSize=function(){return this._cacheSize},e.prototype.getCacheUsage=function(){return this._segments.reduce(function(e,t){return t.state===l.RETRIEVING_DATA||t.state===l.COMPLETE?e+t.size:e},0)},e.prototype.switchPlaylist=function(e){if(this._ensureNotDead(),e&&!e.hasInitialUpdateCompleted())throw new Error("Playlist retrieve has not completed.");this._logger.debug("switchPlaylist() called."),this._abortCurrentRetrieve(),this._playlist=e,this._segments=this._segments.filter(function(e){return e.state===l.COMPLETE}),this.update()},e.prototype.getSegmentsWithData=function(){return this._ensureNotDead(),this._segments.filter(function(e){return e.state===l.RETRIEVING_DATA&&e.size||e.state===l.COMPLETE}).map(function(e){var t=e.segment,r=e.dataRetrieveJob;return{segment:t,dataRetrieveJob:r,complete:e.state===l.COMPLETE}})},e.prototype.update=function(){var r=this;this._ensureNotDead(),this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null);var n=this._getPosition(),i=n,o=0;this._segments.some(function(e){if(e.state!==l.COMPLETE)return!1;var t=e.segment.getTimeRange();return t.containsTime(o)&&(o=t.end),!(t.end<n)&&(t.start>i||(i=t.end,!1))});var s=n+this._maxBufferLength,e=function(){var e=r._playlist;if(e){var t=e.hasEnded()&&i===e.getDuration();if(t)return i=o,e.getDuration()+o<s}return i<s}();if(!e)return this._abortCurrentRetrieve(),this._garbageCollect(n),void this._scheduleNextUpdate();var t=p(this._segments,function(e){if(e.state!==l.RETRIEVED_SEGMENT&&e.state!==l.RETRIEVING_DATA)return!1;var t=e.segment.getTimeRange();return t.containsTime(i)});t?this._retrieveSegmentData(t):this._retrieveSegment(i),this._garbageCollect(n)},e.prototype.kill=function(){this._dead||(this._logger.debug("kill() called."),this._abortCurrentRetrieve(),this._dead=!0,this._timerId&&(this._logger.debug("Cancelling update timer."),window.clearTimeout(this._timerId)),this._segments=[],this._logger.debug("Killed."))},e.prototype._retrieveSegmentData=function(n){var i,e,o,s,a=this;if(n.state!==l.RETRIEVED_SEGMENT&&n.state!==l.RETRIEVING_DATA)throw new Error("Segment in incorrect state for data to be retrieved.");this._retrievingSegment&&this._retrievingSegment.state===l.RETRIEVING_DATA&&n.segment===this._retrievingSegment.segment||(this._abortCurrentRetrieve(),i=u.helpers.abortableJob.map(function(){return a._transmuxer.transmux(n.segment.retrieveData())},{convertResult:function(e){return e},convertProgressUpdate:function(e){return e},abortableJobOpts:{storeResult:!0}}),e=i.run(),o=!1,s=this._retrievingSegment={state:l.RETRIEVING_DATA,dataRetrieveJob:i,dataRetrieveJobHandle:e,segment:n.segment,size:0},this._switchSegment(n,s),e.onProgressUpdate(function(e){var t=s.size,r=t;!o&&e.initData&&(t+=e.initData.byteLength),o=!0,t+=e.data.byteLength,s.size=t,0===r&&0<t&&a._onSegmentDataRetrieveStarted.dispatch({segment:n.segment,dataRetrieveJob:i,complete:!1})}),e.onCompletion(function(){if(a._retrievingSegment=null,s.state!==l.RETRIEVING_DATA)throw new Error("Incorrect retrieval state.");a._switchSegment(s,{state:l.COMPLETE,dataRetrieveJob:s.dataRetrieveJob,dataRetrieveJobHandle:s.dataRetrieveJobHandle,segment:n.segment,size:s.size}),a._logger.debug("Segment retrieve completed.",n.segment.getEventRepresentation()),a.update(),a._onSegmentReady.dispatch({segment:n.segment,complete:!0,dataRetrieveJob:s.dataRetrieveJob})}),e.onError(function(e){e!==f&&(a._logger.error("Error retrieving segment data.",e,n.segment.getEventRepresentation()),a._scheduleNextUpdate(),e instanceof h.OggParserError&&(e=e instanceof h.ChecksumFailedError?new c.OggParserError("CHECKSUM_FAILED"):e instanceof h.NoSegmentsInPageError?new c.OggParserError("NO_SEGMENTS_IN_PAGE"):e instanceof h.PageFromDifferentBitstreamError?new c.OggParserError("PAGE_FROM_DIFFERENT_BITSTREAM"):e instanceof h.PageSequenceNumberDidNotIncrementError?new c.OggParserError("SEQUENCE_NUMBER_DID_NOT_INCREMENT"):e instanceof h.UnexpectedBOSError?new c.OggParserError("UNEXPECTED_BOS"):e instanceof h.UnexpectedEOSError?new c.OggParserError("UNEXPECTED_EOS"):new c.OggParserError("UNKNOWN")),a._onError.dispatch(e))}))},e.prototype._retrieveSegment=function(e){var t,i,o=this,r=this._retrievingSegment,n=this._playlist,s=n?n.getSegmentIndexContainingTime(e):null;r&&r.state===l.RETRIEVING_SEGMENT&&r.segmentIndex===s||(this._abortCurrentRetrieve(),n?null===s?this._scheduleNextUpdate():(t=n.getSegment(s),this._logger.debug("Retrieving segment.",s),t.onCompletion(function(e){if(o._logger.debug("Retrieved segment.",s),!a.isPartialMatch(o._transmuxer.getInputFormat(),e.getFormat())){var t=new Error("Segment format is not supported by transmuxer.");return o._logger.error("Segment incorrect format.",t),o._scheduleNextUpdate(),void o._onError.dispatch(t)}e.onSegmentRequestQueued.subscribe(o._onSegmentRequestQueued.dispatch),e.onSegmentRequestStart.subscribe(o._onSegmentRequestStart.dispatch),e.onSegmentRetrieved.subscribe(o._onSegmentRetrieved.dispatch),e.onSegmentRequestFailed.subscribe(o._onSegmentRequestFailed.dispatch),o._segments.splice(o._segments.indexOf(i),1);var r=e.getTimeRange(),n=o._segments.length;o._segments.some(function(e,t){return e.state!==l.RETRIEVING_SEGMENT&&e.segment.getTimeRange().start>r.start&&(n=t,!0)}),o._segments.splice(n,0,{state:l.RETRIEVED_SEGMENT,segment:e}),o._retrievingSegment=null,o.update()}),t.onError(function(e){e!==f&&(o._logger.error("Error retrieving segment.",e),o._scheduleNextUpdate(),o._onError.dispatch(e))}),i={state:l.RETRIEVING_SEGMENT,segmentIndex:s,segmentRetrieveJob:t},this._segments.push(i),this._retrievingSegment=i):(this._logger.debug("Cannot retrieve segment as there is no playlist."),this._scheduleNextUpdate()))},e.prototype._abortCurrentRetrieve=function(){var e=this._retrievingSegment;e&&(e.state===l.RETRIEVING_SEGMENT?(this._logger.debug("Aborting segment retrieve job."),e.segmentRetrieveJob.abort()):e.state===l.RETRIEVING_DATA&&(this._logger.debug("Aborting segment data retrieve job."),e.dataRetrieveJobHandle.abort(),this._switchSegment(e,{state:l.RETRIEVED_SEGMENT,segment:e.segment})),this._retrievingSegment=null)},e.prototype._switchSegment=function(e,t){var r=this._segments.indexOf(e);if(-1===r)throw new Error("Old segment missing.");this._segments.splice(r,1,t)},e.prototype._garbageCollect=function(i){var e,t,o,r,n=this._segments,s=this._cacheSize,a=this.getCacheUsage();a<=s||(e=this._playlist,t=e&&e.getCompleteDuration(),o=null!==t?t:1/0,r=i+this._maxBufferLength,o<r&&i<=(r-=o)||n.filter(function(e){return e.state===l.COMPLETE&&!function(e,t,r){var n=e.getTimeRange();return r!==t&&(t<r?n.end>t&&n.start<r:n.end>t||n.start<r)}(e.segment,i,r)}).map(function(e){var t=e.segment.getTimeRange(),r=t.start,n=Math.min(Math.abs(i-r),r+o-i);return{segment:e,distance:n,size:e.size}}).sort(function(e,t){return t.distance-e.distance}).some(function(e){return a<=s||(n.splice(n.indexOf(e.segment),1),a-=e.size,!1)}))},e.prototype._scheduleNextUpdate=function(){var e=this;this._timerId||(this._timerId=window.setTimeout(function(){e._timerId=null,e.update()},1e3))},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("Playlist segment retriever has been killed.")},e}();t.PlaylistSegmentRetriever=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(37);t.PlaylistSegmentRetriever=n.PlaylistSegmentRetriever;var i=r(36);t.Playlist=i.Playlist,t.PlaylistType=i.PlaylistType;var o=r(35);t.Segment=o.Segment;var s=r(24);t.TransmuxerFactory=s.TransmuxerFactory;var a=r(4);t.MP3ToMP4Transmuxer=a.MP3ToMP4;var l=r(6);t.PassThroughTransmuxer=l.PassThrough;var u=r(17);t.retrievalErrors=u.retrievalErrors;var h=r(14);t.events=h.events}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._msg=e}return e.prototype.getMsg=function(){return this._msg},e}();t.OggParserError=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.IncompletePageError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.NoSegmentsInPageError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.UnexpectedEOSError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.UnexpectedBOSError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.PageSequenceNumberDidNotIncrementError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.PageFromDifferentBitstreamError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.ChecksumFailedError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Uint32Array([0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]);t.calculateCRC=function(e){var r=0;return e.forEach(function(e){for(var t=0;t<e.length;t++)r=r<<8^n[r>>24&255^e[t]]}),r>>>0}},function(e,t){e.exports=n},function(e,t,r){"use strict";function h(e,t,r){if(void 0===r&&(r=1),t<0||t+r>e.byteLength)throw new Error("extract() out of bounds. "+t+" "+r+" "+e.byteLength);return e.slice(t,t+r)}function m(e,t){return void 0===t&&(t=!0),new DataView(e).getUint32(0,t)}function a(e){var t=new Uint8Array(e.buffer,e.byteOffset),r=t.byteLength;if(r<w)throw new f.IncompletePageError("Incomplete page.");var n=h(t,26);if(r<w+n[0])throw new f.IncompletePageError("Incomplete page.");var i=h(t,w,n[0]),o={version:h(t,4),type:h(t,5),granulePosition:h(t,6,8),bitstreamSerialNumber:h(t,14,4),pageSequenceNumber:h(t,18,4),checksum:h(t,22,4),pageSegments:n,segmentTable:i},s=[],a=w+n[0];if(i.forEach(function(e){if(r<a+e)throw new f.IncompletePageError("Incomplete page.");s.push(h(t,a,e)),a+=e}),!s.length)throw new d.NoSegmentsInPageError("No segments.");var l=c.calculateCRC([E,o.version,o.type,o.granulePosition,o.bitstreamSerialNumber,o.pageSequenceNumber,S,n,i].concat(s)),u=m(o.checksum.buffer);if(l!==u)throw new p.ChecksumFailedError("Checksum failed.");return{header:o,segments:s,entirePage:h(t,0,a)}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),c=r(8),p=r(7),g=r(6),y=r(5),v=r(4),_=r(3),d=r(2),f=r(1),b=n.helpers.arrayBuffer.combine,E=new Uint8Array([79,103,103,83]),S=new Uint8Array([0,0,0,0]),w=27;t.retrievePages=function(e){for(var t=e.buffer,r=[],n=e.byteOffset,i=!0;n<e.byteOffset+e.byteLength;){var o=new DataView(t,n);try{var s=a(o);r.push(s),n+=s.entirePage.byteLength}catch(e){if(e instanceof f.IncompletePageError){i=!1;break}throw e}}return{pages:r,eos:i}},t.parsePage=a,t.retrievePackets=function(h){if(!h.length)return[];var c=m(h[0].header.bitstreamSerialNumber.buffer),p=-1,d=null,f=[];return h.forEach(function(n,e){if(m(n.header.bitstreamSerialNumber.buffer)!==c)throw new g.PageFromDifferentBitstreamError("Got a page from a different bitstream.");var t=m(n.header.pageSequenceNumber.buffer);if(t<=p)throw new y.PageSequenceNumberDidNotIncrementError("Page sequence number was not greater than the previous one.");var i=t!==p+1;p=t;var r=n.header.type[0],o=!!(1&r),s=!!(2&r);if(s&&0<e)throw new v.UnexpectedBOSError("Got BOS on a page which is not the first.");var a=!!(4&r);if(a&&e!==h.length-1)throw new _.UnexpectedEOSError("Got EOS on a page which is not the last.");var l=0;i&&(d=null);var u=n.segments.length;n.segments.forEach(function(e,t){var r;d?d.data=b([d.data,e]):o&&0===t||(d={granulePosition:null,pageSequenceNumber:p,packetOffset:l,discontinuity:i&&0===l,first:s&&0===l,last:!1,data:e},l++),d&&e.byteLength<255&&((r=t===u-1)&&(d.granulePosition=m(n.header.granulePosition.buffer)),d.last=a&&r,f.push(d),d=null)})}),f}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version="29.0.0",r.buildNumber=1819,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(t(10));var n=t(0);r.OggParserError=n.OggParserError;var i=t(7);r.ChecksumFailedError=i.ChecksumFailedError;var o=t(2);r.NoSegmentsInPageError=o.NoSegmentsInPageError;var s=t(6);r.PageFromDifferentBitstreamError=s.PageFromDifferentBitstreamError;var a=t(5);r.PageSequenceNumberDidNotIncrementError=a.PageSequenceNumberDidNotIncrementError;var l=t(4);r.UnexpectedBOSError=l.UnexpectedBOSError;var u=t(3);r.UnexpectedEOSError=u.UnexpectedEOSError;var h=t(1);r.IncompletePageError=h.IncompletePageError}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.helpers.arrayBuffer,o=i.combine,s=i.numberToUint8Array,a=i.createVintBuffer;t.IDS={EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxIDLength:17138,EBMLMaxSizeLength:17139,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029,Segment:408125543,Info:357149030,Duration:17545,Tracks:374648427,TrackEntry:174,TrackNumber:215,TrackUID:29637,FlagLacing:156,CodecID:134,CodecDelay:22186,SeekPreRoll:22203,TrackType:131,Audio:225,Channels:159,SamplingFrequency:181,CodecPrivate:25506,Cluster:524531317,Timecode:231,SimpleBlock:163},t.encodeElement=function(e,t){var r=s(e),n=a(t.byteLength);return o([r,n,t])}},function(e,t,r){"use strict";function l(e){var t=3&e[0];return 0==t?1:3!=t?2:63&e[1]}function u(e){var t=e[0]>>>3&31;if(t>=o.length)throw new Error("Invalid configuration.");return o[t]}function h(e){if(!e.first)throw new Error("OpusHead is always in the first packet.");var t=e.data,r=new DataView(t.buffer),n=r.getUint8(9),i=r.getUint8(18),o=void 0,s=void 0,a=void 0;if(0<i){o=r.getUint8(18),s=r.getUint8(19),a=[];for(var l=0;l<n;l++)a.push(r.getUint8(20+l))}return{version:r.getUint8(8),channelCount:n,preSkip:r.getUint16(10,!0),inputSampleRate:r.getUint32(12,!0),outputGain:r.getInt16(16,!0)*Math.pow(2,-8),channelMapFamily:i,streamCount:o,twoChannelStreamCount:s,channelMappingTable:a}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),c=r(1),i=n.helpers.arrayBuffer,p=i.combine,d=i.numberToUint8Array,o=[10,20,40,60,10,20,40,60,10,20,40,60,10,20,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20];t.parseOpusHead=h,t.setOutputGain=function(e,t){if(128<=t||t<-128)throw new Error("outputGainOverride invalid. It must be >= -128 and < 128.");h(e),new DataView(e.data.buffer).setInt16(16,Math.round(t*Math.pow(2,8)),!0)},t.buildWebm=function(e){var t=e[0];if(!t||!t.first)throw new Error("Missing start of stream.");var r=e.slice(2),n=h(t),i=0,o=r.map(function(e){var t=new Uint8Array(4);t[0]=129,new DataView(t.buffer).setInt16(1,i),t[3]=128;var r=l(e.data);return i+=r*u(e.data),c.encodeElement(c.IDS.SimpleBlock,p([t,e.data]))}),s=p([c.encodeElement(c.IDS.EBML,p([c.encodeElement(c.IDS.EBMLVersion,d(1)),c.encodeElement(c.IDS.EBMLReadVersion,d(1)),c.encodeElement(c.IDS.EBMLMaxIDLength,d(4)),c.encodeElement(c.IDS.EBMLMaxSizeLength,d(8)),c.encodeElement(c.IDS.DocType,new Uint8Array([119,101,98,109])),c.encodeElement(c.IDS.DocTypeVersion,d(1)),c.encodeElement(c.IDS.DocTypeReadVersion,d(2))])),c.encodeElement(c.IDS.Segment,function(){return c.encodeElement(c.IDS.Info,c.encodeElement(c.IDS.Duration,(e=new Uint8Array(8),new DataView(e.buffer).setFloat64(0,i),e)));var e}()),c.encodeElement(c.IDS.Tracks,c.encodeElement(c.IDS.TrackEntry,p([c.encodeElement(c.IDS.TrackNumber,d(1)),c.encodeElement(c.IDS.TrackUID,d(1)),c.encodeElement(c.IDS.FlagLacing,d(0)),c.encodeElement(c.IDS.CodecID,new Uint8Array([65,95,79,80,85,83])),c.encodeElement(c.IDS.CodecDelay,d(n.preSkip/48e3*1e9)),c.encodeElement(c.IDS.SeekPreRoll,new Uint8Array([4,196,180,0])),c.encodeElement(c.IDS.TrackType,d(2)),c.encodeElement(c.IDS.Audio,p([c.encodeElement(c.IDS.Channels,d(n.channelCount)),c.encodeElement(c.IDS.SamplingFrequency,new Uint8Array([64,231,112,0,0,0,0,0]))])),c.encodeElement(c.IDS.CodecPrivate,t.data)])))]),a=c.encodeElement(c.IDS.Cluster,function(){var e=[c.encodeElement(c.IDS.Timecode,d(0))];return e.push.apply(e,o),p(e)}());return{initData:s,data:a}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version="29.0.0",r.buildNumber=1819,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(t(2))}]))},function(e,t,r){var n,i;window,e.exports=(n=r(7),i=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";function T(e){return!(400<=e&&e<500)}function k(e){var t,r={};for(a.lastIndex=0;null!==(t=a.exec(e));){var n=t[1].trim().toLowerCase(),i=function(e){return 0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1?e.slice(1,-1):e}(t[2].trim());r[n]=i}return r}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var R,M=r(1),D=r(0),I=D.retrievalErrors.UnacceptableResponseStatusCodeError,F=D.retrievalErrors.PlaylistParseError,s=D.retrievalErrors.UnsupportedEncryptionError,O=M.helpers.abortableJob.AbortableJob,L=M.helpers.deferred.buildDeferred,N=M.helpers.cache.buildCache,i=M.helpers.retry,B=i.retry,j=i.buildExponentialDelayCalculator,z=M.helpers.Promise,o=M.helpers.find,U=M.helpers.url,V=M.logger.prefixLogger,q=M.logger.noOpLogger,H=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(MAP):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,a=/(.+?)=(.+?)(?:,|$)/g,G=/^\d*(\.\d+)?$/;!function(e){e[e.NONE=0]="NONE",e[e.AES_128=1]="AES_128",e[e.SAMPLE_AES=2]="SAMPLE_AES"}(R=R||{});var l=function(A){function e(e){var s=e.url,t=e.playlistLoader,r=e.segmentLoader,n=e.keyLoader,i=void 0===n?null:n,o=e.segmentFormat,a=e.logger,l=void 0===a?q:a,u=e.delayCalculator,h=void 0===u?j():u,c=e.keyDelayCalculator,p=void 0===c?j():c,d=e.segmentDelayCalculator,f=e.isPlaylistResponseCodeAcceptable,m=void 0===f?function(e){return 200===e}:f,g=e.isPlaylistResponseCodeRetryable,y=void 0===g?T:g,v=e.isSegmentResponseCodeAcceptable,_=void 0===v?function(e){return 200===e}:v,b=e.isSegmentResponseCodeRetryable,E=void 0===b?T:b,S=e.isKeyResponseCodeAcceptable,w=void 0===S?function(e){return 200===e}:S,x=e.isKeyResponseCodeRetryable,P=void 0===x?T:x,C=A.call(this)||this;return C._keyRetrievalJobsCache=N(),C._initDataRetrievalJobsCache=N(),C._data=null,C._lastUpdateTime=null,C._playlistEventRepresentation=null,C._logger=V(l,"PlaylistHLS"),C._url=s,C._playlistLoader=t,C._segmentLoader=r,C._keyLoader=i,C._segmentFormat=o,C._keyDelayCalculator=p,C._isPlaylistResponseCodeAcceptable=m,C._isPlaylistResponseCodeRetryable=y,C._isSegmentResponseCodeAcceptable=_,C._isSegmentResponseCodeRetryable=E,C._isKeyOrInitDataResponseCodeAcceptable=w,C._isKeyOrInitDataResponseCodeRetryable=P,C._segmentDelayCalculator=d,C._downloadAbortableJob=new O(function(){var o=M.helpers.deferred.buildDeferred(),e=B(h,function(e){var n=e.scheduleRetry,i=new D.events.Playlist(s);C._onPlaylistRequestQueued.dispatch({playlist:i});var t=C._playlistLoader.request({url:s});return t.onRequestStart(function(){C._onPlaylistRequestStart.dispatch({playlist:i})}),C._logger.debug("Requesting playlist.",s),t.onResponseReceived(function(e){if(!e)return C._logger.warn("Playlist request timed out.",s),C._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:null}),void n();var t=e.statusCode;if(C._isPlaylistResponseCodeAcceptable(t)){var r=e.getData();return r?(C._logger.debug("Got playlist response.",s,t),C._onPlaylistRetrieved.dispatch({playlist:i,statusCode:t}),void o.resolve({playlistContent:r,eventRepresentation:i})):(C._logger.warn("Playlist response contained no data.",s,t),C._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void n())}return C._isPlaylistResponseCodeRetryable(t)?(C._logger.debug("Playlist response code was not acceptable. Will retry.",s,t),C._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void n()):(C._logger.debug("Playlist response code was not acceptable.",s,t),C._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void o.reject(new I(t)))}),t.onError(function(e){return e instanceof M.loaderErrors.LoaderError?(C._logger.warn("Error from loader. Will retry",s,e),void n()):void o.reject(e)}),{onCancel:function(){C._logger.debug("Aborting playlist request.",s),t.hasCompleted()||t.abort(),C._onPlaylistRequestFailed.dispatch({playlist:i,aborted:!0})}}},{onNoMoreRetries:function(){return o.reject(new Error("No more retries for requesting playlist."))}}).cancel;return{result:o.promise,abort:function(){return e()}}}),C._updateJob=new O(function(){if(C._data&&C._data.ended)return{result:z.resolve(void 0)};var n=L(),e=C._downloadAbortableJob.run();return e.onCompletion(function(e){var t=e.playlistContent,r=e.eventRepresentation;C._lastUpdateTime=M.helpers.time.now(),C._onPlaylistParseStart.dispatch({playlist:r});try{C._data=C._parsePlaylist(t)}catch(e){return C._logger.error("Error when parsing playlist.",e,t),void n.reject(e)}C._playlistEventRepresentation=r,C._onPlaylistParseEnd.dispatch({playlist:r}),n.resolve(void 0)}),e.onError(n.reject),{result:n.promise,abort:function(){return e.abort()}}}),C}return n(e,A),e.prototype.hasInitialUpdateCompleted=function(){return!!this._data},e.prototype.getType=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.type},e.prototype.getExpireTime=function(){var e=this._data,t=this._lastUpdateTime;if(!e||e.type!==D.PlaylistType.LIVE||null===t)return null;var r=e.segments.reduce(function(e,t){return e+t.timeRange.duration},0);return t+r/2},e.prototype.hasEnded=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.ended},e.prototype.getCompleteDuration=function(){return this._data&&this._data.ended?this._data.totalDuration:null},e.prototype.getDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.totalDuration},e.prototype.getTargetDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.targetDuration},e.prototype.getFirstSegmentIndex=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.mediaSequence},e.prototype.getSegmentCount=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.segments.length},e.prototype.getSegmentIndexContainingTime=function(t){var e=this._data;if(!e)throw new Error("Not loaded yet.");var r=o(e.segments,function(e){return e.timeRange.containsTime(t)});return r?e.mediaSequence+e.segments.indexOf(r):null},e.prototype._update=function(){return this._updateJob.run()},e.prototype._getSegment=function(o){var s=this,e=this._data;if(!e)throw new Error("Not loaded yet.");var a=e.segments[o-e.mediaSequence],t=new O(function(){var e=a.encryptionData,r=s._playlistEventRepresentation;if(!r)throw new Error("Playlist event representation should exist.");var t=s._buildEncryptionConfig(e,o),n=a.initDataUrl?s._retrieveInitData(a.initDataUrl):null,i=t.whenComplete().then(function(t){var e=function(e){return new D.Segment({url:a.url,sequenceNumber:o,playlist:s,timeRange:a.timeRange,format:s._segmentFormat,loader:s._segmentLoader,playlistEventRepresentation:r,logger:s._logger,delayCalculator:s._segmentDelayCalculator,isResponseCodeAcceptable:s._isSegmentResponseCodeAcceptable,isResponseCodeRetryable:s._isSegmentResponseCodeRetryable,encryptionConfig:t,initData:e})};return n?n.whenComplete().then(e):e(void 0)});return{result:i,abort:function(){t.abort(),n&&n.abort()}}});return t.run()},e.prototype._buildEncryptionConfig=function(n,i){var o=this,e=new O(function(){if(n.method===R.NONE)return{result:z.resolve(void 0)};if(n.method!==R.AES_128)return o._logger.error("Unsupported encryption method.",n.method),{result:z.reject(new s)};var e=o._keyLoader;if(!e)return{result:z.reject(new Error("Encryption method not supported as no key loader provided."))};var t=o._retrieveKey(n.keyUrl),r=t.whenComplete().then(function(e){return{cipher:"AES-CBC",key:e,iv:n.iv||function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(i)}});return{result:r,abort:function(){return t.abort()}}},{storeResult:!0});return e.run()},e.prototype._retrieveKey=function(e){var t=this,r=this._keyLoader;if(!r)throw new Error("No key loader.");var n=this._playlistEventRepresentation;if(!n)throw new Error("Playlist event representation should exist.");var i=new D.events.Key(n,e);return this._retrieveKeyOrInitData({url:e,loader:r,cache:this._keyRetrievalJobsCache,onRequestQueued:function(){return t._onKeyRequestQueued.dispatch({key:i})},onRequestStart:function(){return t._onKeyRequestStart.dispatch({key:i})},onRequestTimedOut:function(){t._onKeyRequestFailed.dispatch({key:i,statusCode:null})},onRequestFailed:function(e){t._onKeyRequestFailed.dispatch({key:i,statusCode:e})},onRequestAborted:function(){t._onKeyRequestFailed.dispatch({key:i,aborted:!0})},onRetrieved:function(e){t._onKeyRetrieved.dispatch({key:i,statusCode:e})},type:"key"})},e.prototype._retrieveInitData=function(e){var t=this,r=this._playlistEventRepresentation;if(!r)throw new Error("Playlist event representation should exist.");var n=new D.events.InitData(r,e);return this._retrieveKeyOrInitData({url:e,loader:this._segmentLoader,cache:this._initDataRetrievalJobsCache,onRequestQueued:function(){return t._onInitDataRequestQueued.dispatch({initData:n})},onRequestStart:function(){return t._onInitDataRequestStart.dispatch({initData:n})},onRequestTimedOut:function(){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:null})},onRequestFailed:function(e){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:e})},onRequestAborted:function(){t._onInitDataRequestFailed.dispatch({initData:n,aborted:!0})},onRetrieved:function(e){t._onInitDataRetrieved.dispatch({initData:n,statusCode:e})},type:"init data"})},e.prototype._retrieveKeyOrInitData=function(e){var o=this,s=e.url,r=e.loader,t=e.cache,a=e.onRequestQueued,l=e.onRequestStart,u=e.onRequestTimedOut,h=e.onRequestFailed,c=e.onRequestAborted,p=e.onRetrieved,d=e.type,n=t.get(s);return n?this._logger.debug(d+" retrieval already in progress.",s):(n=new O(function(){var i=M.helpers.deferred.buildDeferred(),e=B(o._keyDelayCalculator,function(e){var n=e.scheduleRetry;a();var t=r.request({url:s});return t.onRequestStart(l),o._logger.debug("Retrieving "+d+".",s),t.onResponseReceived(function(e){if(!e)return o._logger.warn(d+" request timed out.",s),u(),void n();var t=e.statusCode;if(o._isKeyOrInitDataResponseCodeAcceptable(t)){var r=e.getData();return r?(o._logger.debug("Got "+d+" response.",s,t),p(t),void i.resolve(new Uint8Array(r))):(o._logger.warn(d+" response contained no data.",s,t),h(t),void n())}return o._isKeyOrInitDataResponseCodeRetryable(t)?(o._logger.warn(d+" response code was not acceptable. Will retry.",s,t),h(t),void n()):(o._logger.warn(d+" response code was not acceptable.",s,t),h(t),void i.reject(new I(t)))}),t.onError(function(e){return e instanceof M.loaderErrors.LoaderError?(o._logger.warn("Error from loader. Will retry",s,e),void n()):void i.reject(e)}),{onCancel:function(){o._logger.debug("Aborting "+d+" request.",s),t.hasCompleted()||t.abort(),c()}}},{onNoMoreRetries:function(){return i.reject(new Error("No more retries for requesting "+d+"."))}}).cancel;return{result:i.promise,abort:function(){return e()}}},{storeResult:!0}),t.set(s,n)),n.run()},e.prototype._parsePlaylist=function(e){for(var t,r=this._data,n={version:null,type:D.PlaylistType.LIVE,mediaSequence:null,targetDuration:null,totalDuration:0,ended:!1},i=[],o={method:R.NONE},s=null,a=null,l=H.lastIndex=0,u=!1;null!==(t=H.exec(e));){var h=t.filter(function(e,t){return 0!==t&&void 0!==e}).map(function(e,t){return 0===t?e.toLowerCase():e}),c=h[0],p=h.slice(1);if(0===l){if("extm3u"!==c)throw new F("First line did not contain EXTM3U tag.")}else{if(!u)switch(c){case"playlist-type":if(n.type!==D.PlaylistType.LIVE)throw new F("Already have playlist type.");switch(p[0].toLowerCase()){case"vod":n.type=D.PlaylistType.VOD;break;case"event":n.type=D.PlaylistType.EVENT;break;default:throw new F("Invalid playlist type.")}break;case"media-sequence":if(null!==n.mediaSequence)throw new F("Already have media sequence number.");var d=parseInt(p[0],10);if(d+""!==p[0])throw new F("Invalid media sequence number.");n.mediaSequence=d;break;case"targetduration":if(null!==n.targetDuration)throw new F("Already have target duration.");var f=parseInt(p[0],10);if(f+""!==p[0]||f<0)throw new F("Invalid target duration.");n.targetDuration=1e3*f;break;case"version":if(null!==n.version)throw new F("Already have version.");var m=parseInt(p[0],10);if(m+""!==p[0])throw new F("Invalid version.");if(m<3)throw new F("HLS version must be 3 or above.");n.version=m;break;default:u=!0}if(u)switch(c){case"key":var g=k(p[0]),y="method"in g?g.method.toLowerCase():null,v="uri"in g?U.buildAbsoluteUrl(this._url,g.uri):null,_="iv"in g?function(e){0===e.indexOf("0x")&&(e=e.substr(2));var t=new Uint16Array(8);if(e.length%4!=0)throw new F("Failed to parse IV (length is not multiple of 4).");for(var r=0;r<e.length;r+=4){var n=parseInt(e.substr(r,4),16);if(isNaN(n))throw new F("Failed to parse hex number in IV string.");t[r/4]=n}return new Uint8Array(t)}(g.iv):null;if(!y)throw new F("Missing encryption method.");if(!v&&"none"!==y)throw new F("Missing key url.");switch(y){case"none":if(null!==v)throw new F("Key url not allowed.");if(null!==_)throw new F("IV not allowed.");o={method:R.NONE};break;case"aes-128":if(!v)throw new F("Key url required.");o={method:R.AES_128,keyUrl:v,iv:_};break;case"sample-aes":if(!v)throw new F("Key url required.");o={method:R.SAMPLE_AES,keyUrl:v,iv:_};break;default:throw new F("Unknown encryption method.")}break;case"map":var g=k(p[0]);if(!("uri"in g))throw new F("URI missing from EXT-X-MAP tag.");if("byterange"in g)throw new F("BYTERANGE in EXT-X-MAP tag is currently unsupported.");s=g.uri?U.buildAbsoluteUrl(this._url,g.uri):null;break;case"inf":if(!p[0].match(G))throw new F("Invalid segment duration.");a=1e3*parseFloat(p[0]);break;case"":if(n.ended)throw new F("Already received ENDLIST tag.");if(null===a)throw new F("Not received segment duration.");var b=U.buildAbsoluteUrl(this._url,p[0]);i.push({url:b,timeRange:new M.TimeRange(n.totalDuration,a),initDataUrl:s,encryptionData:o}),n.totalDuration+=a,a=null;break;case"endlist":if(n.ended)throw new F("Already had ENDLIST tag.");n.ended=!0;break;default:this._logger.warn("Unable to parse playlist line.",c)}}l++}var E=n.version,S=n.type,w=n.mediaSequence,x=n.targetDuration,P=n.ended,C=n.totalDuration;if(null===E)throw new F("Missing version.");if(null===x)throw new F("Missing target duration.");if(P&&S===D.PlaylistType.LIVE)throw new F("Cannot be ended if type is LIVE.");if(!P&&S===D.PlaylistType.VOD)throw new F("Must be ended if type is VOD.");if(null===w&&(w=0),r){if(r.type!==S)throw new F("Playlist type has changed since last update.");if(r.type===D.PlaylistType.EVENT&&w!==r.mediaSequence)throw new F("Media sequence number has changed. Not valid for EVENT playlist.");var A=r.segments[w-r.mediaSequence];if(!A)throw new F("Tracking lost. The last segment of the previous playlist is no longer in the new one.");var T=A.timeRange.start;i.forEach(function(e){var t=e.timeRange;e.timeRange=new M.TimeRange(t.start+T,t.duration)}),C+=T}return{version:E,type:S,mediaSequence:w,targetDuration:x,totalDuration:C,ended:P,segments:i}},e}(D.Playlist);t.PlaylistHLS=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(2);t.PlaylistHLS=n.PlaylistHLS}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(o){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=2e4);var n=o.call(this)||this;if(n._responseStarted=!1,r<0)throw new Error("Invaid timeout.");n._timeoutTimer=window.setTimeout(function(){return n._onManualTimeout()},r),n._xhr=new XMLHttpRequest,n._xhr.addEventListener("load",function(){return n._onLoad()}),n._xhr.addEventListener("abort",function(){return n._onAbort()}),n._xhr.addEventListener("error",function(e){return n._onError(e)}),n._xhr.addEventListener("timeout",function(){return n._onTimeout()}),n._xhr.addEventListener("loadend",function(){return n._onLoadEnd()}),n._xhr.addEventListener("progress",function(){return n._onProgress()}),n._xhr.open("GET",e,!0),n._xhr.timeout=r;var i=n._getResponseType().some(function(e){return n._xhr.responseType=e,n._xhr.responseType===e});if(!i)throw new Error("Failed setting response type.");return Object.keys(t).forEach(function(e){return n._xhr.setRequestHeader(e,t[e])}),n._signalRequestStart(),n._xhr.send(),n}return n(e,o),e.prototype._abort=function(){this._xhr.abort()},e.prototype._onAbort=function(){this.hasCompleted()||this._onTimeout()},e.prototype._onManualTimeout=function(){this.hasCompleted()||(this._signalTimeout(),this._xhr.abort())},e.prototype._onTimeout=function(){this.hasCompleted()||this._signalTimeout()},e.prototype._onLoad=function(){var e;this.hasCompleted()||(this._isChunkedResponse()||(e=this._xhr,this._provideStatusAndHeaders({statusCode:e.status,headers:this._parseHeaders(e.getAllResponseHeaders()||"")},e.response)),this.hasCompleted()||this._finalize())},e.prototype._onError=function(e){switch(this.getState()){case i.loader.ResponseState.COMPLETED:case i.loader.ResponseState.ERRORED:break;case i.loader.ResponseState.PENDING:if(0===this._xhr.status){this._provideStatusAndHeaders({statusCode:0,headers:{}},this._getEmptyData()),this._finalize();break}default:this._finalize(new i.loaderErrors.LoaderError("An error occurred.",e))}},e.prototype._onLoadEnd=function(){window.clearTimeout(this._timeoutTimer),this.hasCompleted()||this._finalize(new i.loaderErrors.LoaderError("Unexpected error occurred."))},e.prototype._onProgress=function(){var e;this.hasCompleted()||(e=this._xhr,this._isChunkedResponse()&&(this._responseStarted?this._providePart(e.response):(this._responseStarted=!0,this._provideStatusAndHeaders({statusCode:e.status,headers:this._parseHeaders(e.getAllResponseHeaders()||"")},e.response))))},e.prototype._isChunkedResponse=function(){return"moz-chunked-arraybuffer"===this._xhr.responseType},e.prototype._parseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0,i=r.length;n<i;n++){var o,s,a=r[n],l=a.indexOf(": ");0<l&&(o=a.substring(0,l).trim(),s=a.substring(l+2),t[o]=s)}return t},e}(i.loader.LoaderRequest);t.LoaderRequest=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),i=h.helpers.browser.isFirefox(),o=function(l){function u(e,t,r){void 0===t&&(t={}),void 0===r&&(r=2e4);var i=l.call(this)||this;if(!u.isSupported())throw new Error("Not supported.");var n=i._abortController=new AbortController,o=new Request(e,{headers:t,redirect:"follow",signal:n.signal});i._signalRequestStart();var s=i._abortTimer=window.setTimeout(function(){i._signalTimeout(),i._abort()},r),a=fetch(o).then(function(e){var r={};if(e.headers.forEach(function(e,t){return r[e]=t}),i._provideStatusAndHeaders({statusCode:e.status,headers:r},new ArrayBuffer(0)),e.body){var t=e.body.getReader(),n=function(){return t.read().then(function(e){var t=e.done,r=e.value;if(!t&&!i.hasCompleted())return i._providePart(r.buffer),n()})};return n()}return e.arrayBuffer().then(function(e){e&&i._providePart(e)})}).then(function(){i.hasCompleted()||i._finalize()}).catch(function(e){var t;i.hasCompleted()||(t=e instanceof h.loaderErrors.LoaderError?e:new h.loaderErrors.LoaderError(e),i._finalize(t))});return h.helpers.always(a,function(){return window.clearTimeout(s)}),i}return n(u,l),u.isSupported=function(){return"fetch"in window&&"Request"in window&&"AbortController"in window&&!i},u.prototype._abort=function(){window.clearTimeout(this._abortTimer),this._abortController.abort()},u.prototype._reduceParts=function(e){return h.helpers.arrayBuffer.combine(e.map(function(e){return new Uint8Array(e)})).buffer},u}(h.loader.LoaderRequest);t.ArrayBufferLoaderRequest=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(1),s=i.helpers.browser.getFirefoxVersion(),a=s&&60<=s.major?["moz-chunked-arraybuffer","arraybuffer"]:["arraybuffer"],l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return a},t.prototype._getEmptyData=function(){return new ArrayBuffer(0)},t.prototype._reduceParts=function(e){return i.helpers.arrayBuffer.combine(e.map(function(e){return new Uint8Array(e)})).buffer},t}(o.LoaderRequest);t.ArrayBufferLoaderRequest=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(2),n=function(){function e(e){var t=(void 0===e?{}:e).fetchEnabled,r=void 0===t||t;this._fetchEnabled=r}return e.prototype.request=function(e){var t=e.url,r=e.headers,n=e.timeout;return this._fetchEnabled&&o.ArrayBufferLoaderRequest.isSupported()?new o.ArrayBufferLoaderRequest(t,r,n):new i.ArrayBufferLoaderRequest(t,r,n)},e}();t.ArrayBufferLoader=n,t.arrayBufferLoader=new n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=["text"],s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return o},t.prototype._getEmptyData=function(){return""},t.prototype._reduceParts=function(e){return e.join("")},t}(i.LoaderRequest);t.StringLoaderRequest=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(5);t.stringLoader={request:function(e){var t=e.url,r=e.headers,n=e.timeout;return new i.StringLoaderRequest(t,r,n)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(6);t.stringLoader=n.stringLoader;var i=r(4);t.arrayBufferLoader=i.arrayBufferLoader,t.ArrayBufferLoader=i.ArrayBufferLoader}]))},function(e,t,r){var n,i;window,e.exports=(n=r(1),i=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){if(void 0===t&&(t=6e4),this._limit=e,this._period=t,this._jobs=[],this._jobsRunInPeriod=0,e<=0)throw new Error("limit must be > 0.");if(t<=0)throw new Error("period must be > 0.")}return e.prototype.execute=function(e){var t=this,r={job:e};return this._jobs.push(r),this._executeNextJob(),{abort:function(){var e=t._jobs.indexOf(r);0<=e&&t._jobs.splice(e,1)}}},e.prototype._executeNextJob=function(){var e,t=this;this._jobsRunInPeriod<this._limit&&((e=this._jobs.shift())&&(this._jobsRunInPeriod++,window.setTimeout(function(){t._jobsRunInPeriod--,t._executeNextJob()},this._period),e.job()))},e}();t.Limiter=n},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var l=r(2),u=r(1),i=r(0),h=l.helpers.abortableJob.AbortableJob,c=l.helpers.find,s=l.helpers.time,a=new i.Limiter(300,3e5),p=[u.renditions.encryptedHlsMp3,u.renditions.hlsMp3,u.renditions.encryptedHlsOpus,u.renditions.hlsOpus,u.renditions.httpMp3],o=function(y){function e(e){var t=e.loader,r=e.clientId,n=e.trackId,i=e.secretToken,o=void 0===i?null:i,s=e.requestAuthorization,a=void 0===s?null:s,l=e.excludedRenditions,u=void 0===l?[]:l,h=e.maxBitrate,c=void 0===h?1/0:h,p=e.endpointBaseUrl,d=void 0===p?"https://api.soundcloud.com/":p,f=e.encryptedStreamsEnabled,m=void 0!==f&&f,g=y.call(this)||this;if(g.name="PublicAPI",g._getUrlsJob=null,g._clearResponseTimer=null,!t)throw new Error("loader required.");if("string"!=typeof r)throw new Error("clientId invalid.");if("number"!=typeof n)throw new Error("trackId invalid.");if(null!==o&&"string"!=typeof o)throw new Error("secretToken invalid.");if(null!==a&&"string"!=typeof a)throw new Error("requestAuthorizaton invalid.");if("number"!=typeof c||c<=0)throw new Error("maxBitrate must be > 0.");if("string"!=typeof d)throw new Error("endpointBaseUrl must be > 0.");if("boolean"!=typeof m)throw new Error("encryptedStreamsEnabled invalid.");return g._loader=t,g._clientId=r,g._requestAuthorization=a,g._trackId=n,g._secretToken=o,g._endpointBaseUrl=d,g._encryptedStreamsEnabled=m,g._excludedRenditions=u,g._maxBitrate=c,g}return n(e,y),e.prototype.getTrackId=function(){return this._trackId},e.prototype.excludeRendition=function(e){this._excludedRenditions.indexOf(e)<0&&this._excludedRenditions.push(e)},e.prototype.updateRequestAuthorization=function(e){if(null!==e&&"string"!=typeof e)throw new Error("requestAuthorizaton invalid.");this._requestAuthorization=e},e.prototype.clearCache=function(){this._clearResponseTimer&&(window.clearTimeout(this._clearResponseTimer),this._clearResponseTimer=null),this._getUrlsJob=null},e.prototype.getMaxBitrate=function(){return this._maxBitrate},e.prototype.setMaxBitrate=function(e){if("number"!=typeof e||e<=0)throw new Error("maxBitrate must be > 0.");this._maxBitrate=e},e.prototype.getUrl=function(){var r=this,s=this._maxBitrate,a=this._excludedRenditions,e=new h(function(){var t=l.helpers.deferred.buildDeferred(),e=r._getUrls();return e.onCompletion(function(e){var n=e.urls,i=e.timeRetrieved,o=null;p.filter(function(e){return a.indexOf(e)<0}).some(function(t){var e=n.filter(function(e){return e.rendition===t}).map(function(e){return{url:e.url,bitrate:e.bitrate}}),r=c(e.sort(function(e,t){return t.bitrate-e.bitrate}),function(e){return e.bitrate<=s});return!!r&&(o={success:!0,url:r.url,rendition:t,bitrate:r.bitrate,timeRetrieved:i},!0)}),t.resolve(o)}),e.onError(function(e){e instanceof u.UrlRetrieverError?t.resolve({success:!1,error:e}):t.reject(e)}),{result:t.promise,abort:function(){return e.abort()}}});return e.run()},e.prototype._getUrls=function(){var o=this;return this._getUrlsJob||(this._getUrlsJob=new h(function(){var n=l.helpers.deferred.buildDeferred(),i=null,e=a.execute(function(){var e=o._requestAuthorization?{Authorization:o._requestAuthorization}:{},t=o._endpointBaseUrl+"i1/tracks/"+encodeURI(o._trackId+"")+"/streams?client_id="+encodeURIComponent(o._clientId);o._encryptedStreamsEnabled&&(t+="&with_encrypted_streams=true"),o._secretToken&&(t+="&secret_token="+encodeURIComponent(o._secretToken));var r=(i=o._loader.request({url:t,headers:e})).getResponse().then(function(e){if(!e)throw new u.UrlRetrieverError("TIMED_OUT",!0);if(200!==e.statusCode)throw new u.UrlRetrieverError("INVALID_STATUS_"+e.statusCode);var t=e.getData();if(!t)throw new u.UrlRetrieverError("NO_DATA");var r=s.now(),a=JSON.parse(t),l=[];return Object.keys(a).map(function(e){var t,r=e.split("_"),n=r[0],i=r[1],o=r[2],s=parseInt(o,10);!n||!i||isNaN(s)||(t=c(p,function(e){return e.scProtocol===n&&e.scFormat===i}))&&l.push({rendition:t,bitrate:s,url:a[e]})}),{urls:l,timeRetrieved:r}});r.then(n.resolve,n.reject)});return{result:n.promise,abort:function(){e.abort(),i&&i.abort()}}}),this._clearResponseTimer=window.setTimeout(function(){o._clearResponseTimer=null,o._getUrlsJob=null},5e3)),this._getUrlsJob.run()},e}(u.BaseStreamUrlRetriever);t.StreamUrlRetriever=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(3);t.StreamUrlRetriever=n.StreamUrlRetriever}]))}],r.c=i,r.p="",r(0))},function(e,$,Q){var Z;(function(K,X,J,Y){(function(){"use strict";function u(e){return"function"==typeof e}function t(){return function(){setTimeout(r,1)}}function r(){for(var e=0;e<P;e+=2){(0,D[e])(D[e+1]),D[e]=void 0,D[e+1]=void 0}P=0}function s(){}function o(e,n,i){C(function(t){var r=!1,e=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(i,n,function(e){r||(r=!0,(n!==e?h:c)(t,e))},function(e){r||(r=!0,p(t,e))},t._label);!r&&e&&(r=!0,p(t,e))},e)}function n(e,t){var r,n,i;t.constructor===e.constructor?(n=e,(i=t)._state===O?c(n,i._result):i._state===L?p(n,i._result):a(i,void 0,function(e){h(n,e)},function(e){p(n,e)})):(r=function(e){try{return e.then}catch(e){return N.error=e,N}}(t))===N?p(e,N.error):void 0!==r&&u(r)?o(e,t,r):c(e,t)}function h(e,t){var r;e===t?p(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(r=t)||"object"==typeof r&&null!==r?n:c)(e,t)}function i(e){e._onerror&&e._onerror(e._result),l(e)}function c(e,t){e._state===F&&(e._result=t,e._state=O,0!==e._subscribers.length&&C(l,e))}function p(e,t){e._state===F&&(e._state=L,e._result=t,C(i,e))}function a(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+O]=r,i[o+L]=n,0===o&&e._state&&C(l,e)}function l(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,s=0;s<t.length;s+=3)n=t[s],i=t[s+r],n?d(r,n,i,o):i(o);e._subscribers.length=0}}function e(){this.error=null}function d(e,t,r,n){var i,o,s,a,l=u(r);if(l){if((i=function(e,t){try{return e(t)}catch(e){return B.error=e,B}}(r,n))===B?(a=!0,o=i.error,i=null):s=!0,t===i)return p(t,new TypeError("A promises callback cannot return that same promise.")),0}else i=n,s=!0;t._state!==F||(l&&s?h(t,i):a?p(t,o):e===O?c(t,i):e===L&&p(t,i))}function f(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(s),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?c(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&c(r.promise,r._result))):p(r.promise,r._validationError())}function m(e){this._id=q++,this._state=void 0,this._result=void 0,this._subscribers=[],s!==e&&(u(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof m||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e(function(e){h(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,e))}var g,y,v,_,b,E,S,w,x=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},P=0,C=function(e,t){D[P]=e,D[P+1]=t,2===(P+=2)&&(y?y(r):I())},A="undefined"!=typeof window?window:void 0,T=A||{},k=T.MutationObserver||T.WebKitMutationObserver,R=void 0!==K&&"[object process]"==={}.toString.call(K),M="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,D=new Array(1e3),I=R?(S=K.nextTick,w=K.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(w)&&"0"===w[1]&&"10"===w[2]&&(S=X),function(){S(r)}):k?(_=0,b=new k(r),E=document.createTextNode(""),b.observe(E,{characterData:!0}),function(){E.data=_=++_%2}):M?((v=new MessageChannel).port1.onmessage=r,function(){v.port2.postMessage(0)}):(void 0===A?function(){try{var e=Q(29);return g=e.runOnLoop||e.runOnContext,function(){g(r)}}catch(e){return t()}}:t)(),F=void 0,O=1,L=2,N=new e,B=new e;f.prototype._validateInput=function(e){return x(e)},f.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},f.prototype._init=function(){this._result=new Array(this.length)};var j=f;f.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,n=0;t._state===F&&n<e;n++)this._eachEntry(r[n],n)},f.prototype._eachEntry=function(e,t){var r,n=this._instanceConstructor;"object"==typeof(r=e)&&null!==r?e.constructor===n&&e._state!==F?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=e)},f.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===F&&(this._remaining--,e===L?p(n,r):this._result[t]=r),0===this._remaining&&c(n,this._result)},f.prototype._willSettleAt=function(e,t){var r=this;a(e,void 0,function(e){r._settledAt(O,t,e)},function(e){r._settledAt(L,t,e)})};function z(e){function t(e){h(n,e)}function r(e){p(n,e)}var n=new this(s);if(!x(e))return p(n,new TypeError("You must pass an array to race.")),n;for(var i=e.length,o=0;n._state===F&&o<i;o++)a(this.resolve(e[o]),void 0,t,r);return n}function U(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(s);return h(t,e),t}function V(e){var t=new this(s);return p(t,e),t}var q=0,H=m;m.all=function(e){return new j(this,e).promise},m.race=z,m.resolve=U,m.reject=V,m._setScheduler=function(e){y=e},m._setAsap=function(e){C=e},m._asap=C,m.prototype={constructor:m,then:function(e,t){var r=this._state;if(r===O&&!e||r===L&&!t)return this;var n,i=new this.constructor(s),o=this._result;return r?(n=arguments[r-1],C(function(){d(r,i,n,o)})):a(this,i,e,t),i},catch:function(e){return this.then(null,e)}};var G=function(){var e;if(void 0!==J)e=J;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=H)},W={Promise:H,polyfill:G};Q(23).amd?void 0===(Z=function(){return W}.call($,Q,$,Y))||(Y.exports=Z):void 0!==Y&&Y.exports?Y.exports=W:void 0!==this&&(this.ES6Promise=W),G()}).call(this)}).call($,Q(6),Q(25).setImmediate,function(){return this}(),Q(24)(e))},function(e,t){"use strict";var r={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};e.exports={get:function(e){return r[e]},set:function(e,t){t&&(r[e]=t)}}},function(e,t,r){(function(d){"use strict";function f(e,t,r,n){var i,o,s,a,l,u,h=(i=e,o=t,s=r,a=n,l=void 0,(u=new p(function(e){var t=d.FormData&&s instanceof FormData;(l=new XMLHttpRequest).upload&&l.upload.addEventListener("progress",a),l.open(i,o,!0),t||l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){4===l.readyState&&e({responseText:l.responseText,request:l})},l.send(s)})).request=l,u),c=h.then(function(e){var t=e.responseText,r=e.request,n=function(e){var t=e.responseText,r=e.request,n=void 0,i=void 0;try{i=JSON.parse(t)}catch(e){}return i?i.errors&&(n={message:""},i.errors[0]&&i.errors[0].error_message&&(n={message:i.errors[0].error_message})):n=r?{message:"HTTP Error: "+r.status}:{message:"Unknown error"},n&&(n.status=r.status),{json:i,error:n}}({responseText:t,request:r});if(n.json&&"302 - Found"===n.json.status)return f("GET",n.json.location,null);if(200!==r.status&&n.error)throw n.error;return n.json});return c.request=h.request,c}var m=r(3),g=r(20),p=r(2).Promise;e.exports={request:function(e,t){var r,n,i,o,s=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],l=m.get("oauth_token"),u=m.get("client_id"),h={},c=d.FormData&&s instanceof FormData,p=void 0;return h.format="json",l?h.oauth_token=l:h.client_id=u,n=s,i=h,o=c,Object.keys(i).forEach(function(e){o?n.append(e,i[e]):n[e]=i[e]}),"GET"!==e&&(p=c?s:g.encode(s),s={oauth_token:l}),t="/"!==t[0]?"/"+t:t,r=""+m.get("baseURL")+t+"?"+g.encode(s),f(e,r,p,a)},oEmbed:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.element;delete t.element,t.url=e;var n="https://soundcloud.com/oembed.json?"+g.encode(t);return f("GET",n,null).then(function(e){return r&&e.html&&(r.innerHTML=e.html),e})},upload:function(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=r.asset_data||r.file;if(!(m.get("oauth_token")&&r.title&&e))return new p(function(e,t){t({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var t=Object.keys(r),n=new FormData;return t.forEach(function(e){var t=r[e];"file"===e&&(e="asset_data",t=r.file),n.append("track["+e+"]",t)}),this.request("POST","/tracks",n,r.progress)},resolve:function(e){return this.request("GET","/resolve",{url:e,_status_code_map:{302:200}})}}}).call(t,function(){return this}())},function(e,t){"use strict";var r={};e.exports={get:function(e){return r[e]},set:function(e,t){r[e]=t}}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(){f&&p&&(f=!1,p.length?d=p.concat(d):m=-1,d.length&&s())}function s(){if(!f){var e=i(o);f=!0;for(var t=d.length;t;){for(p=d,d=[];++m<t;)p&&p[m].run();m=-1,t=d.length}p=null,f=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var u,h,c=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var p,d=[],f=!1,m=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new a(e,t)),1!==d.length||f||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=l,c.addListener=l,c.once=l,c.off=l,c.removeListener=l,c.removeAllListeners=l,c.emit=l,c.prependListener=l,c.prependOnceListener=l,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(22);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""))?e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),n=r.shift(),i=0<r.length?r.join("="):void 0,n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i);return e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i,e},{}):{}},t.stringify=function(r){return r?Object.keys(r).sort().map(function(t){var e=r[t];return Array.isArray(e)?e.sort().map(function(e){return n(t)+"="+n(e)}).join("&"):n(t)+"="+n(e)}).filter(function(e){return 0<e.length}).join("&"):""}},function(e,t,r){"use strict";var o=r(7),s=r(5);e.exports={notifyDialog:function(e){var t=o.parse(e.search),r=o.parse(e.hash),n={oauth_token:t.access_token||r.access_token,dialog_id:t.state||r.state,error:t.error||r.error,error_description:t.error_description||r.error_description},i=s.get(n.dialog_id);i&&i.handleConnectResponse(n)}}},function(e,t,r){"use strict";function n(e){return i.set("oauth_token",e.oauth_token),e}var i=r(3),o=r(11),s=r(2).Promise;e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=i.get("oauth_token");if(t)return new s(function(e){e({oauth_token:t})});var r={client_id:e.client_id||i.get("client_id"),redirect_uri:e.redirect_uri||i.get("redirect_uri"),response_type:"code_and_token",scope:e.scope||"non-expiring",display:"popup"};if(!r.client_id||!r.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");return new o(r).open().then(n)}},function(e,t,r){"use strict";var n=r(2).Promise;e.exports=function(){var r={};return r.promise=new n(function(e,t){r.resolve=e,r.reject=t}),r}},function(e,t,r){"use strict";var n=function(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e},i=r(10),o=r(5),s=r(12),a=r(7),l="SoundCloud_Dialog",u=function(){return[l,Math.ceil(1e6*Math.random()).toString(16)].join("_")},h=(n(c,[{key:"open",value:function(){var e,t=(e=this.options,"https://soundcloud.com/connect?"+a.stringify(e));return this.popup=s.open(t,this.width,this.height),o.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(e){e.error?this.deferred.reject(e):this.deferred.resolve(e),this.popup.close()}}]),c);function c(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,c),this.id=u(),this.options=e,this.options.state=this.id,this.width=420,this.height=670,this.deferred=i()}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=h},function(e,t){"use strict";e.exports={open:function(e,t,r){var n,i={};return i.location=1,i.width=t,i.height=r,i.left=window.screenX+(window.outerWidth-t)/2,i.top=window.screenY+(window.outerHeight-r)/2,i.toolbar="no",i.scrollbars="yes",n=Object.keys(i).map(function(e){return e+"="+i[e]}).join(", "),window.open(e,i.name,n)}}},function(e,t,r){"use strict";var a=r(19),n=r(1).MaestroCore,l=n.errors.PlayerFatalError,u=n.State,i=r(1).SCAudio.errors,h=i.NoStreamsError,c=i.NotSupportedError;e.exports=function(t){function e(){switch(t.getState()){case u.PLAYING:return"playing";case u.PAUSED:return t.isEnded()?"ended":"paused";case u.DEAD:return t.getFatalError()?"error":"dead";case u.LOADING:default:return"loading"}}var r=!1;t.onStateChange.subscribe(function(){return o.trigger("state-change",e())}),t.onPlay.subscribe(function(){o.trigger(r?"play-resume":"play-start"),r=!0}),t.onPlayIntent.subscribe(function(){return o.trigger("play")}),t.onPlayRejection.subscribe(function(e){return o.trigger("play-rejection",e)}),t.onPauseIntent.subscribe(function(){return o.trigger("pause")}),t.onSeek.subscribe(function(){return o.trigger("seeked")}),t.onSeekRejection.subscribe(function(e){return o.trigger("seek-rejection",e)}),t.onLoadStart.subscribe(function(){return o.trigger("buffering_start")}),t.onLoadEnd.subscribe(function(){return o.trigger("buffering_end")}),t.onEnded.subscribe(function(){return o.trigger("finish")}),t.onError.subscribe(function(e){e instanceof h?o.trigger("no_streams"):e instanceof c?o.trigger("no_protocol"):e instanceof l&&o.trigger("audio_error")});var n,i,o={play:t.play.bind(t),pause:t.pause.bind(t),seek:t.seek.bind(t),getVolume:t.getVolume.bind(t),setVolume:t.setVolume.bind(t),currentTime:t.getPosition.bind(t),getDuration:t.getDuration.bind(t),isBuffering:t.isLoading.bind(t),isPlaying:t.isPlaying.bind(t),isActuallyPlaying:t.isActuallyPlaying.bind(t),isEnded:t.isEnded.bind(t),isDead:t.isDead.bind(t),kill:t.kill.bind(t),hasErrored:function(){return!!t.getFatalError()},getState:e};return a.mixin(o),n=0,i=null,t.onChange.subscribe(function(e){var t=e.playing,r=e.seeking;e.dead?window.clearTimeout(n):void 0===t&&void 0===r||s()}),o;function s(){window.clearTimeout(n),t.isPlaying()&&!t.isEnded()&&(n=window.setTimeout(s,1e3/60));var e=t.getPosition();e!==i&&(i=e,o.trigger("time",e))}}},function(n,e){(function(e){"use strict";var t=e.AudioContext||e.webkitAudioContext,r=null;n.exports=function(){return r||(r=new t)}}).call(e,function(){return this}())},function(e,t){(function(n){"use strict";var i=n.navigator.getUserMedia||n.navigator.webkitGetUserMedia||n.navigator.mozGetUserMedia;e.exports=function(e,t,r){i.call(n.navigator,e,t,r)}}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=function(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e},i=r(14),o=r(15),s=r(2).Promise,a=r(28),l=(n(u,[{key:"start",value:function(){var t=this;return function(){var r=this,n=this.context;return new s(function(t,e){r.source?r.source instanceof AudioNode?t(r.source):e(new Error("source needs to be an instance of AudioNode")):o({audio:!0},function(e){r.stream=e,r.source=n.createMediaStreamSource(e),t(r.source)}.bind(r),e)})}.call(this).then(function(e){return t._recorder=new a(e),t._recorder.record(),e})}},{key:"stop",value:function(){var e;this._recorder&&this._recorder.stop(),this.stream&&(this.stream.stop?this.stream.stop():!this.stream.getTracks||(e=this.stream.getTracks()[0])&&e.stop())}},{key:"getBuffer",value:function(){var i=this;return new s(function(n,e){i._recorder?i._recorder.getBuffer(function(e){var t=i.context.sampleRate,r=i.context.createBuffer(2,e[0].length,t);r.getChannelData(0).set(e[0]),r.getChannelData(1).set(e[1]),n(r)}.bind(i)):e(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var r=this;return new s(function(t,e){r._recorder?r._recorder.exportWAV(function(e){t(e)}):e(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var r=this;return this.getBuffer().then(function(e){var t=r.context.createBufferSource();return t.buffer=e,t.connect(r.context.destination),t.start(0),t})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){a.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),u);function u(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,u),this.context=e.context||i(),this._recorder=null,this.source=e.source,this.stream=null}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=l},function(e,t,r){"use strict";var n=r(4),l=r(3),u=r(13),h=r(1).SCAudio,c=r(1).MaestroCore.logger,p=r(1).SCAudioPublicApiStreamURLRetriever.StreamUrlRetriever,i=r(1).SCAudioControllerHTML5Player.MediaElementManager,d=r(1).SCAudioControllerHTML5Player.HTML5PlayerController,f=r(1).SCAudioControllerHLSMSEPlayer.HLSMSEPlayerController,m=r(1).MaestroLoaders.stringLoader,g=new i("audio",c.noOpLogger);e.exports=function(e,a){var t=a?{secret_token:a}:{};return n.request("GET",e,t).then(function(r){var n=l.get("baseURL"),i=l.get("client_id"),e=l.get("oauth_token"),t=!1,o=new p({clientId:i,secretToken:a,trackId:r.id,requestAuthorization:e?"OAuth "+e:null,loader:m}),s=new h.Player({controllers:[new f(g),new d(g)],streamUrlRetriever:o,getURLOpts:{preview:"SNIP"===r.policy},streamUrlsExpire:!0,mediaSessionEnabled:!0,logger:c.noOpLogger});return s.onPlay.subscribe(function(){t||(t=!0,function(){var e=n+"/tracks/"+encodeURIComponent(r.id)+"/plays?client_id="+encodeURIComponent(i);a&&(e+="&secret_token="+encodeURIComponent(a));var t=new XMLHttpRequest;t.open("POST",e,!0),t.send()}())}),s.onEnded.subscribe(function(){s.pause()}),s.onPlayIntent.subscribe(function(){s.isEnded()&&s.seek(0)}),u(s)})},e.exports.activateAudioElement=function(){g.activate()}},function(e,t,r){var s,n,i,o,c,a,l,p,u;s=Array.prototype.forEach,n=Object.prototype.hasOwnProperty,i=Array.prototype.slice,o=0,c={keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,r=[];for(t in e)e.hasOwnProperty(t)&&(r[r.length]=t);return r},uniqueId:function(e){var t=++o+"";return e?e+t:t},has:function(e,t){return n.call(e,t)},each:function(e,t,r){if(null!=e)if(s&&e.forEach===s)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)this.has(e,o)&&t.call(r,e[o],o,e)},once:function(e){var t,r=!1;return function(){return r||(r=!0,t=e.apply(this,arguments),e=null),t}}},a={on:function(e,t,r){return p(this,"on",e,[t,r])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this})),this},once:function(e,t,r){if(!p(this,"once",e,[t,r])||!t)return this;var n=this,i=c.once(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,o,s,a,l,u,h;if(!this._events||!p(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(a=0,l=(s=e?[e]:c.keys(this._events)).length;a<l;a++)if(e=s[a],o=this._events[e]){if(this._events[e]=n=[],t||r)for(u=0,h=o.length;u<h;u++)i=o[u],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!p(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&u(r,t),n&&u(n,arguments),this},stopListening:function(e,t,r){var n=this._listeners;if(!n)return this;var i=!t&&!r;for(var o in"object"==typeof t&&(r=this),e&&((n={})[e._listenerId]=e),n)n[o].off(t,r,this),i&&delete this._listeners[o];return this}},l=/\s+/,p=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(l.test(r)){for(var o=r.split(l),s=0,a=o.length;s<a;s++)e[t].apply(e,[o[s]].concat(n));return!1}return!0},u=function(e,t){var r,n=-1,i=e.length,o=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,s);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,s,a);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t)}},c.each({listenTo:"on",listenToOnce:"once"},function(i,e){a[e]=function(e,t,r){var n=this._listeners||(this._listeners={});return"object"==typeof t&&(r=this),(n[e._listenerId||(e._listenerId=c.uniqueId("l"))]=e)[i](t,r,this),this}}),a.bind=a.on,a.unbind=a.off,a.mixin=function(t){return c.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(e){t[e]=this[e]},this),t},void 0!==e&&e.exports&&(t=e.exports=a),t.BackboneEvents=a},function(e,t,r){e.exports=r(18)},function(e,t){e.exports={encode:function(t,e){function l(e){return e.filter(function(e){return"string"==typeof e&&e.length}).join("&")}function u(e){var t=Object.keys(e);return n?t.sort():t}function h(e,t){var r,n,i,o=encodeURIComponent,s=typeof t,a=null;return Array.isArray(t)?(i=e,a=l(t.map(function(e){return h(":name[]".replace(/:name/,i),e)}))):"string"==s?a=o(e)+"="+t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,c):"number"==s?a=o(e)+"="+o(t).replace(/%20/g,"+"):"boolean"==s?a=o(e)+"="+t:"object"==s&&(null!==t?(r=e,a=l(u(n=t).map(function(e){return h(":name[:prop]".replace(/:name/,r).replace(/:prop/,e),n[e])}))):p||(a=o(e)+"=null")),a}function c(e){return"%"+("0"+e.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}var r="object"==typeof e?e:{},p=r.ignorenull||!1,n=r.sorted||!1;return l(u(t).map(function(e){return h(e,t[e])}))}}},function(e,t,r){(function(e,f){!function(r,n){"use strict";function i(e){delete l[e]}function o(e){if(u)setTimeout(o,0,e);else{var t=l[e];if(t){u=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{i(e),u=!1}}}}var s,a,l,u,h,e,c,t,p;function d(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(p)&&o(+e.data.slice(p.length))}r.setImmediate||(a=1,u=!(l={}),h=r.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&e.setTimeout?e:r,s="[object process]"==={}.toString.call(r.process)?function(e){f.nextTick(function(){o(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?(p="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",d,!1):r.attachEvent("onmessage",d),function(e){r.postMessage(p+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){o(e.data)},function(e){t.port2.postMessage(e)}):h&&"onreadystatechange"in h.createElement("script")?(c=h.documentElement,function(e){var t=h.createElement("script");t.onreadystatechange=function(){o(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(o,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[a]=n,s(a),a++},e.clearImmediate=i)}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,function(){return this}(),r(6))},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,i,o){(function(e){function t(e,t){this._id=e,this._clearFn=t}var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;i.setTimeout=function(){return new t(n.call(setTimeout,r,arguments),clearTimeout)},i.setInterval=function(){return new t(n.call(setInterval,r,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(r,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},o(21),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(i,function(){return this}())},function(e,t){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),r=r.getBlob()}catch(t){r=new Blob([e])}return new Worker(n.createObjectURL(r))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){return new Worker(t)}}},function(e,t,r){e.exports=function(){return r(26)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;n<v;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;e<v;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;n<v;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;t<v;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;a<e;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,a<0?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',r.p+"9f9aac32c9a7432b5555.worker.js")}},function(e,t,r){function n(e,t){var r=t||{},n=r.bufferLen||4096,i=r.numChannels||2;this.context=e.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,n,i,i);var o=new l;o.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:i}});var s,a=!1;this.node.onaudioprocess=function(e){if(a){for(var t=[],r=0;r<i;r++)t.push(e.inputBuffer.getChannelData(r));o.postMessage({command:"record",buffer:t})}},this.configure=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},this.record=function(){a=!0},this.stop=function(){a=!1},this.clear=function(){o.postMessage({command:"clear"})},this.getBuffer=function(e){s=e||r.callback,o.postMessage({command:"getBuffer"})},this.exportWAV=function(e,t){if(s=e||r.callback,t=t||r.type||"audio/wav",!s)throw new Error("Callback not set");o.postMessage({command:"exportWAV",type:t})},o.onmessage=function(e){var t=e.data;s(t)},e.connect(this.node),this.node.connect(this.context.destination)}var l=r(27);n.forceDownload=function(e,t){var r=(window.URL||window.webkitURL).createObjectURL(e),n=window.document.createElement("a");n.href=r,n.download=t||"output.wav";var i=document.createEvent("Event");i.initEvent("click",!0,!0),n.dispatchEvent(i)},e.exports=n},function(e,t){}],r.c=i,r.p="",r(0);function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var n,i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Headroom=t()}(this,function(){"use strict";function e(){return"undefined"!=typeof window}function t(e,n,i){var t,r,o,s,a,l,u,h=function(){var e=!1;try{var t={get passive(){e=!0}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}(),c=!1,p=(r=e)&&r.document&&9===r.document.nodeType?(a=(s=r).document,l=a.body,u=a.documentElement,{scrollHeight:function(){return Math.max(l.scrollHeight,u.scrollHeight,l.offsetHeight,u.offsetHeight,l.clientHeight,u.clientHeight)},height:function(){return s.innerHeight||u.clientHeight||l.clientHeight},scrollY:function(){return void 0!==s.pageYOffset?s.pageYOffset:(u||l.parentNode||l).scrollTop}}):(o=r,{scrollHeight:function(){return Math.max(o.scrollHeight,o.offsetHeight,o.clientHeight)},height:function(){return Math.max(o.offsetHeight,o.clientHeight)},scrollY:function(){return o.scrollTop}}),d=p.scrollY(),f={};function m(){var e=Math.round(p.scrollY()),t=p.height(),r=p.scrollHeight();f.scrollY=e,f.lastScrollY=d,f.direction=d<e?"down":"up",f.distance=Math.abs(e-d),f.isOutOfBounds=e<0||r<e+t,f.top=e<=n.offset,f.bottom=r<=e+t,f.toleranceExceeded=f.distance>n.tolerance[f.direction],i(f),d=e,c=!1}function g(){c||(c=!0,t=requestAnimationFrame(m))}var y=!!h&&{passive:!0,capture:!1};return e.addEventListener("scroll",g,y),{destroy:function(){cancelAnimationFrame(t),e.removeEventListener("scroll",g,y)}}}function n(e,t){var r;t=t||{},Object.assign(this,n.options,t),this.classes=Object.assign({},n.options.classes,t.classes),this.elem=e,this.tolerance=(r=this.tolerance)===Object(r)?r:{down:r,up:r},this.initialised=!1,this.frozen=!1}return n.prototype={constructor:n,init:function(){return n.cutsTheMustard&&!this.initialised&&(this.addClass("initial"),this.initialised=!0,setTimeout(function(e){e.scrollTracker=t(e.scroller,{offset:e.offset,tolerance:e.tolerance},e.update.bind(e))},100,this)),this},destroy:function(){this.initialised=!1,Object.keys(this.classes).forEach(this.removeClass,this),this.scrollTracker.destroy()},unpin:function(){!this.hasClass("pinned")&&this.hasClass("unpinned")||(this.addClass("unpinned"),this.removeClass("pinned"),this.onUnpin&&this.onUnpin.call(this))},pin:function(){this.hasClass("unpinned")&&(this.addClass("pinned"),this.removeClass("unpinned"),this.onPin&&this.onPin.call(this))},freeze:function(){this.frozen=!0,this.addClass("frozen")},unfreeze:function(){this.frozen=!1,this.removeClass("frozen")},top:function(){this.hasClass("top")||(this.addClass("top"),this.removeClass("notTop"),this.onTop&&this.onTop.call(this))},notTop:function(){this.hasClass("notTop")||(this.addClass("notTop"),this.removeClass("top"),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){this.hasClass("bottom")||(this.addClass("bottom"),this.removeClass("notBottom"),this.onBottom&&this.onBottom.call(this))},notBottom:function(){this.hasClass("notBottom")||(this.addClass("notBottom"),this.removeClass("bottom"),this.onNotBottom&&this.onNotBottom.call(this))},shouldUnpin:function(e){return"down"===e.direction&&!e.top&&e.toleranceExceeded},shouldPin:function(e){return"up"===e.direction&&e.toleranceExceeded||e.top},addClass:function(e){this.elem.classList.add(this.classes[e])},removeClass:function(e){this.elem.classList.remove(this.classes[e])},hasClass:function(e){return this.elem.classList.contains(this.classes[e])},update:function(e){e.isOutOfBounds||!0!==this.frozen&&(e.top?this.top():this.notTop(),e.bottom?this.bottom():this.notBottom(),this.shouldUnpin(e)?this.unpin():this.shouldPin(e)&&this.pin())}},n.options={tolerance:{up:0,down:0},offset:0,scroller:e()?window:null,classes:{frozen:"headroom--frozen",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},n.cutsTheMustard=!!(e()&&function(){}.bind&&"classList"in document.documentElement&&Object.assign&&Object.keys&&requestAnimationFrame),n}),function(i){i&&(i.fn.headroom=function(n){return this.each(function(){var e=i(this),t=e.data("headroom"),r="object"==typeof n&&n,r=i.extend(!0,{},Headroom.options,r);t||((t=new Headroom(this,r)).init(),e.data("headroom",t)),"string"==typeof n&&(t[n](),"destroy"===n&&e.removeData("headroom"))})},i("[data-headroom]").each(function(){var e=i(this);e.headroom(e.data())}))}(window.Zepto||window.jQuery),function(t,r){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("jquery")):t.jQueryBridget=r(t,t.jQuery)}(window,function(e,t){"use strict";var c=Array.prototype.slice,r=e.console,p=void 0===r?function(){}:function(e){r.error(e)};function n(u,i,h){(h=h||t||e.jQuery)&&(i.prototype.option||(i.prototype.option=function(e){h.isPlainObject(e)&&(this.options=h.extend(!0,this.options,e))}),h.fn[u]=function(e){if("string"!=typeof e)return n=e,this.each(function(e,t){var r=h.data(t,u);r?(r.option(n),r._init()):(r=new i(t,n),h.data(t,u,r))}),this;var t,o,s,a,l,n,r=c.call(arguments,1);return s=r,l="$()."+u+'("'+(o=e)+'")',(t=this).each(function(e,t){var r,n,i=h.data(t,u);i?(r=i[o])&&"_"!=o.charAt(0)?(n=r.apply(i,s),a=void 0===a?n:a):p(l+" is not a valid method"):p(u+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==a?a:t},o(h))}function o(e){!e||e&&e.bridget||(e.bridget=n)}return o(t||e.jQuery),n}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function b(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var r="undefined"==typeof console?function(){}:function(e){console.error(e)},E=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],S=E.length;function w(e){var t=getComputedStyle(e);return t||r("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var x,P=!1;function C(e){var t,r,n;if(P||(P=!0,(t=document.createElement("div")).style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box",(r=document.body||document.documentElement).appendChild(t),n=w(t),x=200==Math.round(b(n.width)),C.isBoxSizeOuter=x,r.removeChild(t)),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var i=w(e);if("none"==i.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<S;t++){e[E[t]]=0}return e}();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var s=o.isBorderBox="border-box"==i.boxSizing,a=0;a<S;a++){var l=E[a],u=i[l],h=parseFloat(u);o[l]=isNaN(h)?0:h}var c=o.paddingLeft+o.paddingRight,p=o.paddingTop+o.paddingBottom,d=o.marginLeft+o.marginRight,f=o.marginTop+o.marginBottom,m=o.borderLeftWidth+o.borderRightWidth,g=o.borderTopWidth+o.borderBottomWidth,y=s&&x,v=b(i.width);!1!==v&&(o.width=v+(y?0:c+m));var _=b(i.height);return!1!==_&&(o.height=_+(y?0:p+g)),o.innerWidth=o.width-(c+m),o.innerHeight=o.height-(p+g),o.outerWidth=o.width+d,o.outerHeight=o.height+f,o}}return C}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var r=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++){var n=t[r]+"MatchesSelector";if(e[n])return n}}();return function(e,t){return e[r](t)}}),function(t,r){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("desandro-matches-selector")):t.fizzyUIUtils=r(t,t.matchesSelector)}(window,function(u,o){var h={extend:function(e,t){for(var r in t)e[r]=t[r];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice;h.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},h.removeFrom=function(e,t){var r=e.indexOf(t);-1!=r&&e.splice(r,1)},h.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,o(e,t))return e},h.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},h.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},h.filterFindElements=function(e,n){e=h.makeArray(e);var i=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){o(e,n)&&i.push(e);for(var t=e.querySelectorAll(n),r=0;r<t.length;r++)i.push(t[r])}else i.push(e)}),i},h.debounceMethod=function(e,t,n){n=n||100;var i=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments,r=this;this[o]=setTimeout(function(){i.apply(r,t),delete r[o]},n)}},h.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},h.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,r){return t+"-"+r}).toLowerCase()};var c=u.console;return h.htmlInit=function(a,l){h.docReady(function(){var e=h.toDashed(l),i="data-"+e,t=document.querySelectorAll("["+i+"]"),r=document.querySelectorAll(".js-"+e),n=h.makeArray(t).concat(h.makeArray(r)),o=i+"-options",s=u.jQuery;n.forEach(function(t){var e,r=t.getAttribute(i)||t.getAttribute(o);try{e=r&&JSON.parse(r)}catch(e){return void(c&&c.error("Error parsing "+i+" on "+t.className+": "+e))}var n=new a(t,e);s&&s.data(t,l,n)})})},h}),function(t,r){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=r(t,t.getSize))}(window,function(e,t){function r(e,t){this.element=e,this.parent=t,this.create()}var n=r.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var e=this.parent.originSide;this.element.style[e]=""},n.getSize=function(){this.size=t(this.element)},n.setPosition=function(e){this.x=e,this.updateTarget(),this.renderPosition(e)},n.updateTarget=n.setDefaultTarget=function(){var e="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[e]+this.size.width*this.parent.cellAlign},n.renderPosition=function(e){var t=this.parent.originSide;this.element.style[t]=this.parent.getPositionValue(e)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(e){this.shift=e,this.renderPosition(this.x+this.parent.slideableWidth*e)},n.remove=function(){this.element.parentNode.removeChild(this.element)},r}),function(e,t){"function"==typeof define&&define.amd?define("flickity/js/slide",t):"object"==typeof module&&module.exports?module.exports=t():(e.Flickity=e.Flickity||{},e.Flickity.Slide=t())}(window,function(){"use strict";function e(e){this.parent=e,this.isOriginLeft="left"==e.originSide,this.cells=[],this.outerWidth=0,this.height=0}var t=e.prototype;return t.addCell=function(e){var t;this.cells.push(e),this.outerWidth+=e.size.outerWidth,this.height=Math.max(e.size.outerHeight,this.height),1==this.cells.length&&(this.x=e.x,t=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=e.size[t])},t.updateTarget=function(){var e=this.isOriginLeft?"marginRight":"marginLeft",t=this.getLastCell(),r=t?t.size[e]:0,n=this.outerWidth-(this.firstMargin+r);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},t.getLastCell=function(){return this.cells[this.cells.length-1]},t.select=function(){this.cells.forEach(function(e){e.select()})},t.unselect=function(){this.cells.forEach(function(e){e.unselect()})},t.getCellElements=function(){return this.cells.map(function(e){return e.element})},e}),function(t,r){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=r(t,t.fizzyUIUtils))}(window,function(e,t){var r={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var e,t=this.x;this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating&&(e=this,requestAnimationFrame(function(){e.animate()}))},positionSlider:function(){var e=this.x;this.options.wrapAround&&1<this.cells.length&&(e=t.modulo(e,this.slideableWidth),e-=this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(e,t){e+=this.cursorPosition,e=this.options.rightToLeft?-e:e;var r=this.getPositionValue(e);this.slider.style.transform=t?"translate3d("+r+",0,0)":"translateX("+r+")"},dispatchScrollEvent:function(){var e,t,r=this.slides[0];r&&(t=(e=-this.x-r.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[t,e]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(e){return this.options.percentPosition?.01*Math.round(e/this.size.innerWidth*1e4)+"%":Math.round(e)+"px"},settle:function(e){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*e)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(e){var t=this.cursorPosition+e;this._shiftCells(this.beforeShiftCells,t,-1);var r=this.size.innerWidth-(e+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,r,1)},_shiftCells:function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],o=0<t?r:0;i.wrapShift(o),t-=i.size.outerWidth}},_unshiftCells:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)e[t].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(e){this.velocity+=e},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var e;this.isDraggable&&this.isPointerDown&&(e=this.dragX-this.x-this.velocity,this.applyForce(e))},applySelectedAttraction:function(){var e;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(e=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(e))}};return r}),function(s,a){var e;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(e,t,r,n,i,o){return a(s,e,t,r,n,i,o)}):"object"==typeof module&&module.exports?module.exports=a(s,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(e=s.Flickity,s.Flickity=a(s,s.EvEmitter,s.getSize,s.fizzyUIUtils,e.Cell,e.Slide,e.animatePrototype))}(window,function(n,e,t,a,r,s,i){var l=n.jQuery,o=n.getComputedStyle,u=n.console;function h(e,t){for(e=a.makeArray(e);e.length;)t.appendChild(e.shift())}var c=0,p={};function d(e,t){var r=a.getQueryElement(e);if(r){if(this.element=r,this.element.flickityGUID){var n=p[this.element.flickityGUID];return n.option(t),n}l&&(this.$element=l(this.element)),this.options=a.extend({},this.constructor.defaults),this.option(t),this._create()}else u&&u.error("Bad element for Flickity: "+(r||e))}d.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},d.createMethods=[];var f=d.prototype;a.extend(f,e.prototype),f._create=function(){var e=this.guid=++c;for(var t in this.element.flickityGUID=e,(p[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var r=this.options.on[t];this.on(t,r)}d.createMethods.forEach(function(e){this[e]()},this),this.options.watchCSS?this.watchCSS():this.activate()},f.option=function(e){a.extend(this.options,e)},f.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),h(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},f._createSlider=function(){var e=document.createElement("div");e.className="flickity-slider",e.style[this.originSide]=0,this.slider=e},f._filterFindCellElements=function(e){return a.filterFindElements(e,this.options.cellSelector)},f.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},f._makeCells=function(e){return this._filterFindCellElements(e).map(function(e){return new r(e,this)},this)},f.getLastCell=function(){return this.cells[this.cells.length-1]},f.getLastSlide=function(){return this.slides[this.slides.length-1]},f.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},f._positionCells=function(e){e=e||0,this.maxCellHeight=e&&this.maxCellHeight||0;var t,r=0;0<e&&(r=(t=this.cells[e-1]).x+t.size.outerWidth);for(var n=this.cells.length,i=e;i<n;i++){var o=this.cells[i];o.setPosition(r),r+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=r,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},f._sizeCells=function(e){e.forEach(function(e){e.getSize()})},f.updateSlides=function(){var n,i,o;this.slides=[],this.cells.length&&(n=new s(this),this.slides.push(n),i="left"==this.originSide?"marginRight":"marginLeft",o=this._getCanCellFit(),this.cells.forEach(function(e,t){var r;n.cells.length&&(r=n.outerWidth-n.firstMargin+(e.size.outerWidth-e.size[i]),o.call(this,t,r)||(n.updateTarget(),n=new s(this),this.slides.push(n))),n.addCell(e)},this),n.updateTarget(),this.updateSelectedSlide())},f._getCanCellFit=function(){var e=this.options.groupCells;if(!e)return function(){return!1};if("number"==typeof e){var t=parseInt(e,10);return function(e){return e%t!=0}}var r="string"==typeof e&&e.match(/^(\d+)%$/),n=r?parseInt(r[1],10)/100:1;return function(e,t){return t<=(this.size.innerWidth+1)*n}},f._init=f.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},f.getSize=function(){this.size=t(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var m={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return f.setCellAlign=function(){var e=m[this.options.cellAlign];this.cellAlign=e?e[this.originSide]:this.options.cellAlign},f.setGallerySize=function(){var e;this.options.setGallerySize&&(e=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=e+"px")},f._getWrapShiftCells=function(){var e,t;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),e=this.cursorPosition,t=this.cells.length-1,this.beforeShiftCells=this._getGapCells(e,t,-1),e=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(e,0,1))},f._getGapCells=function(e,t,r){for(var n=[];0<e;){var i=this.cells[t];if(!i)break;n.push(i),t+=r,e-=i.size.outerWidth}return n},f._containSlides=function(){var e,t,r,n,i,o,s;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(t=(e=this.options.rightToLeft)?"marginRight":"marginLeft",r=e?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[r],i=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[t],s=n-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(e){i?e.target=n*this.cellAlign:(e.target=Math.max(e.target,o),e.target=Math.min(e.target,s))},this))},f.dispatchEvent=function(e,t,r){var n,i,o=t?[t].concat(r):r;this.emitEvent(e,o),l&&this.$element&&(n=e+=this.options.namespaceJQueryEvents?".flickity":"",t&&((i=l.Event(t)).type=e,n=i),this.$element.trigger(n,r))},f.select=function(e,t,r){var n;this.isActive&&(e=parseInt(e,10),this._wrapSelect(e),(this.options.wrapAround||t)&&(e=a.modulo(e,this.slides.length)),this.slides[e]&&(n=this.selectedIndex,this.selectedIndex=e,this.updateSelectedSlide(),r?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[e]),e!=n&&this.dispatchEvent("change",null,[e]),this.dispatchEvent("cellSelect")))},f._wrapSelect=function(e){var t=this.slides.length;if(!(this.options.wrapAround&&1<t))return e;var r=a.modulo(e,t),n=Math.abs(r-this.selectedIndex),i=Math.abs(r+t-this.selectedIndex),o=Math.abs(r-t-this.selectedIndex);!this.isDragSelect&&i<n?e+=t:!this.isDragSelect&&o<n&&(e-=t),e<0?this.x-=this.slideableWidth:t<=e&&(this.x+=this.slideableWidth)},f.previous=function(e,t){this.select(this.selectedIndex-1,e,t)},f.next=function(e,t){this.select(this.selectedIndex+1,e,t)},f.updateSelectedSlide=function(){var e=this.slides[this.selectedIndex];e&&(this.unselectSelectedSlide(),(this.selectedSlide=e).select(),this.selectedCells=e.cells,this.selectedElements=e.getCellElements(),this.selectedCell=e.cells[0],this.selectedElement=this.selectedElements[0])},f.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},f.selectInitialIndex=function(){var e=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(e&&"string"==typeof e)if(this.queryCell(e))return void this.selectCell(e,!1,!0);var t=0;e&&this.slides[e]&&(t=e),this.select(t,!1,!0)}},f.selectCell=function(e,t,r){var n,i=this.queryCell(e);i&&(n=this.getCellSlideIndex(i),this.select(n,t,r))},f.getCellSlideIndex=function(e){for(var t=0;t<this.slides.length;t++){if(-1!=this.slides[t].cells.indexOf(e))return t}},f.getCell=function(e){for(var t=0;t<this.cells.length;t++){var r=this.cells[t];if(r.element==e)return r}},f.getCells=function(e){e=a.makeArray(e);var r=[];return e.forEach(function(e){var t=this.getCell(e);t&&r.push(t)},this),r},f.getCellElements=function(){return this.cells.map(function(e){return e.element})},f.getParentCell=function(e){var t=this.getCell(e);return t||(e=a.getParent(e,".flickity-slider > *"),this.getCell(e))},f.getAdjacentCellElements=function(e,t){if(!e)return this.selectedSlide.getCellElements();t=void 0===t?this.selectedIndex:t;var r=this.slides.length;if(r<=1+2*e)return this.getCellElements();for(var n=[],i=t-e;i<=t+e;i++){var o=this.options.wrapAround?a.modulo(i,r):i,s=this.slides[o];s&&(n=n.concat(s.getCellElements()))}return n},f.queryCell=function(e){if("number"==typeof e)return this.cells[e];if("string"==typeof e){if(e.match(/^[#\.]?[\d\/]/))return;e=this.element.querySelector(e)}return this.getCell(e)},f.uiChange=function(){this.emitEvent("uiChange")},f.childUIPointerDown=function(e){"touchstart"!=e.type&&e.preventDefault(),this.focus()},f.onresize=function(){this.watchCSS(),this.resize()},a.debounceMethod(d,"onresize",150),f.resize=function(){var e;this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=a.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),e=this.selectedElements&&this.selectedElements[0],this.selectCell(e,!1,!0))},f.watchCSS=function(){this.options.watchCSS&&(-1!=o(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},f.onkeydown=function(e){var t,r=document.activeElement&&document.activeElement!=this.element;!this.options.accessibility||r||(t=d.keyboardHandlers[e.keyCode])&&t.call(this)},d.keyboardHandlers={37:function(){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()},39:function(){var e=this.options.rightToLeft?"previous":"next";this.uiChange(),this[e]()}},f.focus=function(){var e=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=e&&n.scrollTo(n.pageXOffset,e)},f.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(e){e.destroy()}),this.element.removeChild(this.viewport),h(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},f.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),l&&this.$element&&l.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete p[this.guid]},a.extend(f,i),d.data=function(e){var t=(e=a.getQueryElement(e))&&e.flickityGUID;return t&&p[t]},a.htmlInit(d,"flickity"),l&&l.bridget&&l.bridget("flickity",d),d.setJQuery=function(e){l=e},d.Cell=r,d.Slide=s,d}),function(t,r){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.Unipointer=r(t,t.EvEmitter)}(window,function(i,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindStartEvent=function(e){this._bindStartEvent(e,!0)},r.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},r._bindStartEvent=function(e,t){var r=(t=void 0===t||t)?"addEventListener":"removeEventListener",n="mousedown";i.PointerEvent?n="pointerdown":"ontouchstart"in i&&(n="touchstart"),e[r](n,this)},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.getTouch=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.identifier==this.pointerIdentifier)return r}},r.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},r.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},r.onpointerdown=function(e){this._pointerDown(e,e)},r._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},r.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return r._bindPostStartEvents=function(e){var t;e&&((t=n[e.type]).forEach(function(e){i.addEventListener(e,this)},this),this._boundPointerEvents=t)},r._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){i.removeEventListener(e,this)},this),delete this._boundPointerEvents)},r.onmousemove=function(e){this._pointerMove(e,e)},r.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},r.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},r._pointerMove=function(e,t){this.pointerMove(e,t)},r.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},r.onmouseup=function(e){this._pointerUp(e,e)},r.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},r.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},r._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},r._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},r._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},r.pointerDone=function(){},r.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},r.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},r._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},r.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},t.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},t}),function(t,r){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("unipointer")):t.Unidragger=r(t,t.Unipointer)}(window,function(o,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindHandles=function(){this._bindHandles(!0)},r.unbindHandles=function(){this._bindHandles(!1)},r._bindHandles=function(e){for(var t=(e=void 0===e||e)?"addEventListener":"removeEventListener",r=e?this._touchActionValue:"",n=0;n<this.handles.length;n++){var i=this.handles[n];this._bindStartEvent(i,e),i[t]("click",this),o.PointerEvent&&(i.style.touchAction=r)}},r._touchActionValue="none",r.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},s={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return r.okayPointerDown=function(e){var t=i[e.target.nodeName],r=s[e.target.type],n=!t||r;return n||this._pointerReset(),n},r.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},r.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,r]),this._dragMove(e,t,r)},r._dragPointerMove=function(e,t){var r={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this._dragStart(e,t),r},r.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},r._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},r._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},r.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},r._dragMove=function(e,t,r){this.isDragging&&this.dragMove(e,t,r)},r.dragMove=function(e,t,r){e.preventDefault(),this.emitEvent("dragMove",[e,t,r])},r._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},r.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},r.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},r._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},r.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},t.getPointerPoint=e.getPointerPoint,t}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=i(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)}(window,function(r,e,t,a){a.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var n=e.prototype;a.extend(n,t.prototype),n._touchActionValue="pan-y";var i="createTouch"in document,o=!1;n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),i&&!o&&(r.addEventListener("touchmove",function(){}),o=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(e,t){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=l(),r.addEventListener("scroll",this),this._pointerDownDefault(e,t)):this._pointerDownDefault(e,t)},n._pointerDownDefault=function(e,t){this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this._bindPostStartEvents(e),this.dispatchEvent("pointerDown",e,[t])};var s={INPUT:!0,TEXTAREA:!0,SELECT:!0};function l(){return{x:r.pageXOffset,y:r.pageYOffset}}return n.pointerDownFocus=function(e){s[e.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(e){var t="touchstart"==e.type,r="touch"==e.pointerType,n=s[e.target.nodeName];t||r||n||e.preventDefault()},n.hasDragStarted=function(e){return Math.abs(e.x)>this.options.dragThreshold},n.pointerUp=function(e,t){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},n.pointerDone=function(){r.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(e,t){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),r.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[t]))},n.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,r]),this._dragMove(e,t,r)},n.dragMove=function(e,t,r){var n,i,o,s;this.isDraggable&&(e.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(r.x=r.x%this.slideableWidth),o=this.dragStartPosition+r.x*n,!this.options.wrapAround&&this.slides.length&&(o=(o=(i=Math.max(-this.slides[0].target,this.dragStartPosition))<o?.5*(o+i):o)<(s=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(o+s):o),this.dragX=o,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",e,[t,r]))},n.dragEnd=function(e,t){var r,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),r=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||r!=this.selectedIndex||(r+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(r),delete this.isDragSelect,this.dispatchEvent("dragEnd",e,[t]))},n.dragEndRestingSelect=function(){var e=this.getRestingPosition(),t=Math.abs(this.getSlideDistance(-e,this.selectedIndex)),r=this._getClosestResting(e,t,1),n=this._getClosestResting(e,t,-1);return r.distance<n.distance?r.index:n.index},n._getClosestResting=function(e,t,r){for(var n=this.selectedIndex,i=1/0,o=this.options.contain&&!this.options.wrapAround?function(e,t){return e<=t}:function(e,t){return e<t};o(t,i)&&(n+=r,i=t,null!==(t=this.getSlideDistance(-e,n)));)t=Math.abs(t);return{distance:i,index:n-r}},n.getSlideDistance=function(e,t){var r=this.slides.length,n=this.options.wrapAround&&1<r,i=n?a.modulo(t,r):t,o=this.slides[i];if(!o)return null;var s=n?this.slideableWidth*Math.floor(t/r):0;return e-(o.target+s)},n.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime)return 0;var e=this.getSlideDistance(-this.dragX,this.selectedIndex),t=this.previousDragX-this.dragX;return 0<e&&0<t?1:e<0&&t<0?-1:0},n.staticClick=function(e,t){var r=this.getParentCell(e.target),n=r&&r.element,i=r&&this.cells.indexOf(r);this.dispatchEvent("staticClick",e,[t,n,i])},n.onscroll=function(){var e=l(),t=this.pointerDownScroll.x-e.x,r=this.pointerDownScroll.y-e.y;(3<Math.abs(t)||3<Math.abs(r))&&this._pointerDone()},e}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):i(n,n.Flickity,n.Unipointer,n.fizzyUIUtils)}(window,function(e,t,r,n){"use strict";var i="http://www.w3.org/2000/svg";function o(e,t){this.direction=e,this.parent=t,this._create()}(o.prototype=Object.create(r.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var e=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==e;var t=this.element=document.createElement("button");t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var r=this.createSVG();t.appendChild(r),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var e=document.createElementNS(i,"svg");e.setAttribute("class","flickity-button-icon"),e.setAttribute("viewBox","0 0 100 100");var t,r=document.createElementNS(i,"path"),n="string"!=typeof(t=this.parent.options.arrowShape)?"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z":t;return r.setAttribute("d",n),r.setAttribute("class","arrow"),this.isLeft||r.setAttribute("transform","translate(100, 100) rotate(180) "),e.appendChild(r),e},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){var e;this.isEnabled&&(this.parent.uiChange(),e=this.isPrevious?"previous":"next",this.parent[e]())},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var e,t,r=this.parent.slides;this.parent.options.wrapAround&&1<r.length?this.enable():(e=r.length?r.length-1:0,t=this.isPrevious?0:e,this[this.parent.selectedIndex==t?"disable":"enable"]())},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(t.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),t.createMethods.push("_createPrevNextButtons");var s=t.prototype;return s._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},s.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},s.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},t.PrevNextButton=o,t}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):i(n,n.Flickity,n.Unipointer,n.fizzyUIUtils)}(window,function(e,t,r,n){function i(e){this.parent=e,this._create()}(i.prototype=Object.create(r.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},i.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},i.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},i.prototype.setDots=function(){var e=this.parent.slides.length-this.dots.length;0<e?this.addDots(e):e<0&&this.removeDots(-e)},i.prototype.addDots=function(e){for(var t=document.createDocumentFragment(),r=[],n=this.dots.length,i=n+e,o=n;o<i;o++){var s=document.createElement("li");s.className="dot",s.setAttribute("aria-label","Page dot "+(o+1)),t.appendChild(s),r.push(s)}this.holder.appendChild(t),this.dots=this.dots.concat(r)},i.prototype.removeDots=function(e){this.dots.splice(this.dots.length-e,e).forEach(function(e){this.holder.removeChild(e)},this)},i.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},i.prototype.onTap=i.prototype.onClick=function(e){var t,r=e.target;"LI"==r.nodeName&&(this.parent.uiChange(),t=this.dots.indexOf(r),this.parent.select(t))},i.prototype.destroy=function(){this.deactivate(),this.allOff()},t.PageDots=i,n.extend(t.defaults,{pageDots:!0}),t.createMethods.push("_createPageDots");var o=t.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new i(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},t.PageDots=i,t}),function(e,t){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):t(e.EvEmitter,e.fizzyUIUtils,e.Flickity)}(window,function(e,t,r){function n(e){this.parent=e,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(e.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var e,t;"playing"==this.state&&(e="number"==typeof(e=this.parent.options.autoPlay)?e:3e3,(t=this).clear(),this.timeout=setTimeout(function(){t.parent.next(!0),t.tick()},e))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},t.extend(r.defaults,{pauseAutoPlayOnHover:!0}),r.createMethods.push("_createPlayer");var i=r.prototype;return i._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},i.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},i.playPlayer=function(){this.player.play()},i.stopPlayer=function(){this.player.stop()},i.pausePlayer=function(){this.player.pause()},i.unpausePlayer=function(){this.player.unpause()},i.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},i.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},i.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},r.Player=n,r}),function(r,n){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("./flickity"),require("fizzy-ui-utils")):n(r,r.Flickity,r.fizzyUIUtils)}(window,function(e,t,n){var r=t.prototype;return r.insert=function(e,t){var r,n,i,o,s,a,l,u=this._makeCells(e);u&&u.length&&(r=this.cells.length,t=void 0===t?r:t,i=u,o=document.createDocumentFragment(),i.forEach(function(e){o.appendChild(e.element)}),n=o,(s=t==r)?this.slider.appendChild(n):(a=this.cells[t].element,this.slider.insertBefore(n,a)),0===t?this.cells=u.concat(this.cells):s?this.cells=this.cells.concat(u):(l=this.cells.splice(t,r-t),this.cells=this.cells.concat(u).concat(l)),this._sizeCells(u),this.cellChange(t,!0))},r.append=function(e){this.insert(e,this.cells.length)},r.prepend=function(e){this.insert(e,0)},r.remove=function(e){var r,t=this.getCells(e);t&&t.length&&(r=this.cells.length-1,t.forEach(function(e){e.remove();var t=this.cells.indexOf(e);r=Math.min(t,r),n.removeFrom(this.cells,e)},this),this.cellChange(r,!0))},r.cellSizeChange=function(e){var t,r=this.getCell(e);r&&(r.getSize(),t=this.cells.indexOf(r),this.cellChange(t))},r.cellChange=function(e,t){var r=this.selectedElement;this._positionCells(e),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(r);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[e]),this.select(this.selectedIndex),t&&this.positionSliderAtSelected()},t}),function(r,n){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("./flickity"),require("fizzy-ui-utils")):n(r,r.Flickity,r.fizzyUIUtils)}(window,function(e,t,o){"use strict";t.createMethods.push("_createLazyload");var r=t.prototype;function i(e,t){this.img=e,this.flickity=t,this.load()}return r._createLazyload=function(){this.on("select",this.lazyLoad)},r.lazyLoad=function(){var e,t,r,n=this.options.lazyLoad;n&&(e="number"==typeof n?n:0,t=this.getAdjacentCellElements(e),r=[],t.forEach(function(e){var t=function(e){if("IMG"==e.nodeName){var t=e.getAttribute("data-flickity-lazyload"),r=e.getAttribute("data-flickity-lazyload-src"),n=e.getAttribute("data-flickity-lazyload-srcset");if(t||r||n)return[e]}var i=e.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return o.makeArray(i)}(e);r=r.concat(t)}),r.forEach(function(e){new i(e,this)},this))},i.prototype.handleEvent=o.handleEvent,i.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var e=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),t=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=e,t&&this.img.setAttribute("srcset",t),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},i.prototype.onload=function(e){this.complete(e,"flickity-lazyloaded")},i.prototype.onerror=function(e){this.complete(e,"flickity-lazyerror")},i.prototype.complete=function(e,t){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var r=this.flickity.getParentCell(this.img),n=r&&r.element;this.flickity.cellSizeChange(n),this.img.classList.add(t),this.flickity.dispatchEvent("lazyLoad",e,n)},t.LazyLoader=i,t}),function(e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}((window,function(e){return e})),function(e,t){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):e.Flickity=t(e.Flickity,e.fizzyUIUtils)}(window,function(n,i){n.createMethods.push("_createAsNavFor");var e=n.prototype;return e._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var e,t=this.options.asNavFor;t&&(e=this,setTimeout(function(){e.setNavCompanion(t)}))},e.setNavCompanion=function(e){e=i.getQueryElement(e);var t,r=n.data(e);r&&r!=this&&(this.navCompanion=r,(t=this).onNavCompanionSelect=function(){t.navCompanionSelect()},r.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},e.navCompanionSelect=function(e){var t,r,n,i,o,s,a,l,u=this.navCompanion&&this.navCompanion.selectedCells;u&&(t=u[0],n=(r=this.navCompanion.cells.indexOf(t))+u.length-1,i=Math.floor((o=r,s=n,a=this.navCompanion.cellAlign,(s-o)*a+o)),this.selectCell(i,!1,e),this.removeNavSelectedElements(),i>=this.cells.length||(l=this.cells.slice(r,1+n),this.navSelectedElements=l.map(function(e){return e.element}),this.changeNavSelectedClass("add")))},e.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},e.activateAsNavFor=function(){this.navCompanionSelect(!0)},e.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},e.onNavStaticClick=function(e,t,r,n){"number"==typeof n&&this.navCompanion.selectCell(n)},e.deactivateAsNavFor=function(){this.removeNavSelectedElements()},e.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},n}),function(t,r){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.imagesLoaded=r(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){var o=t.jQuery,s=t.console;function a(e,t){for(var r in t)e[r]=t[r];return e}var l=Array.prototype.slice;function u(e,t,r){if(!(this instanceof u))return new u(e,t,r);var n,i=e;"string"==typeof e&&(i=document.querySelectorAll(e)),i?(this.elements=(n=i,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?l.call(n):[n]),this.options=a({},this.options),"function"==typeof t?r=t:a(this.options,t),r&&this.on("always",r),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(i||e))}(u.prototype=Object.create(e.prototype)).options={},u.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},u.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&h[t]){for(var r=e.querySelectorAll("img"),n=0;n<r.length;n++){var i=r[n];this.addImage(i)}if("string"==typeof this.options.background)for(var o=e.querySelectorAll(this.options.background),n=0;n<o.length;n++){var s=o[n];this.addElementBackgroundImages(s)}}};var h={1:!0,9:!0,11:!0};function r(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}return u.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var r=/url\((['"])?(.*?)\1\)/gi,n=r.exec(t.backgroundImage);null!==n;){var i=n&&n[2];i&&this.addBackground(i,e),n=r.exec(t.backgroundImage)}},u.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},u.prototype.addBackground=function(e,t){var r=new n(e,t);this.images.push(r)},u.prototype.check=function(){var n=this;function t(e,t,r){setTimeout(function(){n.progress(e,t,r)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},u.prototype.progress=function(e,t,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+r,e,t)},u.prototype.complete=function(){var e,t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(r.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(u.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(e,t){return new u(this,e,t).jqDeferred.promise(o(this))})})(),u}),function(r,n){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("flickity"),require("imagesloaded")):r.Flickity=n(r,r.Flickity,r.imagesLoaded)}(window,function(e,t,r){"use strict";t.createMethods.push("_createImagesLoaded");var n=t.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){var n;this.options.imagesLoaded&&r((n=this).slider).on("progress",function(e,t){var r=n.getParentCell(t.img);n.cellSizeChange(r&&r.element),n.options.freeScroll||n.positionSliderAtSelected()})},t}),function(e,t){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):t(e.Flickity,e.fizzyUIUtils)}(this,function(e,a){var t=e.Slide,i=t.prototype.updateTarget;t.prototype.updateTarget=function(){var r,n;i.apply(this,arguments),this.parent.options.fade&&(r=this.target-this.x,n=this.cells[0].x,this.cells.forEach(function(e){var t=e.x-n-r;e.renderPosition(t)}))},t.prototype.setOpacity=function(t){this.cells.forEach(function(e){e.element.style.opacity=t})};var r=e.prototype;e.createMethods.push("_createFade"),r._createFade=function(){this.fadeIndex=this.selectedIndex,this.prevSelectedIndex=this.selectedIndex,this.on("select",this.onSelectFade),this.on("dragEnd",this.onDragEndFade),this.on("settle",this.onSettleFade),this.on("activate",this.onActivateFade),this.on("deactivate",this.onDeactivateFade)};var n=r.updateSlides;r.updateSlides=function(){n.apply(this,arguments),this.options.fade&&this.slides.forEach(function(e,t){var r=t==this.selectedIndex?1:0;e.setOpacity(r)},this)},r.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1),this.prevSelectedIndex=this.selectedIndex},r.onSettleFade=function(){delete this.didDragEnd,this.options.fade&&(this.selectedSlide.setOpacity(1),this.slides[this.fadeIndex]&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0))},r.onDragEndFade=function(){this.didDragEnd=!0},r.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},r.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(e){e.setOpacity("")}))};var o=r.positionSlider;r.positionSlider=function(){this.options.fade?(this.fadeSlides(),this.dispatchScrollEvent()):o.apply(this,arguments)};var s=r.positionSliderAtSelected;r.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0),s.apply(this,arguments)},r.fadeSlides=function(){var e,t,r,n,i,o;this.slides.length<2||(e=this.getFadeIndexes(),t=this.slides[e.a],r=this.slides[e.b],n=this.wrapDifference(t.target,r.target),i=this.wrapDifference(t.target,-this.x),i/=n,t.setOpacity(1-i),r.setOpacity(i),o=e.a,this.isDragging&&(o=.5<i?e.a:e.b),null!=this.fadeHideIndex&&this.fadeHideIndex!=o&&this.fadeHideIndex!=e.a&&this.fadeHideIndex!=e.b&&this.slides[this.fadeHideIndex].setOpacity(0),this.fadeHideIndex=o)},r.getFadeIndexes=function(){return this.isDragging||this.didDragEnd?this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes():{a:this.fadeIndex,b:this.selectedIndex}},r.getFadeDragWrapIndexes=function(){var e=this.slides.map(function(e,t){return this.getSlideDistance(-this.x,t)},this),t=e.map(function(e){return Math.abs(e)}),r=Math.min.apply(Math,t),n=t.indexOf(r),i=e[n],o=this.slides.length,s=0<=i?1:-1;return{a:n,b:a.modulo(n+s,o)}},r.getFadeDragLimitIndexes=function(){for(var e=0,t=0;t<this.slides.length-1;t++){var r=this.slides[t];if(-this.x<r.target)break;e=t}return{a:e,b:e+1}},r.wrapDifference=function(e,t){var r=t-e;if(!this.options.wrapAround)return r;var n=r+this.slideableWidth,i=r-this.slideableWidth;return Math.abs(n)<Math.abs(r)&&(r=n),Math.abs(i)<Math.abs(r)&&(r=i),r};var l=r._getWrapShiftCells;r._getWrapShiftCells=function(){this.options.fade||l.apply(this,arguments)};var u=r.shiftWrapCells;return r.shiftWrapCells=function(){this.options.fade||u.apply(this,arguments)},e}),"undefined"!=typeof navigator&&function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(e):(e.lottie=t(e),e.bodymovin=e.lottie)}(window||{},function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};function ProjectInterface(){return{}}!function(){for(var e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],t=e.length,r=0;r<t;r+=1)BMMath[e[r]]=Math[e[r]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){for(var t=createSizedArray(e.length),r=e.length,n=0;n<r;n+=1)t[n]=Math.abs(e[n]);return t}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){bm_rnd=e?Math.round:function(e){return e}}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin=e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility=e.style.webkitBackfaceVisibility="visible",e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,r,n){this.type=e,this.currentTime=t,this.totalTime=r,this.direction=n<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,r,n){this.type=e,this.currentLoop=r,this.totalLoops=t,this.direction=n<0?-1:1}function BMSegmentStartEvent(e,t,r){this.type=e,this.firstFrame=t,this.totalFrames=r}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t,this.currentTime=currentTime}roundValues(!1);var createElementID=(G=0,function(){return"__lottie_element_"+ ++G}),G;function HSVtoRGB(e,t,r){var n,i,o,s,a,l=r*(1-t),u=r*(1-(a=6*e-(s=Math.floor(6*e)))*t),h=r*(1-(1-a)*t);switch(s%6){case 0:n=r,i=h,o=l;break;case 1:n=u,i=r,o=l;break;case 2:n=l,i=r,o=h;break;case 3:n=l,i=u,o=r;break;case 4:n=h,i=l,o=r;break;case 5:n=r,i=l,o=u}return[n,i,o]}function RGBtoHSV(e,t,r){var n,i=Math.max(e,t,r),o=Math.min(e,t,r),s=i-o,a=0===i?0:s/i,l=i/255;switch(i){case o:n=0;break;case e:n=t-r+s*(t<r?6:0),n/=6*s;break;case t:n=r-e+2*s,n/=6*s;break;case r:n=e-t+4*s,n/=6*s}return[n,a,l]}function addSaturationToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[1]+=t,1<r[1]?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[2]+=t,1<r[2]?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[0]+=t/360,1<r[0]?--r[0]:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){for(var e,n=[],t=0;t<256;t+=1)e=t.toString(16),n[t]=1==e.length?"0"+e:e;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+n[e]+n[t]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var r=this._cbs[e].length,n=0;n<r;n++)this._cbs[e][n](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var r=0,n=this._cbs[e].length;r<n;)this._cbs[e][r]===t&&(this._cbs[e].splice(r,1),--r,--n),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,t){return"float32"===e?new Float32Array(t):"int16"===e?new Int16Array(t):"uint8c"===e?new Uint8ClampedArray(t):void 0}:function(e,t){var r,n=0,i=[];switch(e){case"int16":case"uint8c":r=1;break;default:r=1.1}for(n=0;n<t;n+=1)i.push(r);return i};function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS(svgNS,e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;for(var e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(Pa={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return Pa[e]||""}),Pa,Matrix=(wpc=Math.cos,xpc=Math.sin,ypc=Math.tan,zpc=Math.round,function(){this.reset=Apc,this.rotate=Bpc,this.rotateX=Cpc,this.rotateY=Dpc,this.rotateZ=Epc,this.skew=Gpc,this.skewFromAxis=Hpc,this.shear=Fpc,this.scale=Ipc,this.setTransform=Jpc,this.translate=Kpc,this.transform=Lpc,this.applyToPoint=Qpc,this.applyToX=Rpc,this.applyToY=Spc,this.applyToZ=Tpc,this.applyToPointArray=Ypc,this.applyToTriplePoints=Xpc,this.applyToPointStringified=Zpc,this.toCSS=$pc,this.to2dCSS=aqc,this.clone=Opc,this.cloneFromProps=Ppc,this.equals=Npc,this.inversePoints=Wpc,this.inversePoint=Vpc,this.getInverseMatrix=Upc,this._t=this.transform,this.isIdentity=Mpc,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}),wpc,xpc,ypc,zpc;function Apc(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function Bpc(e){if(0===e)return this;var t=wpc(e),r=xpc(e);return this._t(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1)}function Cpc(e){if(0===e)return this;var t=wpc(e),r=xpc(e);return this._t(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1)}function Dpc(e){if(0===e)return this;var t=wpc(e),r=xpc(e);return this._t(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1)}function Epc(e){if(0===e)return this;var t=wpc(e),r=xpc(e);return this._t(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1)}function Fpc(e,t){return this._t(1,t,e,1,0,0)}function Gpc(e,t){return this.shear(ypc(e),ypc(t))}function Hpc(e,t){var r=wpc(t),n=xpc(t);return this._t(r,n,0,0,-n,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,ypc(e),1,0,0,0,0,1,0,0,0,0,1)._t(r,-n,0,0,n,r,0,0,0,0,1,0,0,0,0,1)}function Ipc(e,t,r){return r||0===r||(r=1),1===e&&1===t&&1===r?this:this._t(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function Jpc(e,t,r,n,i,o,s,a,l,u,h,c,p,d,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=r,this.props[3]=n,this.props[4]=i,this.props[5]=o,this.props[6]=s,this.props[7]=a,this.props[8]=l,this.props[9]=u,this.props[10]=h,this.props[11]=c,this.props[12]=p,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function Kpc(e,t,r){return r=r||0,0!==e||0!==t||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1):this}function Lpc(e,t,r,n,i,o,s,a,l,u,h,c,p,d,f,m){var g=this.props;if(1===e&&0===t&&0===r&&0===n&&0===i&&1===o&&0===s&&0===a&&0===l&&0===u&&1===h&&0===c)return g[12]=g[12]*e+g[15]*p,g[13]=g[13]*o+g[15]*d,g[14]=g[14]*h+g[15]*f,g[15]=g[15]*m,this._identityCalculated=!1,this;var y=g[0],v=g[1],_=g[2],b=g[3],E=g[4],S=g[5],w=g[6],x=g[7],P=g[8],C=g[9],A=g[10],T=g[11],k=g[12],R=g[13],M=g[14],D=g[15];return g[0]=y*e+v*i+_*l+b*p,g[1]=y*t+v*o+_*u+b*d,g[2]=y*r+v*s+_*h+b*f,g[3]=y*n+v*a+_*c+b*m,g[4]=E*e+S*i+w*l+x*p,g[5]=E*t+S*o+w*u+x*d,g[6]=E*r+S*s+w*h+x*f,g[7]=E*n+S*a+w*c+x*m,g[8]=P*e+C*i+A*l+T*p,g[9]=P*t+C*o+A*u+T*d,g[10]=P*r+C*s+A*h+T*f,g[11]=P*n+C*a+A*c+T*m,g[12]=k*e+R*i+M*l+D*p,g[13]=k*t+R*o+M*u+D*d,g[14]=k*r+R*s+M*h+D*f,g[15]=k*n+R*a+M*c+D*m,this._identityCalculated=!1,this}function Mpc(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function Npc(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function Opc(e){for(var t=0;t<16;t+=1)e.props[t]=this.props[t]}function Ppc(e){for(var t=0;t<16;t+=1)this.props[t]=e[t]}function Qpc(e,t,r){return{x:e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}}function Rpc(e,t,r){return e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12]}function Spc(e,t,r){return e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13]}function Tpc(e,t,r){return e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}function Upc(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,r=-this.props[1]/e,n=-this.props[4]/e,i=this.props[0]/e,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,s=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,a=new Matrix;return a.props[0]=t,a.props[1]=r,a.props[4]=n,a.props[5]=i,a.props[12]=o,a.props[13]=s,a}function Vpc(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function Wpc(e){for(var t=e.length,r=[],n=0;n<t;n+=1)r[n]=Vpc(e[n]);return r}function Xpc(e,t,r){var n,i,o,s,a,l,u=createTypedArray("float32",6);return this.isIdentity()?(u[0]=e[0],u[1]=e[1],u[2]=t[0],u[3]=t[1],u[4]=r[0],u[5]=r[1]):(n=this.props[0],i=this.props[1],o=this.props[4],s=this.props[5],a=this.props[12],l=this.props[13],u[0]=e[0]*n+e[1]*o+a,u[1]=e[0]*i+e[1]*s+l,u[2]=t[0]*n+t[1]*o+a,u[3]=t[0]*i+t[1]*s+l,u[4]=r[0]*n+r[1]*o+a,u[5]=r[0]*i+r[1]*s+l),u}function Ypc(e,t,r){return this.isIdentity()?[e,t,r]:[e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]]}function Zpc(e,t){if(this.isIdentity())return e+","+t;var r=this.props;return Math.round(100*(e*r[0]+t*r[4]+r[12]))/100+","+Math.round(100*(e*r[1]+t*r[5]+r[13]))/100}function $pc(){for(var e=0,t=this.props,r="matrix3d(";e<16;)r+=zpc(1e4*t[e])/1e4,r+=15===e?")":",",e+=1;return r}function _pc(e){return e<1e-6&&0<e||-1e-6<e&&e<0?zpc(1e4*e)/1e4:e}function aqc(){var e=this.props;return"matrix("+_pc(e[0])+","+_pc(e[1])+","+_pc(e[4])+","+_pc(e[5])+","+_pc(e[12])+","+_pc(e[13])+")"}!function(a,l){var u=this,h=256,c=l.pow(h,6),p=l.pow(2,52),d=2*p,f=h-1;function m(e){var t,r=e.length,s=this,n=0,i=s.i=s.j=0,o=s.S=[];for(r||(e=[r++]);n<h;)o[n]=n++;for(n=0;n<h;n++)o[n]=o[i=f&i+e[n%r]+(t=o[n])],o[i]=t;s.g=function(e){for(var t,r=0,n=s.i,i=s.j,o=s.S;e--;)t=o[n=f&n+1],r=r*h+o[f&(o[n]=o[i=f&i+t])+(o[i]=t)];return s.i=n,s.j=i,r}}function g(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function y(e,t){for(var r,n=e+"",i=0;i<n.length;)t[f&i]=f&(r^=19*t[f&i])+n.charCodeAt(i++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}l.seedrandom=function(e,t,r){function n(){for(var e=s.g(6),t=c,r=0;e<p;)e=(e+r)*h,t*=h,r=s.g(1);for(;d<=e;)e/=2,t/=2,r>>>=1;return(e+r)/t}var i=[],o=y(function e(t,r){var n,i=[],o=typeof t;if(r&&"object"==o)for(n in t)try{i.push(e(t[n],r-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((t=!0===t?{entropy:!0}:t||{}).entropy?[e,v(a)]:null===e?function(){try{void 0;var e=new Uint8Array(h);return(u.crypto||u.msCrypto).getRandomValues(e),v(e)}catch(e){var t=u.navigator,r=t&&t.plugins;return[+new Date,u,r,u.screen,v(a)]}}():e,3),i),s=new m(i);return n.int32=function(){return 0|s.g(4)},n.quick=function(){return s.g(4)/4294967296},n.double=n,y(v(s.S),a),(t.pass||r||function(e,t,r,n){return n&&(n.S&&g(n,s),e.state=function(){return g(s,{})}),r?(l.random=e,t):e})(n,o,"global"in t?t.global:this==l,t.state)},y(l.random(),a)}([],BMMath);var BezierFactory=(ztc={getBezierEasing:function(e,t,r,n,i){var o=i||("bez_"+e+"_"+t+"_"+r+"_"+n).replace(/\./g,"p");if(Atc[o])return Atc[o];var s=new Jtc([e,t,r,n]);return Atc[o]=s}},Atc={},Btc=11,Ctc=1/(Btc-1),Dtc="function"==typeof Float32Array,Jtc.prototype={get:function(e){var t=this._p[0],r=this._p[1],n=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===r&&n===i?e:0===e?0:1===e?1:Htc(this._getTForX(e),r,i)},_precompute:function(){var e=this._p[0],t=this._p[1],r=this._p[2],n=this._p[3];this._precomputed=!0,e===t&&r===n||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;r<Btc;++r)this._mSampleValues[r]=Htc(r*Ctc,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],n=this._mSampleValues,i=0,o=1,s=Btc-1;o!==s&&n[o]<=e;++o)i+=Ctc;var a=i+(e-n[--o])/(n[o+1]-n[o])*Ctc,l=Itc(a,t,r);return.001<=l?function(e,t,r,n){for(var i=0;i<4;++i){var o=Itc(t,r,n);if(0===o)return t;t-=(Htc(t,r,n)-e)/o}return t}(e,a,t,r):0===l?a:function(e,t,r,n,i){for(var o,s,a=0;0<(o=Htc(s=t+(r-t)/2,n,i)-e)?r=s:t=s,1e-7<Math.abs(o)&&++a<10;);return s}(e,i,i+Ctc,t,r)}},ztc),ztc,Atc,Btc,Ctc,Dtc;function Etc(e,t){return 1-3*t+3*e}function Htc(e,t,r){return((Etc(t,r)*e+(3*r-6*t))*e+3*t)*e}function Itc(e,t,r){return 3*Etc(t,r)*e*e+2*(3*r-6*t)*e+3*t}function Jtc(e){this._p=e,this._mSampleValues=new(Dtc?Float32Array:Array)(Btc),this._precomputed=!1,this.get=this.get.bind(this)}function extendPrototype(e,t){for(var r,n=e.length,i=0;i<n;i+=1)for(var o in r=e[i].prototype)r.hasOwnProperty(o)&&(t.prototype[o]=r[o])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}function bezFunction(){function g(e,t,r,n,i,o){var s=e*n+t*i+r*o-i*n-o*e-r*t;return-.001<s&&s<.001}Math;function h(e,t,r,n){for(var i,o,s,a,l=defaultCurveSegments,u=0,h=[],c=[],p=bezier_length_pool.newElement(),d=r.length,f=0;f<l;f+=1){for(s=f/(l-1),i=a=0;i<d;i+=1)o=bm_pow(1-s,3)*e[i]+3*bm_pow(1-s,2)*s*r[i]+3*(1-s)*bm_pow(s,2)*n[i]+bm_pow(s,3)*t[i],h[i]=o,null!==c[i]&&(a+=bm_pow(h[i]-c[i],2)),c[i]=h[i];a&&(u+=a=bm_sqrt(a)),p.percents[f]=s,p.lengths[f]=u}return p.addedLength=u,p}function y(e){this.segmentLength=0,this.points=new Array(e)}function v(e,t){this.partialLength=e,this.point=t}var _,e=(_={},function(e,t,r,n){var i=(e[0]+"_"+e[1]+"_"+t[0]+"_"+t[1]+"_"+r[0]+"_"+r[1]+"_"+n[0]+"_"+n[1]).replace(/\./g,"p");if(!_[i]){var o,s,a,l,u,h=defaultCurveSegments,c=0,p=null;2===e.length&&(e[0]!=t[0]||e[1]!=t[1])&&g(e[0],e[1],t[0],t[1],e[0]+r[0],e[1]+r[1])&&g(e[0],e[1],t[0],t[1],t[0]+n[0],t[1]+n[1])&&(h=2);for(var d=new y(h),f=r.length,m=0;m<h;m+=1){for(u=createSizedArray(f),a=m/(h-1),o=l=0;o<f;o+=1)s=bm_pow(1-a,3)*e[o]+3*bm_pow(1-a,2)*a*(e[o]+r[o])+3*(1-a)*bm_pow(a,2)*(t[o]+n[o])+bm_pow(a,3)*t[o],u[o]=s,null!==p&&(l+=bm_pow(u[o]-p[o],2));c+=l=bm_sqrt(l),d.points[m]=new v(l,u),p=u}d.segmentLength=c,_[i]=d}return _[i]});function k(e,t){var r=t.percents,n=t.lengths,i=r.length,o=bm_floor((i-1)*e),s=e*t.addedLength,a=0;if(o===i-1||0===o||s===n[o])return r[o];for(var l=n[o]>s?-1:1,u=!0;u;)if(n[o]<=s&&n[o+1]>s?(a=(s-n[o])/(n[o+1]-n[o]),u=!1):o+=l,o<0||i-1<=o){if(o===i-1)return r[o];u=!1}return r[o]+(r[o+1]-r[o])*a}var R=createTypedArray("float32",8);return{getSegmentsLength:function(e){for(var t=segments_length_pool.newElement(),r=e.c,n=e.v,i=e.o,o=e.i,s=e._length,a=t.lengths,l=0,u=0;u<s-1;u+=1)a[u]=h(n[u],n[u+1],i[u],o[u+1]),l+=a[u].addedLength;return r&&s&&(a[u]=h(n[u],n[0],i[u],o[0]),l+=a[u].addedLength),t.totalLength=l,t},getNewSegment:function(e,t,r,n,i,o,s){for(var a=k(i=i<0?0:1<i?1:i,s),l=k(o=1<o?1:o,s),u=e.length,h=1-a,c=1-l,p=h*h*h,d=a*h*h*3,f=a*a*h*3,m=a*a*a,g=h*h*c,y=a*h*c+h*a*c+h*h*l,v=a*a*c+h*a*l+a*h*l,_=a*a*l,b=h*c*c,E=a*c*c+h*l*c+h*c*l,S=a*l*c+h*l*l+a*c*l,w=a*l*l,x=c*c*c,P=l*c*c+c*l*c+c*c*l,C=l*l*c+c*l*l+l*c*l,A=l*l*l,T=0;T<u;T+=1)R[4*T]=Math.round(1e3*(p*e[T]+d*r[T]+f*n[T]+m*t[T]))/1e3,R[4*T+1]=Math.round(1e3*(g*e[T]+y*r[T]+v*n[T]+_*t[T]))/1e3,R[4*T+2]=Math.round(1e3*(b*e[T]+E*r[T]+S*n[T]+w*t[T]))/1e3,R[4*T+3]=Math.round(1e3*(x*e[T]+P*r[T]+C*n[T]+A*t[T]))/1e3;return R},getPointInSegment:function(e,t,r,n,i,o){var s=k(i,o),a=1-s;return[Math.round(1e3*(a*a*a*e[0]+(s*a*a+a*s*a+a*a*s)*r[0]+(s*s*a+a*s*s+s*a*s)*n[0]+s*s*s*t[0]))/1e3,Math.round(1e3*(a*a*a*e[1]+(s*a*a+a*s*a+a*a*s)*r[1]+(s*s*a+a*s*s+s*a*s)*n[1]+s*s*s*t[1]))/1e3]},buildBezierData:e,pointOnLine2D:g,pointOnLine3D:function(e,t,r,n,i,o,s,a,l){if(0===r&&0===o&&0===l)return g(e,t,n,i,s,a);var u,h=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)+Math.pow(o-r,2)),c=Math.sqrt(Math.pow(s-e,2)+Math.pow(a-t,2)+Math.pow(l-r,2)),p=Math.sqrt(Math.pow(s-n,2)+Math.pow(a-i,2)+Math.pow(l-o,2));return-1e-4<(u=c<h?p<h?h-c-p:p-c-h:c<p?p-c-h:c-h-p)&&u<1e-4}}}!function(){for(var o=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var r=(new Date).getTime(),n=Math.max(0,16-(r-o)),i=setTimeout(function(){e(r+n)},n);return o=r+n,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function p(e,t,r){for(var n,i,o,s,a=e.length,l=0;l<a;l+=1)if("ks"in(n=e[l])&&!n.completed){if(n.completed=!0,n.tt&&(e[l-1].td=n.tt),n.hasMask)for(var u=n.masksProperties,h=u.length,c=0;c<h;c+=1)if(u[c].pt.k.i)d(u[c].pt.k);else for(o=u[c].pt.k.length,i=0;i<o;i+=1)u[c].pt.k[i].s&&d(u[c].pt.k[i].s[0]),u[c].pt.k[i].e&&d(u[c].pt.k[i].e[0]);0===n.ty?(n.layers=function(e,t){for(var r=0,n=t.length;r<n;){if(t[r].id===e)return t[r].layers.__used?JSON.parse(JSON.stringify(t[r].layers)):(t[r].layers.__used=!0,t[r].layers);r+=1}}(n.refId,t),p(n.layers,t,r)):4===n.ty?function e(t){var r,n,i;for(r=t.length-1;0<=r;--r)if("sh"==t[r].ty)if(t[r].ks.k.i)d(t[r].ks.k);else for(i=t[r].ks.k.length,n=0;n<i;n+=1)t[r].ks.k[n].s&&d(t[r].ks.k[n].s[0]),t[r].ks.k[n].e&&d(t[r].ks.k[n].e[0]);else"gr"==t[r].ty&&e(t[r].it)}(n.shapes):5==n.ty&&(0!==(s=n).t.a.length||"m"in s.t.p||(s.singleShape=!0))}}function d(e){for(var t=e.i.length,r=0;r<t;r+=1)e.i[r][0]+=e.v[r][0],e.i[r][1]+=e.v[r][1],e.o[r][0]+=e.v[r][0],e.o[r][1]+=e.v[r][1]}function a(e,t){var r=t?t.split("."):[100,100,100];return e[0]>r[0]||!(r[0]>e[0])&&(e[1]>r[1]||!(r[1]>e[1])&&(e[2]>r[2]||(r[2],e[2],0)))}var l,n,i,o,r=(o=[4,4,14],function(e){if(a(o,e.v)&&(m(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&m(e.assets[r].layers)}),s=(l=[4,7,99],function(e){if(e.chars&&!a(l,e.v))for(var t,r,n,i,o=e.chars.length,s=0;s<o;s+=1)if(e.chars[s].data&&e.chars[s].data.shapes)for(r=(i=e.chars[s].data.shapes[0].it).length,t=0;t<r;t+=1)(n=i[t].ks.k).__converted||(d(i[t].ks.k),n.__converted=!0)}),u=(i=[4,1,9],function(e){if(a(i,e.v)&&(f(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&f(e.assets[r].layers)}),h=(n=[4,4,18],function(e){if(a(n,e.v)&&(c(e.layers),e.assets))for(var t=e.assets.length,r=0;r<t;r+=1)e.assets[r].layers&&c(e.assets[r].layers)});function c(e){for(var t,r,n,i=e.length,o=0;o<i;o+=1){if((t=e[o]).hasMask)for(var s=t.masksProperties,a=s.length,l=0;l<a;l+=1)if(s[l].pt.k.i)s[l].pt.k.c=s[l].cl;else for(n=s[l].pt.k.length,r=0;r<n;r+=1)s[l].pt.k[r].s&&(s[l].pt.k[r].s[0].c=s[l].cl),s[l].pt.k[r].e&&(s[l].pt.k[r].e[0].c=s[l].cl);4===t.ty&&function e(t){for(var r,n,i=t.length-1;0<=i;--i)if("sh"==t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(n=t[i].ks.k.length,r=0;r<n;r+=1)t[i].ks.k[r].s&&(t[i].ks.k[r].s[0].c=t[i].closed),t[i].ks.k[r].e&&(t[i].ks.k[r].e[0].c=t[i].closed);else"gr"==t[i].ty&&e(t[i].it)}(t.shapes)}}function f(e){for(var t=e.length,r=0;r<t;r+=1)4===e[r].ty&&function e(t){for(var r,n,i=t.length,o=0;o<i;o+=1)if("gr"===t[o].ty)e(t[o].it);else if("fl"===t[o].ty||"st"===t[o].ty)if(t[o].c.k&&t[o].c.k[0].i)for(n=t[o].c.k.length,r=0;r<n;r+=1)t[o].c.k[r].s&&(t[o].c.k[r].s[0]/=255,t[o].c.k[r].s[1]/=255,t[o].c.k[r].s[2]/=255,t[o].c.k[r].s[3]/=255),t[o].c.k[r].e&&(t[o].c.k[r].e[0]/=255,t[o].c.k[r].e[1]/=255,t[o].c.k[r].e[2]/=255,t[o].c.k[r].e[3]/=255);else t[o].c.k[0]/=255,t[o].c.k[1]/=255,t[o].c.k[2]/=255,t[o].c.k[3]/=255}(e[r].shapes)}function m(e){for(var t,r,n=e.length,i=0;i<n;i+=1)5===e[i].ty&&(r=(t=e[i]).t.d,t.t.d={k:[{s:r,t:0}]})}var e={completeData:function(e,t){e.__complete||(u(e),r(e),s(e),h(e),p(e.layers,e.assets,t),e.__complete=!0)}};return e.checkColors=u,e.checkChars=s,e.checkShapes=h,e.completeLayers=p,e}var dataManager=dataFunctionManager(),FontManager=function(){var o={w:0,size:0,shapes:[]},e=[];function m(e,t){var r=createTag("span");r.style.fontFamily=t;var n=createTag("span");n.innerHTML="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(n),document.body.appendChild(r);var i=n.offsetWidth;return n.style.fontFamily=e+", "+t,{node:n,w:i,parent:r}}e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);function t(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()}return t.getCombinedCharacterCodes=function(){return e},t.prototype.addChars=function(e){if(e){this.chars||(this.chars=[]);for(var t,r,n=e.length,i=this.chars.length,o=0;o<n;o+=1){for(t=0,r=!1;t<i;)this.chars[t].style===e[o].style&&this.chars[t].fFamily===e[o].fFamily&&this.chars[t].ch===e[o].ch&&(r=!0),t+=1;r||(this.chars.push(e[o]),i+=1)}}},t.prototype.addFonts=function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);for(var r,n,i,o=e.list,s=o.length,a=s,l=0;l<s;l+=1){var u,h,c,p,d,f=!0;if(o[l].loaded=!1,o[l].monoCase=m(o[l].fFamily,"monospace"),o[l].sansCase=m(o[l].fFamily,"sans-serif"),o[l].fPath){if("p"===o[l].fOrigin||3===o[l].origin)0<(u=document.querySelectorAll('style[f-forigin="p"][f-family="'+o[l].fFamily+'"], style[f-origin="3"][f-family="'+o[l].fFamily+'"]')).length&&(f=!1),f&&((c=createTag("style")).setAttribute("f-forigin",o[l].fOrigin),c.setAttribute("f-origin",o[l].origin),c.setAttribute("f-family",o[l].fFamily),c.type="text/css",c.innerHTML="@font-face {font-family: "+o[l].fFamily+"; font-style: normal; src: url('"+o[l].fPath+"');}",t.appendChild(c));else if("g"===o[l].fOrigin||1===o[l].origin){for(u=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),h=0;h<u.length;h++)-1!==u[h].href.indexOf(o[l].fPath)&&(f=!1);f&&((p=createTag("link")).setAttribute("f-forigin",o[l].fOrigin),p.setAttribute("f-origin",o[l].origin),p.type="text/css",p.rel="stylesheet",p.href=o[l].fPath,document.body.appendChild(p))}else if("t"===o[l].fOrigin||2===o[l].origin){for(u=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),h=0;h<u.length;h++)o[l].fPath===u[h].src&&(f=!1);f&&((d=createTag("link")).setAttribute("f-forigin",o[l].fOrigin),d.setAttribute("f-origin",o[l].origin),d.setAttribute("rel","stylesheet"),d.setAttribute("href",o[l].fPath),t.appendChild(d))}}else o[l].loaded=!0,--a;o[l].helper=(r=t,n=o[l],i=void 0,(i=createNS("text")).style.fontSize="100px",i.setAttribute("font-family",n.fFamily),i.setAttribute("font-style",n.fStyle),i.setAttribute("font-weight",n.fWeight),i.textContent="1",n.fClass?(i.style.fontFamily="inherit",i.setAttribute("class",n.fClass)):i.style.fontFamily=n.fFamily,r.appendChild(i),createTag("canvas").getContext("2d").font=n.fWeight+" "+n.fStyle+" 100px "+n.fFamily,i),o[l].cache={},this.fonts.push(o[l])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},t.prototype.getCharData=function(e,t,r){for(var n=0,i=this.chars.length;n<i;){if(this.chars[n].ch===e&&this.chars[n].style===t&&this.chars[n].fFamily===r)return this.chars[n];n+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&console.warn("Missing character from exported characters list: ",e,t,r),o},t.prototype.getFontByName=function(e){for(var t=0,r=this.fonts.length;t<r;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},t.prototype.measureText=function(e,t,r){var n,i,o,s=this.getFontByName(t),a=e.charCodeAt(0);return s.cache[a+1]||(n=s.helper," "===e?(n.textContent="|"+e+"|",i=n.getComputedTextLength(),n.textContent="||",o=n.getComputedTextLength(),s.cache[a+1]=(i-o)/100):(n.textContent=e,s.cache[a+1]=n.getComputedTextLength()/100)),s.cache[a+1]*r},t.prototype.checkLoadedFonts=function(){for(var e,t,r=this.fonts.length,n=r,i=0;i<r;i+=1)this.fonts[i].loaded?--n:"n"===this.fonts[i].fOrigin||0===this.fonts[i].origin?this.fonts[i].loaded=!0:(e=this.fonts[i].monoCase.node,t=this.fonts[i].monoCase.w,e.offsetWidth!==t?(--n,this.fonts[i].loaded=!0):(e=this.fonts[i].sansCase.node,t=this.fonts[i].sansCase.w,e.offsetWidth!==t&&(--n,this.fonts[i].loaded=!0)),this.fonts[i].loaded&&(this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent),this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent)));0!==n&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout(function(){this.isLoaded=!0}.bind(this),0)},t.prototype.loaded=function(){return this.isLoaded},t}(),PropertyFactory=(Uzc=initialDefaultFrame,Vzc=Math.abs,{getProp:function(e,t,r,n,i){var o;if(t.k.length)if("number"==typeof t.k[0])o=new bAc(e,t,n,i);else switch(r){case 0:o=new cAc(e,t,n,i);break;case 1:o=new dAc(e,t,n,i)}else o=new aAc(e,t,n,i);return o.effectsSequence.length&&i.addDynamicProperty(o),o}}),TransformPropertyFactory=(gCc=[0,0],hCc.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){var t,r,n,i,o;this.elem.globalData.frameId!==this.frameId&&(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),(this._mdf||e)&&(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&(n=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime?r=this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(t=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/n,0),this.p.getValueAtTime(this.p.keyframes[0].t/n,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(t=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/n,0),this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/n,0)):(t=this.p.pv,this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/n,this.p.offsetTime)):this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime?(t=[],r=[],i=this.px,o=this.py,i._caching.lastFrame+i.offsetTime<=i.keyframes[0].t?(t[0]=i.getValueAtTime((i.keyframes[0].t+.01)/n,0),t[1]=o.getValueAtTime((o.keyframes[0].t+.01)/n,0),r[0]=i.getValueAtTime(i.keyframes[0].t/n,0),r[1]=o.getValueAtTime(o.keyframes[0].t/n,0)):i._caching.lastFrame+i.offsetTime>=i.keyframes[i.keyframes.length-1].t?(t[0]=i.getValueAtTime(i.keyframes[i.keyframes.length-1].t/n,0),t[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/n,0),r[0]=i.getValueAtTime((i.keyframes[i.keyframes.length-1].t-.01)/n,0),r[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/n,0)):(t=[i.pv,o.pv],r[0]=i.getValueAtTime((i._caching.lastFrame+i.offsetTime-.01)/n,i.offsetTime),r[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/n,o.offsetTime))):t=r=gCc,this.v.rotate(-Math.atan2(t[1]-r[1],t[0]-r[0]))),this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),this.frameId=this.elem.globalData.frameId)},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],hCc),hCc.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},hCc.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,t,r){return new hCc(e,t,r)}}),gCc,Uzc,Vzc;function hCc(e,t,r){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti)for(var n=t.or.k.length,i=0;i<n;i+=1)t.or.k[i].to=t.or.k[i].ti=null;this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}function Wzc(e,t){var r,n=this.offsetTime;"multidimensional"===this.propType&&(r=createTypedArray("float32",this.pv.length));for(var i,o,s,a,l=t.lastIndex,u=l,h=this.keyframes.length-1,c=!0;c;){if(i=this.keyframes[u],o=this.keyframes[u+1],u===h-1&&e>=o.t-n){i.h&&(i=o),l=0;break}if(o.t-n>e){l=u;break}u<h-1?u+=1:(l=0,c=!1)}var p,d,f,m,g,y,v,_,b,E,S,w,x,P,C,A,T,k,R,M,D,I,F=o.t-n,O=i.t-n;if(i.to){i.bezierData||(i.bezierData=bez.buildBezierData(i.s,o.s||i.e,i.to,i.ti));var L=i.bezierData;if(F<=e||e<O)for(var N=F<=e?L.points.length-1:0,B=L.points[N].point.length,j=0;j<B;j+=1)r[j]=L.points[N].point[j];else{i.__fnct?a=i.__fnct:(a=BezierFactory.getBezierEasing(i.o.x,i.o.y,i.i.x,i.i.y,i.n).get,i.__fnct=a),s=a((e-O)/(F-O));for(var z,U=L.segmentLength*s,V=t.lastFrame<e&&t._lastKeyframeIndex===u?t._lastAddedLength:0,q=t.lastFrame<e&&t._lastKeyframeIndex===u?t._lastPoint:0,c=!0,H=L.points.length;c;){if(V+=L.points[q].partialLength,0==U||0===s||q===L.points.length-1){for(B=L.points[q].point.length,j=0;j<B;j+=1)r[j]=L.points[q].point[j];break}if(V<=U&&U<V+L.points[q+1].partialLength){for(z=(U-V)/L.points[q+1].partialLength,B=L.points[q].point.length,j=0;j<B;j+=1)r[j]=L.points[q].point[j]+(L.points[q+1].point[j]-L.points[q].point[j])*z;break}q<H-1?q+=1:c=!1}t._lastPoint=q,t._lastAddedLength=V-L.points[q].partialLength,t._lastKeyframeIndex=u}}else{var G,W,K,X,J,Y,$,Q,h=i.s.length,Z=o.s||i.e;if(this.sh&&1!==i.h)F<=e?(r[0]=Z[0],r[1]=Z[1],r[2]=Z[2]):e<=O?(r[0]=i.s[0],r[1]=i.s[1],r[2]=i.s[2]):(Y=Xzc(i.s),$=Xzc(Z),Q=r,_=(e-O)/(F-O),P=[],C=Y[0],A=Y[1],T=Y[2],k=Y[3],R=$[0],M=$[1],D=$[2],I=$[3],(E=C*R+A*M+T*D+k*I)<0&&(E=-E,R=-R,M=-M,D=-D,I=-I),x=1e-6<1-E?(b=Math.acos(E),S=Math.sin(b),w=Math.sin((1-_)*b)/S,Math.sin(_*b)/S):(w=1-_,_),P[0]=w*C+x*R,P[1]=w*A+x*M,P[2]=w*T+x*D,P[3]=w*k+x*I,p=P[0],d=P[1],f=P[2],m=P[3],g=Math.atan2(2*d*m-2*p*f,1-2*d*d-2*f*f),y=Math.asin(2*p*d+2*f*m),v=Math.atan2(2*p*m-2*d*f,1-2*p*p-2*f*f),Q[0]=g/degToRads,Q[1]=y/degToRads,Q[2]=v/degToRads);else for(u=0;u<h;u+=1)1!==i.h&&(s=F<=e?1:e<O?0:(i.o.x.constructor===Array?(i.__fnct||(i.__fnct=[]),i.__fnct[u]?a=i.__fnct[u]:(G=void 0===i.o.x[u]?i.o.x[0]:i.o.x[u],W=void 0===i.o.y[u]?i.o.y[0]:i.o.y[u],K=void 0===i.i.x[u]?i.i.x[0]:i.i.x[u],X=void 0===i.i.y[u]?i.i.y[0]:i.i.y[u],a=BezierFactory.getBezierEasing(G,W,K,X).get,i.__fnct[u]=a)):i.__fnct?a=i.__fnct:(G=i.o.x,W=i.o.y,K=i.i.x,X=i.i.y,a=BezierFactory.getBezierEasing(G,W,K,X).get,i.__fnct=a),a((e-O)/(F-O)))),Z=o.s||i.e,J=1===i.h?i.s[u]:i.s[u]+(Z[u]-i.s[u])*s,"multidimensional"===this.propType?r[u]=J:r=J}return t.lastIndex=l,r}function Xzc(e){var t=e[0]*degToRads,r=e[1]*degToRads,n=e[2]*degToRads,i=Math.cos(t/2),o=Math.cos(r/2),s=Math.cos(n/2),a=Math.sin(t/2),l=Math.sin(r/2),u=Math.sin(n/2);return[a*l*s+i*o*u,a*o*s+i*l*u,i*l*s-a*o*u,i*o*s-a*l*u]}function Yzc(){var e,t=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,n=this.keyframes[this.keyframes.length-1].t-this.offsetTime;return t===this._caching.lastFrame||this._caching.lastFrame!==Uzc&&(this._caching.lastFrame>=n&&n<=t||this._caching.lastFrame<r&&t<r)||(this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0),e=this.interpolateValue(t,this._caching),this.pv=e),this._caching.lastFrame=t,this.pv}function Zzc(e){var t;if("unidimensional"===this.propType)t=e*this.mult,1e-5<Vzc(this.v-t)&&(this.v=t,this._mdf=!0);else for(var r=0,n=this.v.length;r<n;)t=e[r]*this.mult,1e-5<Vzc(this.v[r]-t)&&(this.v[r]=t,this._mdf=!0),r+=1}function $zc(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;for(var e=this.effectsSequence.length,t=this.kf?this.pv:this.data.k,r=0;r<e;r+=1)t=this.effectsSequence[r](t);this.setVValue(t),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function _zc(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function aAc(e,t,r,n){this.propType="unidimensional",this.mult=r||1,this.data=t,this.v=r?t.k*r:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=n,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=$zc,this.setVValue=Zzc,this.addEffect=_zc}function bAc(e,t,r,n){this.propType="multidimensional",this.mult=r||1,this.data=t,this._mdf=!1,this.elem=e,this.container=n,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,o=t.k.length;for(this.v=createTypedArray("float32",o),this.pv=createTypedArray("float32",o),createTypedArray("float32",o),this.vel=createTypedArray("float32",o),i=0;i<o;i+=1)this.v[i]=t.k[i]*this.mult,this.pv[i]=t.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=$zc,this.setVValue=Zzc,this.addEffect=_zc}function cAc(e,t,r,n){this.propType="unidimensional",this.keyframes=t.k,this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:Uzc,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=r||1,this.elem=e,this.container=n,this.comp=e.comp,this.v=Uzc,this.pv=Uzc,this._isFirstFrame=!0,this.getValue=$zc,this.setVValue=Zzc,this.interpolateValue=Wzc,this.effectsSequence=[Yzc.bind(this)],this.addEffect=_zc}function dAc(e,t,r,n){this.propType="multidimensional";for(var i,o,s,a,l=t.k.length,u=0;u<l-1;u+=1)t.k[u].to&&t.k[u].s&&t.k[u+1]&&t.k[u+1].s&&(i=t.k[u].s,o=t.k[u+1].s,s=t.k[u].to,a=t.k[u].ti,(2===i.length&&(i[0]!==o[0]||i[1]!==o[1])&&bez.pointOnLine2D(i[0],i[1],o[0],o[1],i[0]+s[0],i[1]+s[1])&&bez.pointOnLine2D(i[0],i[1],o[0],o[1],o[0]+a[0],o[1]+a[1])||3===i.length&&(i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2])&&bez.pointOnLine3D(i[0],i[1],i[2],o[0],o[1],o[2],i[0]+s[0],i[1]+s[1],i[2]+s[2])&&bez.pointOnLine3D(i[0],i[1],i[2],o[0],o[1],o[2],o[0]+a[0],o[1]+a[1],o[2]+a[2]))&&(t.k[u].to=null,t.k[u].ti=null),i[0]===o[0]&&i[1]===o[1]&&0===s[0]&&0===s[1]&&0===a[0]&&0===a[1]&&(2===i.length||i[2]===o[2]&&0===s[2]&&0===a[2])&&(t.k[u].to=null,t.k[u].ti=null));this.effectsSequence=[Yzc.bind(this)],this.keyframes=t.k,this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=e,this.container=n,this.comp=e.comp,this.getValue=$zc,this.setVValue=Zzc,this.interpolateValue=Wzc,this.frameId=-1;var h=t.k[0].s.length;for(this.v=createTypedArray("float32",h),this.pv=createTypedArray("float32",h),u=0;u<h;u+=1)this.v[u]=Uzc,this.pv[u]=Uzc;this._caching={lastFrame:Uzc,lastIndex:0,value:createTypedArray("float32",h)},this.addEffect=_zc}function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var r=0;r<t;)this.v[r]=point_pool.newElement(),this.o[r]=point_pool.newElement(),this.i[r]=point_pool.newElement(),r+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,r,n,i){var o;switch(this._length=Math.max(this._length,n+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o}o[n]&&(!o[n]||i)||(o[n]=point_pool.newElement()),o[n][0]=e,o[n][1]=t},ShapePath.prototype.setTripleAt=function(e,t,r,n,i,o,s,a){this.setXYAt(e,t,"v",s,a),this.setXYAt(r,n,"o",s,a),this.setXYAt(i,o,"i",s,a)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,r=this.o,n=this.i,i=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],n[0][0],n[0][1],r[0][0],r[0][1],0,!1),i=1);for(var o=this._length-1,s=this._length,a=i;a<s;a+=1)e.setTripleAt(t[o][0],t[o][1],n[o][0],n[o][1],r[o][0],r[o][1],a,!1),--o;return e};var ShapePropertyFactory=function(){function e(e,t,r){var n,i,o,s,a,l,u,h=r.lastIndex,c=this.keyframes;if(e<c[0].t-this.offsetTime)n=c[0].s[0],i=!0,h=0;else if(e>=c[c.length-1].t-this.offsetTime)n=c[c.length-1].s?c[c.length-1].s[0]:c[c.length-2].e[0],i=!0;else{for(var p,d,f=h,m=c.length-1,g=!0;g&&(p=c[f],!((d=c[f+1]).t-this.offsetTime>e));)f<m-1?f+=1:g=!1;var y,v,_,h=f;(i=1===p.h)||(v=e>=d.t-this.offsetTime?1:e<p.t-this.offsetTime?0:(p.__fnct?y=p.__fnct:(y=BezierFactory.getBezierEasing(p.o.x,p.o.y,p.i.x,p.i.y).get,p.__fnct=y),y((e-(p.t-this.offsetTime))/(d.t-this.offsetTime-(p.t-this.offsetTime)))),_=d.s?d.s[0]:p.e[0]),n=p.s[0]}for(a=t._length,l=n.i[0].length,r.lastIndex=h,o=0;o<a;o+=1)for(s=0;s<l;s+=1)u=i?n.i[o][s]:n.i[o][s]+(_.i[o][s]-n.i[o][s])*v,t.i[o][s]=u,u=i?n.o[o][s]:n.o[o][s]+(_.o[o][s]-n.o[o][s])*v,t.o[o][s]=u,u=i?n.v[o][s]:n.v[o][s]+(_.v[o][s]-n.v[o][s])*v,t.v[o][s]=u}function i(){this.paths=this.localShapeCollection}function t(e){!function(e,t){if(e._length===t._length&&e.c===t.c){for(var r=e._length,n=0;n<r;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return;return 1}}(this.v,e)&&(this.v=shape_pool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function r(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;for(var e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,t=this.effectsSequence.length,r=0;r<t;r+=1)e=this.effectsSequence[r](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function o(e,t,r){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===r?t.pt.k:t.ks.k;this.v=shape_pool.clone(n),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function n(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function s(e,t,r){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===r?t.pt.k:t.ks.k,this.k=!0,this.kf=!0;var n=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length,this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,n),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=-999999,this.reset=i,this._caching={lastFrame:-999999,lastIndex:0},this.effectsSequence=[function(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return-999999!==n&&(n<t&&e<t||r<n&&r<e)||(this._caching.lastIndex=n<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}.bind(this)]}o.prototype.interpolateShape=e,o.prototype.getValue=r,o.prototype.setVValue=t,o.prototype.addEffect=n,s.prototype.getValue=r,s.prototype.interpolateShape=e,s.prototype.setVValue=t,s.prototype.addEffect=n;var a,l=(a=roundCorner,d.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,n=this.s.v[1]/2,i=3!==this.d,o=this.v;o.v[0][0]=e,o.v[0][1]=t-n,o.v[1][0]=i?e+r:e-r,o.v[1][1]=t,o.v[2][0]=e,o.v[2][1]=t+n,o.v[3][0]=i?e-r:e+r,o.v[3][1]=t,o.i[0][0]=i?e-r*a:e+r*a,o.i[0][1]=t-n,o.i[1][0]=i?e+r:e-r,o.i[1][1]=t-n*a,o.i[2][0]=i?e+r*a:e-r*a,o.i[2][1]=t+n,o.i[3][0]=i?e-r:e+r,o.i[3][1]=t+n*a,o.o[0][0]=i?e+r*a:e-r*a,o.o[0][1]=t-n,o.o[1][0]=i?e+r:e-r,o.o[1][1]=t+n*a,o.o[2][0]=i?e-r*a:e+r*a,o.o[2][1]=t+n,o.o[3][0]=i?e-r:e+r,o.o[3][1]=t-n*a}},extendPrototype([DynamicPropertyContainer],d),d),u=(p.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,r,n=2*Math.floor(this.pt.v),i=2*Math.PI/n,o=!0,s=this.or.v,a=this.ir.v,l=this.os.v,u=this.is.v,h=2*Math.PI*s/(2*n),c=2*Math.PI*a/(2*n),p=-Math.PI/2;p+=this.r.v;for(var d=3===this.data.d?-1:1,f=this.v._length=0;f<n;f+=1){t=o?l:u,r=o?h:c;var m=(e=o?s:a)*Math.cos(p),g=e*Math.sin(p),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-y*r*t*d,g-v*r*t*d,m+y*r*t*d,g+v*r*t*d,f,!0),o=!o,p+=i*d}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),r=2*Math.PI/t,n=this.or.v,i=this.os.v,o=2*Math.PI*n/(4*t),s=-Math.PI/2,a=3===this.data.d?-1:1;for(s+=this.r.v,e=this.v._length=0;e<t;e+=1){var l=n*Math.cos(s),u=n*Math.sin(s),h=0===l&&0===u?0:u/Math.sqrt(l*l+u*u),c=0===l&&0===u?0:-l/Math.sqrt(l*l+u*u);l+=+this.p.v[0],u+=+this.p.v[1],this.v.setTripleAt(l,u,l-h*o*i*a,u-c*o*i*a,l+h*o*i*a,u+c*o*i*a,e,!0),s+=r*a}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],p),p),h=(c.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,n=this.s.v[1]/2,i=bm_min(r,n,this.r.v),o=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+r,t-n+i,e+r,t-n+i,e+r,t-n+o,0,!0),this.v.setTripleAt(e+r,t+n-i,e+r,t+n-o,e+r,t+n-i,1,!0),0!==i?(this.v.setTripleAt(e+r-i,t+n,e+r-i,t+n,e+r-o,t+n,2,!0),this.v.setTripleAt(e-r+i,t+n,e-r+o,t+n,e-r+i,t+n,3,!0),this.v.setTripleAt(e-r,t+n-i,e-r,t+n-i,e-r,t+n-o,4,!0),this.v.setTripleAt(e-r,t-n+i,e-r,t-n+o,e-r,t-n+i,5,!0),this.v.setTripleAt(e-r+i,t-n,e-r+i,t-n,e-r+o,t-n,6,!0),this.v.setTripleAt(e+r-i,t-n,e+r-o,t-n,e+r-i,t-n,7,!0)):(this.v.setTripleAt(e-r,t+n,e-r+o,t+n,e-r,t+n,2),this.v.setTripleAt(e-r,t-n,e-r,t-n+o,e-r,t-n,3))):(this.v.setTripleAt(e+r,t-n+i,e+r,t-n+o,e+r,t-n+i,0,!0),0!==i?(this.v.setTripleAt(e+r-i,t-n,e+r-i,t-n,e+r-o,t-n,1,!0),this.v.setTripleAt(e-r+i,t-n,e-r+o,t-n,e-r+i,t-n,2,!0),this.v.setTripleAt(e-r,t-n+i,e-r,t-n+i,e-r,t-n+o,3,!0),this.v.setTripleAt(e-r,t+n-i,e-r,t+n-o,e-r,t+n-i,4,!0),this.v.setTripleAt(e-r+i,t+n,e-r+i,t+n,e-r+o,t+n,5,!0),this.v.setTripleAt(e+r-i,t+n,e+r-o,t+n,e+r-i,t+n,6,!0),this.v.setTripleAt(e+r,t+n-i,e+r,t+n-i,e+r,t+n-o,7,!0)):(this.v.setTripleAt(e-r,t-n,e-r+o,t-n,e-r,t-n,1,!0),this.v.setTripleAt(e-r,t+n,e-r,t+n-o,e-r,t+n,2,!0),this.v.setTripleAt(e+r,t+n,e+r-o,t+n,e+r,t+n,3,!0)))},getValue:function(e){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],c),c);function c(e,t){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}function p(e,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}function d(e,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return{getShapeProp:function(e,t,r){var n;return 3===r||4===r?n=new((3===r?t.pt:t.ks).k.length?s:o)(e,t,r):5===r?n=new h(e,t):6===r?n=new l(e,t):7===r&&(n=new u(e,t)),n.k&&e.addDynamicProperty(n),n},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return s}}}(),ShapeModifiers=($r={},_r={},$r.registerModifier=function(e,t){_r[e]||(_r[e]=t)},$r.getModifier=function(e,t,r){return new _r[e](t,r)},$r),$r,_r;function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(e,t,r,n){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(n);for(var i,o=t.length||0,s=0;s<o;s+=1)i=PropertyFactory.getProp(e,t[s].v,0,0,this),this.k=i.k||this.k,this.dataProps[s]={n:t[s].n,p:i};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(e,t,r){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var n=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",n),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=n,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){var t;this.closed||(e.sh.container.addDynamicProperty(e.sh),t={shape:e.sh,data:e,localShapeCollection:shapeCollection_pool.newShapeCollection()},this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated())},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,r,n,i){var o=[];t<=1?o.push({s:e,e:t}):1<=e?o.push({s:e-1,e:t-1}):(o.push({s:e,e:1}),o.push({s:0,e:t-1}));for(var s,a,l,u=[],h=o.length,c=0;c<h;c+=1){(s=o[c]).e*i<n||s.s*i>n+r||(a=s.s*i<=n?0:(s.s*i-n)/r,l=s.e*i>=n+r?1:(s.e*i-n)/r,u.push([a,l]))}return u.length||u.push([0,0]),u},TrimModifier.prototype.releasePathsData=function(e){for(var t=e.length,r=0;r<t;r+=1)segments_length_pool.release(e[r]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,r,n,i,o;this._mdf||e?((r=this.o.v%360/360)<0&&(r+=1),i=(1<this.s.v?1:this.s.v<0?0:this.s.v)+r,(o=(1<this.e.v?1:this.e.v<0?0:this.e.v)+r)<i&&(n=i,i=o,o=n),i=1e-4*Math.round(1e4*i),o=1e-4*Math.round(1e4*o),this.sValue=i,this.eValue=o):(i=this.sValue,o=this.eValue);var s,a,l,u,h,c=this.shapes.length,p=0;if(o===i)for(g=0;g<c;g+=1)this.shapes[g].localShapeCollection.releaseShapes(),this.shapes[g].shape._mdf=!0,this.shapes[g].shape.paths=this.shapes[g].localShapeCollection;else if(1===o&&0===i||0===o&&1===i){if(this._mdf)for(g=0;g<c;g+=1)this.shapes[g].pathsData.length=0,this.shapes[g].shape._mdf=!0}else{for(var d,f,m=[],g=0;g<c;g+=1)if((d=this.shapes[g]).shape._mdf||this._mdf||e||2===this.m){if(a=(t=d.shape.paths)._length,h=0,!d.shape._mdf&&d.pathsData.length)h=d.totalShapeLength;else{for(l=this.releasePathsData(d.pathsData),s=0;s<a;s+=1)u=bez.getSegmentsLength(t.shapes[s]),l.push(u),h+=u.totalLength;d.totalShapeLength=h,d.pathsData=l}p+=h,d.shape._mdf=!0}else d.shape.paths=d.localShapeCollection;var y,v=i,_=o,b=0;for(g=c-1;0<=g;--g)if((d=this.shapes[g]).shape._mdf){for((f=d.localShapeCollection).releaseShapes(),2===this.m&&1<c?(y=this.calculateShapeEdges(i,o,d.totalShapeLength,b,p),b+=d.totalShapeLength):y=[[v,_]],a=y.length,s=0;s<a;s+=1){v=y[s][0],_=y[s][1],m.length=0,_<=1?m.push({s:d.totalShapeLength*v,e:d.totalShapeLength*_}):1<=v?m.push({s:d.totalShapeLength*(v-1),e:d.totalShapeLength*(_-1)}):(m.push({s:d.totalShapeLength*v,e:d.totalShapeLength}),m.push({s:0,e:d.totalShapeLength*(_-1)}));var E,S=this.addShapes(d,m[0]);m[0].s!==m[0].e&&(1<m.length&&(S=d.shape.paths.shapes[d.shape.paths._length-1].c?(E=S.pop(),this.addPaths(S,f),this.addShapes(d,m[1],E)):(this.addPaths(S,f),this.addShapes(d,m[1]))),this.addPaths(S,f))}d.shape.paths=f}}},TrimModifier.prototype.addPaths=function(e,t){for(var r=e.length,n=0;n<r;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,r,n,i,o,s){i.setXYAt(t[0],t[1],"o",o),i.setXYAt(r[0],r[1],"i",o+1),s&&i.setXYAt(e[0],e[1],"v",o),i.setXYAt(n[0],n[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,r,n){t.setXYAt(e[1],e[5],"o",r),t.setXYAt(e[2],e[6],"i",r+1),n&&t.setXYAt(e[0],e[4],"v",r),t.setXYAt(e[3],e[7],"v",r+1)},TrimModifier.prototype.addShapes=function(e,t,r){var n,i,o,s,a,l,u,h,c=e.pathsData,p=e.shape.paths.shapes,d=e.shape.paths._length,f=0,m=[],g=!0,y=r?(s=r._length,r._length):(r=shape_pool.newElement(),s=0);for(m.push(r),n=0;n<d;n+=1){for(a=c[n].lengths,r.c=p[n].c,o=p[n].c?a.length:a.length+1,i=1;i<o;i+=1)if(f+(h=a[i-1]).addedLength<t.s)f+=h.addedLength,r.c=!1;else{if(f>t.e){r.c=!1;break}t.s<=f&&t.e>=f+h.addedLength?(this.addSegment(p[n].v[i-1],p[n].o[i-1],p[n].i[i],p[n].v[i],r,s,g),g=!1):(l=bez.getNewSegment(p[n].v[i-1],p[n].v[i],p[n].o[i-1],p[n].i[i],(t.s-f)/h.addedLength,(t.e-f)/h.addedLength,a[i-1]),this.addSegmentFromArray(l,r,s,g),g=!1,r.c=!1),f+=h.addedLength,s+=1}if(p[n].c&&a.length&&(h=a[i-1],f<=t.e?(u=a[i-1].addedLength,t.s<=f&&t.e>=f+u?(this.addSegment(p[n].v[i-1],p[n].o[i-1],p[n].i[0],p[n].v[0],r,s,g),g=!1):(l=bez.getNewSegment(p[n].v[i-1],p[n].v[0],p[n].o[i-1],p[n].i[0],(t.s-f)/u,(t.e-f)/u,a[i-1]),this.addSegmentFromArray(l,r,s,g),g=!1,r.c=!1)):r.c=!1,f+=h.addedLength,s+=1),r._length&&(r.setXYAt(r.v[y][0],r.v[y][1],"i",y),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),f>t.e)break;n<d-1&&(r=shape_pool.newElement(),g=!0,m.push(r),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var r=shape_pool.newElement();r.c=e.c;for(var n,i,o,s,a,l,u,h,c,p,d,f,m=e._length,g=0,y=0;y<m;y+=1)n=e.v[y],o=e.o[y],i=e.i[y],n[0]===o[0]&&n[1]===o[1]&&n[0]===i[0]&&n[1]===i[1]?0!==y&&y!==m-1||e.c?(s=0===y?e.v[m-1]:e.v[y-1],l=(a=Math.sqrt(Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)))?Math.min(a/2,t)/a:0,u=d=n[0]+(s[0]-n[0])*l,h=f=n[1]-(n[1]-s[1])*l,c=u-(u-n[0])*roundCorner,p=h-(h-n[1])*roundCorner,r.setTripleAt(u,h,c,p,d,f,g),g+=1,s=y===m-1?e.v[0]:e.v[y+1],l=(a=Math.sqrt(Math.pow(n[0]-s[0],2)+Math.pow(n[1]-s[1],2)))?Math.min(a/2,t)/a:0,u=c=n[0]+(s[0]-n[0])*l,h=p=n[1]+(s[1]-n[1])*l,d=u-(u-n[0])*roundCorner,f=h-(h-n[1])*roundCorner,r.setTripleAt(u,h,c,p,d,f,g)):r.setTripleAt(n[0],n[1],o[0],o[1],i[0],i[1],g):r.setTripleAt(e.v[y][0],e.v[y][1],e.o[y][0],e.o[y][1],e.i[y][0],e.i[y][1],g),g+=1;return r},RoundCornersModifier.prototype.processShapes=function(e){var t,r,n,i,o,s,a=this.shapes.length,l=this.rd.v;if(0!==l)for(r=0;r<a;r+=1){if((o=this.shapes[r]).shape.paths,s=o.localShapeCollection,o.shape._mdf||this._mdf||e)for(s.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,i=o.shape.paths._length,n=0;n<i;n+=1)s.addShape(this.processPath(t[n],l));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,r,n,i,o){var s=o?-1:1,a=n.s.v[0]+(1-n.s.v[0])*(1-i),l=n.s.v[1]+(1-n.s.v[1])*(1-i);e.translate(n.p.v[0]*s*i,n.p.v[1]*s*i,n.p.v[2]),t.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),t.rotate(-n.r.v*s*i),t.translate(n.a.v[0],n.a.v[1],n.a.v[2]),r.translate(-n.a.v[0],-n.a.v[1],n.a.v[2]),r.scale(o?1/a:a,o?1/l:l),r.translate(n.a.v[0],n.a.v[1],n.a.v[2])},RepeaterModifier.prototype.init=function(e,t,r,n){for(this.elem=e,this.arr=t,this.pos=r,this.elemsData=n,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[r]);0<r;)--r,this._elements.unshift(t[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r]._processed=!1,"gr"===e[r].ty&&this.resetElements(e[r].it)},RepeaterModifier.prototype.cloneElements=function(e){e.length;var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){for(var r=e.length,n=0;n<r;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,r,n,i,o;if(this._mdf||e){var s,a=Math.ceil(this.c.v);if(this._groups.length<a){for(;this._groups.length<a;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes()}for(n=o=0;n<=this._groups.length-1;n+=1)s=o<a,this._groups[n]._render=s,this.changeGroupRender(this._groups[n].it,s),o+=1;this._currentCopies=a;var u=this.o.v,h=u%1,c=0<u?Math.floor(u):Math.ceil(u),p=(this.tr.v.props,this.pMatrix.props),d=this.rMatrix.props,f=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,g,y=0;if(0<u){for(;y<c;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),y+=1;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,h,!1),y+=h)}else if(u<0){for(;c<y;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),--y;h&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-h,!0),y-=h)}for(n=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,o=this._currentCopies;o;){if(g=(r=(t=this.elemsData[n].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),0!==y){for((0!==n&&1===i||n!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),m=0;m<g;m+=1)r[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<g;m+=1)r[m]=this.matrix.props[m];y+=1,--o,n+=i}}else for(o=this._currentCopies,n=0,i=1;o;)r=(t=this.elemsData[n].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,--o,n+=i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){for(var e=0;e<this._length;e+=1)shape_pool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<r;t+=1)"o"!=this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(e,t){for(var r=0,n=this.o.length/2;r<n;){if(.01<Math.abs(e[4*r]-e[4*t+2*r]))return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){for(var t,r,n=4*this.data.p,i=0;i<n;i+=1)t=i%4==0?100:255,r=Math.round(this.prop.v[i]*t),this.c[i]!==r&&(this.c[i]=r,this._cmdf=!e);if(this.o.length)for(n=this.prop.v.length,i=4*this.data.p;i<n;i+=1)t=i%2==0?100:1,r=i%2==0?Math.round(100*this.prop.v[i]):this.prop.v[i],this.o[i-4*this.data.p]!==r&&(this.o[i-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(e,t,r,n){if(0===t)return"";for(var i=e.o,o=e.i,s=e.v,a=" M"+n.applyToPointStringified(s[0][0],s[0][1]),l=1;l<t;l+=1)a+=" C"+n.applyToPointStringified(i[l-1][0],i[l-1][1])+" "+n.applyToPointStringified(o[l][0],o[l][1])+" "+n.applyToPointStringified(s[l][0],s[l][1]);return r&&t&&(a+=" C"+n.applyToPointStringified(i[l-1][0],i[l-1][1])+" "+n.applyToPointStringified(o[0][0],o[0][1])+" "+n.applyToPointStringified(s[0][0],s[0][1]),a+="z"),a},ImagePreloader=(CIc=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}(),function(){this.loadAssets=FIc,this.setAssetsPath=HIc,this.setPath=GIc,this.loaded=KIc,this.destroy=JIc,this.getImage=IIc,this._createImageData=EIc,this._imageLoaded=DIc,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}),featureSupport=(sw={maskType:!0},(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(sw.maskType=!1),sw),sw,filtersFactory=(tw={},tw.createFilter=function(e){var t=createNS("filter");return t.setAttribute("id",e),t.setAttribute("filterUnits","objectBoundingBox"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t},tw.createAlphaToLuminanceFilter=function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e},tw),tw,assetLoader={load:function(e,t,r){var n,i=new XMLHttpRequest;i.open("GET",e,!0);try{i.responseType="json"}catch(e){}i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)n=gJc(i),t(n);else try{n=gJc(i),t(n)}catch(e){r&&r(e)}}}},CIc;function gJc(e){return e.response&&"object"==typeof e.response?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):void 0}function DIc(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function EIc(e){var t,r,n,i,o,s=(t=e,r=this.assetsPath,n=this.path,o="",t.e?o=t.p:r?(-1!==(i=t.p).indexOf("images/")&&(i=i.split("/")[1]),o=r+i):(o=n,o+=t.u?t.u:"",o+=t.p),o),a=createTag("img");a.crossOrigin="anonymous",a.addEventListener("load",this._imageLoaded.bind(this),!1),a.addEventListener("error",function(){l.img=CIc,this._imageLoaded()}.bind(this),!1),a.src=s;var l={img:a,assetData:e};return l}function FIc(e,t){this.imagesLoadedCb=t;for(var r=e.length,n=0;n<r;n+=1)e[n].layers||(this.totalImages+=1,this.images.push(this._createImageData(e[n])))}function GIc(e){this.path=e||""}function HIc(e){this.assetsPath=e||""}function IIc(e){for(var t=0,r=this.images.length;t<r;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}}function JIc(){this.imagesLoadedCb=null,this.images.length=0}function KIc(){return this.totalImages===this.loadedAssets}function TextAnimatorProperty(e,t,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}function TextAnimatorDataProperty(e,t,r){var n={propType:!1},i=PropertyFactory.getProp,o=t.a;this.a={r:o.r?i(e,o.r,0,degToRads,r):n,rx:o.rx?i(e,o.rx,0,degToRads,r):n,ry:o.ry?i(e,o.ry,0,degToRads,r):n,sk:o.sk?i(e,o.sk,0,degToRads,r):n,sa:o.sa?i(e,o.sa,0,degToRads,r):n,s:o.s?i(e,o.s,1,.01,r):n,a:o.a?i(e,o.a,1,0,r):n,o:o.o?i(e,o.o,0,.01,r):n,p:o.p?i(e,o.p,1,0,r):n,sw:o.sw?i(e,o.sw,0,0,r):n,sc:o.sc?i(e,o.sc,1,0,r):n,fc:o.fc?i(e,o.fc,1,0,r):n,fh:o.fh?i(e,o.fh,0,0,r):n,fs:o.fs?i(e,o.fs,0,.01,r):n,fb:o.fb?i(e,o.fb,0,.01,r):n,t:o.t?i(e,o.t,0,0,r):n},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,r),this.s.t=t.s.t}function LetterProps(e,t,r,n,i,o){this.o=e,this.sw=t,this.sc=r,this.fc=n,this.m=i,this.p=o,this._mdf={o:!0,sw:!!t,sc:!!r,fc:!!n,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){for(var e,t=this._textData.a.length,r=PropertyFactory.getProp,n=0;n<t;n+=1)e=this._textData.a[n],this._animatorsData[n]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var r,n,i,o,s,a,l,u,h,c,p,d,f,m,g,y,v,_,b=this._moreOptions.alignment.v,E=this._animatorsData,S=this._textData,w=this.mHelper,x=this._renderType,P=this.renderedLetters.length,C=(this.data,e.l);if(this._hasMaskedPath){if(_=this._pathData.m,!this._pathData.n||this._pathData._mdf){var A,T=_.v;for(this._pathData.r&&(T=T.reverse()),o={tLength:0,segments:[]},i=T._length-1,se=g=0;se<i;se+=1)A=bez.buildBezierData(T.v[se],T.v[se+1],[T.o[se][0]-T.v[se][0],T.o[se][1]-T.v[se][1]],[T.i[se+1][0]-T.v[se+1][0],T.i[se+1][1]-T.v[se+1][1]]),o.tLength+=A.segmentLength,o.segments.push(A),g+=A.segmentLength;se=i,_.v.c&&(A=bez.buildBezierData(T.v[se],T.v[0],[T.o[se][0]-T.v[se][0],T.o[se][1]-T.v[se][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),o.tLength+=A.segmentLength,o.segments.push(A),g+=A.segmentLength),this._pathData.pi=o}if(o=this._pathData.pi,s=this._pathData.f.v,h=1,u=!(l=c=0),f=o.segments,s<0&&_.v.c)for(o.tLength<Math.abs(s)&&(s=-Math.abs(s)%o.tLength),h=(d=f[c=f.length-1].points).length-1;s<0;)s+=d[h].partialLength,--h<0&&(h=(d=f[--c].points).length-1);p=(d=f[c].points)[h-1],m=(a=d[h]).partialLength}i=C.length,n=r=0;var k,R,M,D,I,F,O,L,N,B,j,z,U,V,q,H,G=1.2*e.finalSize*.714,W=!0,K=E.length,X=-1,J=s,Y=c,$=h,Q=-1,Z="",ee=this.defaultPropsArray;if(2===e.j||1===e.j){for(var te=0,re=0,ne=2===e.j?-.5:-1,ie=0,oe=!0,se=0;se<i;se+=1)if(C[se].n){for(te&&(te+=re);ie<se;)C[ie].animatorJustifyOffset=te,ie+=1;oe=!(te=0)}else{for(le=0;le<K;le+=1)(k=E[le].a).t.propType&&(oe&&2===e.j&&(re+=k.t.v*ne),(M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars)).length?te+=k.t.v*M[0]*ne:te+=k.t.v*M*ne);oe=!1}for(te&&(te+=re);ie<se;)C[ie].animatorJustifyOffset=te,ie+=1}for(se=0;se<i;se+=1){if(w.reset(),O=1,C[se].n)r=0,n+=e.yOffset,n+=W?1:0,s=J,W=!1,this._hasMaskedPath&&(h=$,p=(d=f[c=Y].points)[h-1],m=(a=d[h]).partialLength,l=0),q=z=V=Z="",ee=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==C[se].line){switch(e.j){case 1:s+=g-e.lineWidths[C[se].line];break;case 2:s+=(g-e.lineWidths[C[se].line])/2}Q=C[se].line}X!==C[se].ind&&(C[X]&&(s+=C[X].extra),s+=C[se].an/2,X=C[se].ind),s+=b[0]*C[se].an/200;for(var ae=0,le=0;le<K;le+=1)(k=E[le].a).p.propType&&((M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars)).length?ae+=k.p.v[0]*M[0]:ae+=k.p.v[0]*M),k.a.propType&&((M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars)).length?ae+=k.a.v[0]*M[0]:ae+=k.a.v[0]*M);for(u=!0;u;)s+ae<=l+m||!d?(y=(s+ae-l)/a.partialLength,I=p.point[0]+(a.point[0]-p.point[0])*y,F=p.point[1]+(a.point[1]-p.point[1])*y,w.translate(-b[0]*C[se].an/200,-b[1]*G/100),u=!1):d&&(l+=a.partialLength,(h+=1)>=d.length&&(h=0,d=f[c+=1]?f[c].points:_.v.c?f[c=h=0].points:(l-=a.partialLength,null)),d&&(p=a,m=(a=d[h]).partialLength));D=C[se].an/2-C[se].add,w.translate(-D,0,0)}else D=C[se].an/2-C[se].add,w.translate(-D,0,0),w.translate(-b[0]*C[se].an/200,-b[1]*G/100,0);for(C[se].l,le=0;le<K;le+=1)(k=E[le].a).t.propType&&(M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars),0===r&&0===e.j||(this._hasMaskedPath?M.length?s+=k.t.v*M[0]:s+=k.t.v*M:M.length?r+=k.t.v*M[0]:r+=k.t.v*M));for(C[se].l,e.strokeWidthAnim&&(N=e.sw||0),e.strokeColorAnim&&(L=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(B=[e.fc[0],e.fc[1],e.fc[2]]),le=0;le<K;le+=1)(k=E[le].a).a.propType&&((M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars)).length?w.translate(-k.a.v[0]*M[0],-k.a.v[1]*M[1],k.a.v[2]*M[2]):w.translate(-k.a.v[0]*M,-k.a.v[1]*M,k.a.v[2]*M));for(le=0;le<K;le+=1)(k=E[le].a).s.propType&&((M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars)).length?w.scale(1+(k.s.v[0]-1)*M[0],1+(k.s.v[1]-1)*M[1],1):w.scale(1+(k.s.v[0]-1)*M,1+(k.s.v[1]-1)*M,1));for(le=0;le<K;le+=1){if(k=E[le].a,M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars),k.sk.propType&&(M.length?w.skewFromAxis(-k.sk.v*M[0],k.sa.v*M[1]):w.skewFromAxis(-k.sk.v*M,k.sa.v*M)),k.r.propType&&(M.length?w.rotateZ(-k.r.v*M[2]):w.rotateZ(-k.r.v*M)),k.ry.propType&&(M.length?w.rotateY(k.ry.v*M[1]):w.rotateY(k.ry.v*M)),k.rx.propType&&(M.length?w.rotateX(k.rx.v*M[0]):w.rotateX(k.rx.v*M)),k.o.propType&&(M.length?O+=(k.o.v*M[0]-O)*M[0]:O+=(k.o.v*M-O)*M),e.strokeWidthAnim&&k.sw.propType&&(M.length?N+=k.sw.v*M[0]:N+=k.sw.v*M),e.strokeColorAnim&&k.sc.propType)for(j=0;j<3;j+=1)M.length?L[j]=L[j]+(k.sc.v[j]-L[j])*M[0]:L[j]=L[j]+(k.sc.v[j]-L[j])*M;if(e.fillColorAnim&&e.fc){if(k.fc.propType)for(j=0;j<3;j+=1)M.length?B[j]=B[j]+(k.fc.v[j]-B[j])*M[0]:B[j]=B[j]+(k.fc.v[j]-B[j])*M;k.fh.propType&&(B=M.length?addHueToRGB(B,k.fh.v*M[0]):addHueToRGB(B,k.fh.v*M)),k.fs.propType&&(B=M.length?addSaturationToRGB(B,k.fs.v*M[0]):addSaturationToRGB(B,k.fs.v*M)),k.fb.propType&&(B=M.length?addBrightnessToRGB(B,k.fb.v*M[0]):addBrightnessToRGB(B,k.fb.v*M))}}for(le=0;le<K;le+=1)(k=E[le].a).p.propType&&(M=E[le].s.getMult(C[se].anIndexes[le],S.a[le].s.totalChars),this._hasMaskedPath?M.length?w.translate(0,k.p.v[1]*M[0],-k.p.v[2]*M[1]):w.translate(0,k.p.v[1]*M,-k.p.v[2]*M):M.length?w.translate(k.p.v[0]*M[0],k.p.v[1]*M[1],-k.p.v[2]*M[2]):w.translate(k.p.v[0]*M,k.p.v[1]*M,-k.p.v[2]*M));if(e.strokeWidthAnim&&(z=N<0?0:N),e.strokeColorAnim&&(U="rgb("+Math.round(255*L[0])+","+Math.round(255*L[1])+","+Math.round(255*L[2])+")"),e.fillColorAnim&&e.fc&&(V="rgb("+Math.round(255*B[0])+","+Math.round(255*B[1])+","+Math.round(255*B[2])+")"),this._hasMaskedPath){w.translate(0,-e.ls),w.translate(0,b[1]*G/100+n,0),S.p.p&&(v=(a.point[1]-p.point[1])/(a.point[0]-p.point[0]),H=180*Math.atan(v)/Math.PI,a.point[0]<p.point[0]&&(H+=180),w.rotate(-H*Math.PI/180)),w.translate(I,F,0),s-=b[0]*C[se].an/200,C[se+1]&&X!==C[se+1].ind&&(s+=C[se].an/2,s+=e.tr/1e3*e.finalSize)}else{switch(w.translate(r,n,0),e.ps&&w.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:w.translate(C[se].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[C[se].line]),0,0);break;case 2:w.translate(C[se].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[C[se].line])/2,0,0)}w.translate(0,-e.ls),w.translate(D,0,0),w.translate(b[0]*C[se].an/200,b[1]*G/100,0),r+=C[se].l+e.tr/1e3*e.finalSize}"html"===x?Z=w.toCSS():"svg"===x?Z=w.to2dCSS():ee=[w.props[0],w.props[1],w.props[2],w.props[3],w.props[4],w.props[5],w.props[6],w.props[7],w.props[8],w.props[9],w.props[10],w.props[11],w.props[12],w.props[13],w.props[14],w.props[15]],q=O}this.lettersChangedFlag=P<=se?(R=new LetterProps(q,z,U,V,Z,ee),this.renderedLetters.push(R),P+=1,!0):(R=this.renderedLetters[se]).update(q,z,U,V,Z,ee)||this.lettersChangedFlag}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(e,t,r,n,i,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1;var s=this._mdf.p=!1;return this.o!==e&&(this.o=e,s=this._mdf.o=!0),this.sw!==t&&(this.sw=t,s=this._mdf.sw=!0),this.sc!==r&&(this.sc=r,s=this._mdf.sc=!0),this.fc!==n&&(this.fc=n,s=this._mdf.fc=!0),this.m!==i&&(this.m=i,s=this._mdf.m=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,s=this._mdf.p=!0),s},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=1<this.data.d.k.length,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,r=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;for(var n=this.effectsSequence.length,i=e||this.data.d.k[this.keysIndex].s,o=0;o<n;o+=1)i=r!==this.keysIndex?this.effectsSequence[o](i,i.t):this.effectsSequence[o](this.currentData,i.t);t!==i&&this.setCurrentData(i),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,r=0,n=e.length;r<=n-1&&(e[r].s,!(r===n-1||e[r+1].t>t));)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,r=FontManager.getCombinedCharacterCodes(),n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i),-1!==r.indexOf(t)?n[n.length-1]+=e.charAt(i):55296<=t&&t<=56319&&56320<=(t=e.charCodeAt(i+1))&&t<=57343?(n.push(e.substr(i,2)),++i):n.push(e.charAt(i)),i+=1;return n},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,r,n,i=this.elem.globalData.fontManager,o=this.data,s=[],a=0,l=o.m.g,u=0,h=0,c=0,p=[],d=0,f=0,m=i.getFontByName(e.f),g=0,y=m.fStyle?m.fStyle.split(" "):[],v="normal",_="normal",b=y.length;for(k=0;k<b;k+=1)switch(y[k].toLowerCase()){case"italic":_="italic";break;case"bold":v="700";break;case"black":v="900";break;case"medium":v="500";break;case"regular":case"normal":v="400";break;case"light":case"thin":v="200"}e.fWeight=m.fWeight||v,e.fStyle=_,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),b=e.finalText.length,e.finalLineHeight=e.lh;var E,S=e.tr/1e3*e.finalSize;if(e.sz)for(var w,x,P=!0,C=e.sz[0],A=e.sz[1];P;){d=w=0,b=(x=this.buildFinalText(e.t)).length,S=e.tr/1e3*e.finalSize;for(var T=-1,k=0;k<b;k+=1)E=x[k].charCodeAt(0),t=!1," "===x[k]?T=k:13!==E&&3!==E||(t=!(d=0),w+=e.finalLineHeight||1.2*e.finalSize),C<d+(g=i.chars?(n=i.getCharData(x[k],m.fStyle,m.fFamily),t?0:n.w*e.finalSize/100):i.measureText(x[k],e.f,e.finalSize))&&" "!==x[k]?(-1===T?b+=1:k=T,w+=e.finalLineHeight||1.2*e.finalSize,x.splice(k,T===k?1:0,"\r"),T=-1,d=0):(d+=g,d+=S);w+=m.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&A<w?(--e.finalSize,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=x,b=e.finalText.length,P=!1)}d=-S;var R,M=g=0;for(k=0;k<b;k+=1)if(t=!1,E=(R=e.finalText[k]).charCodeAt(0)," "===R?r=" ":13===E||3===E?(M=0,p.push(d),f=f<d?d:f,d=-2*S,t=!(r=""),c+=1):r=e.finalText[k],g=i.chars?(n=i.getCharData(R,m.fStyle,i.getFontByName(e.f).fFamily),t?0:n.w*e.finalSize/100):i.measureText(r,e.f,e.finalSize)," "===R?M+=g+S:(d+=g+S+M,M=0),s.push({l:g,an:g,add:u,n:t,anIndexes:[],val:r,line:c,animatorJustifyOffset:0}),2==l){if(u+=g,""===r||" "===r||k===b-1){for(""!==r&&" "!==r||(u-=g);h<=k;)s[h].an=u,s[h].ind=a,s[h].extra=g,h+=1;a+=1,u=0}}else if(3==l){if(u+=g,""===r||k===b-1){for(""===r&&(u-=g);h<=k;)s[h].an=u,s[h].ind=a,s[h].extra=g,h+=1;u=0,a+=1}}else s[a].ind=a,s[a].extra=0,a+=1;if(e.l=s,f=f<d?d:f,p.push(d),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=f,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=p;for(var D,I,F,O,L=o.a,N=L.length,B=[],j=0;j<N;j+=1){for((D=L[j]).a.sc&&(e.strokeColorAnim=!0),D.a.sw&&(e.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(e.fillColorAnim=!0),O=0,F=D.s.b,k=0;k<b;k+=1)(I=s[k]).anIndexes[j]=O,(1==F&&""!==I.val||2==F&&""!==I.val&&" "!==I.val||3==F&&(I.n||" "==I.val||k==b-1)||4==F&&(I.n||k==b-1))&&(1===D.s.rn&&B.push(O),O+=1);o.a[j].s.totalChars=O;var z,U=-1;if(1===D.s.rn)for(k=0;k<b;k+=1)U!=(I=s[k]).anIndexes[j]&&(U=I.anIndexes[j],z=B.splice(Math.floor(Math.random()*B.length),1)[0]),I.anIndexes[j]=z}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=m.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var r=this.copyData({},this.data.d.k[t].s),r=this.copyData(r,e);this.data.d.k[t].s=r,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=(nMc=Math.max,oMc=Math.min,pMc=Math.floor,qMc.prototype={getMult:function(e){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var t=0,r=0,n=1,i=1;0<this.ne.v?t=this.ne.v/100:r=-this.ne.v/100,0<this.xe.v?n=1-this.xe.v/100:i=1+this.xe.v/100;var o,s,a,l=BezierFactory.getBezierEasing(t,r,n,i).get,u=0,h=this.finalS,c=this.finalE,p=this.data.sh;return(u=2===p?l(u=c===h?c<=e?1:0:nMc(0,oMc(.5/(c-h)+(e-h)/(c-h),1))):3===p?l(u=c===h?c<=e?0:1:1-nMc(0,oMc(.5/(c-h)+(e-h)/(c-h),1))):4===p?(c===h?u=0:(u=nMc(0,oMc(.5/(c-h)+(e-h)/(c-h),1)))<.5?u*=2:u=1-2*(u-.5),l(u)):5===p?l(u=c===h?0:(s=-(o=c-h)/2+(e=oMc(nMc(0,e+.5-h),c-h)),a=o/2,Math.sqrt(1-s*s/(a*a)))):6===p?l(u=c===h?0:(e=oMc(nMc(0,e+.5-h),c-h),(1+Math.cos(Math.PI+2*Math.PI*e/(c-h)))/2)):(e>=pMc(h)&&(u=nMc(0,oMc(e-h<0?oMc(c,1)-(h-e):c-e,1))),l(u)))*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t,r=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/r,i=this.s.v/r+n,o=this.e.v/r+n;o<i&&(t=i,i=o,o=t),this.finalS=i,this.finalE=o}},extendPrototype([DynamicPropertyContainer],qMc),{getTextSelectorProp:function(e,t,r){return new qMc(e,t)}}),pool_factory=function(e,t,r,n){var i=0,o=e,s=createSizedArray(o);return{newElement:function(){return i?s[--i]:t()},release:function(e){i===o&&(s=pooling.double(s),o*=2),r&&r(e),s[i]=e,i+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},point_pool=pool_factory(8,function(){return createTypedArray("float32",2)}),shape_pool=(KA=pool_factory(4,function(){return new ShapePath},function(e){for(var t=e._length,r=0;r<t;r+=1)point_pool.release(e.v[r]),point_pool.release(e.i[r]),point_pool.release(e.o[r]),e.v[r]=null,e.i[r]=null,e.o[r]=null;e._length=0,e.c=!1}),KA.clone=function(e){var t,r=KA.newElement(),n=void 0===e._length?e.v.length:e._length;for(r.setLength(n),r.c=e.c,t=0;t<n;t+=1)r.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return r},KA),KA,shapeCollection_pool=(TA={newShapeCollection:function(){return UA?WA[--UA]:new ShapeCollection},release:function(e){for(var t=e._length,r=0;r<t;r+=1)shape_pool.release(e.shapes[r]);e._length=0,UA===VA&&(WA=pooling.double(WA),VA*=2),WA[UA]=e,UA+=1}},UA=0,VA=4,WA=createSizedArray(VA),TA),TA,UA,VA,WA,segments_length_pool=pool_factory(8,function(){return{lengths:[],totalLength:0}},function(e){for(var t=e.lengths.length,r=0;r<t;r+=1)bezier_length_pool.release(e.lengths[r]);e.lengths.length=0}),bezier_length_pool=pool_factory(8,function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}),nMc,oMc,pMc;function qMc(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r,n,i,o,s="";t&&t.title&&(r=createNS("title"),n=createElementID(),r.setAttribute("id",n),r.textContent=t.title,this.svgElement.appendChild(r),s+=n),t&&t.description&&(i=createNS("desc"),o=createElementID(),i.setAttribute("id",o),i.textContent=t.description,this.svgElement.appendChild(i),s+=" "+o),s&&this.svgElement.setAttribute("aria-labelledby",s);var a=createNS("defs");this.svgElement.appendChild(a);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!t||!1!==t.hideOnTransparent,viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable},this.globalData={_mdf:!1,frameNum:-1,defs:a,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!t||!1!==t.hideOnTransparent},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(e,t,r){this.data=e,this.element=t,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var n=this.globalData.defs,i=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(i),this.solidPath="";for(var o,s,a,l,u,h,c,p=this.masksProperties,d=0,f=[],m=createElementID(),g="clipPath",y="clip-path",v=0;v<i;v++)if(("a"!==p[v].mode&&"n"!==p[v].mode||p[v].inv||100!==p[v].o.k||p[v].o.x)&&(y=g="mask"),"s"!=p[v].mode&&"i"!=p[v].mode||0!==d?a=null:((a=createNS("rect")).setAttribute("fill","#ffffff"),a.setAttribute("width",this.element.comp.data.w||0),a.setAttribute("height",this.element.comp.data.h||0),f.push(a)),o=createNS("path"),"n"!=p[v].mode){if(d+=1,o.setAttribute("fill","s"===p[v].mode?"#000000":"#ffffff"),o.setAttribute("clip-rule","nonzero"),0!==p[v].x.k?(y=g="mask",h=PropertyFactory.getProp(this.element,p[v].x,0,null,this.element),c=createElementID(),(l=createNS("filter")).setAttribute("id",c),(u=createNS("feMorphology")).setAttribute("operator","erode"),u.setAttribute("in","SourceGraphic"),u.setAttribute("radius","0"),l.appendChild(u),n.appendChild(l),o.setAttribute("stroke","s"===p[v].mode?"#000000":"#ffffff")):h=u=null,this.storedData[v]={elem:o,x:h,expan:u,lastPath:"",lastOperator:"",filterId:c,lastRadius:0},"i"==p[v].mode){s=f.length;for(var _=createNS("g"),b=0;b<s;b+=1)_.appendChild(f[b]);var E=createNS("mask");E.setAttribute("mask-type","alpha"),E.setAttribute("id",m+"_"+d),E.appendChild(o),n.appendChild(E),_.setAttribute("mask","url("+locationHref+"#"+m+"_"+d+")"),f.length=0,f.push(_)}else f.push(o);p[v].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[v]={elem:o,lastPath:"",op:PropertyFactory.getProp(this.element,p[v].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[v],3),invRect:a},this.viewData[v].prop.k||this.drawPath(p[v],this.viewData[v].prop.v,this.viewData[v])}else this.viewData[v]={op:PropertyFactory.getProp(this.element,p[v].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[v],3),elem:o,lastPath:""},n.appendChild(o);for(this.maskElement=createNS(g),i=f.length,v=0;v<i;v+=1)this.maskElement.appendChild(f[v]);0<d&&(this.maskElement.setAttribute("id",m),this.element.maskedElement.setAttribute(y,"url("+locationHref+"#"+m+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(e,t){this.elem=e,this.pos=t}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(e,t,r){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=r,this.lvl=t,this._isAnimated=!!r.k;for(var n=0,i=e.length;n<i;){if(e[n].mProps.dynamicProperties.length){this._isAnimated=!0;break}n+=1}}function SVGTransformData(e,t,r){this.transform={mProps:e,op:t,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r}function SVGGradientFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,r)}function SVGGradientStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,r),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(e){var t,r,n=this.layers.length;for(this.completeLayers=!0,t=n-1;0<=t;t--)this.elements[t]||(r=this.layers[t]).ip-r.st<=e-this.layers[t].st&&r.op-r.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 13:return this.createCamera(e)}return this.createNull(e)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;for(var t,r=e.length,n=this.layers.length,i=0;i<r;i+=1)for(t=0;t<n;){if(this.layers[t].id==e[i].id){this.layers[t]=e[i];break}t+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,r){for(var n=this.elements,i=this.layers,o=0,s=i.length;o<s;)i[o].ind==t&&(n[o]&&!0!==n[o]?(r.push(n[o]),n[o].setAsParent(),void 0!==i[o].parent?this.buildElementParenting(e,i[o].parent,r):e.setHierarchy(r)):(this.buildItem(o),this.addPendingElement(e))),o+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){for(var t,r=e.length,n=0;n<r;n+=1){e[n].xt&&((t=this.createComp(e[n])).initExpressions(),this.globalData.projectInterface.registerComposition(t))}},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var r=createNS("clipPath"),n=createNS("rect");n.setAttribute("width",e.w),n.setAttribute("height",e.h),n.setAttribute("x",0),n.setAttribute("y",0);var i=createElementID();r.setAttribute("id",i),r.appendChild(n),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),t.appendChild(r),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;for(var e=this.layers?this.layers.length:0,t=0;t<e;t++)this.elements[t]&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t,r=this.elements;r[e]||99==this.layers[e].ty||(r[e]=!0,t=this.createItem(this.layers[e]),r[e]=t,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(t),t.initExpressions()),this.appendElementInPos(t,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?t.setMatte(r[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(t))))},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,r=this.elements.length;t<r;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var t,r=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=r-1;0<=t;t--)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<r;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){for(var n,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(n=this.elements[i].getBaseElement()),i+=1;n?this.layerElement.insertBefore(r,n):this.layerElement.appendChild(r)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(e){var t,r;1===e[0]&&0===e[1]&&0===e[4]&&1===e[5]&&0===e[12]&&0===e[13]||(this.renderConfig.clearCanvas?(this.transformMat.cloneFromProps(e),t=this.contextData.cTr.props,this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props),r=this.contextData.cTr.props,this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])):this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13]))},CanvasRenderer.prototype.ctxOpacity=function(e){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=e<0?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();for(var r=this.contextData.saved[this.contextData.cArrPos],n=0;n<16;n+=1)r[n]=t[n];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),--this.contextData.cArrPos;for(var t=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props,n=0;n<16;n+=1)r[n]=t[n];this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13]),t=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=t,this.globalData.currentGlobalAlpha!==t&&(this.canvasContext.globalAlpha=t,this.globalData.currentGlobalAlpha=t)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,(this.globalData.renderer=this).globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,r,n,i,o,s,a,l;this.reset(),this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")?(n=(r=this.renderConfig.preserveAspectRatio.split(" "))[1]||"meet",o=(i=r[0]||"xMidYMid").substr(0,4),s=i.substr(4),a=e/t,l=this.transformCanvas.w/this.transformCanvas.h,this.transformCanvas.sy=a<l&&"meet"===n||l<a&&"slice"===n?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===o&&(l<a&&"meet"===n||a<l&&"slice"===n)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===o&&(l<a&&"meet"===n||a<l&&"slice"===n)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===s&&(a<l&&"meet"===n||l<a&&"slice"===n)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===s&&(a<l&&"meet"===n||l<a&&"slice"===n)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0):("none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0),this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),e=(this.layers?this.layers.length:0)-1;0<=e;--e)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r,n=this.layers.length;for(this.completeLayers||this.checkLayers(e),r=0;r<n;r++)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(e-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=n-1;0<=r;--r)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(e){var t,r=this.elements;r[e]||99==this.layers[e].ty||(t=this.createItem(this.layers[e],this,this.globalData),(r[e]=t).initExpressions())},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){var n=this.layers[t];if(n.ddd&&this.supports3d)this.addTo3dContainer(r,t);else if(this.threeDElements)this.addTo3dContainer(r,t);else{for(var i,o,s=0;s<t;)this.elements[s]&&!0!==this.elements[s]&&this.elements[s].getBaseElement&&(o=this.elements[s],i=(this.layers[s].ddd?this.getThreeDContainerByPos(s):o.getBaseElement())||i),s+=1;i?n.ddd&&this.supports3d||this.layerElement.insertBefore(r,i):n.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRenderer.prototype.createShape=function(e){return new(this.supports3d?HShapeElement:SVGShapeElement)(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return new(this.supports3d?HTextElement:SVGTextElement)(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return new(this.supports3d?HImageElement:IImageElement)(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return new(this.supports3d?HCompElement:SVGCompElement)(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return new(this.supports3d?HSolidElement:ISolidElement)(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,r=this.threeDElements.length;t<r;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}},HybridRenderer.prototype.createThreeDContainer=function(e,t){var r=createTag("div");styleDiv(r);var n=createTag("div");styleDiv(n),"3d"===t&&(r.style.width=this.globalData.compSize.w+"px",r.style.height=this.globalData.compSize.h+"px",r.style.transformOrigin=r.style.mozTransformOrigin=r.style.webkitTransformOrigin="50% 50%",n.style.transform=n.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),r.appendChild(n);var i={container:n,perspectiveElem:r,startPos:e,endPos:e,type:t};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){for(var e,t=this.layers.length,r="",n=0;n<t;n+=1)this.layers[n].ddd&&3!==this.layers[n].ty?"3d"!==r&&(r="3d",e=this.createThreeDContainer(n,"3d")):"2d"!==r&&(r="2d",e=this.createThreeDContainer(n,"2d")),e.endPos=Math.max(e.endPos,n);for(n=(t=this.threeDElements.length)-1;0<=n;n--)this.resizerElem.appendChild(this.threeDElements[n].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var r=0,n=this.threeDElements.length;r<n;){if(t<=this.threeDElements[r].endPos){for(var i,o=this.threeDElements[r].startPos;o<t;)this.elements[o]&&this.elements[o].getBaseElement&&(i=this.elements[o].getBaseElement()),o+=1;i?this.threeDElements[r].container.insertBefore(e,i):this.threeDElements[r].container.appendChild(e);break}r+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=createTag("div"),r=this.animationItem.wrapper;t.style.width=e.w+"px",t.style.height=e.h+"px",styleDiv(this.resizerElem=t),t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),r.appendChild(t),t.style.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var i=createNS("defs");n.appendChild(i),this.data=e,this.setupGlobalData(e,n),this.globalData.defs=i,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;for(var e=this.layers?this.layers.length:0,t=0;t<e;t++)this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,r,n=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight,o=n/i<this.globalData.compSize.w/this.globalData.compSize.h?(e=n/this.globalData.compSize.w,t=n/this.globalData.compSize.w,r=0,(i-this.globalData.compSize.h*(n/this.globalData.compSize.w))/2):(e=i/this.globalData.compSize.h,t=i/this.globalData.compSize.h,r=(n-this.globalData.compSize.w*(i/this.globalData.compSize.h))/2,0);this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+r+","+o+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else for(var e=this.globalData.compSize.w,t=this.globalData.compSize.h,r=this.threeDElements.length,n=0;n<r;n+=1)this.threeDElements[n].perspectiveElem.style.perspective=this.threeDElements[n].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))+"px"},HybridRenderer.prototype.searchExtraCompositions=function(e){for(var t,r=e.length,n=createTag("div"),i=0;i<r;i+=1){e[i].xt&&((t=this.createComp(e[i],n,this.globalData.comp,null)).initExpressions(),this.globalData.projectInterface.registerComposition(t))}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){for(var t,r=this.element.finalTransform.mat,n=this.masksProperties.length,i=0;i<n;i++){(this.viewData[i].prop._mdf||e)&&this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]),(this.viewData[i].op._mdf||e)&&this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v),"n"!==this.masksProperties[i].mode&&(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[i].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[i].x&&(this.storedData[i].x._mdf||e))&&(t=this.storedData[i].expan,this.storedData[i].x.v<0?("erode"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="erode",this.storedData[i].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[i].filterId+")")),t.setAttribute("radius",-this.storedData[i].x.v)):("dilate"!==this.storedData[i].lastOperator&&(this.storedData[i].lastOperator="dilate",this.storedData[i].elem.setAttribute("filter",null)),this.storedData[i].elem.setAttribute("stroke-width",2*this.storedData[i].x.v)))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,(e+=" h-"+this.globalData.compSize.w)+(" v-"+this.globalData.compSize.h)+" "},MaskElement.prototype.drawPath=function(e,t,r){for(var n,i=" M"+t.v[0][0]+","+t.v[0][1],o=t._length,s=1;s<o;s+=1)i+=" C"+t.o[s-1][0]+","+t.o[s-1][1]+" "+t.i[s][0]+","+t.i[s][1]+" "+t.v[s][0]+","+t.v[s][1];t.c&&1<o&&(i+=" C"+t.o[s-1][0]+","+t.o[s-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),r.lastPath!==i&&(n="",r.elem&&(t.c&&(n=e.inv?this.solidPath+i:i),r.elem.setAttribute("d",n)),r.lastPath=i)},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){for(var r=this.dynamicProperties.length,n=0;n<r;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,r=0,n=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<n;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),r=0;r<n;r+=1)e=this.hierarchy[r].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var r=!0,n=this.comp;r;)n.finalTransform?(n.data.hasMask&&t.splice(0,0,n.finalTransform),n=n.comp):r=!1;for(var i,o=t.length,s=0;s<o;s+=1)i=t[s].mat.applyToPointArray(0,0,0),e=[e[0]-i[0],e[1]-i[1],0];return e},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){for(var e=this.renderableComponents.length,t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,r){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,t),this.setGradientOpacity(t,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var r=createElementID(),n=createNS(1===t.t?"linearGradient":"radialGradient");n.setAttribute("id",r),n.setAttribute("spreadMethod","pad"),n.setAttribute("gradientUnits","userSpaceOnUse");for(var i,o=[],s=4*t.g.p,a=0;a<s;a+=4)i=createNS("stop"),n.appendChild(i),o.push(i);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+r+")"),this.gf=n,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var r,n,i=createNS("mask"),o=createNS("path");i.appendChild(o);var s=createElementID(),a=createElementID();i.setAttribute("id",a);var l=createNS(1===e.t?"linearGradient":"radialGradient");l.setAttribute("id",s),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),n=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;for(var u=this.stops,h=4*e.g.p;h<n;h+=2)(r=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(r),u.push(r);o.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),this.of=l,this.ms=i,this.ost=u,this.maskId=a,t.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=(fSc=new Matrix,gSc=new Matrix,{createRenderFunction:function(e){switch(e.ty,e.ty){case"fl":return jSc;case"gf":return lSc;case"gs":return kSc;case"st":return mSc;case"sh":case"el":case"rc":case"sr":return iSc;case"tr":return hSc}}}),fSc,gSc;function hSc(e,t,r){(r||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(r||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function iSc(e,t,r){for(var n,i,o,s,a,l,u,h,c,p,d=t.styles.length,f=t.lvl,m=0;m<d;m+=1){if(s=t.sh._mdf||r,t.styles[m].lvl<f){for(u=gSc.reset(),c=f-t.styles[m].lvl,p=t.transformers.length-1;!s&&0<c;)s=t.transformers[p].mProps._mdf||s,c--,p--;if(s)for(c=f-t.styles[m].lvl,p=t.transformers.length-1;0<c;)h=t.transformers[p].mProps.v.props,u.transform(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15]),c--,p--}else u=fSc;if(i=(l=t.sh.paths)._length,s){for(o="",n=0;n<i;n+=1)(a=l.shapes[n])&&a._length&&(o+=buildShapeString(a,a._length,a.c,u));t.caches[m]=o}else o=t.caches[m];t.styles[m].d+=!0===e.hd?"":o,t.styles[m]._mdf=s||t.styles[m]._mdf}}function jSc(e,t,r){var n=t.style;(t.c._mdf||r)&&n.pElem.setAttribute("fill","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||r)&&n.pElem.setAttribute("fill-opacity",t.o.v)}function kSc(e,t,r){lSc(e,t,r),mSc(0,t,r)}function lSc(e,t,r){var n,i,o,s,a,l,u,h,c,p,d=t.gf,f=t.g._hasOpacity,m=t.s.v,g=t.e.v;if((t.o._mdf||r)&&(s="gf"===e.ty?"fill-opacity":"stroke-opacity",t.style.pElem.setAttribute(s,t.o.v)),(t.s._mdf||r)&&(l="x1"==(a=1===e.t?"x1":"cx")?"y1":"cy",d.setAttribute(a,m[0]),d.setAttribute(l,m[1]),f&&!t.g._collapsable&&(t.of.setAttribute(a,m[0]),t.of.setAttribute(l,m[1]))),t.g._cmdf||r){n=t.cst;for(var y=t.g.c,v=n.length,_=0;_<v;_+=1)(i=n[_]).setAttribute("offset",y[4*_]+"%"),i.setAttribute("stop-color","rgb("+y[4*_+1]+","+y[4*_+2]+","+y[4*_+3]+")")}if(f&&(t.g._omdf||r)){var b=t.g.o;for(v=(n=t.g._collapsable?t.cst:t.ost).length,_=0;_<v;_+=1)i=n[_],t.g._collapsable||i.setAttribute("offset",b[2*_]+"%"),i.setAttribute("stop-opacity",b[2*_+1])}1===e.t?(t.e._mdf||r)&&(d.setAttribute("x2",g[0]),d.setAttribute("y2",g[1]),f&&!t.g._collapsable&&(t.of.setAttribute("x2",g[0]),t.of.setAttribute("y2",g[1]))):((t.s._mdf||t.e._mdf||r)&&(o=Math.sqrt(Math.pow(m[0]-g[0],2)+Math.pow(m[1]-g[1],2)),d.setAttribute("r",o),f&&!t.g._collapsable&&t.of.setAttribute("r",o)),(t.e._mdf||t.h._mdf||t.a._mdf||r)&&(o=o||Math.sqrt(Math.pow(m[0]-g[0],2)+Math.pow(m[1]-g[1],2)),u=Math.atan2(g[1]-m[1],g[0]-m[0]),h=o*(1<=t.h.v?.99:t.h.v<=-1?-.99:t.h.v),c=Math.cos(u+t.a.v)*h+m[0],p=Math.sin(u+t.a.v)*h+m[1],d.setAttribute("fx",c),d.setAttribute("fy",p),f&&!t.g._collapsable&&(t.of.setAttribute("fx",c),t.of.setAttribute("fy",p))))}function mSc(e,t,r){var n=t.style,i=t.d;i&&(i._mdf||r)&&i.dashStr&&(n.pElem.setAttribute("stroke-dasharray",i.dashStr),n.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),t.c&&(t.c._mdf||r)&&n.pElem.setAttribute("stroke","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||r)&&n.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||r)&&(n.pElem.setAttribute("stroke-width",t.w.v),n.msElem&&n.msElem.setAttribute("stroke-width",t.w.v))}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(e,t,r,n){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==t.ty?i=5:"el"==t.ty?i=6:"sr"==t.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,i,e);for(var o,s=r.length,a=0;a<s;a+=1)r[a].closed||(o={transforms:n.addTransformSequence(r[a].transforms),trNodes:[]},this.styledShapes.push(o),r[a].elements.push(o))}function BaseElement(){}function NullElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initFrame(),this.initTransform(e,t,r),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(e,t,r){this.initElement(e,t,r)}function SVGCompElement(e,t,r){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextElement(e,t,r){this.textSpans=[],this.renderType="svg",this.initElement(e,t,r)}function SVGShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,r),this.prevViewData=[]}function SVGTintFilter(e,t){this.filterManager=t;var r,n,i=createNS("feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","linearRGB"),i.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),i.setAttribute("result","f1"),e.appendChild(i),(i=createNS("feColorMatrix")).setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),i.setAttribute("result","f2"),e.appendChild(i),this.matrixFilter=i,100===t.effectElements[2].p.v&&!t.effectElements[2].p.k||(n=createNS("feMerge"),e.appendChild(n),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),n.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),n.appendChild(r))}function SVGFillFilter(e,t){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(r),this.matrixFilter=r}function SVGGaussianBlurEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var r=createNS("feGaussianBlur");e.appendChild(r),this.feGaussianBlur=r}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),e.appendChild(r);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(n),this.matrixFilter=n;var i=createNS("feFuncR");i.setAttribute("type","table"),n.appendChild(i),this.feFuncR=i;var o=createNS("feFuncG");o.setAttribute("type","table"),n.appendChild(o),this.feFuncG=o;var s=createNS("feFuncB");s.setAttribute("type","table"),n.appendChild(s),this.feFuncB=s}function SVGProLevelsFilter(e,t){this.filterManager=t;var r=this.filterManager.effectElements,n=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(n),n=createNS("feComponentTransfer")),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&(n.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","400%"),e.setAttribute("height","400%"),this.filterManager=t;var r=createNS("feGaussianBlur");r.setAttribute("in","SourceAlpha"),r.setAttribute("result","drop_shadow_1"),r.setAttribute("stdDeviation","0"),this.feGaussianBlur=r,e.appendChild(r);var n=createNS("feOffset");n.setAttribute("dx","25"),n.setAttribute("dy","0"),n.setAttribute("in","drop_shadow_1"),n.setAttribute("result","drop_shadow_2"),this.feOffset=n,e.appendChild(n);var i=createNS("feFlood");i.setAttribute("flood-color","#00ff00"),i.setAttribute("flood-opacity","1"),i.setAttribute("result","drop_shadow_3"),this.feFlood=i,e.appendChild(i);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),e.appendChild(o);var s,a=createNS("feMerge");e.appendChild(a),s=createNS("feMergeNode"),a.appendChild(s),(s=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=s,this.feMerge=a,this.originalNodeAdded=!1,a.appendChild(s)}ShapeTransformManager.prototype={addTransformSequence:function(e){for(var t=e.length,r="_",n=0;n<t;n+=1)r+=e[n].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(e,t){for(var r,n=0,i=e.transforms.length,o=t;n<i&&!t;){if(e.transforms[n].transform.mProps._mdf){o=!0;break}n+=1}if(o)for(e.finalTransform.reset(),n=i-1;0<=n;--n)r=e.transforms[n].transform.mProps.v.props,e.finalTransform.transform(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]);e._mdf=o},processSequences:function(e){for(var t=this.sequenceList.length,r=0;r<t;r+=1)this.processSequence(this.sequenceList[r],e)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,r){this.globalData=t,this.comp=r,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,r,n,i,o,s,a,l,u,h,c,p,d=null;this.data.td?3==this.data.td||1==this.data.td?((n=createNS("mask")).setAttribute("id",this.layerId),n.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),n.appendChild(this.layerElement),d=n,this.globalData.defs.appendChild(n),featureSupport.maskType||1!=this.data.td||(n.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(r=createNS("g")).appendChild(this.layerElement),d=r,n.appendChild(r),r.setAttribute("filter","url("+locationHref+"#"+e+")"))):2==this.data.td&&((i=createNS("mask")).setAttribute("id",this.layerId),i.setAttribute("mask-type","alpha"),o=createNS("g"),i.appendChild(o),e=createElementID(),t=filtersFactory.createFilter(e),(s=createNS("feComponentTransfer")).setAttribute("in","SourceGraphic"),t.appendChild(s),(a=createNS("feFuncA")).setAttribute("type","table"),a.setAttribute("tableValues","1.0 0.0"),s.appendChild(a),this.globalData.defs.appendChild(t),(l=createNS("rect")).setAttribute("width",this.comp.data.w),l.setAttribute("height",this.comp.data.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),o.setAttribute("filter","url("+locationHref+"#"+e+")"),o.appendChild(l),o.appendChild(this.layerElement),d=o,featureSupport.maskType||(i.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),r=createNS("g"),o.appendChild(l),r.appendChild(this.layerElement),d=r,o.appendChild(r)),this.globalData.defs.appendChild(i)):this.data.tt?(this.matteElement.appendChild(this.layerElement),d=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.ty||this.data.hd||(u=createNS("clipPath"),(h=createNS("path")).setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z"),c=createElementID(),u.setAttribute("id",c),u.appendChild(h),this.globalData.defs.appendChild(u),this.checkMasks()?((p=createNS("g")).setAttribute("clip-path","url("+locationHref+"#"+c+")"),p.appendChild(this.layerElement),this.transformedElement=p,d?d.appendChild(this.transformedElement):this.baseElement=this.transformedElement):this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+c+")")),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(e){for(var t=this.shapeModifiers.length,r=0;r<t;r+=1)this.shapeModifiers[r].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){for(var e=this.shapes.length,t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;0<=t;--t)this.shapeModifiers[t].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(e){for(var t=this.processedElements,r=0,n=t.length;r<n;){if(t[r].elem===e)return t[r].pos;r+=1}return 0},addProcessedElement:function(e,t){for(var r=this.processedElements,n=r.length;n;)if(r[--n].elem===e)return void(r[n].pos=t);r.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(e,t,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,r),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){for(var r,n=t.length,i="",o=0;o<n;o+=1)r=t[o].ks.k,i+=buildShapeString(r,r.i.length,!0,e);return i},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,r,n,i){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r])/2,0,0)}t.translate(n,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){var t;this.tm._placeholder?this.renderedFrame=e/this.data.sr:((t=this.tm.v)===this.data.op&&(t=this.data.op-1),this.renderedFrame=t);var r,n=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=n-1;0<=r;--r)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st),this.elements[r]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){for(var e=this.layers.length,t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){for(var e=this.layers.length,t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(e){for(var t=0,r=e.length,n=[],i="";t<r;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(n.push(i),i=""):i+=e[t],t+=1;return n.push(i),n},SVGTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var t,r,n=this.globalData.fontManager.getFontByName(e.f);n.fClass?this.layerElement.setAttribute("class",n.fClass):(this.layerElement.setAttribute("font-family",n.fFamily),t=e.fWeight,r=e.fStyle,this.layerElement.setAttribute("font-style",r),this.layerElement.setAttribute("font-weight",t)),this.layerElement.setAttribute("aria-label",e.t);var i,o=e.l||[],s=!!this.globalData.fontManager.chars;S=o.length;var a,l=this.mHelper,u="",h=this.data.singleShape,c=0,p=0,d=!0,f=e.tr/1e3*e.finalSize;if(!h||s||e.sz){for(var m,g,y=this.textSpans.length,v=0;v<S;v+=1)s&&h&&0!==v||(i=v<y?this.textSpans[v]:createNS(s?"path":"text"),y<=v&&(i.setAttribute("stroke-linecap","butt"),i.setAttribute("stroke-linejoin","round"),i.setAttribute("stroke-miterlimit","4"),this.textSpans[v]=i,this.layerElement.appendChild(i)),i.style.display="inherit"),l.reset(),l.scale(e.finalSize/100,e.finalSize/100),h&&(o[v].n&&(c=-f,p+=e.yOffset,p+=d?1:0,d=!1),this.applyTextPropertiesToMatrix(e,l,o[v].line,c,p),c+=o[v].l||0,c+=f),s?(a=(m=(g=this.globalData.fontManager.getCharData(e.finalText[v],n.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&g.data||{}).shapes?m.shapes[0].it:[],h?u+=this.createPathShape(l,a):i.setAttribute("d",this.createPathShape(l,a))):(h&&i.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),i.textContent=o[v].val,i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));h&&i&&i.setAttribute("d",u)}else{var _=this.textContainer,b="start";switch(e.j){case 1:b="end";break;case 2:b="middle"}_.setAttribute("text-anchor",b),_.setAttribute("letter-spacing",f);var E=this.buildTextContents(e.finalText),S=E.length,p=e.ps?e.ps[1]+e.ascent:0;for(v=0;v<S;v+=1)(i=this.textSpans[v]||createNS("tspan")).textContent=E[v],i.setAttribute("x",0),i.setAttribute("y",p),i.style.display="inherit",_.appendChild(i),this.textSpans[v]=i,p+=e.finalLineHeight;this.layerElement.appendChild(_)}for(;v<this.textSpans.length;)this.textSpans[v].style.display="none",v+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(e){var t;return this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged&&(this._sizeChanged=!1,t=this.layerElement.getBBox(),this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}),this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;for(var e,t,r=this.textAnimator.renderedLetters,n=this.textProperty.currentData.l,i=n.length,o=0;o<i;o+=1)n[o].n||(e=r[o],t=this.textSpans[o],e._mdf.m&&t.setAttribute("transform",e.m),e._mdf.o&&t.setAttribute("opacity",e.o),e._mdf.sw&&t.setAttribute("stroke-width",e.sw),e._mdf.sc&&t.setAttribute("stroke",e.sc),e._mdf.fc&&t.setAttribute("fill",e.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){for(var e,t,r,n=this.shapes.length,i=this.stylesList.length,o=[],s=!1,a=0;a<i;a+=1){for(r=this.stylesList[a],s=!1,e=o.length=0;e<n;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(o.push(t),s=t._isAnimated||s);1<o.length&&s&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var r,n=new SVGStyleData(e,t),i=n.pElem;return"st"===e.ty?r=new SVGStrokeStyleData(this,e,n):"fl"===e.ty?r=new SVGFillStyleData(this,e,n):"gf"!==e.ty&&"gs"!==e.ty||(r=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,n),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),i.setAttribute("mask","url("+locationHref+"#"+r.maskId+")"))),"st"!==e.ty&&"gs"!==e.ty||(i.setAttribute("stroke-linecap",this.lcEnum[e.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[e.lj]||"round"),i.setAttribute("fill-opacity","0"),1===e.lj&&i.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&i.setAttribute("fill-rule","evenodd"),e.ln&&i.setAttribute("id",e.ln),e.cl&&i.setAttribute("class",e.cl),e.bm&&(i.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(n),this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var r=TransformPropertyFactory.getTransformProperty(this,e,this),n=new SVGTransformData(r,r.o,t);return this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createShapeElement=function(e,t,r){var n=4;"rc"===e.ty?n=5:"el"===e.ty?n=6:"sr"===e.ty&&(n=7);var i=new SVGShapeData(t,r,ShapePropertyFactory.getShapeProp(this,e,n,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var r=0,n=this.animatedContents.length;r<n;){if(this.animatedContents[r].element===t)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){for(var t=e.styles,r=this.stylesList.length,n=0;n<r;n+=1)this.stylesList[n].closed||t.push(this.stylesList[n])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var e=this.itemsData.length,t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,r,n,i,o,s){for(var a,l,u,h,c,p=[].concat(o),d=e.length-1,f=[],m=[],g=d;0<=g;--g){if((c=this.searchProcessedElement(e[g]))?t[g]=r[c-1]:e[g]._render=s,"fl"==e[g].ty||"st"==e[g].ty||"gf"==e[g].ty||"gs"==e[g].ty)c?t[g].style.closed=!1:t[g]=this.createStyleElement(e[g],i),e[g]._render&&n.appendChild(t[g].style.pElem),f.push(t[g].style);else if("gr"==e[g].ty){if(c)for(l=t[g].it.length,a=0;a<l;a+=1)t[g].prevViewData[a]=t[g].it[a];else t[g]=this.createGroupElement(e[g]);this.searchShapes(e[g].it,t[g].it,t[g].prevViewData,t[g].gr,i+1,p,s),e[g]._render&&n.appendChild(t[g].gr)}else"tr"==e[g].ty?(c||(t[g]=this.createTransformElement(e[g],n)),u=t[g].transform,p.push(u)):"sh"==e[g].ty||"rc"==e[g].ty||"el"==e[g].ty||"sr"==e[g].ty?(c||(t[g]=this.createShapeElement(e[g],p,i)),this.setElementStyles(t[g])):"tm"==e[g].ty||"rd"==e[g].ty||"ms"==e[g].ty?(c?(h=t[g]).closed=!1:((h=ShapeModifiers.getModifier(e[g].ty)).init(this,e[g]),t[g]=h,this.shapeModifiers.push(h)),m.push(h)):"rp"==e[g].ty&&(c?(h=t[g]).closed=!0:(h=ShapeModifiers.getModifier(e[g].ty),(t[g]=h).init(this,e,g,t),this.shapeModifiers.push(h),s=!1),m.push(h));this.addProcessedElement(e[g],g+1)}for(d=f.length,g=0;g<d;g+=1)f[g].closed=!0;for(d=m.length,g=0;g<d;g+=1)m[g].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();for(var e=this.stylesList.length,t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){for(var e,t=this.animatedContents.length,r=0;r<t;r+=1)e=this.animatedContents[r],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(e){var t,r,n;(e||this.filterManager._mdf)&&(t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,n=this.filterManager.effectElements[2].p.v/100,this.matrixFilter.setAttribute("values",r[0]-t[0]+" 0 0 0 "+t[0]+" "+(r[1]-t[1])+" 0 0 0 "+t[1]+" "+(r[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+n+" 0"))},SVGFillFilter.prototype.renderFrame=function(e){var t,r;(e||this.filterManager._mdf)&&(t=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v,this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+r+" 0"))},SVGGaussianBlurEffect.prototype.renderFrame=function(e){var t,r,n,i,o;(e||this.filterManager._mdf)&&(t=.3*this.filterManager.effectElements[0].p.v,n=3==(r=this.filterManager.effectElements[1].p.v)?0:t,i=2==r?0:t,this.feGaussianBlur.setAttribute("stdDeviation",n+" "+i),o=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate",this.feGaussianBlur.setAttribute("edgeMode",o))},SVGStrokeEffect.prototype.initialize=function(){var e,t,r,n,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(n=this.elem.maskManager.masksProperties.length,r=0):n=1+(r=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);r<n;r+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:r});if(3===this.filterManager.effectElements[10].p.v){var o=createNS("mask"),s=createElementID();o.setAttribute("id",s),o.setAttribute("mask-type","alpha"),o.appendChild(t),this.elem.globalData.defs.appendChild(o);var a=createNS("g");for(a.setAttribute("mask","url("+locationHref+"#"+s+")");i[0];)a.appendChild(i[0]);this.elem.layerElement.appendChild(a),this.masker=o,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();for(var t,r,n,i=this.paths.length,o=0;o<i;o+=1)if(-1!==this.paths[o].m&&(t=this.elem.maskManager.viewData[this.paths[o].m],r=this.paths[o].p,(e||this.filterManager._mdf||t.prop._mdf)&&r.setAttribute("d",t.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||t.prop._mdf)){if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){for(var s=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,a=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=r.getTotalLength(),u="0 0 0 "+l*s+" ",h=l*(a-s),c=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,p=Math.floor(h/c),d=0;d<p;d+=1)u+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";u+="0 "+10*l+" 0 0"}else u="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;r.setAttribute("stroke-dasharray",u)}(e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),1!==this.filterManager.effectElements[10].p.v&&2!==this.filterManager.effectElements[10].p.v||!e&&!this.filterManager.effectElements[3].p._mdf||(n=this.filterManager.effectElements[3].p.v,this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*n[0])+","+bm_floor(255*n[1])+","+bm_floor(255*n[2])+")"))},SVGTritoneFilter.prototype.renderFrame=function(e){var t,r,n,i,o,s;(e||this.filterManager._mdf)&&(t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=(n=this.filterManager.effectElements[2].p.v)[0]+" "+r[0]+" "+t[0],o=n[1]+" "+r[1]+" "+t[1],s=n[2]+" "+r[2]+" "+t[2],this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",s))},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var r=createNS(e);return r.setAttribute("type","table"),t.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(e,t,r,n,i){for(var o,s,a=0,l=Math.min(e,t),u=Math.max(e,t),h=Array.call(null,{length:256}),c=0,p=i-n,d=t-e;a<=256;)s=(o=a/256)<=l?d<0?i:n:u<=o?d<0?n:i:n+p*Math.pow((o-e)/d,1/r),h[c++]=s,a+=256/255;return h.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){var t,r;(e||this.filterManager._mdf)&&(r=this.filterManager.effectElements,this.feFuncRComposed&&(e||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(t=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(t=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(t=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(t=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(t=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",t)))},SVGDropShadowEffect.prototype.renderFrame=function(e){var t,r,n,i,o;(e||this.filterManager._mdf)&&((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),(e||this.filterManager.effectElements[0].p._mdf)&&(t=this.filterManager.effectElements[0].p.v,this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))),(e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),(e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf)&&(r=this.filterManager.effectElements[3].p.v,n=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=r*Math.cos(n),o=r*Math.sin(n),this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",o)))};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,r){this.initialized=!1,this.filterManager=t,this.filterElem=e,(this.elem=r).matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}function SVGEffects(e){var t,r,n=e.data.ef?e.data.ef.length:0,i=createElementID(),o=filtersFactory.createFilter(i),s=0;for(this.filters=[],t=0;t<n;t+=1)r=null,20===e.data.ef[t].ty?(s+=1,r=new SVGTintFilter(o,e.effectsManager.effectElements[t])):21===e.data.ef[t].ty?(s+=1,r=new SVGFillFilter(o,e.effectsManager.effectElements[t])):22===e.data.ef[t].ty?r=new SVGStrokeEffect(e,e.effectsManager.effectElements[t]):23===e.data.ef[t].ty?(s+=1,r=new SVGTritoneFilter(o,e.effectsManager.effectElements[t])):24===e.data.ef[t].ty?(s+=1,r=new SVGProLevelsFilter(o,e.effectsManager.effectElements[t])):25===e.data.ef[t].ty?(s+=1,r=new SVGDropShadowEffect(o,e.effectsManager.effectElements[t])):28===e.data.ef[t].ty?r=new SVGMatte3Effect(o,e.effectsManager.effectElements[t],e):29===e.data.ef[t].ty&&(s+=1,r=new SVGGaussianBlurEffect(o,e.effectsManager.effectElements[t])),r&&this.filters.push(r);s&&(e.globalData.defs.appendChild(o),e.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&e.addRenderableComponent(this)}function CVContextData(){var e;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getImage(this.assetData),this.initElement(e,t,r)}function CVCompElement(e,t,r){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(e,t){this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);for(var r=this.masksProperties.length,n=!1,i=0;i<r;i++)"n"!==this.masksProperties[i].mode&&(n=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);(this.hasMasks=n)&&this.element.addRenderableComponent(this)}function CVShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,r)}function CVSolidElement(e,t,r){this.initElement(e,t,r)}function CVTextElement(e,t,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,r)}function CVEffects(){}function HBaseElement(e,t,r){}function HSolidElement(e,t,r){this.initElement(e,t,r)}function HCompElement(e,t,r){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,r)}function HImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,r)}function HCameraElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initHierarchy();var n=PropertyFactory.getProp;if(this.pe=n(this,e.pe,0,0,this),e.ks.p.s?(this.px=n(this,e.ks.p.x,1,0,this),this.py=n(this,e.ks.p.y,1,0,this),this.pz=n(this,e.ks.p.z,1,0,this)):this.p=n(this,e.ks.p,1,0,this),e.ks.a&&(this.a=n(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to)for(var i=e.ks.or.k.length,o=0;o<i;o+=1)e.ks.or.k[o].to=null,e.ks.or.k[o].ti=null;this.or=n(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=n(this,e.ks.rx,0,degToRads,this),this.ry=n(this,e.ks.ry,0,degToRads,this),this.rz=n(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,r=_svgMatteSymbols.length;t<r;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var r=e.layerElement.parentNode;if(r){for(var n,i=r.children,o=0,s=i.length;o<s&&i[o]!==e.layerElement;)o+=1;o<=s-2&&(n=i[o+1]);var a=createNS("use");a.setAttribute("href","#"+t),n?r.insertBefore(a,n):r.appendChild(a)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){var r,n,i,o,s;this.findSymbol(t)||(r=createElementID(),(n=createNS("mask")).setAttribute("id",t.layerId),n.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t),(i=e.globalData.defs).appendChild(n),(o=createNS("symbol")).setAttribute("id",r),this.replaceInParent(t,r),o.appendChild(t.layerElement),i.appendChild(o),(s=createNS("use")).setAttribute("href","#"+r),n.appendChild(s),t.data.hd=!1,t.show()),e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,r=0,n=t.length;r<n;)t[r]&&t[r].data.ind===e&&this.setElementAsMask(this.elem,t[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){for(var t=this.filters.length,r=0;r<t;r+=1)this.filters[r].renderFrame(e)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);for(var r=0,r=this._length;r<e;r+=1)this.saved[r]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e,t=this.globalData;t.blendMode!==this.data.bm&&(t.blendMode=this.data.bm,e=getBlendMode(this.data.bm),t.canvasContext.globalCompositeOperation=e)},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){var e;this.hidden||this.data.hd||(this.renderTransform(),this.renderRenderable(),this.setBlendMode(),e=0===this.data.ty,this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){var e,t,r,n,i,o,s,a,l;!this.img.width||this.assetData.w===this.img.width&&this.assetData.h===this.img.height||((e=createTag("canvas")).width=this.assetData.w,e.height=this.assetData.h,n=e.getContext("2d"),s=(i=this.img.width)/(o=this.img.height),a=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio,a<s&&"xMidYMid slice"===l||s<a&&"xMidYMid slice"!==l?t=(r=o)*a:r=(t=i)/a,n.drawImage(this.img,(i-t)/2,(o-r)/2,t,r,0,0,this.assetData.w,this.assetData.h),this.img=e)},CVImageElement.prototype.renderInnerContent=function(e){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;0<=e;--e)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){for(var e=this.layers.length-1;0<=e;--e)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,r,n,i=this.element.finalTransform.mat,o=this.element.canvasContext,s=this.masksProperties.length;for(o.beginPath(),e=0;e<s;e++)if("n"!==this.masksProperties[e].mode){this.masksProperties[e].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),n=this.viewData[e].v,t=i.applyToPointArray(n.v[0][0],n.v[0][1],0),o.moveTo(t[0],t[1]);for(var a=n._length,l=1;l<a;l++)r=i.applyToTriplePoints(n.o[l-1],n.i[l],n.v[l]),o.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);r=i.applyToTriplePoints(n.o[l-1],n.i[0],n.v[0]),o.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var r,n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},i={};return"fl"==e.ty||"st"==e.ty?(i.c=PropertyFactory.getProp(this,e.c,1,255,this),i.c.k||(n.co="rgb("+bm_floor(i.c.v[0])+","+bm_floor(i.c.v[1])+","+bm_floor(i.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(i.s=PropertyFactory.getProp(this,e.s,1,null,this),i.e=PropertyFactory.getProp(this,e.e,1,null,this),i.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,e.g,this)),i.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"==e.ty||"gs"==e.ty?(n.lc=this.lcEnum[e.lc]||"round",n.lj=this.ljEnum[e.lj]||"round",1==e.lj&&(n.ml=e.ml),i.w=PropertyFactory.getProp(this,e.w,0,null,this),i.w.k||(n.wi=i.w.v),e.d&&(r=new DashProperty(this,e.d,"canvas",this),i.d=r,i.d.k||(n.da=i.d.dashArray,n.do=i.d.dashoffset[0]))):n.r=2===e.r?"evenodd":"nonzero",this.stylesList.push(n),i.style=n,i},CVShapeElement.prototype.createGroupElement=function(e){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;for(var e=this.itemsData.length,t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){for(var t=this.stylesList.length,r=0;r<t;r+=1)this.stylesList[r].closed||this.stylesList[r].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){for(var e=this.stylesList.length,t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){for(var t=e.length,r=0;r<t;r+=1)e[r].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,r,n,i){for(var o,s,a,l,u,h=e.length-1,c=[],p=[],d=[].concat(i),f=h;0<=f;--f){if((a=this.searchProcessedElement(e[f]))?t[f]=r[a-1]:e[f]._shouldRender=n,"fl"==e[f].ty||"st"==e[f].ty||"gf"==e[f].ty||"gs"==e[f].ty)a?t[f].style.closed=!1:t[f]=this.createStyleElement(e[f],d),c.push(t[f].style);else if("gr"==e[f].ty){if(a)for(s=t[f].it.length,o=0;o<s;o+=1)t[f].prevViewData[o]=t[f].it[o];else t[f]=this.createGroupElement(e[f]);this.searchShapes(e[f].it,t[f].it,t[f].prevViewData,n,d)}else"tr"==e[f].ty?(a||(u=this.createTransformElement(e[f]),t[f]=u),d.push(t[f]),this.addTransformToStyleList(t[f])):"sh"==e[f].ty||"rc"==e[f].ty||"el"==e[f].ty||"sr"==e[f].ty?a||(t[f]=this.createShapeElement(e[f])):"tm"==e[f].ty||"rd"==e[f].ty?(a?(l=t[f]).closed=!1:((l=ShapeModifiers.getModifier(e[f].ty)).init(this,e[f]),t[f]=l,this.shapeModifiers.push(l)),p.push(l)):"rp"==e[f].ty&&(a?(l=t[f]).closed=!0:(l=ShapeModifiers.getModifier(e[f].ty),(t[f]=l).init(this,e,f,t),this.shapeModifiers.push(l),n=!1),p.push(l));this.addProcessedElement(e[f],f+1)}for(this.removeTransformFromStyleList(),this.closeStyles(c),h=p.length,f=0;f<h;f+=1)p[f].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){for(var e,t,r,n,i,o,s,a,l=this.stylesList.length,u=this.globalData.renderer,h=this.globalData.canvasContext,c=0;c<l;c+=1)if(("st"!==(s=(a=this.stylesList[c]).type)&&"gs"!==s||0!==a.wi)&&a.data._shouldRender&&0!==a.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),i=a.elements,"st"===s||"gs"===s?(h.strokeStyle="st"===s?a.co:a.grd,h.lineWidth=a.wi,h.lineCap=a.lc,h.lineJoin=a.lj,h.miterLimit=a.ml||0):h.fillStyle="fl"===s?a.co:a.grd,u.ctxOpacity(a.coOp),"st"!==s&&"gs"!==s&&h.beginPath(),u.ctxTransform(a.preTransforms.finalTransform.props),t=i.length,e=0;e<t;e+=1){for("st"!==s&&"gs"!==s||(h.beginPath(),a.da&&(h.setLineDash(a.da),h.lineDashOffset=a.do)),n=(o=i[e].trNodes).length,r=0;r<n;r+=1)"m"==o[r].t?h.moveTo(o[r].p[0],o[r].p[1]):"c"==o[r].t?h.bezierCurveTo(o[r].pts[0],o[r].pts[1],o[r].pts[2],o[r].pts[3],o[r].pts[4],o[r].pts[5]):h.closePath();"st"!==s&&"gs"!==s||(h.stroke(),a.da&&h.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&h.fill(a.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,r,n){for(var i=e,o=t.length-1;0<=o;--o)"tr"==t[o].ty?(i=r[o].transform,this.renderShapeTransform(e,i)):"sh"==t[o].ty||"el"==t[o].ty||"rc"==t[o].ty||"sr"==t[o].ty?this.renderPath(t[o],r[o]):"fl"==t[o].ty?this.renderFill(t[o],r[o],i):"st"==t[o].ty?this.renderStroke(t[o],r[o],i):"gf"==t[o].ty||"gs"==t[o].ty?this.renderGradientFill(t[o],r[o],i):"gr"==t[o].ty?this.renderShape(i,t[o].it,r[o].it):t[o].ty;n&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var r,n,i=e.trNodes,o=t.paths,s=o._length;i.length=0;for(var a=e.transforms.finalTransform,l=0;l<s;l+=1){var u=o.shapes[l];if(u&&u.v){for(n=u._length,r=1;r<n;r+=1)1===r&&i.push({t:"m",p:a.applyToPointArray(u.v[0][0],u.v[0][1],0)}),i.push({t:"c",pts:a.applyToTriplePoints(u.o[r-1],u.i[r],u.v[r])});1===n&&i.push({t:"m",p:a.applyToPointArray(u.v[0][0],u.v[0][1],0)}),u.c&&n&&(i.push({t:"c",pts:a.applyToTriplePoints(u.o[r-1],u.i[0],u.v[0])}),i.push({t:"z"}))}}e.trNodes=i}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender)for(var r=t.styledShapes.length,n=0;n<r;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)},CVShapeElement.prototype.renderFill=function(e,t,r){var n=t.style;(t.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=t.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,r){var n=t.style;if(!n.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){for(var i,o,s,a,l,u=this.globalData.canvasContext,h=t.s.v,c=t.e.v,p=1===e.t?u.createLinearGradient(h[0],h[1],c[0],c[1]):(i=Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)),o=Math.atan2(c[1]-h[1],c[0]-h[0]),s=i*(1<=t.h.v?.99:t.h.v<=-1?-.99:t.h.v),a=Math.cos(o+t.a.v)*s+h[0],l=Math.sin(o+t.a.v)*s+h[1],u.createRadialGradient(a,l,0,h[0],h[1],i)),d=e.g.p,f=t.g.c,m=1,g=0;g<d;g+=1)t.g._hasOpacity&&t.g._collapsable&&(m=t.g.o[2*g+1]),p.addColorStop(f[4*g]/100,"rgba("+f[4*g+1]+","+f[4*g+2]+","+f[4*g+3]+","+m+")");n.grd=p}n.coOp=t.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(e,t,r){var n=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(n.da=i.dashArray,n.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(n.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(n.coOp=t.o.v*r.opacity),(t.w._mdf||this._isFirstFrame)&&(n.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var r=!1;e.sc&&(r=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var n,i=this.globalData.fontManager.getFontByName(e.f),o=e.l,s=this.mHelper;this.stroke=r,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,n=e.finalText.length;for(var a,l,u,h,c,p,d,f,m,g,y=this.data.singleShape,v=e.tr/1e3*e.finalSize,_=0,b=0,E=!0,S=0,w=0;w<n;w+=1){for(l=(a=this.globalData.fontManager.getCharData(e.finalText[w],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&a.data||{},s.reset(),y&&o[w].n&&(_=-v,b+=e.yOffset,b+=E?1:0,E=!1),d=(c=l.shapes?l.shapes[0].it:[]).length,s.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,s,o[w].line,_,b),m=createSizedArray(d),p=0;p<d;p+=1){for(h=c[p].ks.k.i.length,f=c[p].ks.k,g=[],u=1;u<h;u+=1)1==u&&g.push(s.applyToX(f.v[0][0],f.v[0][1],0),s.applyToY(f.v[0][0],f.v[0][1],0)),g.push(s.applyToX(f.o[u-1][0],f.o[u-1][1],0),s.applyToY(f.o[u-1][0],f.o[u-1][1],0),s.applyToX(f.i[u][0],f.i[u][1],0),s.applyToY(f.i[u][0],f.i[u][1],0),s.applyToX(f.v[u][0],f.v[u][1],0),s.applyToY(f.v[u][0],f.v[u][1],0));g.push(s.applyToX(f.o[u-1][0],f.o[u-1][1],0),s.applyToY(f.o[u-1][0],f.o[u-1][1],0),s.applyToX(f.i[0][0],f.i[0][1],0),s.applyToY(f.i[0][0],f.i[0][1],0),s.applyToX(f.v[0][0],f.v[0][1],0),s.applyToY(f.v[0][0],f.v[0][1],0)),m[p]=g}y&&(_+=o[w].l,_+=v),this.textSpans[S]?this.textSpans[S].elem=m:this.textSpans[S]={elem:m},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,r,n,i=this.canvasContext;this.finalTransform.mat.props,i.font=this.values.fValue,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);for(var o,s,a,l=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l,h=u.length,c=null,p=null,d=null,f=0;f<h;f+=1)if(!u[f].n){if((o=l[f])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(o.p),this.globalData.renderer.ctxOpacity(o.o)),this.fill){for(o&&o.fc?c!==o.fc&&(c=o.fc,i.fillStyle=o.fc):c!==this.values.fill&&(c=this.values.fill,i.fillStyle=this.values.fill),t=(s=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<t;e+=1)for(n=(a=s[e]).length,this.globalData.canvasContext.moveTo(a[0],a[1]),r=2;r<n;r+=6)this.globalData.canvasContext.bezierCurveTo(a[r],a[r+1],a[r+2],a[r+3],a[r+4],a[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(o&&o.sw?d!==o.sw&&(d=o.sw,i.lineWidth=o.sw):d!==this.values.sWidth&&(d=this.values.sWidth,i.lineWidth=this.values.sWidth),o&&o.sc?p!==o.sc&&(p=o.sc,i.strokeStyle=o.sc):p!==this.values.stroke&&(p=this.values.stroke,i.strokeStyle=this.values.stroke),t=(s=this.textSpans[f].elem).length,this.globalData.canvasContext.beginPath(),e=0;e<t;e+=1)for(n=(a=s[e]).length,this.globalData.canvasContext.moveTo(a[0],a[1]),r=2;r<n;r+=6)this.globalData.canvasContext.bezierCurveTo(a[r],a[r+1],a[r+2],a[r+3],a[r+4],a[r+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}o&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var r,n=0;n<t;)this.elements[n]&&this.elements[n].getBaseElement&&(r=this.elements[n].getBaseElement()),n+=1;r?this.layerElement.insertBefore(e,r):this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e,t;this.baseElement.style.fontSize=0,this.data.hasMask?(this.layerElement.appendChild(this.shapesContainer),e=this.svgElement):(e=createNS("svg"),t=this.comp.data?this.comp.data:this.globalData.compSize,e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)),this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){for(var r=e.length,n=0;n<r;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var r,n,i,o,s,a=e.sh.v,l=e.transformers,u=a._length;if(!(u<=1)){for(r=0;r<u-1;r+=1)n=this.getTransformedPoint(l,a.v[r]),i=this.getTransformedPoint(l,a.o[r]),o=this.getTransformedPoint(l,a.i[r+1]),s=this.getTransformedPoint(l,a.v[r+1]),this.checkBounds(n,i,o,s,t);a.c&&(n=this.getTransformedPoint(l,a.v[r]),i=this.getTransformedPoint(l,a.o[r]),o=this.getTransformedPoint(l,a.i[0]),s=this.getTransformedPoint(l,a.v[0]),this.checkBounds(n,i,o,s,t))}},HShapeElement.prototype.checkBounds=function(e,t,r,n,i){this.getBoundsOfCurve(e,t,r,n);var o=this.shapeBoundingBox;i.x=bm_min(o.left,i.x),i.xMax=bm_max(o.right,i.xMax),i.y=bm_min(o.top,i.y),i.yMax=bm_max(o.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,r,n){for(var i,o,s,a,l,u,h,c=[[e[0],n[0]],[e[1],n[1]]],p=0;p<2;++p)if(o=6*e[p]-12*t[p]+6*r[p],i=-3*e[p]+9*t[p]-9*r[p]+3*n[p],s=3*t[p]-3*e[p],o|=0,s|=0,0!=(i|=0))(l=o*o-4*s*i)<0||(0<(u=(-o+bm_sqrt(l))/(2*i))&&u<1&&c[p].push(this.calculateF(u,e,t,r,n,p)),0<(h=(-o-bm_sqrt(l))/(2*i))&&h<1&&c[p].push(this.calculateF(h,e,t,r,n,p)));else{if(0==o)continue;0<(a=-s/o)&&a<1&&c[p].push(this.calculateF(a,e,t,r,n,p))}this.shapeBoundingBox.left=bm_min.apply(null,c[0]),this.shapeBoundingBox.top=bm_min.apply(null,c[1]),this.shapeBoundingBox.right=bm_max.apply(null,c[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,c[1])},HShapeElement.prototype.calculateF=function(e,t,r,n,i,o){return bm_pow(1-e,3)*t[o]+3*bm_pow(1-e,2)*e*r[o]+3*(1-e)*bm_pow(e,2)*n[o]+bm_pow(e,3)*i[o]},HShapeElement.prototype.calculateBoundingBox=function(e,t){for(var r=e.length,n=0;n<r;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it&&this.calculateBoundingBox(e[n].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var r=!1;this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),r=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),r=!0),!r&&this.currentBBox.x===e.x&&this.currentBBox.y===e.y||(this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){var e;this.isMasked=this.checkMasks(),this.isMasked?(this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH),e=createNS("g"),this.maskedElement.appendChild(e),this.innerElem=e):(this.renderType="html",this.innerElem=this.layerElement),this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style;t.color=t.fill=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)",e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var r,n,i=this.globalData.fontManager.getFontByName(e.f);this.globalData.fontManager.chars||(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",i.fClass?this.innerElem.className=i.fClass:(t.fontFamily=i.fFamily,r=e.fWeight,n=e.fStyle,t.fontStyle=n,t.fontWeight=r));for(var o,s,a,l,u,h,c,p,d=e.l,f=d.length,m=this.mHelper,g=0,y=0;y<f;y+=1){this.globalData.fontManager.chars?(this.textPaths[g]?o=this.textPaths[g]:((o=createNS("path")).setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[g]?a=(s=this.textSpans[g]).children[0]:((s=createTag("div")).style.lineHeight=0,(a=createNS("svg")).appendChild(o),styleDiv(s)))):this.isMasked?o=this.textPaths[g]?this.textPaths[g]:createNS("text"):this.textSpans[g]?(s=this.textSpans[g],o=this.textPaths[g]):(styleDiv(s=createTag("span")),styleDiv(o=createTag("span")),s.appendChild(o)),this.globalData.fontManager.chars?(p=(h=this.globalData.fontManager.getCharData(e.finalText[y],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))?h.data:null,m.reset(),p&&p.shapes&&(l=p.shapes[0].it,m.scale(e.finalSize/100,e.finalSize/100),u=this.createPathShape(m,l),o.setAttribute("d",u)),this.isMasked?this.innerElem.appendChild(o):(this.innerElem.appendChild(s),p&&p.shapes?(document.body.appendChild(a),c=a.getBBox(),a.setAttribute("width",c.width+2),a.setAttribute("height",c.height+2),a.setAttribute("viewBox",c.x-1+" "+(c.y-1)+" "+(c.width+2)+" "+(c.height+2)),a.style.transform=a.style.webkitTransform="translate("+(c.x-1)+"px,"+(c.y-1)+"px)",d[y].yOffset=c.y-1):(a.setAttribute("width",1),a.setAttribute("height",1)),s.appendChild(a))):(o.textContent=d[y].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(o):(this.innerElem.appendChild(s),o.style.transform=o.style.webkitTransform="translate3d(0,"+-e.finalSize/1.2+"px,0)")),this.isMasked?this.textSpans[g]=o:this.textSpans[g]=s,this.textSpans[g].style.display="block",this.textPaths[g]=o,g+=1}for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){for(var e,t,r,n,i=0,o=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l,a=s.length,l=0;l<a;l+=1)s[l].n?i+=1:(t=this.textSpans[l],r=this.textPaths[l],e=o[i],i+=1,e._mdf.m&&(this.isMasked?t.setAttribute("transform",e.m):t.style.transform=t.style.webkitTransform=e.m),t.style.opacity=e.o,e.sw&&e._mdf.sw&&r.setAttribute("stroke-width",e.sw),e.sc&&e._mdf.sc&&r.setAttribute("stroke",e.sc),e.fc&&e._mdf.fc&&(r.setAttribute("fill",e.fc),r.style.color=e.fc));this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)&&(n=this.innerElem.getBBox(),this.currentBBox.w!==n.width&&(this.currentBBox.w=n.width,this.svgElement.setAttribute("width",n.width)),this.currentBBox.h!==n.height&&(this.currentBBox.h=n.height,this.svgElement.setAttribute("height",n.height)),this.currentBBox.w===n.width+2&&this.currentBBox.h===n.height+2&&this.currentBBox.x===n.x-1&&this.currentBBox.y===n.y-1||(this.currentBBox.w=n.width+2,this.currentBBox.h=n.height+2,this.currentBBox.x=n.x-1,this.currentBBox.y=n.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)"))}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){for(var e,t=this.comp.threeDElements.length,r=0;r<t;r+=1)"3d"===(e=this.comp.threeDElements[r]).type&&(e.perspectiveElem.style.perspective=e.perspectiveElem.style.webkitPerspective=this.pe.v+"px",e.container.style.transformOrigin=e.container.style.mozTransformOrigin=e.container.style.webkitTransformOrigin="0px 0px 0px",e.perspectiveElem.style.transform=e.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,r,n,i,o,s=this._isFirstFrame;if(this.hierarchy)for(h=this.hierarchy.length,c=0;c<h;c+=1)s=this.hierarchy[c].finalTransform.mProp._mdf||s;if(s||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(c=h=this.hierarchy.length-1;0<=c;--c){var a=this.hierarchy[c].finalTransform.mProp;this.mat.translate(-a.p.v[0],-a.p.v[1],a.p.v[2]),this.mat.rotateX(-a.or.v[0]).rotateY(-a.or.v[1]).rotateZ(a.or.v[2]),this.mat.rotateX(-a.rx.v).rotateY(-a.ry.v).rotateZ(a.rz.v),this.mat.scale(1/a.s.v[0],1/a.s.v[1],1/a.s.v[2]),this.mat.translate(a.a.v[0],a.a.v[1],a.a.v[2])}this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a&&(e=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]],t=Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)),r=[e[0]/t,e[1]/t,e[2]/t],n=Math.sqrt(r[2]*r[2]+r[0]*r[0]),i=Math.atan2(r[1],n),o=Math.atan2(r[0],-r[2]),this.mat.rotateY(o).rotateX(-i)),this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var l=!this._prevMat.equals(this.mat);if((l||this.pe._mdf)&&this.comp.threeDElements){for(var u,h=this.comp.threeDElements.length,c=0;c<h;c+=1)"3d"===(u=this.comp.threeDElements[c]).type&&(l&&(u.container.style.transform=u.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(u.perspectiveElem.style.perspective=u.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=(o3c={},p3c=[],q3c=0,r3c=0,s3c=0,t3c=!0,u3c=!1,o3c.registerAnimation=w3c,o3c.loadAnimation=function(e){var t=new AnimationItem;return z3c(t,null),t.setParams(e),t},o3c.setSpeed=function(e,t){for(var r=0;r<r3c;r+=1)p3c[r].animation.setSpeed(e,t)},o3c.setDirection=function(e,t){for(var r=0;r<r3c;r+=1)p3c[r].animation.setDirection(e,t)},o3c.play=function(e){for(var t=0;t<r3c;t+=1)p3c[t].animation.play(e)},o3c.pause=function(e){for(var t=0;t<r3c;t+=1)p3c[t].animation.pause(e)},o3c.stop=function(e){for(var t=0;t<r3c;t+=1)p3c[t].animation.stop(e)},o3c.togglePause=function(e){for(var t=0;t<r3c;t+=1)p3c[t].animation.togglePause(e)},o3c.searchAnimations=function(e,t,r){for(var n,i,o=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=o.length,a=0;a<s;a+=1)r&&o[a].setAttribute("data-bm-type",r),w3c(o[a],e);t&&0===s&&(r=r||"svg",(n=document.getElementsByTagName("body")[0]).innerHTML="",(i=createTag("div")).style.width="100%",i.style.height="100%",i.setAttribute("data-bm-type",r),n.appendChild(i),w3c(i,e))},o3c.resize=function(){for(var e=0;e<r3c;e+=1)p3c[e].animation.resize()},o3c.goToAndStop=function(e,t,r){for(var n=0;n<r3c;n+=1)p3c[n].animation.goToAndStop(e,t,r)},o3c.destroy=function(e){for(var t=r3c-1;0<=t;--t)p3c[t].animation.destroy(e)},o3c.freeze=function(){u3c=!0},o3c.unfreeze=function(){u3c=!1,C3c()},o3c.getRegisteredAnimations=function(){for(var e=p3c.length,t=[],r=0;r<e;r+=1)t.push(p3c[r].animation);return t},o3c),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader},o3c,p3c,q3c,r3c,s3c,t3c,u3c;function v3c(e){for(var t=0,r=e.target;t<r3c;)p3c[t].animation===r&&(p3c.splice(t,1),--t,--r3c,r.isPaused||y3c()),t+=1}function w3c(e,t){if(!e)return null;for(var r=0;r<r3c;){if(p3c[r].elem==e&&null!==p3c[r].elem)return p3c[r].animation;r+=1}var n=new AnimationItem;return z3c(n,e),n.setData(e,t),n}function x3c(){s3c+=1,C3c()}function y3c(){--s3c}function z3c(e,t){e.addEventListener("destroy",v3c),e.addEventListener("_active",x3c),e.addEventListener("_idle",y3c),p3c.push({elem:t,animation:e}),r3c+=1}function A3c(e){for(var t=e-q3c,r=0;r<r3c;r+=1)p3c[r].animation.advanceTime(t);q3c=e,s3c&&!u3c?window.requestAnimationFrame(A3c):t3c=!0}function B3c(e){q3c=e,window.requestAnimationFrame(A3c)}function C3c(){!u3c&&s3c&&t3c&&(window.requestAnimationFrame(B3c),t3c=!1)}extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){e.context&&(this.context=e.context),(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t=e.animType?e.animType:e.renderer?e.renderer:"svg";switch(t){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||(!1===e.loop?this.loop=!1:!0===e.loop?this.loop=!0:this.loop=parseInt(e.loop)),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!e.hasOwnProperty("autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,e.animationData?this.configAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(e.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(e,t){var r={wrapper:e,animationData:t?"object"==typeof t?t:JSON.parse(t):null},n=e.attributes;r.path=n.getNamedItem("data-animation-path")?n.getNamedItem("data-animation-path").value:n.getNamedItem("data-bm-path")?n.getNamedItem("data-bm-path").value:n.getNamedItem("bm-path")?n.getNamedItem("bm-path").value:"",r.animType=n.getNamedItem("data-anim-type")?n.getNamedItem("data-anim-type").value:n.getNamedItem("data-bm-type")?n.getNamedItem("data-bm-type").value:n.getNamedItem("bm-type")?n.getNamedItem("bm-type").value:n.getNamedItem("data-bm-renderer")?n.getNamedItem("data-bm-renderer").value:n.getNamedItem("bm-renderer")?n.getNamedItem("bm-renderer").value:"canvas";var i=n.getNamedItem("data-anim-loop")?n.getNamedItem("data-anim-loop").value:n.getNamedItem("data-bm-loop")?n.getNamedItem("data-bm-loop").value:n.getNamedItem("bm-loop")?n.getNamedItem("bm-loop").value:"";""===i||(r.loop="false"!==i&&("true"===i||parseInt(i)));var o=n.getNamedItem("data-anim-autoplay")?n.getNamedItem("data-anim-autoplay").value:n.getNamedItem("data-bm-autoplay")?n.getNamedItem("data-bm-autoplay").value:!n.getNamedItem("bm-autoplay")||n.getNamedItem("bm-autoplay").value;r.autoplay="false"!==o,r.name=n.getNamedItem("data-name")?n.getNamedItem("data-name").value:n.getNamedItem("data-bm-name")?n.getNamedItem("data-bm-name").value:n.getNamedItem("bm-name")?n.getNamedItem("bm-name").value:"","false"===(n.getNamedItem("data-anim-prerender")?n.getNamedItem("data-anim-prerender").value:n.getNamedItem("data-bm-prerender")?n.getNamedItem("data-bm-prerender").value:n.getNamedItem("bm-prerender")?n.getNamedItem("bm-prerender").value:"")&&(r.prerender=!1),this.setParams(r)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));for(var t,r=this.animationData.layers,n=r.length,i=e.layers,o=i.length,s=0;s<o;s+=1)for(t=0;t<n;){if(r[t].id==i[s].id){r[t]=i[s];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(n=e.assets.length,t=0;t<n;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(r,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){this.isLoaded||!this.renderer.globalData.fontManager.loaded()||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.subframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!=e||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!=e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(e){e&&this.name!=e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!=e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(e,t,r){r&&this.name!=r||(t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(e,t,r){this.goToAndStop(e,t,r),this.play()},AnimationItem.prototype.advanceTime=function(e){var t,r;!0!==this.isPaused&&!1!==this.isLoaded&&(r=!1,(t=this.currentRawFrame+e*this.frameModifier)>=this.totalFrames-1&&0<this.frameModifier?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(r=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(r=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),r&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete")))},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(0<this.frameModifier&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=e[0]-e[1],this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=e[1]-e[0],this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?r=e:this.currentRawFrame+this.firstFrame>t&&(r=t-e)),this.firstFrame=e,this.timeCompleted=this.totalFrames=t-e,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"==typeof e[0])for(var r=e.length,n=0;n<r;n+=1)this.segments.push(e[n]);else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!=e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t,r="";return e.e?r=e.p:this.assetsPath?(-1!==(t=e.p).indexOf("images/")&&(t=t.split("/")[1]),r=this.assetsPath+t):(r=this.path,r+=e.u?e.u:"",r+=e.p),r},AnimationItem.prototype.getAssetData=function(e){for(var t=0,r=this.assets.length;t<r;){if(e==this.assets[t].id)return this.assets[t];t+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions=(HW={},HW.initExpressions=function(e){var t=0,r=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==--t&&function(){for(var e=r.length,t=0;t<e;t+=1)r[t].release();r.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===r.indexOf(e)&&r.push(e)}},HW),HW,expressionsPlugin=Expressions,ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||"boolean"===e||"string"===e||t instanceof Number}function $bm_neg(e){var t=typeof e;if("number"==t||"boolean"==t||e instanceof Number)return-e;if($bm_isInstanceOfArray(e)){for(var r=e.length,n=[],i=0;i<r;i+=1)n[i]=-e[i];return n}return e.propType&&e.v}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var r=typeof e,n=typeof t;if("string"==r||"string"==n)return e+t;if(isNumerable(r,e)&&isNumerable(n,t))return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(n,t))return(e=e.slice(0))[0]=e[0]+t,e;if(isNumerable(r,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,o=e.length,s=t.length,a=[];i<o||i<s;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?a[i]=e[i]+t[i]:a[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return a}return 0}var add=sum;function sub(e,t){var r=typeof e,n=typeof t;if(isNumerable(r,e)&&isNumerable(n,t))return"string"==r&&(e=parseInt(e)),"string"==n&&(t=parseInt(t)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(n,t))return(e=e.slice(0))[0]=e[0]-t,e;if(isNumerable(r,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,o=e.length,s=t.length,a=[];i<o||i<s;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?a[i]=e[i]-t[i]:a[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return a}return 0}function mul(e,t){var r,n,i,o=typeof e,s=typeof t;if(isNumerable(o,e)&&isNumerable(s,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(s,t)){for(i=e.length,r=createTypedArray("float32",i),n=0;n<i;n+=1)r[n]=e[n]*t;return r}if(isNumerable(o,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,r=createTypedArray("float32",i),n=0;n<i;n+=1)r[n]=e*t[n];return r}return 0}function div(e,t){var r,n,i,o=typeof e,s=typeof t;if(isNumerable(o,e)&&isNumerable(s,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(s,t)){for(i=e.length,r=createTypedArray("float32",i),n=0;n<i;n+=1)r[n]=e[n]/t;return r}if(isNumerable(o,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,r=createTypedArray("float32",i),n=0;n<i;n+=1)r[n]=e/t[n];return r}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,r){var n;return r<t&&(n=r,r=t,t=n),Math.min(Math.max(e,t),r)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);t=t||helperLengthArray;for(var r=Math.min(e.length,t.length),n=0,i=0;i<r;i+=1)n+=Math.pow(t[i]-e[i],2);return Math.sqrt(n)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t=e[0],r=e[1],n=e[2],i=Math.max(t,r,n),o=Math.min(t,r,n);if(i==o)0;else{switch(i){case t:0;break;case r:0;break;case n:0}0}return e[3],1}function hue2rgb(e,t,r){return r<0&&(r+=1),1<r&&--r,r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hslToRgb(e){var t,r,n=e[0],i=e[1],o=e[2];return 0===i?0:(hue2rgb(r=2*o-(t=o<.5?o*(1+i):o+i-o*i),t,n+1/3),hue2rgb(r,t,n),hue2rgb(r,t,n-1/3)),e[3],1}function linear(e,t,r,n,i){var o;if(void 0!==n&&void 0!==i||(n=t,i=r,t=0,r=1),r<t&&(o=r,r=t,t=o),e<=t)return n;if(r<=e)return i;var s=r===t?0:(e-t)/(r-t);if(!n.length)return n+(i-n)*s;for(var a=n.length,l=createTypedArray("float32",a),u=0;u<a;u+=1)l[u]=n[u]+(i[u]-n[u])*s;return l}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var r=t.length;e=e||createTypedArray("float32",r);for(var n=createTypedArray("float32",r),i=BMMath.random(),o=0;o<r;o+=1)n[o]=e[o]+i*(t[o]-e[o]);return n}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,r,n){var i=e.length,o=shape_pool.newElement();o.setPathData(!!n,i);for(var s,a,l=[0,0],u=0;u<i;u+=1)s=t&&t[u]?t[u]:l,a=r&&r[u]?r[u]:l,o.setTripleAt(e[u][0],e[u][1],a[0]+e[u][0],a[1]+e[u][1],s[0]+e[u][0],s[1]+e[u][1],u,!0);return o}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[],scoped_bm_rt;if(data.xf)for(var i,len=data.xf.length,i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())");var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){for(var r,n=this.pv.length?this.pv.length:1,i=createTypedArray("float32",n),o=Math.floor(5*time),s=r=0;r<o;){for(s=0;s<n;s+=1)i[s]+=-t+2*t*BMMath.random();r+=1}var a=5*time,l=a-Math.floor(a),u=createTypedArray("float32",n);if(1<n){for(s=0;s<n;s+=1)u[s]=this.pv[s]+i[s]+(-t+2*t*BMMath.random())*l;return u}return this.pv+i[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]];Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]));return Math.atan2(r[1],r[2]),1}function easeOut(e,t,r,n,i){return applyEase(easeOutBez,e,t,r,n,i)}function easeIn(e,t,r,n,i){return applyEase(easeInBez,e,t,r,n,i)}function ease(e,t,r,n,i){return applyEase(easeInOutBez,e,t,r,n,i)}function applyEase(e,t,r,n,i,o){void 0===i?(i=r,o=n):t=(t-r)/(n-r);var s=e(t=1<t?1:t<0?0:t);if($bm_isInstanceOfArray(i)){for(var a=i.length,l=createTypedArray("float32",a),u=0;u<a;u+=1)l[u]=(o[u]-i[u])*s+i[u];return l}return(o-i)*s+i}function nearestKey(e){var t,r,n,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(r=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)r=1,n=data.k[0].t;else{for(t=0;t<i-1;t+=1){if(e===data.k[t].t){r=t+1,n=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){n=e-data.k[t].t>data.k[t+1].t-e?(r=t+2,data.k[t+1].t):(r=t+1,data.k[t].t);break}}-1===r&&(r=t+1,n=data.k[t].t)}else n=r=0;var o={};return o.index=r,o.time=n/elem.comp.globalData.frameRate,o}function key(e){var t;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);--e,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};for(var r=data.k[e].hasOwnProperty("s")?data.k[e].s:data.k[e-1].e,n=r.length,i=0;i<n;i+=1)t[i]=r[i],t.value[i]=r[i];return t}function framesToTime(e,t){return e/(t=t||elem.comp.globalData.frameRate)}function timeToFrames(e,t){return e||0===e||(e=time),e*(t=t||elem.comp.globalData.frameRate)}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value&&(void 0===t?value.substring(e):value.substring(e,t))}function substr(e,t){return"string"==typeof value&&(void 0===t?value.substr(e):value.substr(e,t))}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),($bm_transform=transform)&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect=effect||thisLayer(4),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(e,t,r){t.x&&(r.k=!0,r.x=!0,r.initiateExpression=ExpressionManager.initiateExpression,r.effectsSequence.push(r.initiateExpression(e,t,r).bind(r)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),r=this.getValueAtTime(e+-.01),n=0;if(t.length){for(var i=0;i<t.length;i+=1)n+=Math.pow(r[i]-t[i],2);n=100*Math.sqrt(n)}else n=0;return n},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,r,n=this.getValueAtTime(e),i=this.getValueAtTime(e+-.001);if(n.length)for(t=createTypedArray("float32",n.length),r=0;r<n.length;r+=1)t[r]=(i[r]-n[r])/-.001;else t=(i-n)/-.001;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function a(e,t,r){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var n,i,o,s,a,l=this.comp.renderedFrame,u=this.keyframes,h=u[u.length-1].t;if(l<=h)return this.pv;if(r?i=h-(n=t?Math.abs(h-elem.comp.globalData.frameRate*t):Math.max(0,h-this.elem.data.ip)):((!t||t>u.length-1)&&(t=u.length-1),n=h-(i=u[u.length-1-t].t)),"pingpong"===e){if(Math.floor((l-i)/n)%2!=0)return this.getValueAtTime((n-(l-i)%n+i)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var c=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime(h/this.comp.globalData.frameRate,0),d=this.getValueAtTime(((l-i)%n+i)/this.comp.globalData.frameRate,0),f=Math.floor((l-i)/n);if(this.pv.length){for(s=(a=new Array(c.length)).length,o=0;o<s;o+=1)a[o]=(p[o]-c[o])*f+d[o];return a}return(p-c)*f+d}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(a=new Array(m.length)).length,o=0;o<s;o+=1)a[o]=m[o]+(m[o]-g[o])*((l-h)/this.comp.globalData.frameRate)/5e-4;return a}return m+(l-h)/.001*(m-g)}}return this.getValueAtTime(((l-i)%n+i)/this.comp.globalData.frameRate,0)}function l(e,t,r){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var n,i,o,s,a,l=this.comp.renderedFrame,u=this.keyframes,h=u[0].t;if(h<=l)return this.pv;if(r?i=h+(n=t?Math.abs(elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-h)):((!t||t>u.length-1)&&(t=u.length-1),n=(i=u[t].t)-h),"pingpong"===e){if(Math.floor((h-l)/n)%2==0)return this.getValueAtTime(((h-l)%n+h)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var c=this.getValueAtTime(h/this.comp.globalData.frameRate,0),p=this.getValueAtTime(i/this.comp.globalData.frameRate,0),d=this.getValueAtTime((n-(h-l)%n+h)/this.comp.globalData.frameRate,0),f=Math.floor((h-l)/n)+1;if(this.pv.length){for(s=(a=new Array(c.length)).length,o=0;o<s;o+=1)a[o]=d[o]-(p[o]-c[o])*f;return a}return d-(p-c)*f}if("continue"===e){var m=this.getValueAtTime(h/this.comp.globalData.frameRate,0),g=this.getValueAtTime((h+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=(a=new Array(m.length)).length,o=0;o<s;o+=1)a[o]=m[o]+(m[o]-g[o])*(h-l)/.001;return a}return m+(m-g)*(h-l)/.001}}return this.getValueAtTime((n-(h-l)%n+h)/this.comp.globalData.frameRate,0)}function u(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;for(var r,n=this.comp.renderedFrame/this.comp.globalData.frameRate,i=n-e,o=1<t?(n+e-i)/(t-1):1,s=0,a=0,l=this.pv.length?createTypedArray("float32",this.pv.length):0;s<t;){if(r=this.getValueAtTime(i+s*o),this.pv.length)for(a=0;a<this.pv.length;a+=1)l[a]+=r[a];else l+=r;s+=1}if(this.pv.length)for(a=0;a<this.pv.length;a+=1)l[a]/=t;else l/=t;return l}var i=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,r){var n=i(e,t,r);return n.dynamicProperties.length?n.getValueAtTime=function(e){console.warn("Transform at time not supported")}.bind(n):n.getValueAtTime=function(e){}.bind(n),n.setGroupProperty=expressionHelpers.setGroupProperty,n};var h=PropertyFactory.getProp;PropertyFactory.getProp=function(e,t,r,n,i){var o=h(e,t,r,n,i);o.kf?o.getValueAtTime=expressionHelpers.getValueAtTime.bind(o):o.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o.loopOut=a,o.loopIn=l,o.smooth=u,o.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(o),o.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(o),o.numKeys=1===t.a?t.k.length:0,o.propertyIndex=t.ix;var s=0;return 0!==r&&(s=createTypedArray("float32",1===t.a?t.k[0].s.length:t.k.length)),o._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:s},expressionHelpers.searchExpressions(e,t,o),o.k&&i.addDynamicProperty(o),o};var e=ShapePropertyFactory.getConstructorFunction(),t=ShapePropertyFactory.getKeyframedConstructorFunction();function r(){}r.prototype={vertices:function(e,t){this.k&&this.getValue();var r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0));for(var n=r._length,i=r[e],o=r.v,s=createSizedArray(n),a=0;a<n;a+=1)s[a]="i"===e||"o"===e?[i[a][0]-o[a][0],i[a][1]-o[a][1]]:[i[a][0],i[a][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var r=this.v;void 0!==t&&(r=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(r));for(var n=this._segmentsLength,i=n.lengths,o=n.totalLength*e,s=0,a=i.length,l=0;s<a;){if(l+i[s].addedLength>o){var u=r.c&&s===a-1?0:s+1,h=(o-l)/i[s].addedLength,c=bez.getPointInSegment(r.v[s],r.v[u],r.o[s],r.i[u],h,i[s]);break}l+=i[s].addedLength,s+=1}return c=c||(r.c?[r.v[0][0],r.v[0][1]]:[r.v[r._length-1][0],r.v[r._length-1][1]])},vectorOnPath:function(e,t,r){e=1==e?this.v.c?0:.999:e;var n=this.pointOnPath(e,t),i=this.pointOnPath(e+.001,t),o=i[0]-n[0],s=i[1]-n[1],a=Math.sqrt(Math.pow(o,2)+Math.pow(s,2));return 0===a?[0,0]:"tangent"===r?[o/a,s/a]:[-s/a,o/a]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([r],e),extendPrototype([r],t),t.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},t.prototype.initiateExpression=ExpressionManager.initiateExpression;var s=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,r,n,i){var o=s(e,t,r,n,i);return o.propertyIndex=t.ix,o.lock=!1,3===r?expressionHelpers.searchExpressions(e,t.pt,o):4===r&&expressionHelpers.searchExpressions(e,t.ks,o),o.k&&e.addDynamicProperty(o),o}}(),TextProperty.prototype.getExpressionValue=function(e,t){var r=this.calculateExpression(t);if(e.t===r)return e;var n={};return this.copyData(n,e),n.t=r.toString(),n.__complete=!1,n},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0};var ShapeExpressionInterface=function(e,t,r){var n;function i(e){if("number"==typeof e)return n[e-1];for(var t=0,r=n.length;t<r;){if(n[t]._name===e)return n[t];t+=1}}return i.propertyGroup=r,n=gbd(e,t,i),i.numProperties=n.length,i},TextExpressionInterface=function(t){var r;function e(){}return Object.defineProperty(e,"sourceText",{get:function(){t.textProperty.getValue();var e=t.textProperty.currentData.t;return void 0!==e&&(t.textProperty.currentData.t=void 0,(r=new String(e)).value=e||new String(e)),r}}),e},LayerExpressionInterface=function(t){var r;function n(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return n.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return r;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return n.effect}}n.toWorld=xdd,n.fromWorld=ydd,n.toComp=xdd,n.fromComp=zdd,n.sampleImage=Add,n.sourceRectAtTime=t.sourceRectAtTime.bind(t);var e=getDescriptor(r=TransformExpressionInterface((n._elem=t).finalTransform.mProp),"anchorPoint");return Object.defineProperties(n,{hasParent:{get:function(){return t.hierarchy.length}},parent:{get:function(){return t.hierarchy[0].layerInterface}},rotation:getDescriptor(r,"rotation"),scale:getDescriptor(r,"scale"),position:getDescriptor(r,"position"),opacity:getDescriptor(r,"opacity"),anchorPoint:e,anchor_point:e,transform:{get:function(){return r}},active:{get:function(){return t.isInRange}}}),n.startTime=t.data.st,n.index=t.data.ind,n.source=t.data.refId,n.height=0===t.data.ty?t.data.h:100,n.width=0===t.data.ty?t.data.w:100,n.inPoint=t.data.ip/t.comp.globalData.frameRate,n.outPoint=t.data.op/t.comp.globalData.frameRate,n._name=t.data.nm,n.registerMaskInterface=function(e){n.mask=new MaskManagerInterface(e,t)},n.registerEffectsInterface=function(e){n.effect=e},n},CompExpressionInterface=function(n){function e(e){for(var t=0,r=n.layers.length;t<r;){if(n.layers[t].nm===e||n.layers[t].ind===e)return n.elements[t].layerInterface;t+=1}return null}return Object.defineProperty(e,"_name",{value:n.data.nm}),(e.layer=e).pixelAspect=1,e.height=n.data.h||n.globalData.compSize.h,e.width=n.data.w||n.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/n.globalData.frameRate,e.displayStartTime=0,e.numLayers=n.layers.length,e},TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity}}var r;return Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p&&(r=ExpressionPropertyInterface(e.p)),Object.defineProperty(t,"position",{get:function(){return e.p?r():[e.px.v,e.py.v,e.pz?e.pz.v:0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},ProjectInterface=function(){function e(e){for(var t=0,r=this.compositions.length;t<r;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}}return e.compositions=[],e.currentFrame=0,e.registerComposition=ded,e},EffectsExpressionInterface={createEffectsInterface:function(i,e){if(i.effectsManager){for(var o=[],t=i.data.ef,r=i.effectsManager.effectElements.length,n=0;n<r;n+=1)o.push(jed(t[n],i.effectsManager.effectElements[n],e,i));return function(e){for(var t=i.data.ef||[],r=0,n=t.length;r<n;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return o[r];r+=1}}}}},MaskManagerInterface=(Object.defineProperty(Oed.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(Oed.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t,e){for(var r=createSizedArray(t.viewData.length),n=t.viewData.length,i=0;i<n;i+=1)r[i]=new Oed(t.viewData[i],t.masksProperties[i]);return function(e){for(i=0;i<n;){if(t.masksProperties[i].nm===e)return r[i];i+=1}}}),ExpressionPropertyInterface=(Xed={pv:0,v:0,mult:1},Yed={pv:[0,0,0],v:[0,0,0],mult:1},function(e){return e?("unidimensional"===e.propType?function(e){e&&"pv"in e||(e=Xed);var t=1/e.mult,r=e.pv*t,n=new Number(r);return n.value=r,Zed(n,e,"unidimensional"),function(){return e.k&&e.getValue(),r=e.v*t,n.value!==r&&((n=new Number(r)).value=r,Zed(n,e,"unidimensional")),n}}:function(t){t&&"pv"in t||(t=Yed);var r=1/t.mult,n=t.pv.length,i=createTypedArray("float32",n),o=createTypedArray("float32",n);return i.value=o,Zed(i,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<n;e+=1)i[e]=o[e]=t.v[e]*r;return i}})(e):$ed}),q5,r5,Xed,Yed;function Zed(n,i,o){Object.defineProperty(n,"velocity",{get:function(){return i.getVelocityAtTime(i.comp.currentFrame)}}),n.numKeys=i.keyframes?i.keyframes.length:0,n.key=function(e){if(n.numKeys){var t="s"in i.keyframes[e-1]?i.keyframes[e-1].s:"e"in i.keyframes[e-2]?i.keyframes[e-2].e:i.keyframes[e-2].s,r="unidimensional"===o?new Number(t):Object.assign({},t);return r.time=i.keyframes[e-1].t/i.elem.comp.globalData.frameRate,r}return 0},n.valueAtTime=i.getValueAtTime,n.speedAtTime=i.getSpeedAtTime,n.velocityAtTime=i.getVelocityAtTime,n.propertyGroup=i.propertyGroup}function $ed(){return Xed}function Oed(e,t){this._mask=e,this._data=t}function jed(i,e,t,r){for(var o=[],n=i.ef.length,s=0;s<n;s+=1)5===i.ef[s].ty?o.push(jed(i.ef[s],e.effectElements[s],e.effectElements[s].propertyGroup,r)):o.push(function(e,t,r,n){var i=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(n),function(){return 10===t?r.comp.compInterface(e.p.v):i()}}(e.effectElements[s],i.ef[s].ty,r,a));function a(e){return 1===e?l:t(e-1)}var l=function(e){for(var t=i.ef,r=0,n=t.length;r<n;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?o[r]:o[r]();r+=1}return o[0]()};return l.propertyGroup=a,"ADBE Color Control"===i.mn&&Object.defineProperty(l,"color",{get:function(){return o[0]()}}),Object.defineProperty(l,"numProperties",{get:function(){return i.np}}),l.active=l.enabled=0!==i.en,l}function ded(e){this.compositions.push(e)}function xdd(e,t){var r=new Matrix;if(r.reset(),this._elem.finalTransform.mProp.applyToMatrix(r),this._elem.hierarchy&&this._elem.hierarchy.length){for(var n=this._elem.hierarchy.length,i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(r);return r.applyToPointArray(e[0],e[1],e[2]||0)}return r.applyToPointArray(e[0],e[1],e[2]||0)}function ydd(e,t){var r=new Matrix;if(r.reset(),this._elem.finalTransform.mProp.applyToMatrix(r),this._elem.hierarchy&&this._elem.hierarchy.length){for(var n=this._elem.hierarchy.length,i=0;i<n;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(r);return r.inversePoint(e)}return r.inversePoint(e)}function zdd(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){for(var r=this._elem.hierarchy.length,n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function Add(){return[1,1,1,1]}function gbd(e,t,r){for(var n,i,o,s=[],a=e?e.length:0,l=0;l<a;l+=1)"gr"==e[l].ty?s.push(function(e,t,r){var n=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return n.content;default:return n.transform}};n.propertyGroup=function(e){return 1===e?n:r(e-1)};var i,o,s,a,l,u=(i=e,o=t,s=n.propertyGroup,(l=function(e){for(var t=0,r=a.length;t<r;){if(a[t]._name===e||a[t].mn===e||a[t].propertyIndex===e||a[t].ix===e||a[t].ind===e)return a[t];t+=1}if("number"==typeof e)return a[e-1]}).propertyGroup=function(e){return 1===e?l:s(e-1)},a=gbd(i.it,o.it,l.propertyGroup),l.numProperties=a.length,l.propertyIndex=i.cix,l._name=i.nm,l),h=function(t,e,r){function n(e){return 1==e?i:r(--e)}function i(e){return t.a.ix===e||"Anchor Point"===e?i.anchorPoint:t.o.ix===e||"Opacity"===e?i.opacity:t.p.ix===e||"Position"===e?i.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?i.rotation:t.s.ix===e||"Scale"===e?i.scale:t.sk&&t.sk.ix===e||"Skew"===e?i.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?i.skewAxis:void 0}return e.transform.mProps.o.setGroupProperty(n),e.transform.mProps.p.setGroupProperty(n),e.transform.mProps.a.setGroupProperty(n),e.transform.mProps.s.setGroupProperty(n),e.transform.mProps.r.setGroupProperty(n),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(n),e.transform.mProps.sa.setGroupProperty(n)),e.transform.op.setGroupProperty(n),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),i.ty="tr",i.mn=t.mn,i.propertyGroup=r,i}(e.it[e.it.length-1],t.it[t.it.length-1],n.propertyGroup);return n.content=u,n.transform=h,Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n.numProperties=e.np,n.propertyIndex=e.ix,n.nm=e.nm,n.mn=e.mn,n}(e[l],t[l],r)):"fl"==e[l].ty?s.push((n=e[l],i=t[l],o=r,Object.defineProperties(u,{color:{get:ExpressionPropertyInterface(i.c)},opacity:{get:ExpressionPropertyInterface(i.o)},_name:{value:n.nm},mn:{value:n.mn}}),i.c.setGroupProperty(o),i.o.setGroupProperty(o),u)):"st"==e[l].ty?s.push(function(e,t,r){function n(e){return 1===e?ob:r(e-1)}function i(e){return 1===e?a:n(e-1)}var o,s=e.d?e.d.length:0,a={};for(o=0;o<s;o+=1)Object.defineProperty(a,e.d[o].nm,{get:ExpressionPropertyInterface(t.d.dataProps[o].p)}),t.d.dataProps[o].p.setGroupProperty(i);function l(e){return"Color"===e||"color"===e?l.color:"Opacity"===e||"opacity"===e?l.opacity:"Stroke Width"===e||"stroke width"===e?l.strokeWidth:void 0}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return a}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(n),t.o.setGroupProperty(n),t.w.setGroupProperty(n),l}(e[l],t[l],r)):"tm"==e[l].ty?s.push(function(t,e,r){function n(e){return 1==e?i:r(--e)}function i(e){return e===t.e.ix||"End"===e||"end"===e?i.end:e===t.s.ix?i.start:e===t.o.ix?i.offset:void 0}return i.propertyIndex=t.ix,e.s.setGroupProperty(n),e.e.setGroupProperty(n),e.o.setGroupProperty(n),i.propertyIndex=t.ix,i.propertyGroup=r,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[l],t[l],r)):"tr"==e[l].ty||("el"==e[l].ty?s.push(function(t,e,r){function n(e){return 1==e?o:r(--e)}o.propertyIndex=t.ix;var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.s.ix===e?o.size:void 0}return i.s.setGroupProperty(n),i.p.setGroupProperty(n),Object.defineProperties(o,{size:{get:ExpressionPropertyInterface(i.s)},position:{get:ExpressionPropertyInterface(i.p)},_name:{value:t.nm}}),o.mn=t.mn,o}(e[l],t[l],r)):"sr"==e[l].ty?s.push(function(t,e,r){function n(e){return 1==e?o:r(--e)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.rotation:t.pt.ix===e?o.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?o.outerRadius:t.os.ix===e?o.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?o.innerRoundness:void 0:o.innerRadius}return o.propertyIndex=t.ix,i.or.setGroupProperty(n),i.os.setGroupProperty(n),i.pt.setGroupProperty(n),i.p.setGroupProperty(n),i.r.setGroupProperty(n),t.ir&&(i.ir.setGroupProperty(n),i.is.setGroupProperty(n)),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},rotation:{get:ExpressionPropertyInterface(i.r)},points:{get:ExpressionPropertyInterface(i.pt)},outerRadius:{get:ExpressionPropertyInterface(i.or)},outerRoundness:{get:ExpressionPropertyInterface(i.os)},innerRadius:{get:ExpressionPropertyInterface(i.ir)},innerRoundness:{get:ExpressionPropertyInterface(i.is)},_name:{value:t.nm}}),o.mn=t.mn,o}(e[l],t[l],r)):"sh"==e[l].ty?s.push(function(e,t,r){var n=t.sh;function i(e){if("Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e)return i.path}return n.setGroupProperty(function(e){return 1==e?i:r(--e)}),Object.defineProperties(i,{path:{get:function(){return n.k&&n.getValue(),n}},shape:{get:function(){return n.k&&n.getValue(),n}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn}}),i}(e[l],t[l],r)):"rc"==e[l].ty?s.push(function(t,e,r){function n(e){return 1==e?o:r(--e)}var i="tm"===e.sh.ty?e.sh.prop:e.sh;function o(e){return t.p.ix===e?o.position:t.r.ix===e?o.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?o.size:void 0}return o.propertyIndex=t.ix,i.p.setGroupProperty(n),i.s.setGroupProperty(n),i.r.setGroupProperty(n),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},roundness:{get:ExpressionPropertyInterface(i.r)},size:{get:ExpressionPropertyInterface(i.s)},_name:{value:t.nm}}),o.mn=t.mn,o}(e[l],t[l],r)):"rd"==e[l].ty?s.push(function(t,e,r){var n=e;function i(e){if(t.r.ix===e||"Round Corners 1"===e)return i.radius}return i.propertyIndex=t.ix,n.rd.setGroupProperty(function(e){return 1==e?i:r(--e)}),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(n.rd)},_name:{value:t.nm}}),i.mn=t.mn,i}(e[l],t[l],r)):"rp"==e[l].ty&&s.push(function(t,e,r){function n(e){return 1==e?o:r(--e)}var i=e;function o(e){return t.c.ix===e||"Copies"===e?o.copies:t.o.ix===e||"Offset"===e?o.offset:void 0}return o.propertyIndex=t.ix,i.c.setGroupProperty(n),i.o.setGroupProperty(n),Object.defineProperties(o,{copies:{get:ExpressionPropertyInterface(i.c)},offset:{get:ExpressionPropertyInterface(i.o)},_name:{value:t.nm}}),o.mn=t.mn,o}(e[l],t[l],r)));function u(e){return"Color"===e||"color"===e?u.color:"Opacity"===e||"opacity"===e?u.opacity:void 0}return s}function SliderEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function AngleEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function ColorEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function PointEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function LayerIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function MaskIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function CheckboxEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(e,t){var r=e.ef||[];this.effectElements=[];for(var n,i=r.length,o=0;o<i;o++)n=new GroupEffect(r[o],t),this.effectElements.push(n)}function GroupEffect(e,t){this.init(e,t)}function Tfd(e,t){return this.textIndex=e+1,this.textTotal=t,this.v=this.getValue()*this.mult,this.v}q5=function(e,t){this.pv=1,this.comp=e.comp,this.elem=e,this.mult=.01,this.propType="textSelector",this.textTotal=t.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(e,t,this),this.getMult=Tfd,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty},r5=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(e,t,r){return 1===t.t?new q5(e,t,r):r5(e,t,r)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);for(var r,n=this.data.ef.length,i=this.data.ef,o=0;o<n;o+=1){switch(r=null,i[o].ty){case 0:r=new SliderEffect(i[o],t,this);break;case 1:r=new AngleEffect(i[o],t,this);break;case 2:r=new ColorEffect(i[o],t,this);break;case 3:r=new PointEffect(i[o],t,this);break;case 4:case 7:r=new CheckboxEffect(i[o],t,this);break;case 10:r=new LayerIndexEffect(i[o],t,this);break;case 11:r=new MaskIndexEffect(i[o],t,this);break;case 5:r=new EffectsManager(i[o],t,this);break;default:r=new NoValueEffect(i[o],t,this)}r&&this.effectElements.push(r)}};var lottie={},_isFrozen=!1;function setLocationHref(e){locationHref=e}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&1<e&&(defaultCurveSegments=e);roundValues(!(50<=defaultCurveSegments))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");if(decodeURIComponent(n[0])==e)return decodeURIComponent(n[1])}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.__getFactory=getFactory,lottie.version="5.6.4";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="",scripts,index,myScript,queryString,renderer;standalone&&(scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src.replace(/^[^\?]+\??/,""),renderer=getQueryVariable("renderer"));var readyStateCheckInterval=setInterval(checkReady,100);return lottie});var mpf=33,splinePrecision=25,svgns="http://www.w3.org/2000/svg",smilanimns="http://www.w3.org/2001/smil-animation",smil2ns="http://www.w3.org/2001/SMIL20",smil21ns="http://www.w3.org/2005/SMIL21",smil3ns="http://www.w3.org/ns/SMIL30",timesheetns="http://www.w3.org/2007/07/SMIL30/Timesheets",xlinkns="http://www.w3.org/1999/xlink",animators=new Array,id2anim=new Object,animations=new Array,timeZero;function initSMIL(){if("fake"!=document.documentElement.getAttribute("smiling")){document.documentElement.setAttribute("smiling","fake"),smile(document),timeZero=new Date;for(var e=0,t=animators.length;e<t;++e)animators[e].register();window.setInterval(animate,mpf)}}function getURLCallback(e){e.success&&smile(parseXML(e.content,document))}function xhrCallback(){4==this.readyState&&200==this.status&&null!=this.responseXML&&smile(this.responseXML)}function smile(e){for(var t=null,r=e.getElementsByTagName("*"),n=0,i=r.length;n<i;++n){var o=r.item(n),s=o.namespaceURI,a=o.localName;if("link"==a.toLowerCase()&&"timesheet"==o.getAttribute("rel")&&"application/smil+xml"==o.getAttribute("type")||(s==timesheetns||s==smil3ns)&&"timesheet"==a){var l=o.getAttribute("timesheet"==a?"src":"href");l&&0<l.length&&(t||(t=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):null)&&(t.overrideMimeType&&t.overrideMimeType("text/xml"),t.onreadystatechange=xhrCallback),t?(t.open("GET",l,!1),t.send(null)):window.getURL&&window.parseXML&&getURL(l,getURLCallback))}else{var u=document.implementation;if((s==svgns&&!u.hasFeature("http://www.w3.org/TR/SVG11/feature#Animation","1.1")||s==smilanimns&&!u.hasFeature(smilanimns,"1.1")||s==smil2ns&&!u.hasFeature(smil2ns,"2.0")||s==smil21ns&&!u.hasFeature(smil21ns,"2.1")||s==smil3ns&&!u.hasFeature(smil3ns,"3.0")||s==timesheetns&&!u.hasFeature(timesheetns,"1.0"))&&("set"==a||"animate"==a||"animateColor"==a||"animateMotion"==a||"animateTransform"==a)){for(var h=getTargets(o),c=new Array,p=0;p<h.length;++p){var d=new Animator(o,h[p],p);animators.push(d),c[p]=d}o.animators=c;var f=o.getAttribute("id");f&&(id2anim[f]=o)}}}}function getTargets(e){if(e.hasAttribute("select"))return select(e);var t=e.getAttributeNS(xlinkns,"href");if(null!=t&&""!=t)return[document.getElementById(t.substring(1))];var r=e.parentNode;return"item"!=r.localName||r.namespaceURI!=timesheetns&&r.namespaceURI!=smil3ns?[r]:select(r)}function select(e){for(var t=e.getAttribute("select"),r=e.parentNode;r&&1==r.nodeType;)"item"!=r.localName||r.namespaceURI!=timesheetns&&r.namespaceURI!=smil3ns||(t=r.getAttribute("select")+" "+t),r=r.parentNode;return document.querySelectorAll(t)}function getEventTargetsById(e,t){var r=null;if("prev"==e)for(r=t.previousSibling;r&&1!=r.nodeType;)r=r.previousSibling;return null==r&&(r=document.getElementById(e)),null==r&&(r=id2anim[e]),null==r?null:r.animators?r.animators:[r]}function Animator(e,t,r){if(this.anim=e,this.target=t,this.index=r,e.targetElement=t,this.attributeType=e.getAttribute("attributeType"),this.attributeName=e.getAttribute("attributeName"),"CSS"!=this.attributeType&&"XML"!=this.attributeType&&(propDefaults[this.attributeName]&&this.target.style.getPropertyValue(this.attributeName)?this.attributeType="CSS":this.attributeType="XML"),"XML"==this.attributeType&&this.attributeName){this.namespace=null;var n=this.attributeName.indexOf(":");if(-1!=n){var i=this.attributeName.substring(0,n);this.attributeName=this.attributeName.substring(n+1);for(var o=t;o&&1==o.nodeType;){var s=o.getAttributeNS("http://www.w3.org/2000/xmlns/",i);if(s){this.namespace=s;break}o=o.parentNode}}}if("d"==this.attributeName?this.d():"points"==this.attributeName&&(this.isInterpolable=function(e,t){return!0},this.interpolate=function(e,t,r){for(var n,i,o,s,a=new Array,l=0;l<e.length&&l<t.length;++l)n=e[l].split(","),i=t[l].split(","),o=parseFloat(n[0])+(parseFloat(i[0])-n[0])*r,s=parseFloat(n[1])+(parseFloat(i[1])-n[1])*r,a.push(o+","+s);return a.join(" ")},this.normalize=function(e){for(var t=e.split(" "),r=t.length-1;0<=r;--r)""==t[r]&&t.splice(r,1);return t}),this.from=e.getAttribute("from"),this.to=e.getAttribute("to"),this.by=e.getAttribute("by"),this.values=e.getAttribute("values"),this.values&&(this.values=this.values.trim(),";"==this.values.substring(this.values.length-1)&&(this.values=this.values.substring(0,this.values.length-1))),this.calcMode=e.getAttribute("calcMode"),this.keyTimes=e.getAttribute("keyTimes"),this.keyTimes){this.keyTimes=this.keyTimes.split(";");for(var a=0;a<this.keyTimes.length;++a)this.keyTimes[a]=parseFloat(this.keyTimes[a]);if(this.keyPoints=e.getAttribute("keyPoints"),this.keyPoints){this.keyPoints=this.keyPoints.split(";");for(a=0;a<this.keyPoints.length;++a)this.keyPoints[a]=parseFloat(this.keyPoints[a])}}if(this.keySplines=e.getAttribute("keySplines"),this.keySplines){this.keySplines=this.keySplines.split(";");for(a=0;a<this.keySplines.length;++a)this.keySplines[a]=createPath("M 0 0 C "+this.keySplines[a]+" 1 1")}this.dur=e.getAttribute("dur"),this.dur&&"indefinite"!=this.dur&&(this.computedDur=toMillis(this.dur)),this.max=e.getAttribute("max"),this.max&&"indefinite"!=this.max&&(this.computedMax=toMillis(this.max),!isNaN(this.computedMax)&&0<this.computedMax&&(!this.computedDur||this.computedDur>this.computedMax)&&(this.computedDur=this.computedMax)),this.min=e.getAttribute("min"),this.min&&(this.computedMin=toMillis(this.min),(!this.computedDur||this.computedDur<this.computedMin)&&(this.computedDur=this.computedMin)),this.fill=e.getAttribute("fill"),this.type=e.getAttribute("type"),this.repeatCount=e.getAttribute("repeatCount"),this.repeatDur=e.getAttribute("repeatDur"),this.accumulate=e.getAttribute("accumulate"),this.additive=e.getAttribute("additive"),this.restart=e.getAttribute("restart"),this.restart||(this.restart="always"),this.beginListeners=new Array,this.endListeners=new Array,this.repeatListeners=new Array,this.repeatIterations=new Array;var l=e.localName;if("animateColor"==l)this.color();else if("animateMotion"==l)this.isInterpolable=function(e,t){return!0},this.getCurVal=function(){var e=this.target.transform;return e&&0<e.animVal.numberOfItems?decompose(e.animVal.getItem(0).matrix,"translate"):"0,0"},this.path=this.getPath(),this.path?this.valueAt=function(e){var t=this.path.getTotalLength(),r=this.path.getPointAtLength(e*t);return r.x+","+r.y}:this.translation(),this.freeze=function(){var e=this.valueAt(1);this.step(e)},this.keyPoints&&this.keyTimes&&(this.pathKeyTimes=this.keyTimes,this.keyTimes=null,this.superValueAt=this.valueAt,this.valueAt=function(e){for(var t=1;t<this.keyPoints.length;++t){var r=this.keyPoints[this.keyPoints.length-1];if(this.pathKeyTimes[t]>e){var n,i=this.keyPoints[t-1],r="discrete"==this.calcMode?i:(e=(e-(n=this.pathKeyTimes[t-1]))/(this.pathKeyTimes[t]-n),i+(this.keyPoints[t]-i)*e);break}}return this.superValueAt(r)}),this.step=function(e){this.attributeName;e="translate("+e+")",this.target.setAttribute("transform",e)};else if("animateTransform"==l){if(this.isInterpolable=function(e,t){return!0},this.getCurVal=function(){var e=this.type,t=this.target.transform;return t&&0<t.animVal.numberOfItems?decompose(t.animVal.getItem(0).matrix,e):"scale"==e?"1,1":"translate"==e?"0,0":"rotate"==e?"0,0,0":0},"scale"==this.type?(this.normalize=function(e){var t=(e=e.replace(/,/g," ")).split(" ");return 1==t.length&&(t[1]=t[0]),t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t},this.add=function(e,t){for(var r=new Array,n=0;n<e.length;++n)r.push(e[n]*t[n]);return r.join(",")}):"translate"==this.type?this.translation():"rotate"==this.type&&(this.normalize=function(e){var t=(e=e.replace(/,/g," ")).split(" ");return t.length<3?(t[0]=parseFloat(t[0]),t[1]=0,t[2]=0):(t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2])),t},this.add=function(e,t){for(var r=new Array,n=0;n<e.length;++n)r.push(e[n]+t[n]);return r.join(",")}),"scale"==this.type||"rotate"==this.type){if(this.from&&(this.from=this.normalize(this.from).join(",")),this.to&&(this.to=this.normalize(this.to).join(",")),this.by&&(this.by=this.normalize(this.by).join(",")),this.values){for(var u=this.values.split(";"),a=0;a<u.length;++a)u[a]=this.normalize(u[a]).join(",");this.values=u.join(";")}this.interpolate=function(e,t,r){for(var n=new Array,i=0;i<e.length;++i)n.push(e[i]+(t[i]-e[i])*r);return n.join(",")}}this.step=function(e){var t=this.attributeName;e=this.type+"("+e+")",this.target.setAttribute(t,e)}}var h=this;this.anim.beginElement=function(){return h.begin(),!0},this.anim.beginElementAt=function(e){return h.begin(1e3*e),!0},this.anim.endElement=function(){return h.finish(),!0},this.anim.endElementAt=function(e){return h.finish(1e3*e),!0},this.anim.getStartTime=function(){return parseFloat(h.iterBegin-timeZero)/1e3},this.anim.getCurrentTime=function(){var e=new Date;return parseFloat(e-h.iterBegin)/1e3}}function animate(){for(var e=new Date,t=0,r=animations.length;t<r;++t)try{animations[t].f(e)||(--t,--r)}catch(e){"Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMSVGPathElement.getTotalLength]"!==e.message&&(window.console&&console.log?console.log(e):alert(e))}}function toMillis(e){var t,r=(e=e.trim()).length;return-1!=e.indexOf(":")?(r=(t=e.split(":")).length,e=0,3==t.length&&(e+=36e5*parseInt(t[0])),e+=6e4*parseInt(t[r-2]),e+=1e3*parseFloat(t[r-1])):2<r&&"ms"==e.substring(r-2)?e=e.substring(0,e.length-2):1<r&&"s"==e.substring(r-1)?(e=e.substring(0,e.length-1),e*=1e3):3<r&&"min"==e.substring(r-3)?(e=e.substring(0,e.length-3),e*=6e4):1<r&&"h"==e.substring(r-1)?(e=e.substring(0,e.length-1),e*=36e5):e*=1e3,parseFloat(e)}function decompose(e,t){if("translate"==t)return e.e+","+e.f;var r=e.a,n=e.b,i=e.c,o=e.d;if("rotate"==t)return Math.atan2(i,r)+",0,0";var s=Math.sqrt(r*r+i*i),a=Math.sqrt(n*n+o*o);if("scale"==t){var l=r*o-n*i;return(0==l?0:l/s)+","+a}var u=r*n+i*o;return 180*(Math.PI/2-Math.acos(0==u?0:u/(a*s)))/Math.PI}function toRGB(e){if("rgb"==e.substring(0,3)){for(var t=(e=(e=(e=e.replace(/ /g,"")).replace("rgb(","")).replace(")","")).split(","),r=0;r<t.length;++r){var n=t[r].length-1;"%"==t[r].substring(n)?t[r]=Math.round(2.55*t[r].substring(0,n)):t[r]=parseInt(t[r])}return t}if("#"!=e.charAt(0))return colors[e];e=e.trim();t=new Array;return 7==e.length?(t[0]=parseInt(e.substring(1,3),16),t[1]=parseInt(e.substring(3,5),16),t[2]=parseInt(e.substring(5,7),16)):(t[0]=e.substring(1,2),t[1]=e.substring(2,3),t[2]=e.substring(3,4),t[0]=parseInt(t[0]+t[0],16),t[1]=parseInt(t[1]+t[1],16),t[2]=parseInt(t[2]+t[2],16)),t}function createPath(e){var t=document.createElementNS(svgns,"path");t.setAttribute("d",e);try{t.normalizedPathSegList&&(t.myNormalizedPathSegList=t.normalizedPathSegList)}catch(e){}return t.myNormalizedPathSegList||(t.myNormalizedPathSegList=t.pathSegList),t}Animator.prototype={register:function(){var e=(e=this.anim.getAttribute("begin"))||"0";this.schedule(e,this.begin);var t=this.anim.getAttribute("end");t&&this.schedule(t,this.finish)},schedule:function(e,t){for(var r=e.split(";"),n=0;n<r.length;++n){var i=r[n].trim();if(11<i.length&&"wallclock("==i.substring(0,10)){var o=new Date;o.setISO8601(i.substring(10,i.length-1));var s=o-new Date;t.call(this,s)}else if(isNaN(parseInt(i))){var a=0,l=i.indexOf("+");-1==l&&(l=i.indexOf("-")),-1!=l&&(a=toMillis(i.substring(l).replace(/ /g,"")),i=i.substring(0,l).trim()),l=i.indexOf(".");for(var u,h=new Array,h=-1==l?[this.target]:(0==(u=i.substring(0,l)).indexOf("index(")&&(u=u.substring(6,u.length-1)+this.index),getEventTargetsById(u,this.anim)),c=i.substring(l+1),p=funk(t,this,a),d=0;d<h.length;++d){var f=h[d];null!=f&&f.addEventListener(c,p,!1)}}else i=toMillis(i),t.call(this,i)}},getCurVal:function(){return"CSS"==this.attributeType?this.target.style.getPropertyValue(this.attributeName):this.target.getAttributeNS(this.namespace,this.attributeName)},begin:function(offset){if(!("never"==this.restart||this.running&&"whenNotActive"==this.restart))if(this.running&&this.finish(),null!=offset&&0<=offset){var me=this,myself=this.begin,call=function(){myself.call(me)};window.setTimeout(call,offset)}else if(this.startTime=new Date,!(offset&&offset<0&&(this.startTime.setTime(this.startTime.getTime()+offset),this.startTime<timeZero))){this.stop(),this.running=!0;var initVal=this.getCurVal();if(this.realInitVal=initVal,!initVal&&propDefaults[this.attributeName]&&(initVal=propDefaults[this.attributeName]),"set"==this.anim.nodeName&&this.step(this.to),this.iteration=0,this.values){this.animVals=this.values.split(";");for(var i=0;i<this.animVals.length;++i)this.animVals[i]=this.animVals[i].trim()}else this.animVals=new Array,this.from?this.animVals[0]=this.from:this.animVals[0]=initVal,this.by&&this.animVals[0]?this.animVals[1]=this.add(this.normalize(this.animVals[0]),this.normalize(this.by)):this.animVals[1]=this.to;if(this.animVals[this.animVals.length-1]&&(this.freezed=this.animVals[this.animVals.length-1],this.animVals[0]))if(("#"==this.animVals[0].substring(0,1)||colors[this.animVals[0]]||5<this.animVals[0].length&&"rgb("==this.animVals[0].trim().substring(0,4))&&("#"==this.freezed.substring(0,1)||colors[this.freezed]||5<this.freezed.length&&"rgb("==this.freezed.trim().substring(0,4)))this.color();else{var cp=new Array,oneVal=this.animVals[0],qualified=getUnit(oneVal);cp[0]=qualified[0],this.unit=qualified[1];for(var i=1;i<this.animVals.length;++i){var oneVal=this.animVals[i],qualified=getUnit(oneVal);if(qualified[1]!=this.unit){cp=this.animVals;break}cp[i]=qualified[0]}this.animVals=cp}this.iterBegin=this.startTime,animations.push(this);for(var i=0;i<this.beginListeners.length;++i)this.beginListeners[i].call();var onbegin=this.anim.getAttribute("onbegin");onbegin&&eval(onbegin)}},normalize:function(e){return e},add:function(e,t){return""+(parseFloat(e)+parseFloat(t))},f:function(e){var t=this.anim,r=this.computedDur;if(isNaN(r))return!0;var n=(e-this.iterBegin)/r;if(1<=n)return this.end();var i,o=parseFloat(this.iteration);if(this.repeatCount&&"indefinite"!=this.repeatCount&&o+n>=this.repeatCount)return"freeze"==this.fill&&(this.freezed=this.valueAt(this.repeatCount-o)),this.end();if(this.repeatDur&&"indefinite"!=this.repeatDur&&e-this.startTime>=toMillis(this.repeatDur))return"freeze"==this.fill&&(i=toMillis(this.repeatDur)/r,this.freezed=this.valueAt(i-Math.floor(i))),this.end();if("set"==t.localName)return!0;var s=this.valueAt(n);return this.step(s),!0},isInterpolable:function(e,t){if(!(i=!isNaN(e)&&!isNaN(t))&&-1!=e.trim().indexOf(" ")&&-1!=t.trim().indexOf(" ")){var r=e.trim().split(" "),n=t.trim().split(" "),i=!0;if(r.length==n.length)for(var o=0;o<n.length;++o)if(!this.isInterpolable(r[o],n[o]))return!1}return i},valueAt:function(e){var t=this.animVals;if(1==e)return t[t.length-1];if("discrete"!=this.calcMode&&this.isInterpolable(t[0],t[1])){if(this.keyTimes){for(o=1;o<this.keyTimes.length;++o)if(this.keyTimes[o]>e){i=o-1;var r=this.keyTimes[i];e=(e-r)/(this.keyTimes[o]-r);break}}else{var n=t.length-1,i=Math.floor(e*n);e=e%(1/n)*n}return"spline"==this.calcMode&&(e=this.spline(e,i)),this.interpolate(this.normalize(t[i]),this.normalize(t[i+1]),e)}if(this.keyTimes){for(var o=1;o<this.keyTimes.length;++o)if(this.keyTimes[o]>e)return t[o-1];return t[t.length-1]}var n=t.length;return t[Math.floor(e*n)]},spline:function(e,t){for(var r=this.keySplines[t],n=r.getTotalLength(),i=n/splinePrecision,o=0;o<=n;o+=i){if((a=r.getPointAtLength(o)).x>e)return e-=(s=r.getPointAtLength(o-i)).x,e/=a.x-s.x,s.y+(a.y-s.y)*e}var s,a=r.getPointAtLength(n);return e-=(s=r.getPointAtLength(n-i)).x,e/=a.x-s.x,s.y+(a.y-s.y)*e},interpolate:function(e,t,r){if(!this.isInterpolable(e,t))return r<.5?e:t;if(-1==e.trim().indexOf(" "))return parseFloat(e)+(t-e)*r;for(var n=e.split(" "),i=t.split(" "),o=new Array,s=0;s<i.length;++s)o[s]=parseFloat(n[s])+(i[s]-n[s])*r;return o.join(" ")},step:function(e){this.unit&&(e+=this.unit);var t=this.attributeName;"CSS"==this.attributeType?("font-size"!=t||isNaN(e)||(e+="px"),this.target.style.setProperty(t,e,"")):this.target.setAttributeNS(this.namespace,t,e)},end:function(){if(!this.repeatCount&&!this.repeatDur)return this.finish();++this.iteration;var now=new Date;if(this.repeatCount&&"indefinite"!=this.repeatCount&&this.iteration>=this.repeatCount)return this.finish();if(this.repeatDur&&"indefinite"!=this.repeatDur&&now-this.startTime>=toMillis(this.repeatDur))return this.finish();if("sum"==this.accumulate){var curVal=this.getCurVal();if(!curVal&&propDefaults[this.attributeName]&&(curVal=propDefaults[this.attributeName]),this.by&&!this.from)this.animVals[0]=curVal,this.animVals[1]=this.add(this.normalize(curVal),this.normalize(this.by));else for(var i=0;i<this.animVals.length;++i)this.animVals[i]=this.add(this.normalize(curVal),this.normalize(this.animVals[i]));this.freezed=this.animVals[this.animVals.length-1]}this.iterBegin=now;for(var i=0;i<this.repeatIterations.length;++i)this.repeatIterations[i]==this.iteration&&this.repeatListeners[i].call();var onrepeat=this.anim.getAttribute("onrepeat");return onrepeat&&eval(onrepeat),!0},finish:function(offset){if(this.min&&"indefinite"!=this.min){var now=new Date;if(now-this.startTime>=toMillis(this.min))return!0}if(offset&&0<offset){var me=this,myself=this.finish,call=function(){myself.call(me)};return window.setTimeout(call,offset),!0}if(offset&&offset<0){var now=new Date;if(now.setTime(now.getTime()+offset),now<this.startTime)return!0}var fill=this.fill,kept=!0;if("freeze"==fill?this.freeze():(this.stop(),this.step(this.realInitVal),kept=!1),this.running){for(var i=0;i<this.endListeners.length;++i)this.endListeners[i].call();var onend=this.anim.getAttribute("onend");onend&&eval(onend),this.running=!1}return kept},stop:function(){for(var e=0,t=animations.length;e<t;++e)if(animations[e]==this){animations.splice(e,1);break}},freeze:function(){this.step(this.freezed)},addEventListener:function(e,t,r){var n;"begin"==e?this.beginListeners.push(t):"end"==e?this.endListeners.push(t):7<e.length&&"repeat"==e.substring(0,6)&&(n=e.substring(7,e.length-1),this.repeatListeners.push(t),this.repeatIterations.push(n))},getPath:function(){var e=this.anim.getElementsByTagNameNS(svgns,"mpath")[0];if(e){var t=e.getAttributeNS(xlinkns,"href");return document.getElementById(t.substring(1))}var r=this.anim.getAttribute("path");return r?createPath(r):null},translation:function(){this.by&&-1==this.by.indexOf(",")&&(this.by=this.by+",0"),this.normalize=function(e){var t=e.replace(/,/g," ").replace(/ +/," ").split(/ /);return 1==t.length&&(t[1]="0"),t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t},this.add=function(e,t){return e[0]+t[0]+","+(e[1]+t[1])},this.isInterpolable=function(e,t){return!0},this.interpolate=function(e,t,r){return e[0]+(t[0]-e[0])*r+","+(e[1]+(t[1]-e[1])*r)}},color:function(){this.isInterpolable=function(e,t){return!0},this.interpolate=function(e,t,r){return"rgb("+Math.round(e[0]+(t[0]-e[0])*r)+","+Math.round(e[1]+(t[1]-e[1])*r)+","+Math.round(e[2]+(t[2]-e[2])*r)+")"},this.normalize=function(e){var t=toRGB(e);return null==t?toRGB(propDefaults[this.attributeName]):t},this.add=function(e,t){for(var r=new Array,n=0;n<e.length;++n)r.push(Math.min(e[n],255)+Math.min(t[n],255));return r.join(",")}},d:function(){this.isInterpolable=function(e,t){return!0},this.interpolate=function(e,t,r){for(var n="",i=e.myNormalizedPathSegList,o=t.myNormalizedPathSegList,s=0;s<i.numberOfItems&&s<o.numberOfItems;++s){var a,l,u=i.getItem(s),h=o.getItem(s);typeFrom=u.pathSegType,typeTo=h.pathSegType,1==typeFrom||1==typeTo?n+=" z ":(a=u.x+(h.x-u.x)*r,l=u.y+(h.y-u.y)*r,2==typeFrom||2==typeTo?n+=" M ":4==typeFrom||4==typeTo?n+=" L ":n+=" C "+(u.x1+(h.x1-u.x1)*r)+","+(u.y1+(h.y1-u.y1)*r)+" "+(u.x2+(h.x2-u.x2)*r)+","+(u.y2+(h.y2-u.y2)*r)+" ",n+=a+","+l)}return n},this.normalize=function(e){return createPath(e)}}};var units=["grad","deg","rad","kHz","Hz","em","em","px","pt","pc","mm","cm","in","ms","s","%"];function getUnit(e){if(e&&e.substring)for(var t=0,r=units.length;t<r;++t){var n=e.length-units[t].length;if(0<n&&e.substring(n)==units[t]){var i=e.substring(0,n);if(!isNaN(i))return[i,units[t]]}}return[e,null]}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},propDefaults={font:"see individual properties","font-family":"Arial","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal",direction:"ltr","letter-spacing":"normal","text-decoration":"none","unicode-bidi":"normal","word-spacing":"normal",clip:"auto",color:"depends on user agent",cursor:"auto",display:"inline",overflow:"hidden",visibility:"visible","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","enable-background":"accumulate",filter:"none","flood-color":"black","flood-opacity":"1","lighting-color":"white","stop-color":"black","stop-opacity":"1","pointer-events":"visiblePainted","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-profile":"auto","color-rendering":"auto",fill:"black","fill-opacity":"1","fill-rule":"nonzero","image-rendering":"auto","marker-end":"none","marker-mid":"none","marker-start":"none","shape-rendering":"auto",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-rendering":"auto","alignment-baseline":"0","baseline-shift":"baseline","dominant-baseline":"auto","glyph-orientation-horizontal":"0","glyph-orientation-vertical":"auto",kerning:"auto","text-anchor":"start","writing-mode":"lr-tb"};function funk(e,t,r){return function(){e.call(t,r)}}"function"!=typeof String.prototype.trim&&(window._trimRegExp=new RegExp("^\\s+|\\s+$","g"),String.prototype.trim=function(){return this.replace(window._trimRegExp,"")}),isNaN(Date.parse("2012-04-22T19:53:32Z"))?(window._setISO8601RegExp=new RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?"),Date.prototype.setISO8601=function(e){var t=window._setISO8601RegExp.exec(e),r=0,n=new Date(t[1],0,1);t[3]&&n.setMonth(t[3]-1),t[5]&&n.setDate(t[5]),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),t[14]&&(r=60*Number(t[16])+Number(t[17]),r*="-"==t[15]?1:-1),r-=n.getTimezoneOffset(),time=Number(n)+60*r*1e3,this.setTime(Number(time))}):Date.prototype.setISO8601=function(e){this.setTime(Date.parse(e))};try{window.addEventListener("load",initSMIL,!1)}catch(e){}!function(t,r){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("jquery")):t.jQueryBridget=r(t,t.jQuery)}(window,function(e,t){"use strict";var c=Array.prototype.slice,r=e.console,p=void 0===r?function(){}:function(e){r.error(e)};function n(u,i,h){(h=h||t||e.jQuery)&&(i.prototype.option||(i.prototype.option=function(e){h.isPlainObject(e)&&(this.options=h.extend(!0,this.options,e))}),h.fn[u]=function(e){if("string"!=typeof e)return n=e,this.each(function(e,t){var r=h.data(t,u);r?(r.option(n),r._init()):(r=new i(t,n),h.data(t,u,r))}),this;var t,o,s,a,l,n,r=c.call(arguments,1);return s=r,l="$()."+u+'("'+(o=e)+'")',(t=this).each(function(e,t){var r,n,i=h.data(t,u);i?(r=i[o])&&"_"!=o.charAt(0)?(n=r.apply(i,s),a=void 0===a?n:a):p(l+" is not a valid method"):p(u+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==a?a:t},o(h))}function o(e){!e||e&&e.bridget||(e.bridget=n)}return o(t||e.jQuery),n}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("get-size/get-size",[],t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function b(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var r="undefined"==typeof console?function(){}:function(e){console.error(e)},E=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],S=E.length;function w(e){var t=getComputedStyle(e);return t||r("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t}var x,P=!1;function C(e){var t,r,n;if(P||(P=!0,(t=document.createElement("div")).style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box",(r=document.body||document.documentElement).appendChild(t),n=w(t),C.isBoxSizeOuter=x=200==b(n.width),r.removeChild(t)),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var i=w(e);if("none"==i.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<S;t++){e[E[t]]=0}return e}();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var s=o.isBorderBox="border-box"==i.boxSizing,a=0;a<S;a++){var l=E[a],u=i[l],h=parseFloat(u);o[l]=isNaN(h)?0:h}var c=o.paddingLeft+o.paddingRight,p=o.paddingTop+o.paddingBottom,d=o.marginLeft+o.marginRight,f=o.marginTop+o.marginBottom,m=o.borderLeftWidth+o.borderRightWidth,g=o.borderTopWidth+o.borderBottomWidth,y=s&&x,v=b(i.width);!1!==v&&(o.width=v+(y?0:c+m));var _=b(i.height);return!1!==_&&(o.height=_+(y?0:p+g)),o.innerWidth=o.width-(c+m),o.innerHeight=o.height-(p+g),o.outerWidth=o.width+d,o.outerHeight=o.height+f,o}}return C}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,r){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.Unipointer=r(t,t.EvEmitter)}(window,function(i,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindStartEvent=function(e){this._bindStartEvent(e,!0)},r.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},r._bindStartEvent=function(e,t){var r=(t=void 0===t||t)?"addEventListener":"removeEventListener",n="mousedown";i.PointerEvent?n="pointerdown":"ontouchstart"in i&&(n="touchstart"),e[r](n,this)},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.getTouch=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.identifier==this.pointerIdentifier)return r}},r.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},r.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},r.onpointerdown=function(e){this._pointerDown(e,e)},r._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},r.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return r._bindPostStartEvents=function(e){var t;e&&((t=n[e.type]).forEach(function(e){i.addEventListener(e,this)},this),this._boundPointerEvents=t)},r._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){i.removeEventListener(e,this)},this),delete this._boundPointerEvents)},r.onmousemove=function(e){this._pointerMove(e,e)},r.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},r.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},r._pointerMove=function(e,t){this.pointerMove(e,t)},r.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},r.onmouseup=function(e){this._pointerUp(e,e)},r.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},r.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},r._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},r._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},r._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},r.pointerDone=function(){},r.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},r.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},r._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},r.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},t.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},t}),function(t,r){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("unipointer")):t.Unidragger=r(t,t.Unipointer)}(window,function(o,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindHandles=function(){this._bindHandles(!0)},r.unbindHandles=function(){this._bindHandles(!1)},r._bindHandles=function(e){for(var t=(e=void 0===e||e)?"addEventListener":"removeEventListener",r=e?this._touchActionValue:"",n=0;n<this.handles.length;n++){var i=this.handles[n];this._bindStartEvent(i,e),i[t]("click",this),o.PointerEvent&&(i.style.touchAction=r)}},r._touchActionValue="none",r.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},s={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return r.okayPointerDown=function(e){var t=i[e.target.nodeName],r=s[e.target.type],n=!t||r;return n||this._pointerReset(),n},r.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},r.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,r]),this._dragMove(e,t,r)},r._dragPointerMove=function(e,t){var r={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this._dragStart(e,t),r},r.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},r._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},r._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},r.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},r._dragMove=function(e,t,r){this.isDragging&&this.dragMove(e,t,r)},r.dragMove=function(e,t,r){e.preventDefault(),this.emitEvent("dragMove",[e,t,r])},r._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},r.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},r.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},r._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},r.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},t.getPointerPoint=e.getPointerPoint,t}),function(r,n){"function"==typeof define&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("get-size"),require("unidragger")):r.Draggabilly=n(r,r.getSize,r.Unidragger)}(window,function(o,l,e){function r(e,t){for(var r in t)e[r]=t[r];return e}var n=o.jQuery;function t(e,t){this.element="string"==typeof e?document.querySelector(e):e,n&&(this.$element=n(this.element)),this.options=r({},this.constructor.defaults),this.option(t),this._create()}var i=t.prototype=Object.create(e.prototype);t.defaults={},i.option=function(e){r(this.options,e)};var s={relative:!0,absolute:!0,fixed:!0};function u(e,t,r){return r=r||"round",t?Math[r](e/t)*t:e}return i._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=r({},this.position);var e=getComputedStyle(this.element);s[e.position]||(this.element.style.position="relative"),this.on("pointerDown",this.onPointerDown),this.on("pointerMove",this.onPointerMove),this.on("pointerUp",this.onPointerUp),this.enable(),this.setHandles()},i.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},i.dispatchEvent=function(e,t,r){var n=[t].concat(r);this.emitEvent(e,n),this.dispatchJQueryEvent(e,t,r)},i.dispatchJQueryEvent=function(e,t,r){var n,i=o.jQuery;i&&this.$element&&((n=i.Event(t)).type=e,this.$element.trigger(n,r))},i._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),r=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(r)?0:r,this._addTransformPosition(e)},i._getPositionCoord=function(e,t){if(-1==e.indexOf("%"))return parseInt(e,10);var r=l(this.element.parentNode);return r?parseFloat(e)/100*r[t]:0},i._addTransformPosition=function(e){var t,r,n,i,o=e.transform;0===o.indexOf("matrix")&&(t=o.split(","),r=0===o.indexOf("matrix3d")?12:4,n=parseInt(t[r],10),i=parseInt(t[1+r],10),this.position.x+=n,this.position.y+=i)},i.onPointerDown=function(e,t){this.element.classList.add("is-pointer-down"),this.dispatchJQueryEvent("pointerDown",e,[t])},i.dragStart=function(e,t){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate())},i.measureContainment=function(){var e,t,r,n,i,o,s,a=this.getContainer();a&&(e=l(this.element),t=l(a),r=this.element.getBoundingClientRect(),n=a.getBoundingClientRect(),i=t.borderLeftWidth+t.borderRightWidth,o=t.borderTopWidth+t.borderBottomWidth,s=this.relativeStartPosition={x:r.left-(n.left+t.borderLeftWidth),y:r.top-(n.top+t.borderTopWidth)},this.containSize={width:t.width-i-s.x-e.width,height:t.height-o-s.y-e.height})},i.getContainer=function(){var e=this.options.containment;if(e)return e instanceof HTMLElement?e:"string"==typeof e?document.querySelector(e):this.element.parentNode},i.onPointerMove=function(e,t,r){this.dispatchJQueryEvent("pointerMove",e,[t,r])},i.dragMove=function(e,t,r){var n,i,o,s,a;this.isEnabled&&(s=r.x,a=r.y,i=(n=this.options.grid)&&n[0],o=n&&n[1],s=u(s,i),a=u(a,o),s=this.containDrag("x",s,i),a=this.containDrag("y",a,o),s="y"==this.options.axis?0:s,a="x"==this.options.axis?0:a,this.position.x=this.startPosition.x+s,this.position.y=this.startPosition.y+a,this.dragPoint.x=s,this.dragPoint.y=a,this.dispatchEvent("dragMove",e,[t,r]))},i.containDrag=function(e,t,r){if(!this.options.containment)return t;var n="x"==e?"width":"height",i=u(-this.relativeStartPosition[e],r,"ceil"),o=u(o=this.containSize[n],r,"floor");return Math.max(i,Math.min(o,t))},i.onPointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchJQueryEvent("pointerUp",e,[t])},i.dragEnd=function(e,t){this.isEnabled&&(this.element.style.transform="",this.setLeftTop(),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t]))},i.animate=function(){var e;this.isDragging&&(this.positionDrag(),e=this,requestAnimationFrame(function(){e.animate()}))},i.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},i.positionDrag=function(){this.element.style.transform="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},i.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},i.setPosition=function(e,t){this.position.x=e,this.position.y=t,this.setLeftTop()},i.enable=function(){this.isEnabled=!0},i.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},i.destroy=function(){this.disable(),this.element.style.transform="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},i._init=function(){},n&&n.bridget&&n.bridget("draggabilly",t),t}),function(t,r){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("jquery")):t.jQueryBridget=r(t,t.jQuery)}(window,function(e,t){"use strict";var c=Array.prototype.slice,r=e.console,p=void 0===r?function(){}:function(e){r.error(e)};function n(u,i,h){(h=h||t||e.jQuery)&&(i.prototype.option||(i.prototype.option=function(e){h.isPlainObject(e)&&(this.options=h.extend(!0,this.options,e))}),h.fn[u]=function(e){if("string"!=typeof e)return n=e,this.each(function(e,t){var r=h.data(t,u);r?(r.option(n),r._init()):(r=new i(t,n),h.data(t,u,r))}),this;var t,o,s,a,l,n,r=c.call(arguments,1);return s=r,l="$()."+u+'("'+(o=e)+'")',(t=this).each(function(e,t){var r,n,i=h.data(t,u);i?(r=i[o])&&"_"!=o.charAt(0)?(n=r.apply(i,s),a=void 0===a?n:a):p(l+" is not a valid method"):p(u+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==a?a:t},o(h))}function o(e){!e||e&&e.bridget||(e.bridget=n)}return o(t||e.jQuery),n}),function(e,t){"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function b(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var r="undefined"==typeof console?function(){}:function(e){console.error(e)},E=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],S=E.length;function w(e){var t=getComputedStyle(e);return t||r("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var x,P=!1;function C(e){var t,r,n;if(P||(P=!0,(t=document.createElement("div")).style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box",(r=document.body||document.documentElement).appendChild(t),n=w(t),x=200==Math.round(b(n.width)),C.isBoxSizeOuter=x,r.removeChild(t)),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var i=w(e);if("none"==i.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<S;t++){e[E[t]]=0}return e}();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var s=o.isBorderBox="border-box"==i.boxSizing,a=0;a<S;a++){var l=E[a],u=i[l],h=parseFloat(u);o[l]=isNaN(h)?0:h}var c=o.paddingLeft+o.paddingRight,p=o.paddingTop+o.paddingBottom,d=o.marginLeft+o.marginRight,f=o.marginTop+o.marginBottom,m=o.borderLeftWidth+o.borderRightWidth,g=o.borderTopWidth+o.borderBottomWidth,y=s&&x,v=b(i.width);!1!==v&&(o.width=v+(y?0:c+m));var _=b(i.height);return!1!==_&&(o.height=_+(y?0:p+g)),o.innerWidth=o.width-(c+m),o.innerHeight=o.height-(p+g),o.outerWidth=o.width+d,o.outerHeight=o.height+f,o}}return C}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var r=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++){var n=t[r]+"MatchesSelector";if(e[n])return n}}();return function(e,t){return e[r](t)}}),function(t,r){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("desandro-matches-selector")):t.fizzyUIUtils=r(t,t.matchesSelector)}(window,function(u,o){var h={extend:function(e,t){for(var r in t)e[r]=t[r];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice;h.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},h.removeFrom=function(e,t){var r=e.indexOf(t);-1!=r&&e.splice(r,1)},h.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,o(e,t))return e},h.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},h.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},h.filterFindElements=function(e,n){e=h.makeArray(e);var i=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){o(e,n)&&i.push(e);for(var t=e.querySelectorAll(n),r=0;r<t.length;r++)i.push(t[r])}else i.push(e)}),i},h.debounceMethod=function(e,t,n){n=n||100;var i=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments,r=this;this[o]=setTimeout(function(){i.apply(r,t),delete r[o]},n)}},h.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},h.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,r){return t+"-"+r}).toLowerCase()};var c=u.console;return h.htmlInit=function(a,l){h.docReady(function(){var e=h.toDashed(l),i="data-"+e,t=document.querySelectorAll("["+i+"]"),r=document.querySelectorAll(".js-"+e),n=h.makeArray(t).concat(h.makeArray(r)),o=i+"-options",s=u.jQuery;n.forEach(function(t){var e,r=t.getAttribute(i)||t.getAttribute(o);try{e=r&&JSON.parse(r)}catch(e){return void(c&&c.error("Error parsing "+i+" on "+t.className+": "+e))}var n=new a(t,e);s&&s.data(t,l,n)})})},h}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e.EvEmitter,e.getSize))}(window,function(e,t){"use strict";var r=document.documentElement.style,n="string"==typeof r.transition?"transition":"WebkitTransition",i="string"==typeof r.transform?"transform":"WebkitTransform",o={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[n],s={transform:i,transition:n,transitionDuration:n+"Duration",transitionProperty:n+"Property",transitionDelay:n+"Delay"};function a(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var l=a.prototype=Object.create(e.prototype);l.constructor=a,l._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},l.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},l.getSize=function(){this.size=t(this.element)},l.css=function(e){var t=this.element.style;for(var r in e){t[s[r]||r]=e[r]}},l.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop"),n=e[t?"left":"right"],i=e[r?"top":"bottom"],o=parseFloat(n),s=parseFloat(i),a=this.layout.size;-1!=n.indexOf("%")&&(o=o/100*a.width),-1!=i.indexOf("%")&&(s=s/100*a.height),o=isNaN(o)?0:o,s=isNaN(s)?0:s,o-=t?a.paddingLeft:a.paddingRight,s-=r?a.paddingTop:a.paddingBottom,this.position.x=o,this.position.y=s},l.layoutPosition=function(){var e=this.layout.size,t={},r=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),i=r?"paddingLeft":"paddingRight",o=r?"left":"right",s=r?"right":"left",a=this.position.x+e[i];t[o]=this.getXValue(a),t[s]="";var l=n?"paddingTop":"paddingBottom",u=n?"top":"bottom",h=n?"bottom":"top",c=this.position.y+e[l];t[u]=this.getYValue(c),t[h]="",this.css(t),this.emitEvent("layout",[this])},l.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},l.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},l._transitionTo=function(e,t){this.getPosition();var r,n,i,o=this.position.x,s=this.position.y,a=e==this.position.x&&t==this.position.y;this.setPosition(e,t),!a||this.isTransitioning?(r=e-o,n=t-s,(i={}).transform=this.getTranslate(r,n),this.transition({to:i,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},l.getTranslate=function(e,t){return"translate3d("+(e=this.layout._getOption("originLeft")?e:-e)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},l.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},l.moveTo=l._transitionTo,l.setPosition=function(e,t){this.position.x=parseFloat(e),this.position.y=parseFloat(t)},l._nonTransition=function(e){for(var t in this.css(e.to),e.isCleaning&&this._removeStyles(e.to),e.onTransitionEnd)e.onTransitionEnd[t].call(this)},l.transition=function(e){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var r in e.onTransitionEnd)t.onEnd[r]=e.onTransitionEnd[r];for(r in e.to)t.ingProperties[r]=!0,e.isCleaning&&(t.clean[r]=!0);e.from&&(this.css(e.from),this.element.offsetHeight),this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0}else this._nonTransition(e)};var u="opacity,"+i.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});l.enableTransition=function(){var e;this.isTransitioning||(e="number"==typeof(e=this.layout.options.transitionDuration)?e+"ms":e,this.css({transitionProperty:u,transitionDuration:e,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(o,this,!1))},l.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},l.onotransitionend=function(e){this.ontransitionend(e)};var h={"-webkit-transform":"transform"};l.ontransitionend=function(e){var t,r;e.target===this.element&&(t=this._transn,r=h[e.propertyName]||e.propertyName,delete t.ingProperties[r],function(e){for(var t in e)return;return 1}(t.ingProperties)&&this.disableTransition(),r in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[r]),r in t.onEnd&&(t.onEnd[r].call(this),delete t.onEnd[r]),this.emitEvent("transitionEnd",[this]))},l.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(o,this,!1),this.isTransitioning=!1},l._removeStyles=function(e){var t={};for(var r in e)t[r]="";this.css(t)};var c={transitionProperty:"",transitionDuration:"",transitionDelay:""};return l.removeTransitionStyles=function(){this.css(c)},l.stagger=function(e){e=isNaN(e)?0:e,this.staggerDelay=e+"ms"},l.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},l.remove=function(){n&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},l.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},l.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},l.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var r in t)return r},l.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},l.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},l.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},a}),function(i,o){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(e,t,r,n){return o(i,e,t,r,n)}):"object"==typeof module&&module.exports?module.exports=o(i,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):i.Outlayer=o(i,i.EvEmitter,i.getSize,i.fizzyUIUtils,i.Outlayer.Item)}(window,function(e,t,i,o,n){"use strict";function r(){}var s=e.console,a=e.jQuery,l=0,u={};function h(e,t){var r,n=o.getQueryElement(e);n?(this.element=n,a&&(this.$element=a(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(t),r=++l,this.element.outlayerGUID=r,(u[r]=this)._create(),this._getOption("initLayout")&&this.layout()):s&&s.error("Bad element for "+this.constructor.namespace+": "+(n||e))}h.namespace="outlayer",h.Item=n,h.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var c=h.prototype;function p(e){function t(){e.apply(this,arguments)}return(t.prototype=Object.create(e.prototype)).constructor=t}o.extend(c,t.prototype),c.option=function(e){o.extend(this.options,e)},c._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&void 0!==this.options[t]?this.options[t]:this.options[e]},h.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},c._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},c.reloadItems=function(){this.items=this._itemize(this.element.children)},c._itemize=function(e){for(var t=this._filterFindItemElements(e),r=this.constructor.Item,n=[],i=0;i<t.length;i++){var o=new r(t[i],this);n.push(o)}return n},c._filterFindItemElements=function(e){return o.filterFindElements(e,this.options.itemSelector)},c.getItemElements=function(){return this.items.map(function(e){return e.element})},c.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=void 0!==e?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},c._init=c.layout,c._resetLayout=function(){this.getSize()},c.getSize=function(){this.size=i(this.element)},c._getMeasurement=function(e,t){var r,n=this.options[e];n?("string"==typeof n?r=this.element.querySelector(n):n instanceof HTMLElement&&(r=n),this[e]=r?i(r)[t]:n):this[e]=0},c.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},c._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},c._layoutItems=function(e,r){var n;this._emitCompleteOnItems("layout",e),e&&e.length&&(n=[],e.forEach(function(e){var t=this._getItemLayoutPosition(e);t.item=e,t.isInstant=r||e.isLayoutInstant,n.push(t)},this),this._processLayoutQueue(n))},c._getItemLayoutPosition=function(){return{x:0,y:0}},c._processLayoutQueue=function(e){this.updateStagger(),e.forEach(function(e,t){this._positionItem(e.item,e.x,e.y,e.isInstant,t)},this)},c.updateStagger=function(){var e=this.options.stagger;if(null!=e)return this.stagger=function(e){if("number"==typeof e)return e;var t=e.match(/(^\d*\.?\d*)(\w*)/),r=t&&t[1],n=t&&t[2];if(!r.length)return 0;r=parseFloat(r);var i=d[n]||1;return r*i}(e),this.stagger;this.stagger=0},c._positionItem=function(e,t,r,n,i){n?e.goTo(t,r):(e.stagger(i*this.stagger),e.moveTo(t,r))},c._postLayout=function(){this.resizeContainer()},c.resizeContainer=function(){var e;!this._getOption("resizeContainer")||(e=this._getContainerSize())&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))},c._getContainerSize=r,c._setContainerMeasure=function(e,t){var r;void 0!==e&&((r=this.size).isBorderBox&&(e+=t?r.paddingLeft+r.paddingRight+r.borderLeftWidth+r.borderRightWidth:r.paddingBottom+r.paddingTop+r.borderTopWidth+r.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px")},c._emitCompleteOnItems=function(t,e){var r=this;function n(){r.dispatchEvent(t+"Complete",null,[e])}var i,o=e.length;function s(){++i==o&&n()}e&&o?(i=0,e.forEach(function(e){e.once(t,s)})):n()},c.dispatchEvent=function(e,t,r){var n,i=t?[t].concat(r):r;this.emitEvent(e,i),a&&(this.$element=this.$element||a(this.element),t?((n=a.Event(t)).type=e,this.$element.trigger(n,r)):this.$element.trigger(e,r))},c.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},c.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},c.stamp=function(e){(e=this._find(e))&&(this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this))},c.unstamp=function(e){(e=this._find(e))&&e.forEach(function(e){o.removeFrom(this.stamps,e),this.unignore(e)},this)},c._find=function(e){if(e)return"string"==typeof e&&(e=this.element.querySelectorAll(e)),e=o.makeArray(e)},c._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},c._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},c._manageStamp=r,c._getElementOffset=function(e){var t=e.getBoundingClientRect(),r=this._boundingRect,n=i(e);return{left:t.left-r.left-n.marginLeft,top:t.top-r.top-n.marginTop,right:r.right-t.right-n.marginRight,bottom:r.bottom-t.bottom-n.marginBottom}},c.handleEvent=o.handleEvent,c.bindResize=function(){e.addEventListener("resize",this),this.isResizeBound=!0},c.unbindResize=function(){e.removeEventListener("resize",this),this.isResizeBound=!1},c.onresize=function(){this.resize()},o.debounceMethod(h,"onresize",100),c.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},c.needsResizeLayout=function(){var e=i(this.element);return this.size&&e&&e.innerWidth!==this.size.innerWidth},c.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},c.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},c.prepended=function(e){var t,r=this._itemize(e);r.length&&(t=this.items.slice(0),this.items=r.concat(t),this._resetLayout(),this._manageStamps(),this.layoutItems(r,!0),this.reveal(r),this.layoutItems(t))},c.reveal=function(e){var r;this._emitCompleteOnItems("reveal",e),e&&e.length&&(r=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*r),e.reveal()}))},c.hide=function(e){var r;this._emitCompleteOnItems("hide",e),e&&e.length&&(r=this.updateStagger(),e.forEach(function(e,t){e.stagger(t*r),e.hide()}))},c.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},c.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},c.getItem=function(e){for(var t=0;t<this.items.length;t++){var r=this.items[t];if(r.element==e)return r}},c.getItems=function(e){e=o.makeArray(e);var r=[];return e.forEach(function(e){var t=this.getItem(e);t&&r.push(t)},this),r},c.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(e){e.remove(),o.removeFrom(this.items,e)},this)},c.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var t=this.element.outlayerGUID;delete u[t],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},h.data=function(e){var t=(e=o.getQueryElement(e))&&e.outlayerGUID;return t&&u[t]},h.create=function(e,t){var r=p(h);return r.defaults=o.extend({},h.defaults),o.extend(r.defaults,t),r.compatOptions=o.extend({},h.compatOptions),r.namespace=e,r.data=h.data,r.Item=p(n),o.htmlInit(r,e),a&&a.bridget&&a.bridget(e,r),r};var d={ms:1,s:1e3};return h.Item=n,h}),function(e,t){"function"==typeof define&&define.amd?define("packery/js/rect",t):"object"==typeof module&&module.exports?module.exports=t():(e.Packery=e.Packery||{},e.Packery.Rect=t())}(window,function(){"use strict";function a(e){for(var t in a.defaults)this[t]=a.defaults[t];for(t in e)this[t]=e[t]}a.defaults={x:0,y:0,width:0,height:0};var e=a.prototype;return e.contains=function(e){var t=e.width||0,r=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+r},e.overlaps=function(e){var t=this.x+this.width,r=this.y+this.height,n=e.x+e.width,i=e.y+e.height;return this.x<n&&t>e.x&&this.y<i&&r>e.y},e.getMaximalFreeRects=function(e){if(!this.overlaps(e))return!1;var t,r=[],n=this.x+this.width,i=this.y+this.height,o=e.x+e.width,s=e.y+e.height;return this.y<e.y&&(t=new a({x:this.x,y:this.y,width:this.width,height:e.y-this.y}),r.push(t)),o<n&&(t=new a({x:o,y:this.y,width:n-o,height:this.height}),r.push(t)),s<i&&(t=new a({x:this.x,y:s,width:this.width,height:i-s}),r.push(t)),this.x<e.x&&(t=new a({x:this.x,y:this.y,width:e.x-this.x,height:this.height}),r.push(t)),r},e.canFit=function(e){return this.width>=e.width&&this.height>=e.height},a}),function(e,t){var r;"function"==typeof define&&define.amd?define("packery/js/packer",["./rect"],t):"object"==typeof module&&module.exports?module.exports=t(require("./rect")):(r=e.Packery=e.Packery||{}).Packer=t(r.Rect)}(window,function(t){"use strict";function e(e,t,r){this.width=e||0,this.height=t||0,this.sortDirection=r||"downwardLeftToRight",this.reset()}var r=e.prototype;r.reset=function(){this.spaces=[];var e=new t({x:0,y:0,width:this.width,height:this.height});this.spaces.push(e),this.sorter=n[this.sortDirection]||n.downwardLeftToRight},r.pack=function(e){for(var t=0;t<this.spaces.length;t++){var r=this.spaces[t];if(r.canFit(e)){this.placeInSpace(e,r);break}}},r.columnPack=function(e){for(var t=0;t<this.spaces.length;t++){var r=this.spaces[t];if(r.x<=e.x&&r.x+r.width>=e.x+e.width&&r.height>=e.height-.01){e.y=r.y,this.placed(e);break}}},r.rowPack=function(e){for(var t=0;t<this.spaces.length;t++){var r=this.spaces[t];if(r.y<=e.y&&r.y+r.height>=e.y+e.height&&r.width>=e.width-.01){e.x=r.x,this.placed(e);break}}},r.placeInSpace=function(e,t){e.x=t.x,e.y=t.y,this.placed(e)},r.placed=function(e){for(var t=[],r=0;r<this.spaces.length;r++){var n=this.spaces[r],i=n.getMaximalFreeRects(e);i?t.push.apply(t,i):t.push(n)}this.spaces=t,this.mergeSortSpaces()},r.mergeSortSpaces=function(){e.mergeRects(this.spaces),this.spaces.sort(this.sorter)},r.addSpace=function(e){this.spaces.push(e),this.mergeSortSpaces()},e.mergeRects=function(e){var t=0,r=e[t];e:for(;r;){for(var n=0,i=e[t+n];i;){if(i==r)n++;else{if(i.contains(r)){e.splice(t,1),r=e[t];continue e}r.contains(i)?e.splice(t+n,1):n++}i=e[t+n]}r=e[++t]}return e};var n={downwardLeftToRight:function(e,t){return e.y-t.y||e.x-t.x},rightwardTopToBottom:function(e,t){return e.x-t.x||e.y-t.y}};return e}),function(e,t){"function"==typeof define&&define.amd?define("packery/js/item",["outlayer/outlayer","./rect"],t):"object"==typeof module&&module.exports?module.exports=t(require("outlayer"),require("./rect")):e.Packery.Item=t(e.Outlayer,e.Packery.Rect)}(window,function(e,t){"use strict";function r(){e.Item.apply(this,arguments)}var n="string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform",i=r.prototype=Object.create(e.Item.prototype),o=i._create;i._create=function(){o.call(this),this.rect=new t};var s=i.moveTo;return i.moveTo=function(e,t){var r=Math.abs(this.position.x-e),n=Math.abs(this.position.y-t);this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&r<1&&n<1?this.goTo(e,t):s.apply(this,arguments)},i.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&n&&(this.element.style[n]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},i.disablePlacing=function(){this.isPlacing=!1},i.removeElem=function(){var e=this.element.parentNode;e&&e.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},i.showDropPlaceholder=function(){var e=this.dropPlaceholder;e||((e=this.dropPlaceholder=document.createElement("div")).className="packery-drop-placeholder",e.style.position="absolute"),e.style.width=this.size.width+"px",e.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(e)},i.positionDropPlaceholder=function(){this.dropPlaceholder.style[n]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},i.hideDropPlaceholder=function(){var e=this.dropPlaceholder.parentNode;e&&e.removeChild(this.dropPlaceholder)},r}),function(e,t){"function"==typeof define&&define.amd?define(["get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],t):"object"==typeof module&&module.exports?module.exports=t(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):e.Packery=t(e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}(window,function(h,e,m,t,r){"use strict";m.prototype.canFit=function(e){return this.width>=e.width-1&&this.height>=e.height-1};var n=e.create("packery");n.Item=r;var i=n.prototype;function o(e,t){return e.position.y-t.position.y||e.position.x-t.position.x}function s(e,t){return e.position.x-t.position.x||e.position.y-t.position.y}i._create=function(){e.prototype._create.call(this),this.packer=new t,this.shiftPacker=new t,this.isEnabled=!0,this.dragItemCount=0;var r=this;this.handleDraggabilly={dragStart:function(){r.itemDragStart(this.element)},dragMove:function(){r.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){r.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(e,t){t&&r.itemDragStart(e.currentTarget)},drag:function(e,t){t&&r.itemDragMove(e.currentTarget,t.position.left,t.position.top)},stop:function(e,t){t&&r.itemDragEnd(e.currentTarget)}}},i._resetLayout=function(){var e,t,r;this.getSize(),this._getMeasurements(),r=this._getOption("horizontal")?(e=1/0,t=this.size.innerHeight+this.gutter,"rightwardTopToBottom"):(e=this.size.innerWidth+this.gutter,t=1/0,"downwardLeftToRight"),this.packer.width=this.shiftPacker.width=e,this.packer.height=this.shiftPacker.height=t,this.packer.sortDirection=this.shiftPacker.sortDirection=r,this.packer.reset(),this.maxY=0,this.maxX=0},i._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},i._getItemLayoutPosition=function(e){var t;return this._setRectSize(e.element,e.rect),this.isShifting||0<this.dragItemCount?(t=this._getPackMethod(),this.packer[t](e.rect)):this.packer.pack(e.rect),this._setMaxXY(e.rect),e.rect},i.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},i._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},i._setMaxXY=function(e){this.maxX=Math.max(e.x+e.width,this.maxX),this.maxY=Math.max(e.y+e.height,this.maxY)},i._setRectSize=function(e,t){var r=h(e),n=r.outerWidth,i=r.outerHeight;(n||i)&&(n=this._applyGridGutter(n,this.columnWidth),i=this._applyGridGutter(i,this.rowHeight)),t.width=Math.min(n,this.packer.width),t.height=Math.min(i,this.packer.height)},i._applyGridGutter=function(e,t){if(!t)return e+this.gutter;var r=e%(t+=this.gutter);return e=Math[r&&r<1?"round":"ceil"](e/t)*t},i._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},i._manageStamp=function(e){var t,r,n=this.getItem(e);r=n&&n.isPlacing?n.rect:(t=this._getElementOffset(e),new m({x:this._getOption("originLeft")?t.left:t.right,y:this._getOption("originTop")?t.top:t.bottom})),this._setRectSize(e,r),this.packer.placed(r),this._setMaxXY(r)},i.sortItemsByPosition=function(){var e=this._getOption("horizontal")?s:o;this.items.sort(e)},i.fit=function(e,t,r){var n=this.getItem(e);n&&(this.stamp(n.element),n.enablePlacing(),this.updateShiftTargets(n),t=void 0===t?n.rect.x:t,r=void 0===r?n.rect.y:r,this.shift(n,t,r),this._bindFitEvents(n),n.moveTo(n.rect.x,n.rect.y),this.shiftLayout(),this.unstamp(n.element),this.sortItemsByPosition(),n.disablePlacing())},i._bindFitEvents=function(e){var t=this,r=0;function n(){2==++r&&t.dispatchEvent("fitComplete",null,[e])}e.once("layout",n),this.once("layoutComplete",n)},i.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},i.needsResizeLayout=function(){var e=h(this.element),t=this._getOption("horizontal")?"innerHeight":"innerWidth";return e[t]!=this.size[t]},i.resizeShiftPercentLayout=function(){var r,t,n,e=this._getItemsForLayout(this.items),i=this._getOption("horizontal"),o=i?"y":"x",s=i?"height":"width",a=i?"rowHeight":"columnWidth",l=i?"innerHeight":"innerWidth",u=this[a];(u=u&&u+this.gutter)?(this._getMeasurements(),r=this[a]+this.gutter,e.forEach(function(e){var t=Math.round(e.rect[o]/u);e.rect[o]=t*r})):(t=h(this.element)[l]+this.gutter,n=this.packer[s],e.forEach(function(e){e.rect[o]=e.rect[o]/n*t})),this.shiftLayout()},i.itemDragStart=function(e){var t;this.isEnabled&&(this.stamp(e),(t=this.getItem(e))&&(t.enablePlacing(),t.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(t)))},i.updateShiftTargets=function(e){this.shiftPacker.reset(),this._getBoundingRect();var i=this._getOption("originLeft"),o=this._getOption("originTop");this.stamps.forEach(function(e){var t,r,n=this.getItem(e);n&&n.isPlacing||(t=this._getElementOffset(e),r=new m({x:i?t.left:t.right,y:o?t.top:t.bottom}),this._setRectSize(e,r),this.shiftPacker.placed(r))},this);var l=this._getOption("horizontal"),t=l?"rowHeight":"columnWidth",u=l?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var h=this[t];if(h=h&&h+this.gutter)for(var r=Math.ceil(e.rect[u]/h),n=Math.floor((this.shiftPacker[u]+this.gutter)/h),c=(n-r)*h,s=0;s<n;s++){var a=l?0:s*h,p=l?s*h:0;this._addShiftTarget(a,p,c)}else c=this.shiftPacker[u]+this.gutter-e.rect[u],this._addShiftTarget(0,0,c);var d=this._getItemsForLayout(this.items),f=this._getPackMethod();d.forEach(function(e){var t=e.rect;this._setRectSize(e.element,t),this.shiftPacker[f](t),this._addShiftTarget(t.x,t.y,c);var r=l?t.x+t.width:t.x,n=l?t.y:t.y+t.height;if(this._addShiftTarget(r,n,c),h)for(var i=Math.round(t[u]/h),o=1;o<i;o++){var s=l?r:t.x+h*o,a=l?t.y+h*o:n;this._addShiftTarget(s,a,c)}},this)},i._addShiftTarget=function(e,t,r){var n,i=this._getOption("horizontal")?t:e;0!==i&&r<i||(n=e+","+t,-1!=this.shiftTargetKeys.indexOf(n)||(this.shiftTargetKeys.push(n),this.shiftTargets.push({x:e,y:t})))},i.shift=function(e,t,r){var s,a=1/0,l={x:t,y:r};this.shiftTargets.forEach(function(e){var t,r,n,i,o=(n=(r=l).x-(t=e).x,i=r.y-t.y,Math.sqrt(n*n+i*i));o<a&&(s=e,a=o)}),e.rect.x=s.x,e.rect.y=s.y};i.itemDragMove=function(e,t,r){var n,i,o=this.isEnabled&&this.getItem(e);function s(){n.shift(o,t,r),o.positionDropPlaceholder(),n.layout()}o&&(t-=this.size.paddingLeft,r-=this.size.paddingTop,n=this,i=new Date,this._itemDragTime&&i-this._itemDragTime<120?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(s,120)):(s(),this._itemDragTime=i))},i.itemDragEnd=function(e){var t,r,n=this.isEnabled&&this.getItem(e);function i(){2==++t&&(n.element.classList.remove("is-positioning-post-drag"),n.hideDropPlaceholder(),r.dispatchEvent("dragItemPositioned",null,[n]))}n&&(clearTimeout(this.dragTimeout),n.element.classList.add("is-positioning-post-drag"),t=0,r=this,n.once("layout",i),this.once("layoutComplete",i),n.moveTo(n.rect.x,n.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),n.disablePlacing(),this.unstamp(n.element))},i.bindDraggabillyEvents=function(e){this._bindDraggabillyEvents(e,"on")},i.unbindDraggabillyEvents=function(e){this._bindDraggabillyEvents(e,"off")},i._bindDraggabillyEvents=function(e,t){var r=this.handleDraggabilly;e[t]("dragStart",r.dragStart),e[t]("dragMove",r.dragMove),e[t]("dragEnd",r.dragEnd)},i.bindUIDraggableEvents=function(e){this._bindUIDraggableEvents(e,"on")},i.unbindUIDraggableEvents=function(e){this._bindUIDraggableEvents(e,"off")},i._bindUIDraggableEvents=function(e,t){var r=this.handleUIDraggable;e[t]("dragstart",r.start)[t]("drag",r.drag)[t]("dragstop",r.stop)};var a=i.destroy;return i.destroy=function(){a.apply(this,arguments),this.isEnabled=!1},n.Rect=m,n.Packer=t,n}),$(function(){$.widget("custom.iconselectmenu",$.ui.selectmenu,{_renderItem:function(e,t){var r=$("<li>"),n=$("<div>",{text:t.label});return t.disabled&&r.addClass("ui-state-disabled"),$("<span>",{style:t.element.attr("data-style"),class:"ui-icon "+t.element.attr("data-class")}).appendTo(n),r.append(n).appendTo(e)}})}),function(e){var t;"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.rasterizeHTML=e())}(function(){return function i(o,s,a){function l(r,e){if(!s[r]){if(!o[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(u)return u(r,!0);throw new Error("Cannot find module '"+r+"'")}var n=s[r]={exports:{}};o[r][0].call(n.exports,function(e){var t=o[r][1][e];return l(t||e)},n,n.exports,i,o,s,a)}return s[r].exports}for(var u="function"==typeof require&&require,e=0;e<a.length;e++)l(a[e]);return l}({1:[function(e,t,r){var n,i;n=this,i=function(e,t,r,n){var i=function(r){"use strict";var i={},t=[];i.joinUrl=function(e,t){return e?r.resolve(e,t):t},i.getConstantUniqueIdFor=function(e){return t.indexOf(e)<0&&t.push(e),t.indexOf(e)},i.clone=function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r};return i.parseOptionalParameters=function(e){var t,r,n={canvas:null,options:{}};return null==e[0]||(t=e[0],"object"==typeof(r=t)&&null!==r&&Object.prototype.toString.apply(t).match(/\[object (Canvas|HTMLCanvasElement)\]/i))?(n.canvas=e[0]||null,n.options=i.clone(e[1])):n.options=i.clone(e[0]),n},i}(e),o=function(s,a){"use strict";function l(e,t,r){var n=e[t];return e[t]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(this,[e,n])},n}var e={};return e.baseUrlRespectingXhr=function(t,o){return function(){var e=new t;return l(e,"open",function(e,t){var r=e.shift(),n=e.shift(),i=s.joinUrl(o,n);return t.apply(this,[r,i].concat(e))}),e}},e.finishNotifyingXhr=function(t){function r(){n-i<=0&&o&&s.resolve({totalCount:n})}function e(){var e=new t;return l(e,"send",function(e,t){return n+=1,t.apply(this,arguments)}),e.addEventListener("load",function(){i+=1,r()}),e}var n=0,i=0,o=!1,s=a.defer();return e.waitForRequestsToFinish=function(){return o=!0,r(),s.promise},e},e}(i,r),s=function(i){"use strict";function o(e){return Array.prototype.slice.call(e)}var e={};return e.fakeHover=function(e,t){var r=e.querySelector(t),n="rasterizehtmlhover";r&&(i.addClassNameRecursively(r,n),i.rewriteCssSelectorWith(e,":hover","."+n))},e.fakeActive=function(e,t){var r=e.querySelector(t),n="rasterizehtmlactive";r&&(i.addClassNameRecursively(r,n),i.rewriteCssSelectorWith(e,":active","."+n))},e.fakeFocus=function(e,t){var r=e.querySelector(t),n="rasterizehtmlfocus";r&&(i.addClassNameRecursively(r,n),i.rewriteCssSelectorWith(e,":focus","."+n))},e.persistInputValues=function(e){function t(e){return"checkbox"===e.type||"radio"===e.type}var r=e.querySelectorAll("input"),n=e.querySelectorAll("textarea");o(r).filter(t).forEach(function(e){e.checked?e.setAttribute("checked",""):e.removeAttribute("checked")}),o(r).filter(function(e){return!t(e)}).forEach(function(e){e.setAttribute("value",e.value)}),o(n).forEach(function(e){e.textContent=e.value})},e.rewriteTagNameSelectorsToLowerCase=function(e){i.lowercaseCssTypeSelectors(e,i.findHtmlOnlyNodeNames(e))},e}(function(){"use strict";function a(e){return Array.prototype.slice.call(e)}var r={};r.addClassNameRecursively=function(e,t){e.className+=" "+t,e.parentNode!==e.ownerDocument&&r.addClassNameRecursively(e.parentNode,t)};function i(e,t){var r,n,i,o,s=e.cssText.replace(/^[^\{]+/,"");n=t+" "+s,i=(r=e).parentStyleSheet,o=a(i.cssRules).indexOf(r),i.insertRule(n,o+1),i.deleteRule(o)}function o(e){var t;e.textContent=(t=e.sheet.cssRules,a(t).reduce(function(e,t){return e+t.cssText},""))}function n(e,t,n){var r="((?:^|[^.#:\\w])|(?=\\W))("+t.join("|")+")(?=\\W|$)";a(e.querySelectorAll("style")).forEach(function(e){var t=a(e.sheet.cssRules).filter(function(e){return e.selectorText&&new RegExp(r,"i").test(e.selectorText)});t.length&&(t.forEach(function(e){var t=e.selectorText.replace(new RegExp(r,"gi"),function(e,t,r){return t+n(r)});t!==e.selectorText&&i(e,t)}),o(e))})}return r.rewriteCssSelectorWith=function(e,t,r){n(e,[t],function(){return r})},r.lowercaseCssTypeSelectors=function(e,t){n(e,t,function(e){return e.toLowerCase()})},r.findHtmlOnlyNodeNames=function(e){for(var t,r=e.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),n={},i={};r.nextNode();)t=r.currentNode.tagName.toLowerCase(),"http://www.w3.org/1999/xhtml"===r.currentNode.namespaceURI?n[t]=!0:i[t]=!0;return Object.keys(n).filter(function(e){return!i[e]})},r}()),a=function(u,g,y,_){"use strict";var e={};e.executeJavascript=function(e,t){function r(){var e=l.contentDocument;_.document.getElementsByTagName("body")[0].removeChild(l),c.resolve({document:e,errors:h})}var n,i,o,s,a,l=(n=_.document,i="iframe",o=t.width,s=t.height,(a=n.createElement(i)).style.visibility="hidden",a.style.width=o+"px",a.style.height=s+"px",a.style.position="absolute",a.style.top=-1e4-s+"px",a.style.left=-1e4-o+"px",n.getElementsByTagName("body")[0].appendChild(a),a),u=e.documentElement.outerHTML,h=[],c=y.defer(),p=t.executeJsTimeout||0;l.onload=function(){var e;e=y.defer(),0<p?setTimeout(e.resolve,p):e.resolve(),e.promise.then(f.waitForRequestsToFinish).then(r)};var d=l.contentWindow.XMLHttpRequest,f=g.finishNotifyingXhr(d),m=g.baseUrlRespectingXhr(f,t.baseUrl);return l.contentDocument.open(),l.contentWindow.XMLHttpRequest=m,l.contentWindow.onerror=function(e){h.push({resourceType:"scriptExecution",msg:e})},l.contentDocument.write("<!DOCTYPE html>"),l.contentDocument.write(u),l.contentDocument.close(),c.promise};function m(e,t,r,n,i){var o,s,a,l,u,h,c,p,d,f,m,g,y=Math.max(e.documentElement.scrollWidth,e.body.clientWidth),v=Math.max(e.documentElement.scrollHeight,e.body.scrollHeight,e.body.clientHeight);if(t){if(!(h=e.querySelector(t)))throw{message:"Clipping selector not found"};o=(c=h.getBoundingClientRect()).top,s=c.left,a=c.width,l=c.height}else s=o=0,a=y,l=v;return d={width:a,height:l},f=r,m=n,g=i,p={width:Math.max(d.width*g,f),height:Math.max(d.height*g,m)},u=_.getComputedStyle(e.documentElement).fontSize,{left:s,top:o,width:p.width,height:p.height,viewportWidth:y,viewportHeight:v,rootFontSize:u}}e.calculateDocumentContentSize=function(e,r){var n,t,i,o,s,a,l,u,h,c,p=e.documentElement.outerHTML,d=y.defer(),f=r.zoom||1;return t=r.width,i=r.height,o=f,h=Math.floor(t/o),c=Math.floor(i/o),s=_.document,a=h,l=c,(u=s.createElement("iframe")).style.width=a+"px",u.style.height=l+"px",u.style.visibility="hidden",u.style.position="absolute",u.style.top=-1e4-l+"px",u.style.left=-1e4-a+"px",u.sandbox="allow-same-origin",n=u,_.document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){var e,t=n.contentDocument;try{e=m(t,r.clip,r.width,r.height,f),d.resolve(e)}catch(e){d.reject(e)}finally{_.document.getElementsByTagName("body")[0].removeChild(n)}},n.contentDocument.open(),n.contentDocument.write("<!DOCTYPE html>"),n.contentDocument.write(p),n.contentDocument.close(),d.promise};e.parseHTML=function(e){var t=_.document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e,function(e,t){var r,n,i,o,s=/<html((?:\s+[^>]*)?)>/im.exec(t),a=_.document.implementation.createHTMLDocument("");if(s)for(r="<div"+s[1]+"></div>",a.documentElement.innerHTML=r,i=a.querySelector("div"),n=0;n<i.attributes.length;n++)o=i.attributes[n],e.documentElement.setAttribute(o.name,o.value)}(t,e),t};function r(e){if(null===e||(t=e,"http://www.w3.org/1999/xhtml"===(r=(new DOMParser).parseFromString("<","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)?0<t.getElementsByTagName("parsererror").length:0<t.getElementsByTagNameNS(r,"parsererror").length))throw{message:"Invalid source"};var t,r}e.validateXHTML=function(e){var t=(new DOMParser).parseFromString(e,"application/xml");r(t)};function n(e,t){function r(){l.reject({message:"Unable to load page"})}var n,i,o=new window.XMLHttpRequest,s=u.joinUrl(t.baseUrl,e),a=(n=s,"none"===(i=t.cache)||"repeated"===i?(null!==h&&"repeated"===i||(h=Date.now()),n+"?_="+h):n),l=y.defer();o.addEventListener("load",function(){200===o.status||0===o.status?l.resolve(o.responseXML):r()},!1),o.addEventListener("error",function(){r()},!1);try{o.open("GET",a,!0),o.responseType="document",o.send(null)}catch(e){r()}return l.promise}var h=null;return e.loadDocument=function(e,t){return n(e,t).then(function(e){return r(e),e})},e}(i,o,r,window),l=function(o,e){"use strict";function n(e,t){return t?URL.createObjectURL(new Blob([e],{type:"image/svg+xml"})):"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(e)}function s(e){e instanceof Blob&&URL.revokeObjectURL(e)}function i(e){var t=document.createElement("canvas"),r=new Image,n=o.defer();return r.onload=function(){var e=t.getContext("2d");try{e.drawImage(r,0,0),t.toDataURL("image/png"),n.resolve(!0)}catch(e){n.resolve(!1)}},r.onerror=n.reject,r.src=e,n.promise}function r(){var t,r=o.defer();return e.URL?(t=n(u,!0),i(t).then(function(e){return s(t),!e&&i(n(u,!1)).then(function(e){return e})},function(){return!1}).then(function(e){r.resolve(!e)},function(){r.reject()})):r.resolve(!1),r.promise}function a(t){return void 0===l&&(l=r()),l.then(function(e){return n(t,e)})}var l,t={},u='<svg xmlns="http://www.w3.org/2000/svg" width="1" height="1"><foreignObject></foreignObject></svg>';return t.renderSvg=function(e){function t(){r&&s(r)}var r,n=o.defer(),i=new Image;return i.onload=function(){i.onload=null,i.onerror=null,t(),n.resolve(i)},i.onerror=function(){t(),n.reject()},a(e).then(function(e){r=e,i.src=r},n.reject),n.promise},t}(r,window);return function(h,a,c){"use strict";var l={};l.drawDocument=function(){var e,t,r,n,i,o,s,a=arguments[0],l=Array.prototype.slice.call(arguments,1),u=h.parseOptionalParameters(l);return c.rasterize(a,u.canvas,(t=(e=u).canvas,r=e.options,n=t?t.width:300,i=t?t.height:200,o={width:void 0!==r.width?r.width:n,height:void 0!==r.height?r.height:i},(s=h.clone(e.options)).width=o.width,s.height=o.height,s))};l.drawHTML=function(){var e,t,r,n,i=arguments[0],o=Array.prototype.slice.call(arguments,1),s=h.parseOptionalParameters(o);return e=i,t=s.canvas,r=s.options,n=a.parseHTML(e),l.drawDocument(n,t,r)};function n(r,n,i){return a.loadDocument(r,i).then(function(e){var t=function(e,t,r){var n=document.implementation.createHTMLDocument("");n.replaceChild(e.documentElement,n.documentElement);var i=r?h.clone(r):{};return r.baseUrl||(i.baseUrl=t),{document:n,options:i}}(e,r,i);return l.drawDocument(t.document,n,t.options)})}return l.drawURL=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1),r=h.parseOptionalParameters(t);return n(e,r.canvas,r.options)},l}(i,a,function(r,o,s,n,e,a){"use strict";function i(){return{message:"Error rendering page"}}function l(t){return e.renderSvg(t).then(function(e){return{image:e,svg:t}},function(){throw i()})}function u(e,t,r){return n.drawDocumentAsSvg(e,r).then(l).then(function(e){return t&&function(e,t){try{t.getContext("2d").drawImage(e,0,0)}catch(e){throw i()}}(e.image,t),e})}var t={};return t.rasterize=function(n,e,i){var t=r.clone(i);return t.inlineScripts=!0===i.executeJs,a.inlineReferences(n,t).then(function(t){return i.executeJs?(e=n,r=i,o.executeJavascript(e,r).then(function(e){var t=e.document;return s.persistInputValues(t),{document:t,errors:e.errors}}).then(function(e){return{document:e.document,errors:t.concat(e.errors)}})):{document:n,errors:t};var e,r}).then(function(t){return u(t.document,e,i).then(function(e){return{image:e.image,svg:e.svg,errors:t.errors}})})},t}(i,a,s,function(u,h,c){"use strict";var n={};return n.getSvgForDocument=function(e,t,r){h.rewriteTagNameSelectorsToLowerCase(e);var n=c.serializeToString(e);u.validateXHTML(n);var i,o,s,a,l=function(e,t){var r,n;t=t||1,r=Math.round(e.viewportWidth),n=Math.round(e.viewportHeight);var i={x:-e.left,y:-e.top,width:r,height:n};return 1!==t&&(i.style="-webkit-transform: scale("+t+"); -webkit-transform-origin: 0 0; transform: scale("+t+"); transform-origin: 0 0;"),i}(t,r);return a=(s=l).style||"",s.style=a+"float: left;",l.externalResourcesRequired=!0,'<svg xmlns="http://www.w3.org/2000/svg" width="'+t.width+'" height="'+t.height+'" font-size="'+t.rootFontSize+'"><foreignObject'+(i=l,(o=Object.keys(i)).length?" "+o.map(function(e){return e+'="'+i[e]+'"'}).join(" "):"")+">"+n+"</foreignObject></svg>"},n.drawDocumentAsSvg=function(t,r){return r.hover&&h.fakeHover(t,r.hover),r.active&&h.fakeActive(t,r.active),r.focus&&h.fakeFocus(t,r.focus),u.calculateDocumentContentSize(t,r).then(function(e){return n.getSvgForDocument(t,e,r.zoom)})},n}(a,s,t),l,n))},"object"==typeof r?t.exports=i(e("url"),e("xmlserializer"),e("ayepromise"),e("inlineresources")):n.rasterizeHTML=i(url,xmlserializer,ayepromise,inlineresources)},{ayepromise:2,inlineresources:30,url:"j37I/u",xmlserializer:37}],2:[function(e,t,r){var n,i;n=this,i=function(){"use strict";function u(){var t=!1;return function(e){return function(){t||(t=!0,e.apply(null,arguments))}}}function h(i,o){function s(t,r){setTimeout(function(){var e;try{e=t(r)}catch(e){return void a.reject(e)}e===a.promise?a.reject(new TypeError("Cannot resolve promise with itself")):a.resolve(e)},1)}var a=e.defer();return{promise:a.promise,handle:function(e,t){var r,n;e===c?(n=t,i&&i.call?s(i,n):a.resolve(n)):(r=t,o&&o.call?s(o,r):a.reject(r))}}}var e={},c=1;return e.defer=function(){function i(e,t){s=e,n=t,a.forEach(function(e){e.handle(s,n)}),a=null}function o(e){i(2,e)}function t(e,t){var r=h(e,t);return 0===s?a.push(r):r.handle(s,n),r.promise}var n,s=0,a=[],l=function(e){var t,r,n;try{n=(r=e)&&r.then,t="object"==typeof r&&"function"==typeof n?function(){return n.apply(r,arguments)}:void 0}catch(e){return void o(e)}t?function(e){var t=u();try{e(t(l),t(o))}catch(e){t(o)(e)}}(t):i(c,e)},e=u();return{resolve:e(l),reject:e(o),promise:{then:t,fail:function(e){return t(null,e)}}}},e},"object"==typeof r?t.exports=i():n.ayepromise=i()},{}],3:[function(e,D,I){(function(M){!function(e){function y(e){throw RangeError(f[e])}function r(e,t){for(var r=e.length;r--;)e[r]=t(e[r]);return e}function t(e,t){return r(e.split(d),t).join(".")}function v(e){for(var t,r,n=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function _(e){return r(e,function(e){var t="";return 65535<e&&(t+=R((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+R(e)}).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?k(e/h):e>>1,e+=k(e/t);m*P>>1<e;n+=w)e=k(e/m);return k(n+(m+1)*e/(e+u))}function n(e){var t,r,n,i,o,s,a,l,u,h,c=[],p=e.length,d=0,f=A,m=C,g=e.lastIndexOf(T);for(g<0&&(g=0),r=0;r<g;++r)128<=e.charCodeAt(r)&&y("not-basic"),c.push(e.charCodeAt(r));for(n=0<g?g+1:0;n<p;){for(i=d,o=1,s=w;p<=n&&y("invalid-input"),h=e.charCodeAt(n++),(w<=(a=h-48<10?h-22:h-65<26?h-65:h-97<26?h-97:w)||a>k((S-d)/o))&&y("overflow"),d+=a*o,!(a<(l=s<=m?x:m+P<=s?P:s-m));s+=w)o>k(S/(u=w-l))&&y("overflow"),o*=u;m=E(d-i,t=c.length+1,0==i),k(d/t)>S-f&&y("overflow"),f+=k(d/t),d%=t,c.splice(d++,0,f)}return _(c)}function i(e){for(var t,r,n,i,o,s,a,l,u,h,c,p=[],d=(e=v(e)).length,f=A,m=C,g=t=0;g<d;++g)(l=e[g])<128&&p.push(R(l));for(r=n=p.length,n&&p.push(T);r<d;){for(i=S,g=0;g<d;++g)f<=(l=e[g])&&l<i&&(i=l);for(i-f>k((S-t)/(u=r+1))&&y("overflow"),t+=(i-f)*u,f=i,g=0;g<d;++g)if((l=e[g])<f&&++t>S&&y("overflow"),l==f){for(o=t,s=w;!(o<(a=s<=m?x:m+P<=s?P:s-m));s+=w)c=o-a,h=w-a,p.push(R(b(a+c%h,0))),o=k(c/h);p.push(R(b(o,0))),m=E(t,u,r==n),t=0,++r}++t,++f}return p.join("")}var o="object"==typeof I&&I,s="object"==typeof D&&D&&D.exports==o&&D,a="object"==typeof M&&M;a.global!==a&&a.window!==a||(e=a);var l,S=2147483647,w=36,x=1,P=26,u=38,h=700,C=72,A=128,T="-",c=/^xn--/,p=/[^ -~]/,d=/\x2E|\u3002|\uFF0E|\uFF61/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=w-x,k=Math.floor,R=String.fromCharCode,g={version:"1.2.4",ucs2:{decode:v,encode:_},decode:n,encode:i,toASCII:function(e){return t(e,function(e){return p.test(e)?"xn--"+i(e):e})},toUnicode:function(e){return t(e,function(e){return c.test(e)?n(e.slice(4).toLowerCase()):e})}};if(0,o&&!o.nodeType)if(s)s.exports=g;else for(l in g)g.hasOwnProperty(l)&&(o[l]=g[l]);else e.punycode=g}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t){"use strict";t.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var a=e.length;0<s&&s<a&&(a=s);for(var l,u,h=0;h<a;++h){var c,p=e[h].replace(o,"%20"),d=p.indexOf(r),f=0<=d?(c=p.substr(0,d),p.substr(d+1)):(c=p,""),m=decodeURIComponent(c),g=decodeURIComponent(f);l=i,u=m,Object.prototype.hasOwnProperty.call(l,u)?y(i[m])?i[m].push(g):i[m]=[i[m],g]:i[m]=g}return i};var y=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],5:[function(e,t){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?function(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}(a(r),function(e){var t=encodeURIComponent(o(e))+i;return s(r[e])?r[e].map(function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(r[e]))}).join(n):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(r)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],6:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":4,"./encode":5}],7:[function(X,e){function J(e,t,r,n,i,o){this.message=e,this.expected=t,this.found=r,this.offset=n,this.line=i,this.column=o,this.name="SyntaxError"}function t(){this.constructor=r}var r,n;e.exports=(r=J,n=Error,t.prototype=n.prototype,r.prototype=new t,{SyntaxError:J,parse:function(a){function e(e){return L!==e&&(e<L&&(L=0,N={line:1,column:1,seenCR:!1}),function(e,t,r){for(var n,i=t;i<r;i++)"\n"===(n=a.charAt(i))?(e.seenCR||e.line++,e.column=1,e.seenCR=!1):"\r"===n||"\u2028"===n||"\u2029"===n?(e.line++,e.column=1,e.seenCR=!0):(e.column++,e.seenCR=!1)}(N,L,e),L=e),N}function l(e){O<B||(B<O&&(B=O,j=[]),j.push(e))}function t(){var e,t=function e(){var t,r,n,i,o,s;if(t=O,(r=u())!==c){for(n=[],i=h();i!==c;)n.push(i),i=h();if(n!==c)if(44===a.charCodeAt(O)?(i=f,O++):(i=c,0===z&&l(m)),i!==c){for(o=[],s=h();s!==c;)o.push(s),s=h();t=o!==c&&(s=e())!==c?r=g(r,s):(O=t,d)}else O=t,t=d;else O=t,t=d}else O=t,t=d;return t===c&&(t=O,(r=u())!==c&&(r=y(r)),t=r),t}();return t===c&&(t=O,(e=[])!==c&&(e=p()),t=e),t}function u(){var e,t,r,n,i=function(){var e,t,r,n;if(e=O,(t=o())!==c){if(r=[],(n=h())!==c)for(;n!==c;)r.push(n),n=h();else r=d;e=r!==c&&(n=function(){var e,t,r,n;return e=O,a.substr(O,7)===P?(t=P,O+=7):(t=c,0===z&&l(C)),e=t!==c&&(r=s())!==c?(41===a.charCodeAt(O)?(n=S,O++):(n=c,0===z&&l(w)),n!==c?t=x(r):(O=e,d)):(O=e,d)}())!==c?t=v(t,n):(O=e,d)}else O=e,e=d;return e===c&&(e=O,(t=o())!==c&&(t=_(t)),e=t),e}();return i===c&&(e=O,a.substr(O,6)===A?(t=A,O+=6):(t=c,0===z&&l(T)),i=e=t!==c&&(r=s())!==c?(41===a.charCodeAt(O)?(n=S,O++):(n=c,0===z&&l(w)),n!==c?t=k(r):(O=e,d)):(O=e,d)),i}function o(){var e,t,r,n=O;return a.substr(O,4)===b?(e=b,O+=4):(e=c,0===z&&l(E)),n=e!==c&&(t=s())!==c?(41===a.charCodeAt(O)?(r=S,O++):(r=c,0===z&&l(w)),r!==c?e=x(t):(O=n,d)):(O=n,d)}function s(){var e,t=[];if(R.test(a.charAt(O))?(e=a.charAt(O),O++):(e=c,0===z&&l(M)),e!==c)for(;e!==c;)t.push(e),R.test(a.charAt(O))?(e=a.charAt(O),O++):(e=c,0===z&&l(M));else t=d;return t!==c&&(t=D(t)),t}function h(){var e;return I.test(a.charAt(O))?(e=a.charAt(O),O++):(e=c,0===z&&l(F)),e}var r=1<arguments.length?arguments[1]:{},c={},n={start:t},i=t,p=function(){return[]},d=c,f=",",m={type:"literal",value:",",description:'","'},g=function(e,t){return[e].concat(t)},y=function(e){return[e]},v=function(e,t){return{url:e,format:t}},_=function(e){return{url:e}},b="url(",E={type:"literal",value:"url(",description:'"url("'},S=")",w={type:"literal",value:")",description:'")"'},x=function(e){return e},P="format(",C={type:"literal",value:"format(",description:'"format("'},A="local(",T={type:"literal",value:"local(",description:'"local("'},k=function(e){return{local:e}},R=/^[^)]/,M={type:"class",value:"[^)]",description:"[^)]"},D=function(e){return K.extractValue(e.join(""))},I=/^[ \t\r\n\f]/,F={type:"class",value:"[ \\t\\r\\n\\f]",description:"[ \\t\\r\\n\\f]"},O=0,L=0,N={line:1,column:1,seenCR:!1},B=0,j=[],z=0;if("startRule"in r){if(!(r.startRule in n))throw new Error("Can't start parsing from rule \""+r.startRule+'".');i=n[r.startRule]}var U,V,q,H,G,W,K=X("../util");if((U=i())!==c&&O===a.length)return U;throw U!==c&&O<a.length&&l({type:"end",description:"end of input"}),V=null,q=j,G=e(H=B),W=H<a.length?a.charAt(H):null,null!==q&&function(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(q),new J(null!==V?V:function(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)r[n]=e[n].description;return"Expected "+(1<e.length?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0])+" but "+(t?'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+i(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+i(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+i(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+i(e)})+'"':"end of input")+" found.";function i(e){return e.charCodeAt(0).toString(16).toUpperCase()}}(q,W),q,W,H,G.line,G.column)}})},{"../util":9}],8:[function(e,t,r){var n=e("./grammar");r.SyntaxError=function(e,t){this.message=e,this.offset=t},r.parse=function(e){try{return n.parse(e)}catch(e){throw new r.SyntaxError(e.message,e.offset)}},r.serialize=function(e){return e.map(function(e){var t;return e.url?(t='url("'+e.url+'")',e.format&&(t+=' format("'+e.format+'")')):t='local("'+e.local+'")',t}).join(", ")}},{"./grammar":7}],9:[function(e,t,r){r.extractValue=function(e){return t=e.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"),n=/^'(.*)'$/,(r=/^"(.*)"$/).test(t)?t.replace(r,"$1"):n.test(t)?t.replace(n,"$1"):t;var t,r,n}},{}],10:[function(e,t,r){var n={CSSRule:e("./CSSRule").CSSRule,MatcherList:e("./MatcherList").MatcherList,CSSDocumentRule:function(){n.CSSRule.call(this),this.matcher=new n.MatcherList,this.cssRules=[]}};n.CSSDocumentRule.prototype=new n.CSSRule,n.CSSDocumentRule.prototype.constructor=n.CSSDocumentRule,n.CSSDocumentRule.prototype.type=10,Object.defineProperty(n.CSSDocumentRule.prototype,"cssText",{get:function(){for(var e=[],t=0,r=this.cssRules.length;t<r;t++)e.push(this.cssRules[t].cssText);return"@-moz-document "+this.matcher.matcherText+" {"+e.join("")+"}"}}),r.CSSDocumentRule=n.CSSDocumentRule},{"./CSSRule":16,"./MatcherList":22}],11:[function(e,t,r){var n={CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:e("./CSSRule").CSSRule,CSSFontFaceRule:function(){n.CSSRule.call(this),this.style=new n.CSSStyleDeclaration,this.style.parentRule=this}};n.CSSFontFaceRule.prototype=new n.CSSRule,n.CSSFontFaceRule.prototype.constructor=n.CSSFontFaceRule,n.CSSFontFaceRule.prototype.type=5,Object.defineProperty(n.CSSFontFaceRule.prototype,"cssText",{get:function(){return"@font-face {"+this.style.cssText+"}"}}),r.CSSFontFaceRule=n.CSSFontFaceRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],12:[function(e,t,r){var n={CSSRule:e("./CSSRule").CSSRule,CSSStyleSheet:e("./CSSStyleSheet").CSSStyleSheet,MediaList:e("./MediaList").MediaList,CSSImportRule:function(){n.CSSRule.call(this),this.href="",this.media=new n.MediaList,this.styleSheet=new n.CSSStyleSheet}};n.CSSImportRule.prototype=new n.CSSRule,n.CSSImportRule.prototype.constructor=n.CSSImportRule,n.CSSImportRule.prototype.type=3,Object.defineProperty(n.CSSImportRule.prototype,"cssText",{get:function(){var e=this.media.mediaText;return"@import url("+this.href+")"+(e?" "+e:"")+";"},set:function(e){for(var t,r,n=0,i="",o="";r=e.charAt(n);n++)switch(r){case" ":case"\t":case"\r":case"\n":case"\f":"after-import"===i?i="url":o+=r;break;case"@":i||e.indexOf("@import",n)!==n||(i="after-import",n+="import".length,o="");break;case"u":if("url"===i&&e.indexOf("url(",n)===n){if(-1===(t=e.indexOf(")",n+1)))throw n+': ")" not found';n+="url(".length;var s=e.slice(n,t);s[0]!==s[s.length-1]||'"'!==s[0]&&"'"!==s[0]||(s=s.slice(1,-1)),this.href=s,n=t,i="media"}break;case'"':if("url"===i){if(!(t=e.indexOf('"',n+1)))throw n+": '\"' not found";this.href=e.slice(n+1,t),n=t,i="media"}break;case"'":if("url"===i){if(!(t=e.indexOf("'",n+1)))throw n+': "\'" not found';this.href=e.slice(n+1,t),n=t,i="media"}break;case";":"media"===i&&o&&(this.media.mediaText=o.trim());break;default:"media"===i&&(o+=r)}}}),r.CSSImportRule=n.CSSImportRule},{"./CSSRule":16,"./CSSStyleSheet":19,"./MediaList":23}],13:[function(e,t,r){var n={CSSRule:e("./CSSRule").CSSRule,CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSKeyframeRule:function(){n.CSSRule.call(this),this.keyText="",this.style=new n.CSSStyleDeclaration,this.style.parentRule=this}};n.CSSKeyframeRule.prototype=new n.CSSRule,n.CSSKeyframeRule.prototype.constructor=n.CSSKeyframeRule,n.CSSKeyframeRule.prototype.type=9,Object.defineProperty(n.CSSKeyframeRule.prototype,"cssText",{get:function(){return this.keyText+" {"+this.style.cssText+"} "}}),r.CSSKeyframeRule=n.CSSKeyframeRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],14:[function(e,t,r){var n={CSSRule:e("./CSSRule").CSSRule,CSSKeyframesRule:function(){n.CSSRule.call(this),this.name="",this.cssRules=[]}};n.CSSKeyframesRule.prototype=new n.CSSRule,n.CSSKeyframesRule.prototype.constructor=n.CSSKeyframesRule,n.CSSKeyframesRule.prototype.type=8,Object.defineProperty(n.CSSKeyframesRule.prototype,"cssText",{get:function(){for(var e=[],t=0,r=this.cssRules.length;t<r;t++)e.push("  "+this.cssRules[t].cssText);return"@"+(this._vendorPrefix||"")+"keyframes "+this.name+" { \n"+e.join("\n")+"\n}"}}),r.CSSKeyframesRule=n.CSSKeyframesRule},{"./CSSRule":16}],15:[function(e,t,r){var n={CSSRule:e("./CSSRule").CSSRule,MediaList:e("./MediaList").MediaList,CSSMediaRule:function(){n.CSSRule.call(this),this.media=new n.MediaList,this.cssRules=[]}};n.CSSMediaRule.prototype=new n.CSSRule,n.CSSMediaRule.prototype.constructor=n.CSSMediaRule,n.CSSMediaRule.prototype.type=4,Object.defineProperty(n.CSSMediaRule.prototype,"cssText",{get:function(){for(var e=[],t=0,r=this.cssRules.length;t<r;t++)e.push(this.cssRules[t].cssText);return"@media "+this.media.mediaText+" {"+e.join("")+"}"}}),r.CSSMediaRule=n.CSSMediaRule},{"./CSSRule":16,"./MediaList":23}],16:[function(e,t,r){var n={CSSRule:function(){this.parentRule=null,this.parentStyleSheet=null}};n.CSSRule.STYLE_RULE=1,n.CSSRule.IMPORT_RULE=3,n.CSSRule.MEDIA_RULE=4,n.CSSRule.FONT_FACE_RULE=5,n.CSSRule.PAGE_RULE=6,n.CSSRule.WEBKIT_KEYFRAMES_RULE=8,n.CSSRule.WEBKIT_KEYFRAME_RULE=9,n.CSSRule.prototype={constructor:n.CSSRule},r.CSSRule=n.CSSRule},{}],17:[function(e,t,r){var o={CSSStyleDeclaration:function(){this.length=0,this.parentRule=null,this._importants={}}};o.CSSStyleDeclaration.prototype={constructor:o.CSSStyleDeclaration,getPropertyValue:function(e){return this[e]||""},setProperty:function(e,t,r){(!this[e]||Array.prototype.indexOf.call(this,e)<0)&&(this[this.length]=e,this.length++),this[e]=t,this._importants[e]=r},removeProperty:function(e){if(!(e in this))return"";var t=Array.prototype.indexOf.call(this,e);if(t<0)return"";var r=this[e];return this[e]="",Array.prototype.splice.call(this,t,1),r},getPropertyCSSValue:function(){},getPropertyPriority:function(e){return this._importants[e]||""},getPropertyShorthand:function(){},isPropertyImplicit:function(){},get cssText(){for(var e=[],t=0,r=this.length;t<r;++t){var n=this[t],i=this.getPropertyValue(n),o=(o=this.getPropertyPriority(n))&&" !"+o;e[t]=n+": "+i+o+";"}return e.join(" ")},set cssText(e){for(var t,r=this.length;r--;)this[t=this[r]]="";Array.prototype.splice.call(this,0,this.length),this._importants={};var n=o.parse("#bogus{"+e+"}").cssRules[0].style,i=n.length;for(r=0;r<i;++r)t=n[r],this.setProperty(n[r],n.getPropertyValue(t),n.getPropertyPriority(t))}},r.CSSStyleDeclaration=o.CSSStyleDeclaration,o.parse=e("./parse").parse},{"./parse":27}],18:[function(e,t,r){var c={CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSRule:e("./CSSRule").CSSRule,CSSStyleRule:function(){c.CSSRule.call(this),this.selectorText="",this.style=new c.CSSStyleDeclaration,this.style.parentRule=this}};c.CSSStyleRule.prototype=new c.CSSRule,c.CSSStyleRule.prototype.constructor=c.CSSStyleRule,c.CSSStyleRule.prototype.type=1,Object.defineProperty(c.CSSStyleRule.prototype,"cssText",{get:function(){return this.selectorText?this.selectorText+" {"+this.style.cssText+"}":""},set:function(e){var t=c.CSSStyleRule.parse(e);this.style=t.style,this.selectorText=t.selectorText}}),c.CSSStyleRule.parse=function(e){for(var t,r,n,i=0,o="selector",s=i,a="",l={selector:!0,value:!0},u=new c.CSSStyleRule,h="";n=e.charAt(i);i++)switch(n){case" ":case"\t":case"\r":case"\n":case"\f":if(l[o])switch(e.charAt(i-1)){case" ":case"\t":case"\r":case"\n":case"\f":break;default:a+=" "}break;case'"':if(s=i+1,!(t=e.indexOf('"',s)+1))throw'" is missing';a+=e.slice(i,t),i=t-1;break;case"'":if(s=i+1,!(t=e.indexOf("'",s)+1))throw"' is missing";a+=e.slice(i,t),i=t-1;break;case"/":if("*"===e.charAt(i+1)){if(i+=2,-1===(t=e.indexOf("*/",i)))throw new SyntaxError("Missing */");i=t+1}else a+=n;break;case"{":"selector"===o&&(u.selectorText=a.trim(),a="",o="name");break;case":":"name"===o?(r=a.trim(),a="",o="value"):a+=n;break;case"!":"value"===o&&e.indexOf("!important",i)===i?i+=(h="important").length:a+=n;break;case";":"value"===o?(u.style.setProperty(r,a.trim(),h),a=h="",o="name"):a+=n;break;case"}":if("value"===o)u.style.setProperty(r,a.trim(),h),a=h="";else{if("name"===o)break;a+=n}o="selector";break;default:a+=n}return u},r.CSSStyleRule=c.CSSStyleRule},{"./CSSRule":16,"./CSSStyleDeclaration":17}],19:[function(e,t,r){var n={StyleSheet:e("./StyleSheet").StyleSheet,CSSStyleRule:e("./CSSStyleRule").CSSStyleRule,CSSStyleSheet:function(){n.StyleSheet.call(this),this.cssRules=[]}};n.CSSStyleSheet.prototype=new n.StyleSheet,n.CSSStyleSheet.prototype.constructor=n.CSSStyleSheet,n.CSSStyleSheet.prototype.insertRule=function(e,t){if(t<0||t>this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");var r=n.parse(e).cssRules[0];return(r.parentStyleSheet=this).cssRules.splice(t,0,r),t},n.CSSStyleSheet.prototype.deleteRule=function(e){if(e<0||e>=this.cssRules.length)throw new RangeError("INDEX_SIZE_ERR");this.cssRules.splice(e,1)},n.CSSStyleSheet.prototype.toString=function(){for(var e="",t=this.cssRules,r=0;r<t.length;r++)e+=t[r].cssText+"\n";return e},r.CSSStyleSheet=n.CSSStyleSheet,n.parse=e("./parse").parse},{"./CSSStyleRule":18,"./StyleSheet":24,"./parse":27}],20:[function(e,t,r){var n={CSSValue:function(){}};n.CSSValue.prototype={constructor:n.CSSValue,set cssText(e){var t=this._getConstructorName();throw new Exception('DOMException: property "cssText" of "'+t+'" is readonly!')},get cssText(){var e=this._getConstructorName();throw new Exception('getter "cssText" of "'+e+'" is not implemented!')},_getConstructorName:function(){return this.constructor.toString().match(/function\s([^\(]+)/)[1]}},r.CSSValue=n.CSSValue},{}],21:[function(e,t,r){var n={CSSValue:e("./CSSValue").CSSValue,CSSValueExpression:function(e,t){this._token=e,this._idx=t}};n.CSSValueExpression.prototype=new n.CSSValue,n.CSSValueExpression.prototype.constructor=n.CSSValueExpression,n.CSSValueExpression.prototype.parse=function(){for(var e,t,r=this._token,n=this._idx,i="",o="",s=[];;++n){if(""==(t=r.charAt(n))){o="css expression error: unfinished expression!";break}switch(t){case"(":s.push(t),i+=t;break;case")":s.pop(t),i+=t;break;case"/":(e=this._parseJSComment(r,n))?e.error?o="css expression error: unfinished comment in expression!":n=e.idx:(e=this._parseJSRexExp(r,n))?(n=e.idx,i+=e.text):i+=t;break;case"'":case'"':(e=this._parseJSString(r,n,t))?(n=e.idx,i+=e.text):i+=t;break;default:i+=t}if(o)break;if(0==s.length)break}return o?{error:o}:{idx:n,expression:i}},n.CSSValueExpression.prototype._parseJSComment=function(e,t){var r,n,i=e.charAt(t+1);return("/"==i||"*"==i)&&("/"==i?n="\n":"*"==i&&(n="*/"),-1!==(r=e.indexOf(n,t+1+1))?{idx:r=r+n.length-1,text:e.substring(t,1+r)}:(error="css expression error: unfinished comment in expression!",{error:error}))},n.CSSValueExpression.prototype._parseJSString=function(e,t,r){var n=this._findMatchedIdx(e,t,r);return-1!==n&&{idx:n,text:e.substring(t,n+r.length)}},n.CSSValueExpression.prototype._parseJSRexExp=function(e,t){var r=e.substring(0,t).replace(/\s+$/,"");if([/^$/,/\($/,/\[$/,/\!$/,/\+$/,/\-$/,/\*$/,/\/\s+/,/\%$/,/\=$/,/\>$/,/\<$/,/\&$/,/\|$/,/\^$/,/\~$/,/\?$/,/\,$/,/delete$/,/in$/,/instanceof$/,/new$/,/typeof$/,/void$/].some(function(e){return e.test(r)})){return this._parseJSString(e,t,"/")}return!1},n.CSSValueExpression.prototype._findMatchedIdx=function(e,t,r){for(var n,i=t;;){if(-1===(n=e.indexOf(r,i+1))){n=-1;break}var o=e.substring(t+1,n).match(/\\+$/);if(!o||o[0]%2==0)break;i=n}return e.indexOf("\n",t+1)<n&&(n=-1),n},r.CSSValueExpression=n.CSSValueExpression},{"./CSSValue":20}],22:[function(e,t,r){var n={MatcherList:function(){this.length=0}};n.MatcherList.prototype={constructor:n.MatcherList,get matcherText(){return Array.prototype.join.call(this,", ")},set matcherText(e){for(var t=e.split(","),r=this.length=t.length,n=0;n<r;n++)this[n]=t[n].trim()},appendMatcher:function(e){-1===Array.prototype.indexOf.call(this,e)&&(this[this.length]=e,this.length++)},deleteMatcher:function(e){var t=Array.prototype.indexOf.call(this,e);-1!==t&&Array.prototype.splice.call(this,t,1)}},r.MatcherList=n.MatcherList},{}],23:[function(e,t,r){var n={MediaList:function(){this.length=0}};n.MediaList.prototype={constructor:n.MediaList,get mediaText(){return Array.prototype.join.call(this,", ")},set mediaText(e){for(var t=e.split(","),r=this.length=t.length,n=0;n<r;n++)this[n]=t[n].trim()},appendMedium:function(e){-1===Array.prototype.indexOf.call(this,e)&&(this[this.length]=e,this.length++)},deleteMedium:function(e){var t=Array.prototype.indexOf.call(this,e);-1!==t&&Array.prototype.splice.call(this,t,1)}},r.MediaList=n.MediaList},{}],24:[function(e,t,r){var n={StyleSheet:function(){this.parentStyleSheet=null}};r.StyleSheet=n.StyleSheet},{}],25:[function(e,t,r){var f={CSSStyleSheet:e("./CSSStyleSheet").CSSStyleSheet,CSSStyleRule:e("./CSSStyleRule").CSSStyleRule,CSSMediaRule:e("./CSSMediaRule").CSSMediaRule,CSSStyleDeclaration:e("./CSSStyleDeclaration").CSSStyleDeclaration,CSSKeyframeRule:e("./CSSKeyframeRule").CSSKeyframeRule,CSSKeyframesRule:e("./CSSKeyframesRule").CSSKeyframesRule,clone:function e(t){var r=new f.CSSStyleSheet,n=t.cssRules;if(!n)return r;for(var i={1:f.CSSStyleRule,4:f.CSSMediaRule,8:f.CSSKeyframesRule,9:f.CSSKeyframeRule},o=0,s=n.length;o<s;o++){var a=n[o],l=r.cssRules[o]=new i[a.type],u=a.style;if(u){for(var h=l.style=new f.CSSStyleDeclaration,c=0,p=u.length;c<p;c++){var d=h[c]=u[c];h[d]=u[d],h._importants[d]=u.getPropertyPriority(d)}h.length=u.length}a.hasOwnProperty("keyText")&&(l.keyText=a.keyText),a.hasOwnProperty("selectorText")&&(l.selectorText=a.selectorText),a.hasOwnProperty("mediaText")&&(l.mediaText=a.mediaText),a.hasOwnProperty("cssRules")&&(l.cssRules=e(a).cssRules)}return r}};r.clone=f.clone},{"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19}],26:[function(e,t,r){"use strict";r.CSSStyleDeclaration=e("./CSSStyleDeclaration").CSSStyleDeclaration,r.CSSRule=e("./CSSRule").CSSRule,r.CSSStyleRule=e("./CSSStyleRule").CSSStyleRule,r.MediaList=e("./MediaList").MediaList,r.CSSMediaRule=e("./CSSMediaRule").CSSMediaRule,r.CSSImportRule=e("./CSSImportRule").CSSImportRule,r.CSSFontFaceRule=e("./CSSFontFaceRule").CSSFontFaceRule,r.StyleSheet=e("./StyleSheet").StyleSheet,r.CSSStyleSheet=e("./CSSStyleSheet").CSSStyleSheet,r.CSSKeyframesRule=e("./CSSKeyframesRule").CSSKeyframesRule,r.CSSKeyframeRule=e("./CSSKeyframeRule").CSSKeyframeRule,r.MatcherList=e("./MatcherList").MatcherList,r.CSSDocumentRule=e("./CSSDocumentRule").CSSDocumentRule,r.CSSValue=e("./CSSValue").CSSValue,r.CSSValueExpression=e("./CSSValueExpression").CSSValueExpression,r.parse=e("./parse").parse,r.clone=e("./clone").clone},{"./CSSDocumentRule":10,"./CSSFontFaceRule":11,"./CSSImportRule":12,"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSRule":16,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19,"./CSSValue":20,"./CSSValueExpression":21,"./MatcherList":22,"./MediaList":23,"./StyleSheet":24,"./clone":25,"./parse":27}],27:[function(e,t,r){var S={};S.parse=function(o){function e(e){var t=o.substring(0,d).split("\n"),r=t.length,n=t.pop().length+1,i=new Error(e+" (line "+r+", char "+n+")");throw i.line=r,i.char=n,i.styleSheet=y,i}for(var t,r,n,i,s,a,l,u,h,c,p,d=0,f="before-selector",m="",g={selector:!0,value:!0,atRule:!0,"importRule-begin":!0,importRule:!0,atBlock:!0,"documentRule-begin":!0},y=new S.CSSStyleSheet,v=y,_="",b=/@(-(?:\w+-)+)?keyframes/g;c=o.charAt(d);d++)switch(c){case" ":case"\t":case"\r":case"\n":case"\f":g[f]&&(m+=c);break;case'"':for(t=d+1;(t=o.indexOf('"',t)+1)||e('Unmatched "'),"\\"===o[t-2];);switch(m+=o.slice(d,t),d=t-1,f){case"before-value":f="value";break;case"importRule-begin":f="importRule"}break;case"'":for(t=d+1;(t=o.indexOf("'",t)+1)||e("Unmatched '"),"\\"===o[t-2];);switch(m+=o.slice(d,t),d=t-1,f){case"before-value":f="value";break;case"importRule-begin":f="importRule"}break;case"/":"*"===o.charAt(d+1)?(d+=2,-1===(t=o.indexOf("*/",d))?e("Missing */"):d=t+1):m+=c,"importRule-begin"===f&&(m+=" ",f="importRule");break;case"@":if(o.indexOf("@-moz-document",d)===d){f="documentRule-begin",(h=new S.CSSDocumentRule).__starts=d,d+="-moz-document".length,m="";break}if(o.indexOf("@media",d)===d){f="atBlock",(s=new S.CSSMediaRule).__starts=d,d+="media".length,m="";break}if(o.indexOf("@import",d)===d){f="importRule-begin",d+="import".length,m+="@import";break}if(o.indexOf("@font-face",d)===d){f="fontFaceRule-begin",d+="font-face".length,(l=new S.CSSFontFaceRule).__starts=d,m="";break}b.lastIndex=d;var E=b.exec(o);if(E&&E.index===d){f="keyframesRule-begin",(u=new S.CSSKeyframesRule).__starts=d,u._vendorPrefix=E[1],d+=E[0].length-1,m="";break}"selector"==f&&(f="atRule"),m+=c;break;case"{":"selector"===f||"atRule"===f?(i.selectorText=m.trim(),i.style.__starts=d,m="",f="before-name"):"atBlock"===f?(s.media.mediaText=m.trim(),(v=r=s).parentStyleSheet=y,m="",f="before-selector"):"fontFaceRule-begin"===f?(r&&(l.parentRule=r),l.parentStyleSheet=y,i=l,m="",f="before-name"):"keyframesRule-begin"===f?(u.name=m.trim(),r&&(u.parentRule=r),u.parentStyleSheet=y,v=r=u,m="",f="keyframeRule-begin"):"keyframeRule-begin"===f?((i=new S.CSSKeyframeRule).keyText=m.trim(),i.__starts=d,m="",f="before-name"):"documentRule-begin"===f&&(h.matcher.matcherText=m.trim(),r&&(h.parentRule=r),(v=r=h).parentStyleSheet=y,m="",f="before-selector");break;case":":"name"===f?(n=m.trim(),m="",f="before-value"):m+=c;break;case"(":"value"===f?"expression"==m.trim()?(p=new S.CSSValueExpression(o,d).parse()).error?e(p.error):(m+=p.expression,d=p.idx):(-1===(t=o.indexOf(")",d+1))&&e('Unmatched "("'),m+=o.slice(d,t+1),d=t):m+=c;break;case"!":"value"===f&&o.indexOf("!important",d)===d?d+=(_="important").length:m+=c;break;case";":switch(f){case"value":i.style.setProperty(n,m.trim(),_),m=_="",f="before-name";break;case"atRule":m="",f="before-selector";break;case"importRule":(a=new S.CSSImportRule).parentStyleSheet=a.styleSheet.parentStyleSheet=y,a.cssText=m+c,y.cssRules.push(a),m="",f="before-selector";break;default:m+=c}break;case"}":switch(f){case"value":i.style.setProperty(n,m.trim(),_),_="";case"before-name":case"name":i.__ends=d+1,r&&(i.parentRule=r),i.parentStyleSheet=y,v.cssRules.push(i),m="",f=v.constructor===S.CSSKeyframesRule?"keyframeRule-begin":"before-selector";break;case"keyframeRule-begin":case"before-selector":case"selector":r||e("Unexpected }"),v.__ends=d+1,y.cssRules.push(v),v=y,r=null,m="",f="before-selector"}break;default:switch(f){case"before-selector":f="selector",(i=new S.CSSStyleRule).__starts=d;break;case"before-name":f="name";break;case"before-value":f="value";break;case"importRule-begin":f="importRule"}m+=c}return y},r.parse=S.parse,S.CSSStyleSheet=e("./CSSStyleSheet").CSSStyleSheet,S.CSSStyleRule=e("./CSSStyleRule").CSSStyleRule,S.CSSImportRule=e("./CSSImportRule").CSSImportRule,S.CSSMediaRule=e("./CSSMediaRule").CSSMediaRule,S.CSSFontFaceRule=e("./CSSFontFaceRule").CSSFontFaceRule,S.CSSStyleDeclaration=e("./CSSStyleDeclaration").CSSStyleDeclaration,S.CSSKeyframeRule=e("./CSSKeyframeRule").CSSKeyframeRule,S.CSSKeyframesRule=e("./CSSKeyframesRule").CSSKeyframesRule,S.CSSValueExpression=e("./CSSValueExpression").CSSValueExpression,S.CSSDocumentRule=e("./CSSDocumentRule").CSSDocumentRule},{"./CSSDocumentRule":10,"./CSSFontFaceRule":11,"./CSSImportRule":12,"./CSSKeyframeRule":13,"./CSSKeyframesRule":14,"./CSSMediaRule":15,"./CSSStyleDeclaration":17,"./CSSStyleRule":18,"./CSSStyleSheet":19,"./CSSValueExpression":21}],28:[function(e,t,r){"use strict";var n=e("./cssSupport");r.extractCssUrl=function(e){var t,r=/^url\(([^\)]+)\)/;if(!r.test(e))throw new Error("Invalid url");return t=r.exec(e)[1],n.unquoteString(t.replace(/^[\t\r\f\n ]*(.+?)[\t\r\f\n ]*$/,"$1"))};r.parse=function(e){return function(e){var t,i="(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+)",r="(?:\\s*"+i+")+",n=new RegExp(r,"g"),o=[];if(e.match(new RegExp("^\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+)(?:\\s*,\\s*((?:\\s*(url\\(\\s*(?:\"[^\"]*\"|'[^']*'|[^\\(]+)\\s*\\)|[^,\\s]+))+))*\\s*$"))){for(t=n.exec(e);t;)o.push(function(e){for(var t=new RegExp(i,"g"),r=[],n=t.exec(e);n;)r.push(n[1]),n=t.exec(e);return r}(t[0])),t=n.exec(e);return o}return[]}(e).map(function(e){var t=function(e){for(var t=0;t<e.length;t++)try{return{url:r.extractCssUrl(e[t]),idx:t}}catch(e){}}(e);return t?{preUrl:e.slice(0,t.idx),url:t.url,postUrl:e.slice(t.idx+1)}:{preUrl:e}})},r.serialize=function(e){return e.map(function(e){var t=[].concat(e.preUrl);return e.url&&t.push('url("'+e.url+'")'),e.postUrl&&(t=t.concat(e.postUrl)),t.join(" ")}).join(", ")}},{"./cssSupport":29}],29:[function(e,t,i){"use strict";var r=e("cssom");i.unquoteString=function(e){var t=/^"(.*)"$/,r=/^'(.*)'$/;return t.test(e)?e.replace(t,"$1"):r.test(e)?e.replace(r,"$1"):e};function n(e){var t,r=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=e,r.body.appendChild(n),t=n.sheet.cssRules,Array.prototype.slice.call(t)}var o,s=!(o=n("a{background:url(i)}")).length||0<=o[0].cssText.indexOf("url()");i.rulesForCssText=function(e){return s&&r.parse?r.parse(e).cssRules:n(e)},i.cssRulesToText=function(e){return e.reduce(function(e,t){return e+t.cssText},"")},i.exchangeRule=function(e,t,r){var n=e.indexOf(t),i=t.parentStyleSheet;i.insertRule(r,n+1),i.deleteRule(n),e[n]=i.cssRules[n]},i.changeFontFaceRuleSrc=function(e,t,r){var n="@font-face { font-family: "+t.style.getPropertyValue("font-family")+"; ";t.style.getPropertyValue("font-style")&&(n+="font-style: "+t.style.getPropertyValue("font-style")+"; "),t.style.getPropertyValue("font-weight")&&(n+="font-weight: "+t.style.getPropertyValue("font-weight")+"; "),n+="src: "+r+"}",i.exchangeRule(e,t,n)}},{cssom:26}],30:[function(e,t,i){"use strict";function r(n){return n.map(function(e,t){return t===n.length-1&&(e={baseUrl:(r=e.baseUrl,h.joinUrl(r,"."))}),JSON.stringify(e);var r})}function l(e,t){return!1!==t.cache&&"none"!==t.cache&&t.cacheBucket?h.memoize(e,r,t.cacheBucket):e}function u(i,e,t){var o=a.rulesForCssText(i);return s.loadCSSImportsForRules(o,e,t).then(function(n){return s.loadAndInlineCSSResourcesForRules(o,t).then(function(e){var t=n.errors.concat(e.errors),r=n.hasChanges||e.hasChanges;return r&&(i=a.cssRulesToText(o)),{hasChanges:r,content:i,errors:t}})})}var h=e("./util"),n=e("./inlineImage"),o=e("./inlineScript"),s=e("./inlineCss"),a=e("./cssSupport");i.loadAndInlineStyles=function(e,t){var r,n=(r=e.getElementsByTagName("style"),Array.prototype.filter.call(r,function(e){return!e.attributes.type||"text/css"===e.attributes.type.nodeValue})),o=[],s=[],a=h.clone(t);return a.baseUrl=a.baseUrl||h.getDocumentBaseUrl(e),h.all(n.map(function(e){return r=a,n=s,i=(t=e).textContent,l(u,r)(i,n,r).then(function(e){return e.hasChanges&&(t.childNodes[0].nodeValue=e.content),h.cloneArray(e.errors)}).then(function(e){o=o.concat(e)});var t,r,n,i})).then(function(){return o})};function c(r,e){return h.ajax(r,e).then(function(e){return{content:e,cssRules:a.rulesForCssText(e)}}).then(function(e){var t=s.adjustPathsOfCssResources(r,e.cssRules);return{content:e.content,cssRules:e.cssRules,hasChanges:t}}).then(function(t){return s.loadCSSImportsForRules(t.cssRules,[],e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:e.errors}})}).then(function(t){return s.loadAndInlineCSSResourcesForRules(t.cssRules,e).then(function(e){return{content:t.content,cssRules:t.cssRules,hasChanges:t.hasChanges||e.hasChanges,errors:t.errors.concat(e.errors)}})}).then(function(e){var t=e.content;return e.hasChanges&&(t=a.cssRulesToText(e.cssRules)),{content:t,errors:e.errors}})}i.loadAndInlineCssLinks=function(e,s){var t,r=(t=e.getElementsByTagName("link"),Array.prototype.filter.call(t,function(e){return e.attributes.rel&&"stylesheet"===e.attributes.rel.nodeValue&&(!e.attributes.type||"text/css"===e.attributes.type.nodeValue)})),a=[];return h.all(r.map(function(o){return t=s,r=(e=o).attributes.href.nodeValue,n=h.getDocumentBaseUrl(e.ownerDocument),!(i=h.clone(t)).baseUrl&&n&&(i.baseUrl=n),l(c,t)(r,i).then(function(e){return{content:e.content,errors:h.cloneArray(e.errors)}}).then(function(e){var t,r,n,i;t=o,r=e.content+"\n",i=t.parentNode,(r=r.trim())&&((n=t.ownerDocument.createElement("style")).type="text/css",n.appendChild(t.ownerDocument.createTextNode(r)),i.insertBefore(n,t)),i.removeChild(t),a=a.concat(e.errors)},function(e){a.push({resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url})});var e,t,r,n,i})).then(function(){return a})},i.loadAndInlineImages=n.inline,i.loadAndInlineScript=o.inline,i.inlineReferences=function(t,r){var n=[],e=[i.loadAndInlineImages,i.loadAndInlineStyles,i.loadAndInlineCssLinks];return!1!==r.inlineScripts&&e.push(i.loadAndInlineScript),h.all(e.map(function(e){return e(t,r).then(function(e){n=n.concat(e)})})).then(function(){return n})}},{"./cssSupport":29,"./inlineCss":31,"./inlineImage":32,"./inlineScript":33,"./util":34}],31:[function(e,t,l){"use strict";function u(e,t,r){e.style.setProperty(t,r,e.style.getPropertyPriority(t))}function n(e){return e.filter(function(e){return e.type===window.CSSRule.STYLE_RULE&&(e.style.getPropertyValue("background-image")||e.style.getPropertyValue("background"))})}function h(e){var t=[];return e.forEach(function(e){e.style.getPropertyValue("background-image")?t.push({property:"background-image",value:e.style.getPropertyValue("background-image"),rule:e}):e.style.getPropertyValue("background")&&t.push({property:"background",value:e.style.getPropertyValue("background"),rule:e})}),t}function a(e){return e.filter(function(e){return e.type===window.CSSRule.FONT_FACE_RULE&&e.style.getPropertyValue("src")})}function c(e){return e.filter(function(e){return e.type===window.CSSRule.IMPORT_RULE&&e.href})}function p(e){var r=[];return e.forEach(function(e,t){e.url&&!m.isDataUri(e.url)&&r.push(t)}),r}function d(e){var r=[];return e.forEach(function(e,t){e.url&&!m.isDataUri(e.url)&&r.push(t)}),r}var f=e("ayepromise"),m=e("./util"),g=e("./cssSupport"),y=e("./backgroundValueParser"),v=e("css-font-face-src");l.adjustPathsOfCssResources=function(i,o){var e=n(o),t=h(e),s=!1;return t.forEach(function(e){var t,n=y.parse(e.value),r=p(n);0<r.length&&(r.forEach(function(e){var t=n[e].url,r=m.joinUrl(i,t);n[e].url=r}),t=y.serialize(n),u(e.rule,e.property,t),s=!0)}),a(o).forEach(function(e){var n,t,r=e.style.getPropertyValue("src");try{n=v.parse(r)}catch(e){return}0<(t=d(n)).length&&(t.forEach(function(e){var t=n[e].url,r=m.joinUrl(i,t);n[e].url=r}),g.changeFontFaceRuleSrc(o,e,v.serialize(n)),s=!0)}),c(o).forEach(function(e){var t=e.href,r=m.joinUrl(i,t);g.exchangeRule(o,e,"@import url("+r+");"),s=!0}),s};function _(r,e,t){var n=r.indexOf(e);r.splice(n,1),t.forEach(function(e,t){r.splice(n+t,0,e)})}function s(r,n,i,o){var e,t,s=n.href,s=g.unquoteString(s),a=m.joinUrl(o.baseUrl,s);return 0<=i.indexOf(a)?(_(r,n,[]),e=[],(t=f.defer()).resolve(e),t.promise):(i.push(a),m.ajax(s,o).then(function(e){var t=g.rulesForCssText(e);return l.loadCSSImportsForRules(t,i,o).then(function(e){return l.adjustPathsOfCssResources(s,t),_(r,n,t),e.errors})},function(e){throw{resourceType:"stylesheet",url:e.url,msg:"Unable to load stylesheet "+e.url}}))}l.loadCSSImportsForRules=function(t,r,n){var e=c(t),i=[],o=!1;return m.all(e.map(function(e){return s(t,e,r,n).then(function(e){i=i.concat(e),o=!0},function(e){i.push(e)})})).then(function(){return{hasChanges:o,errors:i}})};function o(e,s){var t=n(e),r=h(t),a=[],l=!1;return m.all(r.map(function(t){return e=t.value,r=s,n=y.parse(e),i=p(n),o=!1,m.collectAndReportErrors(i.map(function(t){var e=n[t].url;return m.getDataURIForImageURL(e,r).then(function(e){n[t].url=e,o=!0},function(e){throw{resourceType:"backgroundImage",url:e.url,msg:"Unable to load background-image "+e.url}})})).then(function(e){return{backgroundValue:y.serialize(n),hasChanges:o,errors:e}}).then(function(e){e.hasChanges&&(u(t.rule,t.property,e.backgroundValue),l=!0),a=a.concat(e.errors)});var e,r,n,i,o})).then(function(){return{hasChanges:l,errors:a}})}function b(r,e){var t=a(r),n=[],i=!1;return m.all(t.map(function(t){return function(e,t){var i,r,o=!1;try{i=v.parse(e)}catch(e){i=[]}return r=d(i),m.collectAndReportErrors(r.map(function(e){var r=i[e],n=r.format||"woff";return m.binaryAjax(r.url,t).then(function(e){var t=btoa(e);r.url="data:font/"+n+";base64,"+t,o=!0},function(e){throw{resourceType:"fontFace",url:e.url,msg:"Unable to load font-face "+e.url}})})).then(function(e){return{srcDeclarationValue:v.serialize(i),hasChanges:o,errors:e}})}(t.style.getPropertyValue("src"),e).then(function(e){e.hasChanges&&(g.changeFontFaceRuleSrc(r,t,e.srcDeclarationValue),i=!0),n=n.concat(e.errors)})})).then(function(){return{hasChanges:i,errors:n}})}l.loadAndInlineCSSResourcesForRules=function(t,r){var n=!1,i=[];return m.all([o,b].map(function(e){return e(t,r).then(function(e){n=n||e.hasChanges,i=i.concat(e.errors)})})).then(function(){return{hasChanges:n,errors:i}})}},{"./backgroundValueParser":28,"./cssSupport":29,"./util":34,ayepromise:2,"css-font-face-src":8}],32:[function(e,t,r){"use strict";var a=e("./util");r.inline=function(e,s){var t,r,n=(r=e.getElementsByTagName("img"),Array.prototype.slice.call(r)),i=(t=e.getElementsByTagName("input"),Array.prototype.filter.call(t,function(e){return"image"===e.type})),o=n.concat(i).filter(function(e){var t=e.attributes.src?e.attributes.src.nodeValue:null;return null!==t&&!a.isDataUri(t)});return a.collectAndReportErrors(o.map(function(t){return r=s,n=(e=t).attributes.src?e.attributes.src.nodeValue:null,i=a.getDocumentBaseUrl(e.ownerDocument),!(o=a.clone(r)).baseUrl&&i&&(o.baseUrl=i),a.getDataURIForImageURL(n,o).then(function(e){return e},function(e){throw{resourceType:"image",url:e.url,msg:"Unable to load image "+e.url}}).then(function(e){t.attributes.src.nodeValue=e});var e,r,n,i,o}))}},{"./util":34}],33:[function(e,t,r){"use strict";var a=e("./util");r.inline=function(e,s){var t,r=(t=e.getElementsByTagName("script"),Array.prototype.filter.call(t,function(e){return!!e.attributes.src}));return a.collectAndReportErrors(r.map(function(n){return t=s,r=(e=n).attributes.src.nodeValue,i=a.getDocumentBaseUrl(e.ownerDocument),!(o=a.clone(t)).baseUrl&&i&&(o.baseUrl=i),a.ajax(r,o).fail(function(e){throw{resourceType:"script",url:e.url,msg:"Unable to load script "+e.url}}).then(function(e){var t,r;r=e,(t=n).attributes.removeNamedItem("src"),t.textContent=r.replace(/<\//g,"<\\/")});var e,t,r,i,o}))}},{"./util":34}],34:[function(e,t,u){"use strict";var r=e("url"),h=e("ayepromise");u.getDocumentBaseUrl=function(e){return"about:blank"!==e.baseURI?e.baseURI:null},u.clone=function(e){var t,r={};for(t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},u.cloneArray=function(e){return Array.prototype.slice.apply(e,[0])},u.joinUrl=function(e,t){return e?r.resolve(e,t):t},u.isDataUri=function(e){return/^data:/.test(e)},u.all=function(e){var r=h.defer(),n=e.length,i=[];return 0===e.length?r.resolve([]):e.forEach(function(e,t){e.then(function(e){--n,i[t]=e,0===n&&r.resolve(i)},function(e){r.reject(e)})}),r.promise},u.collectAndReportErrors=function(e){var t=[];return u.all(e.map(function(e){return e.fail(function(e){t.push(e)})})).then(function(){return t})};var c=null;u.ajax=function(e,t){function r(){a.reject({msg:"Unable to load url",url:l})}var n,i,o,s=new window.XMLHttpRequest,a=h.defer(),l=u.joinUrl(t.baseUrl,e);i=l,n=!1===(o=t.cache)||"none"===o||"repeated"===o?(null!==c&&"repeated"===o||(c=Date.now()),i+"?_="+c):i,s.addEventListener("load",function(){200===s.status||0===s.status?a.resolve(s.response):r()},!1),s.addEventListener("error",r,!1);try{s.open("GET",n,!0),s.overrideMimeType(t.mimeType),s.send(null)}catch(e){r()}return a.promise},u.binaryAjax=function(e,t){var r=u.clone(t);return r.mimeType="text/plain; charset=x-user-defined",u.ajax(e,r).then(function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t})};function n(e){function t(e,t){return e.substring(0,t.length)===t}return t(e,"<?xml")||t(e,"<svg")?"image/svg+xml":"image/png"}u.getDataURIForImageURL=function(e,t){return u.binaryAjax(e,t).then(function(e){var t=btoa(e);return"data:"+n(e)+";base64,"+t})};var l=[];u.memoize=function(o,s,a){if("object"!=typeof a)throw new Error("cacheBucket is not an object");return function(){var e,t,r=Array.prototype.slice.call(arguments),n=s(r),i=(t=o,l.indexOf(t)<0&&l.push(t),l.indexOf(t));return a[i]&&a[i][n]?a[i][n]:(e=o.apply(null,r),a[i]=a[i]||{},a[i][n]=e)}}},{ayepromise:2,url:"j37I/u"}],url:[function(e,t){t.exports=e("j37I/u")},{}],"j37I/u":[function(e,t,r){function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,r){if(e&&a(e)&&e instanceof v)return e;var n=new v;return n.parse(e,t,r),n}function M(e){return"string"==typeof e}function a(e){return"object"==typeof e&&null!==e}function _(e){return null===e}var D=e("punycode");r.parse=n,r.resolve=function(e,t){return n(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?n(e,!1,!0).resolveObject(t):t},r.format=function(e){return M(e)&&(e=n(e)),e instanceof v?e.format():v.prototype.format.call(e)},r.Url=v;var I=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(o),O=["%","/","?",";","#"].concat(F),L=["/","?","#"],N=/^[a-z0-9A-Z_-]{0,63}$/,B=/^([a-z0-9A-Z_-]{0,63})(.*)$/,j={javascript:!0,"javascript:":!0},z={javascript:!0,"javascript:":!0},U={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},V=e("querystring");v.prototype.parse=function(e,t,r){if(!M(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n,i,o=(o=e).trim(),s=I.exec(o);if(s&&(n=(s=s[0]).toLowerCase(),this.protocol=n,o=o.substr(s.length)),(r||s||o.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(i="//"===o.substr(0,2))||s&&z[s]||(o=o.substr(2),this.slashes=!0)),!z[s]&&(i||s&&!U[s])){for(var a,l,u=-1,h=0;h<L.length;h++){-1!==(c=o.indexOf(L[h]))&&(-1===u||c<u)&&(u=c)}-1!==(l=-1===u?o.lastIndexOf("@"):o.lastIndexOf("@",u))&&(a=o.slice(0,l),o=o.slice(l+1),this.auth=decodeURIComponent(a)),u=-1;for(var c,h=0;h<O.length;h++){-1!==(c=o.indexOf(O[h]))&&(-1===u||c<u)&&(u=c)}-1===u&&(u=o.length),this.host=o.slice(0,u),o=o.slice(u),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var d=this.hostname.split(/\./),h=0,f=d.length;h<f;h++){var m=d[h];if(m&&!m.match(N)){for(var g="",y=0,v=m.length;y<v;y++)g+=127<m.charCodeAt(y)?"x":m[y];if(!g.match(N)){var _=d.slice(0,h),b=d.slice(h+1),E=m.match(B);E&&(_.push(E[1]),b.unshift(E[2])),b.length&&(o="/"+b.join(".")+o),this.hostname=_.join(".");break}}}if(this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),!p){for(var S=this.hostname.split("."),w=[],h=0;h<S.length;++h){var x=S[h];w.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+D.encode(x):x)}this.hostname=w.join(".")}var P=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+P,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!j[n])for(h=0,f=F.length;h<f;h++){var A=F[h],T=encodeURIComponent(A);T===A&&(T=escape(A)),o=o.split(A).join(T)}var k=o.indexOf("#");-1!==k&&(this.hash=o.substr(k),o=o.slice(0,k));var R=o.indexOf("?");return-1!==R?(this.search=o.substr(R),this.query=o.substr(R+1),t&&(this.query=V.parse(this.query)),o=o.slice(0,R)):t&&(this.search="",this.query={}),o&&(this.pathname=o),U[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(P=this.pathname||"",x=this.search||"",this.path=P+x),this.href=this.format(),this},v.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&a(this.query)&&Object.keys(this.query).length&&(o=V.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||U[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i=i||"",n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},v.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},v.prototype.resolveObject=function(t){var e;M(t)&&((e=new v).parse(t,!1,!0),t=e);var r,n,i=new v;if(Object.keys(this).forEach(function(e){i[e]=this[e]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),U[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!U[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||z[t.protocol])i.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),i.pathname=o.join("/")}return i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,(i.pathname||i.search)&&(r=i.pathname||"",n=i.search||"",i.path=r+n),i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var s=i.pathname&&"/"===i.pathname.charAt(0),a=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=a||s||i.host&&t.pathname,u=l,h=i.pathname&&i.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],c=i.protocol&&!U[i.protocol];if(c&&(i.hostname="",i.port=null,i.host&&(""===h[0]?h[0]=i.host:h.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),l=l&&(""===o[0]||""===h[0])),a)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,h=o;else if(o.length)(h=h||[]).pop(),h=h.concat(o),i.search=t.search,i.query=t.query;else if(null!=t.search){return c&&(i.hostname=i.host=h.shift(),(g=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=g.shift(),i.host=i.hostname=g.shift())),i.search=t.search,i.query=t.query,_(i.pathname)&&_(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!h.length)return i.pathname=null,i.path=i.search?"/"+i.search:null,i.href=i.format(),i;for(var p=h.slice(-1)[0],d=(i.host||t.host)&&("."===p||".."===p)||""===p,f=0,m=h.length;0<=m;m--)"."==(p=h[m])?h.splice(m,1):".."===p?(h.splice(m,1),f++):f&&(h.splice(m,1),f--);if(!l&&!u)for(;f--;)h.unshift("..");!l||""===h[0]||h[0]&&"/"===h[0].charAt(0)||h.unshift(""),d&&"/"!==h.join("/").substr(-1)&&h.push("");var g,y=""===h[0]||h[0]&&"/"===h[0].charAt(0);return c&&(i.hostname=i.host=!y&&h.length?h.shift():"",(g=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=g.shift(),i.host=i.hostname=g.shift())),(l=l||i.host&&h.length)&&!y&&h.unshift(""),h.length?i.pathname=h.join("/"):(i.pathname=null,i.path=null),_(i.pathname)&&_(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},v.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:3,querystring:6}],37:[function(e,t,r){function i(e){var t=e.tagName;return"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(t=t.toLowerCase()),t}function o(e){return Array.prototype.map.call(e.childNodes,function(e){return s(e)}).join("")}function n(e){var t,n="<"+i(e);return n+=(t=e,0<=Array.prototype.map.call(t.attributes||t.attrs,function(e){return e.name}).indexOf("xmlns")||t.parentNode&&t.namespaceURI===t.parentNode.namespaceURI&&"html"!==i(t)?"":' xmlns="'+t.namespaceURI+'"'),Array.prototype.forEach.call(e.attributes||e.attrs,function(e){var t,r;n+=(r=(t=e).value," "+t.name+'="'+r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+'"')}),0<e.childNodes.length?(n+=">",n+=o(e),n+="</"+i(e)+">"):n+="/>",n}var s=function(e){return"#document"===e.nodeName||"#document-fragment"===e.nodeName?o(e):e.tagName?n(e):"#text"===e.nodeName?((t=e).nodeValue||t.value||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"#comment"===e.nodeName?"\x3c!--"+e.data.replace(/-/g,"&#45;")+"--\x3e":"#cdata-section"===e.nodeName?"<![CDATA["+e.nodeValue+"]]>":void 0;var t};r.serializeToString=function(e){return s(e).replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}},{}]},{},[1])(1)});