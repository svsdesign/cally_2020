//MIXINS ETC
/*TO DO:
- MOVE these mixins to appropriate place

*/

//loader keyframes

// ///
// * {
//     box-sizing: border-box;
// } // this probaly declared eslewhere




@each $scheme in $schemes { // start colour scheme
 
    body.#{nth($scheme, 1)}.page-template-page-grid:not(.wp-admin) // ensure we're not applying to admin & only targetting correct page
    // body.#{nth($scheme, 1)}.wp-admin .acf-block-preview // but we are applying to the block we can't target ".th-block"  because most classes in this doc are targetting rthe s
    {
  
    overflow: hidden; // no scrolling until loaded

       //submission loader - 
       .page-loader-wrap{
        position: fixed;
        width:100%;
        display:block;
        right:0px;
        top:0px;
        bottom:0px;
        left:0px;
        background-color: nth($scheme, 2);
        z-index:8;// ensure above all else- but not menu
        height:100%;

            .page-loader{
            // color: white;
           /* @include fluid-type(
                line-height,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2,
                map-get($lineheight,xxl) * 2
            );*/
            line-height:100vh;
            text-align: center;
            color: nth($scheme, 3);
            width:100%;
            // @include center-align(absolute, 0);
            height:100%;
            font-family: $bold-font-family;

                &:after {
                content: ' .';
                animation: dots 1s steps(5, end) infinite;            
                }


            
            }
            
        }//.page-loader-wrap




        .touch-notification-wrapper,
        .small-screen-notification-wrapper{
            background: nth($scheme, 3);
            color: nth($scheme, 2);
            @include fluid-type(
            padding-top padding-bottom,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 2,
            map-get($lineheight,xxl) * 2
            );     
        }

        .repeater-wrap {
            width: 100%;
            position: relative;
            //overflow: hidden;// dont allow overflow breaks the sticky

            #grid-wraps{
            width: 100%;
            position: relative;
            display: block;
            // min-height: 50vw;//review - 5 rows atm if item is 10vw
            min-height:  25vw;//review - 5 rows atm if item is 5vw

                #background-map{
                width:100%;
                position: absolute;
                top: 0;
                z-index: -1;
                opacity: 1;
                pointer-events: none;

                    img{
                    display: block;
                    position: relative;    
                    width: 100%;
                    height: auto;   
                    }

                }// #background-map
            }

        }//repeater-wrap

        /* ---- grid options (top) ---- */

        .grid-options-wrap {
            display: block;// allow editing if not logged in aswell - 
            // TO DO review other css aswell; // display only if logged in + admin on
            //position: sticky;
            position:absolute;
            top:-15vw;// 3 unites of 5vw

            z-index: 89; //review this; ensure not above navigation; but above everything else
        /*  @include fluid-type(
                top,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2.5,
                map-get($lineheight,xxl) * 2.5
            );*/
        
            background-color: nth($scheme, 2);
            border-bottom: 1px solid;
            border-color: nth($scheme, 3);
            background-color: nth($scheme, 3);
            color: nth($scheme, 2);

            .grid-options {
                .btn {
                    // text-align: left;
                    @media (min-width: map-get($breakpoints, xxs)) {
                        text-align: left;
                    }
                } //.btn

                .response-message-wrap {
                    pointer-events: none;
                    position: absolute;
                    opacity: 0;
                    display: block;
                    right: 0;
                    left: 0;
                    text-align: center;
                    // left:0px;

                    .response-message {
                        // @include center-align(absolute, 0);
                        color: red;
                    }

                    &.response-message-active {
                        opacity: 1;
                    }
                } // .response-message-wrap
            } //.grid-options
        } //.grid-options-wrap

        /* ---- grid toggle ---- */

        .grid-toggles {
            background: nth($scheme, 2);
            width: 100%;
            height: auto;
            position: sticky;
            pointer-events: none;
            // display: block;
            // display:none;
            z-index: 29; //review
            text-align: center;
            border-bottom: 1px solid;
            border-color: nth($scheme, 3);
            @include fluid-type(
                height,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2,
                map-get($lineheight,xxl) * 2
            );
            @include fluid-type(
                line-height,
                map-get($breakpoints, xs),
                map-get($breakpoints, xxl),
                map-get($lineheight, xs) * 2,
                map-get($lineheight,xxl) * 2
            );
            @include fluid-type(
                top,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2.5,
                map-get($lineheight,xxl) * 2.5
            );

            @media (min-width: map-get($breakpoints, md)) {
                border-bottom: none;
                background: transparent;
                height: 100%;
                position: absolute;
                top: 0;
                bottom: 0;
            }
            @media (min-width: map-get($breakpoints, lg)) {
                display: block;
            }

            .toggle-list {
                .grid-toggle {
                    pointer-events: initial;
                    display: block;
                    width: 100%;
                    cursor: pointer;
                    position: relative;
                    // width: fit-content;
                    margin: auto;
                    // @include fluid-type(top, map-get($breakpoints, xs), map-get($breakpoints,xxl), map-get($lineheight, xs)*2, map-get($lineheight,xxl)*2);

                    &.active-layer {
                        // background-color: red;
                    }
                } //.grid-toggle

                @media (max-width: map-get($breakpoints, md)) {
                margin-top: 0px!important;//ensure no offets applied on mobile
                }

                @media (min-width: map-get($breakpoints, md)) {
                    position: fixed;
                    top: 50%;
                    width: 100%;

                    .grid-toggle {
                        width: initial;

                        @include fluid-type(
                            font-size,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($fontsize, xs) * 2,
                            map-get($fontsize,xxl) * 2
                        );
                        @include fluid-type(
                            line-height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 2,
                            map-get($lineheight,xxl) * 2
                        );

                        &.active-layer {
                            //  -color: red;
                        }
                    } //.grid-toggle
                } //   @media (min-width: map-get($breakpoints, lg))
            } //.toggle-list

            &.toggles-active {
                .toggle-button {
                    display: none;
                }
                .toggle-list {
                    .grid-toggle {
                        pointer-events: initial;
                        //  width: 100%;
                        position: relative;
                        display: none;

                        &.active-layer {
                            // background-color: green;
                            display: inline-block;
                        }
                    } //.grid-toggle
                } //.toggle-list
            } //  &.toggles-active

            &.toggles-active.toggles-on,
            &.toggles-on {
                bottom: 0;
                height: var(--site-height);

                @media (min-width: map-get($breakpoints, lg)) {
                height: auto;
                }

                // top:0px;
                display: flex;
                flex-direction: column;
                position: fixed; //review
                border-bottom:0px;

                .toggle-button {
                    // display: none;
                }
                .toggle-list {
                    height: inherit;

                    display: block;
                    position: relative;
                    overflow: hidden;

                    .grid-toggle {
                        pointer-events: initial;
                        display: block;
                        position: relative;
                        clear: both;
                        width: fit-content;
                        position: relative;

                        @media (max-width: map-get($breakpoints, md)) {
                            border-bottom: 1px solid;
                            border-color: nth($scheme, 3);
                            width: 100%;
                            height: 33.33%;
                            line-height:calc(var(--site-height) / 3);
                            //33.33vh;
                            @include fluid-type(
                                font-size,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($fontsize, xs) * 2,
                                map-get($fontsize,xxl) * 2
                            );
                            //  @include fluid-type(line-height, map-get($breakpoints, xs), map-get($breakpoints,xxl), map-get($lineheight, xs)*2, map-get($lineheight,xxl)*2);
                        }

                        &.active-layer {
                            opacity: 0.5;
                        }
                        &:last-of-type{
                        border-bottom:0px;
                        }
                    } //.grid-toggle
                } //.toggle-list
            } //.toggles-on
        } //.grid-toggles

        /* ---- grid layers ---- */

        .grid-layers {
            position: relative;
            // background-color: red;
            width: 100%;

            .grid-layer {
                position: fixed;
                opacity: 0;
                //display: none;
                width: 100%;
                height: inherit;
                display: block;

                form {
                    position: relative;
                    //overflow:hidden; remove so options can be "sticky"
                }

                .layer-title {
                    display: none; // review - do we even need this?

                    @media (min-width: map-get($breakpoints, md)) {
                        display: block;
                    }
                } //.layer-title

                &.active-layer {
                    z-index: 9;
                    opacity: 1;
                    display: block;
                    position: relative;
                } //&.active-layer
            } //.grid-layer


        } //.grid-layers

        /* ---- grid ---- */

        .grid {
        max-width: 80vw; //this was 100vw - but why!?
        width: 100%; //review - this will cause issue in the gutenber UI
        // overflow: visible;// so vertical ofsett can be seend
        // overflow: hidden; // otherwise horizontal offset overflows
        // overflow-y: visible; // need to ensur the option selectmenu can overflow - is htis going to be an issue?
      
        //cant have any overflow - yet also means the drop downs are only 1 grid itme heigt      
        // overflow-x:hidden;
        // overflow-y: hidden; 
   
        //now that we have margins araound the area - overflow okay I think:
        overflow: visible;
        margin: 0; // maybe use padding instead if needed to add space?
        // height: 50vw;//review - 5 rows atm - need for horizontal layout if item is 10vw
        height: 25vw;//review - 5 rows atm if item is5vw
        min-width: 100%;//review this 
        }

        /* clear fix */
        .grid:after {
            content: '';
            display: block;
            clear: both;
        }

        /* ---- .layout-grid-item---- */
        .grid-sizer {
            width: 100%; //$width1;
            height: auto; // $height1;

            @media (min-width: map-get($breakpoints, md)) {
                //  width: 100%!important;
                //  height: auto!important;
                // width: $width1;
                // height: $height1;
                width: $iconwidth1;
                height: $iconheight1;
            }
        }

        // z-index options:
        @for $i from 1 through 99 {
            .item-z-index-#{$i} {
                .inner-grid-item {
                    z-index: #{$i};
                }
            }
        }

        .layout-grid-item{
            //float: left;
            width: 100%; //$width1; // 100%
            height: auto; // $height1;
            // transitionDuration: '0s'; // review this + all transitions & animations
            //transform:none!important;
            overflow: visible;
            // border:1px solid nth($scheme, 2);

            /* 
            // to do  - we don't have a mobile version so what to do?
            
            @media (max-width: map-get($breakpoints, md)) {
                transform: none !important;
                width: 100% !important;
                height: auto !important;
                position: relative;
                overflow: hidden;
                top: 0px !important;
                @include fluid-type(
                    padding-left padding-right,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($gutter, xs) * 1,
                    map-get($gutter,xxl) * 1
                );
                @include fluid-type(
                    padding-bottom,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($gutter, xs) * 1,
                    map-get($gutter,xxl) * 1
                );

                a {
                    overflow: hidden;
                    // background:nth($scheme, 3);
                    display: block;

                    img.place-holder {
                        display: none !important;
                    }
                } //a

                &:last-of-type {
                    padding-bottom: 0px;
                }

                &:hover {
                // TODO remove hoverstates markup on touchscreens - svs to dig out bit of js if needed.

                    img {
                        opacity: 0.2 !important;
                    }
                    img.place-holder {
                    }
                } //&:hover

            } // @media
            */

            .grid-item-options-toggle {
                display: none;
                cursor: pointer;
                position: absolute;
                line-height:initial;
               /* @include fluid-type(
                    padding-left padding-right padding-bottom,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 0.5,
                    map-get($lineheight,xxl) * 0.5
                ); */ // not sure why we had padding?
                z-index: 4; //above images + text
                padding-bottom:0px;

                //to do; create button appreaacne
                &:hover {
                }

            } //.grid-item-options-toggle

            .move-arrow-area{
            display:none;
            }

            .grid-item-options {
                display: none;
                position: absolute;//fixed;
                width: inherit;//100vw;
                left: 0;
                top: 0;
                // bottom: 0px;
                // @include fluid-type(bottom, map-get($breakpoints, xs), map-get($breakpoints,xxl), map-get($lineheight, xs)*2, map-get($lineheight,xxl)*2);
                right: 0;
                z-index: 9;
                // background: nth($scheme, 2);
                @include fluid-type(
                    font-size,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($fontsize, xs) * 0.75,
                    map-get($fontsize,xxl) * 0.75
                );
                @include fluid-type(
                    line-height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 0.75,
                    map-get($lineheight,xxl) * 0.75
                );
                //transform: translateY(100%);// ensure if item at bottom its still visible
                // border-top: 1px solid nth($scheme, 3);

                  > div.site-grid-row-holder{
                width:100%;
                // background:red;
                }

                label {
                display: inherit; // ensure it inherits flex
                // display: block;
                }

                .input-id,
                .input-height,
                .input-width,
                .input-z-index
                // input// TO DO review // delete this selector
                {
                    width: 100%; //25%;
                    float: left;
                    @include fluid-type(
                        padding,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 0.25,
                        map-get($lineheight,xxl) * 0.25
                    );
                    @include fluid-type(
                        font-size,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($fontsize, xs) * 2,
                        map-get($fontsize,xxl) * 2
                    );
                    @include fluid-type(
                        line-height,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 2.75,
                        map-get($lineheight,xxl) * 2.75
                    );
                    // border: 1px solid nth($scheme, 3)

                }

                .image-ui{
                font-family: $medium-font-family;
                text-align: center;
                }// image-ui{

                .ui-widget{
                background-color: nth($scheme, 3);
                color: nth($scheme, 2);
                font-family: $medium-font-family;
                    @include fluid-type(
                     font-size,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 0.4,
                        map-get($lineheight,xxl) * 0.4
                    );
                 
                }
                .ui-selectmenu-text{
                // no need to display this at all?
                display:none;

                    @include fluid-type(
                        padding-left,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 0.125,
                        map-get($lineheight,xxl) * 0.125
                    );
                }

                .ui-selectmenu-icon.ui-icon-triangle-1-s{
                background:none; 
                }

                .ui-front {
                z-index: 100;
                right:0px;
                background-color: nth($scheme, 3);
                color: nth($scheme, 2);
                top: 0px!important; // ensure aloways aligned to top

                    /* select with CSS avatar icons */
                    option.avatar {
                        background-repeat: no-repeat !important;
                        // padding-left: 20px;
                    }
                    .avatar-selected{
                        @include fluid-type(
                            width height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 1,
                            map-get($lineheight,xxl) * 1
                        );
                    }

                    .ui-selectmenu-button.ui-button{
                    // background-color: red;
                    width: 100%;  
                    }
                    .ui-icon {
                        position:absolute!important;
                        background-position: 0 0;
                         
                        background-size: contain;//contain;
                        background-image: none; // so that default image not showing fromn other style sheet
                        // background-blend-mode: multiply;
                        // background-color:nth($scheme, 3);
                    /* @include fluid-type(
                            width height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 1,
                            map-get($lineheight,xxl) * 1
                        );*/
                        width:100%;
                        height: 100%;
                        display: block;
                        right:0px;
                        bottom: 0px;
                        left:0%;
                        top:0px;
                        z-index: -1;

                    }
             
                    .ui-menu {
                    /* @include fluid-type(
                            height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 3.5,
                            map-get($lineheight,xxl) * 3.5
                        );*/
                        padding:0;
                        height:inherit;
                        @include fluid-type(
                            margin-left padding-top margin-right padding-bottom,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 0.25,
                            map-get($lineheight,xxl)* 0.25
                        );
                        max-height: 19vw;// can only be one grid size unit  for overflow issues on parent container//30vw;
                        display: grid;
                        border:0px;
                        // grid-template-columns:10vw;//$iconwidth1;//1fr;// repeat(auto-fill, $iconwidth1);
                        //  grid-template-columns: $iconwidth1 $iconwidth1 $iconwidth1;
//                        grid-template-columns:3vw;
//                        grid-template-rows: repeat(auto-fill, $iconheight1);
                         grid-template-columns: repeat(auto-fill,3vw);
                        grid-template-rows: repeat(auto-fill,3vw);
                        grid-gap: 0vw;
                        /* @include fluid-type(
                            grid-gap,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 0.25,
                            map-get($lineheight,xxl)* 0.25
                        );*/
                        // width:16vw;// = 2 x iconwidth $iconwidth1!important;//to overide the css set via js jquery ui
                        // was 15vw, but need to ensure catering for border spacing
                        width:16vw;
                        max-width:16vw;//might need reviewing
                        margin:auto;
                        background: nth($scheme, 3);

                    

                        .ui-menu-item{ 
                        color:rgba(255, 255, 255, 0.5);
                        width:100%;
                        // height:$iconheight1;
                        height:inherit;// allows item to change based on active child or
                        text-align:center;
                        font-size:0px!important;
                         margin: 0; // was auto
                        @include fluid-type(font-size, map-get($breakpoints, xs), map-get($breakpoints, lg), map-get($fontsize, xs)*0.75, map-get($fontsize, lg)*0.75); // fixed sizing 
                        // @include fluid-type(font-size, map-get($breakpoints, lg), map-get($breakpoints, xxl), map-get($fontsize, lg)*0.75, map-get($fontsize, xxl)*0.75); // viewport sizing 
                        // @include fluid-type(line-height, map-get($breakpoints, xs), map-get($breakpoints, lg), map-get($lineheight, xs)*1, map-get($lineheight, lg)*1); // fixed sizing 
                        // @include fluid-type(line-height, map-get($breakpoints, lg), map-get($breakpoints, xxl), map-get($lineheight, lg)*1, map-get($lineheight, xxl)*1); // viewport sizing 
                        // line-height:10vw;
                        
                            .ui-menu-item-wrapper {
                                @include fluid-type(
                                padding,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 0.125,
                                map-get($lineheight,xxl)* 0.125
                                );
                                z-index: 0;
                                height:inherit;
                                padding: 0;
                                color:transparent;
                                // line-height: $iconheight1;
                                // color: nth($scheme, 2);
                            }
                            
                            .ui-state-active{
                            border:none;
                            background:none;
                            font-size: 0px;// don't display text
                            // height: 9vw;

                                 span.ui-icon {
                                    position:absolute!important;
                                    background-position: 0 0;
                                    background-size: contain;
                                    background-blend-mode: none;
                                    // background-color:nth($scheme, 2);
                                    background-color: $color-red;
                                    width:100%;
                                    // height: 9vw;//10vw; might need reviewing
                                    display: block;
                                    right:0px;
                                    bottom: 0px;
                                    left:0;
                                    top:0px;
                                    z-index: 1;

                                }
            
                            }
                            .ui-selectmenu-text{
                            opacity:0; 
                            }

                            &:first-of-type{
                            // no need to show the first item - as it just turn select of again
                            display:none;
                            }

                            &:last-of-type{

                                @include fluid-type(
                                    margin-bottom,
                                    map-get($breakpoints, xs),
                                    map-get($breakpoints,xxl),
                                    map-get($lineheight, xs) * 0.25,
                                    map-get($lineheight,xxl)* 0.25
                                );
                            }
                          
                        }//.ui-menu-item

                    }//.ui-menu

                } // .ui-front 
                

                .input-id {
                    // review + delte probably
                    background-color: nth($scheme, 3);
                    color: nth($scheme, 2);
                }

                .input-image-position-x,
                .input-image-position-y,
                .input-image-scale {
                    width: 100%;
                }

                .grid-item-options-item {
                    border-bottom: 1px solid nth($scheme, 3);

                    @include fluid-type(
                        padding-bottom padding-top,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 0.5,
                        map-get($lineheight,xxl) * 0.5
                    );

                    @media (min-width: map-get($breakpoints, lg)) {
                        border-bottom: 0px;
                    }

                    .options-item-title {
                        width: 100%;
                        clear: both;
                        // color: $color-grey;

                    /*    @include fluid-type(
                            padding-bottom,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 0.5,
                            map-get($lineheight,xxl) * 0.5
                        );


                        */
                        &.sub-title {
                            color: nth($scheme, 3);
                            @include fluid-type(
                                padding-bottom,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 0.25,
                                map-get($lineheight,xxl) * 0.25
                            );
                        }
                    } // .options-item-title

                    //furher styling for each option module

                    &.image-options-item {
                        // background:red;
                        order: 1;
                        @media (min-width: map-get($breakpoints, md)) {
                            order: 1;
                        }
                    } //&.image-options-item

                    &.item-options-item {
                        // background:green;
                        // order: 2;
                     /*   @media (min-width: map-get($breakpoints, md)) {
                            order: 2;
                        }
                       */
                        padding:0;

                        .label-wrapper {
                            flex-direction: row;
                            display: flex;

                            label {
                                display: flex;
                                flex-direction: column;
                                flex-grow: 1;
                            }
                        }

                        .post-options-item {
                           
                           /* @include fluid-type(
                                padding-bottom padding-top,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 0.5,
                                map-get($lineheight,xxl) * 0.5
                            );
                            // background:yellow;
                            // order:3;
                            */
                            @media (min-width: map-get($breakpoints, md)) {
                                // order:3;
                            }

                            .options.post-object {
                                flex-direction: row;
                                display: flex;

                                label {
                                    display: flex;
                                    flex-direction: column;
                                    position:relative;

                                    .acf-post-object {
                                        display: flex;
                                        flex-direction: column;
                                        flex-grow: 1;
                                    }
                                }
                            }
                        } //.post-options-item
                    } //&.image-options-item

                    &.button-options-item {
                        //  background:blue;
                        order: 3;

                        @media (min-width: map-get($breakpoints, md)) {
                            display: flex;
                        }

                        @media (min-width: map-get($breakpoints, lg)) {
                            flex-flow: column;
                        }

                        .btn {
                            width: 100%;
                            @include fluid-type(
                                padding,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 0.25,
                                map-get($lineheight,xxl) * 0.25
                            );
                            @include fluid-type(
                                line-height,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 1.5,
                                map-get($lineheight,xxl) * 1.5
                            );
                            @include fluid-type(
                                height,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 2,
                                map-get($lineheight,xxl) * 2
                            );
                            @include fluid-type(
                                margin-bottom,
                                map-get($breakpoints, xs),
                                map-get($breakpoints,xxl),
                                map-get($lineheight, xs) * 0.25,
                                map-get($lineheight,xxl) * 0.25
                            );
                            background-color: nth($scheme, 2) ;
                            color: nth($scheme, 3);

                            &.remove-row {
                                background-color: nth($scheme, 3);
                                color: nth($scheme, 2);
                            }

                            &:last-of-type {
                                margin-bottom: 0px;
                            }
                        } //.btn
                    } //&.button-options-item
                    .options.post-object {
                        width: 100%;
                    }
                } //.grid-item-options-item
            } //.grid-item-options

            .inner-grid-item {
                width: 100%;
                height: 100%;
                // padding:1vw;// removed - delete line
                position: relative;
                box-sizing: border-box;
                display: flex;
                justify-content: center;
                align-items: center;
                pointer-events: none;
                text-align: center;

                @media (max-width: map-get($breakpoints, md)) {
                    transform: none !important; // apply on mobile only
                }

                .text-wrap {
                    display:none;// no need to have this
                    opacity: 0;
                    z-index: 3; //above the two images;
                    color: nth($scheme, 2);
                    text-align: center;
                    @include center-align(absolute, 0);

                    @media (max-width: map-get($breakpoints, md)) {
                        @include fluid-type(
                            font-size,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($fontsize, xs) * 1.2,
                            map-get($fontsize,xxl) * 1.2
                        ); // fixed sizing
                        @include fluid-type(
                            line-height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 1.2,
                            map-get($lineheight,xxl) * 1.2
                        ); // fixed sizing
                    }

                    .title {
                    }
                    .date {
                    }
                }

                .image-wrap {
                    //initial value
                    // opacity: 0;
                    // transform: matrix(1, 0, 0, 1, 0, 500);
                    //end inital value
                    position: relative;
                    width: 100%;
                    height: 100%;
                    float: left; //ensure it topleft
                    pointer-events: all;

                    @media (max-width: map-get($breakpoints, md)) {
                        // background: nth($scheme, 3)
                        transform: none !important;
                        width: 100% !important;
                        height: auto !important;
                    }

                    img {
                        display: block;
                        margin: auto;
                        position: absolute; // was relative. But trying to align both images
                        z-index: 1;
                        top: 0px;
                        bottom: 0px;
                        left: 0px;
                        right: 0px;
                        pointer-events: none;

                        @media (max-width: map-get($breakpoints, md)) {
                            // transform: none !important; // apply on mobile only
                            width: 100% !important;
                            height: auto !important;
                            position: relative; //still relative on mobile
                        }
                        &.place-holder {
                            top: 0px;
                            z-index: 2;
                            opacity: 0;
                            position: absolute;
                            left: 0px;
                            right: 0px;
                            bottom: 0px; //wass initial; //was 0px; - review this, if I come back to it agin; clearly not a solution?
                        }

                        &[data-segment-type="tree"] {
                        transform: scale(1.5); //review
                        }
                        &[data-segment-type="normal"] {
                        transform: scale(1);  
                        }
                        
                    } //img

                    &:hover {
                        .text-wrap {
                            opacity: 1;
                            color: nth($scheme, 3);
                        } //.text-wrap
                        img {
                            opacity: 0.4;
                        } //img
                    }
                } //.image-wrap
            } //.inner-grid-item

            &.blank-item {
                //.grid-item.blank-item

                @media (max-width: map-get($breakpoints, md)) {
                    padding-bottom: 0px;
                }
            } ////.grid-item.blank-item

            &.vertical-item {
                .inner-grid-item {
                    .image-wrap {
                        img {
                            &.horizontal-image {
                                width: 100%; // was:width: auto;
                                height: auto; //was: height:100%;
                                margin: auto;
                                // top: 50%;//review
                                margin-top: 50%; // this was top: 50%
                                // might need to set positions with js- review
                            } //&.

                            &.vertical-image {
                                width: 100%;
                                height: auto;
                            } //&.

                            &.square-image {

                                width: 100%;
                                height: auto;
                            } //&.
                        } //img
                    } //.image-wrap
                } //inner-grid-item
            } //&.vertical-item

            &.horizontal-item {
                .inner-grid-item {
                    .image-wrap {
                        img {
                            &.horizontal-image {
                                width: 100%;
                                height: auto;
                            }

                            &.vertical-image {
                                width: auto;
                                height: 100%;
                            }
                            &.square-image {
                                width: auto;
                                height: 100%;
                            } //&.
                        } //img
                    } //image-wrap
                } //.inner-grid-item

                &.image-larger-than-item {
                    .inner-grid-item {
                        .image-wrap {
                            img {
                                &.horizontal-image {
                                    width: auto;
                                    height: 100%;
                                }

                                &.vertical-image {
                                }
                                &.square-image {
                                } //&.
                            } //img
                        } //image-wrap
                    } //.inner-grid-item
                } //&.larger-than-container
            } // &.horizontal-item

            &.square-item {
                .inner-grid-item {
                    .image-wrap {
                        img {
                            &.horizontal-image {
                                width: 100%;
                                height: auto;
                            } //&.

                            &.vertical-image {
                                width: 100%;
                                height: auto;
                            } //&.

                            &.square-image {
                            
                                // width:10vw;//ensure image corect size
                                // width: 100%;
                                height: auto;
                            } //&.
                        } //img
                    } //.image-wrap
                } //inner-grid-item

                &.image-larger-than-item {
                    .inner-grid-item {
                        .image-wrap {
                            img {
                                &.horizontal-image {
                                }

                                &.vertical-image {
                                    width: auto;
                                    height: 100%;
                                }
                                &.square-image {
                                } //&.
                            } //img
                        } //image-wrap
                    } //.inner-grid-item
                } //&.larger-than-container
            } //&.square-item

            &.item-added {
                .inner-grid-item {
                    border: 1px solid $color-active-grid;
                }
            } //&.item-added

            &.fade-in {
                .inner-grid-item {
                    .image-wrap {
                        // // opacity: 0;
                        // -webkit-animation:fade-in 0.5s ease-in 0s 1 normal forwards, transform-in 0.5s ease-in 0s 1 normal forwards;
                        // -moz-animation:fade-in 0.5s ease-in 0s 1 normal forwards, transform-in 0.5s ease-in 0s 1 normal forwards;
                        // -ms-animation:fade-in 0.5s ease-in 0s 1 normal forwards, transform-in 0.5s ease-in 0s 1 normal forwards;
                        animation: fade-in 0.5s ease-in 0s 1 normal forwards,
                            transform-in 0.5s ease-in 0s 1 normal forwards;
                    }
                }
            } // &.fade-in

            & &-link {
                display: inline-block;
                height: 100%;
                width: 100%;
                margin: 0 auto;
            }
        } //.grid-item

         //draggabiltiy rules:
        .layout-grid-item.is-dragging{
            //ensure taht draggabel one is above everything else:
            z-index: 99;
          
            
        }

        .blur {
            .layout-grid-item{
                filter: blur(1px); /* Blur with 8px radius */
            }
        } //.blur

        .is-touch .blur { //touch devices
            .layout-grid-item{
                filter: none; /* Blur with 8px radius */
            }
        } //.is-touch .blur

        //http://angrytools.com/css-generator/transform/

      
        .exports{
        display: none;// no need to show this atm; untill preview button pressed

       

            #canvas-wrap{
            position:relative;

                canvas{
                width:100%!important;
                height:auto!important;
                }
                
            }//#canvas-wrap
        
            #export-image-wrap{
            background: nth($scheme, 2);
            border: 1px solid nth($scheme, 3); 
            overflow: hidden;
            position:relative;
            @include fluid-type(
                min-height,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2.5,
                map-get($lineheight,xxl) * 2.5
            ); // fixed sizing

                img{
                width:auto!important;
                height:100%!important;
                margin:auto;
                display:block;
                @include fluid-type(
                    max-height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 2.5,
                    map-get($lineheight,xxl) * 2.5
                ); // fixed sizing
      
                }
                .submission-loader{
                position: absolute;
                z-index: 1;
                display:none;
                color:nth($scheme, 3);
                background:nth($scheme, 2);
                font-family: $medium-font-family;
                height: 100%;
                width:100%;
                }
            
            }// #export-image-wrap

        
        }//.exports

        .more-interaction{
         display:none;
        }
      
        // onluy apply these values athe desired layout nbreakpoint

        // positioning the grid and bg layer

        .grid-layer{
        position: relative;
        overflow: hidden;
        height:55vw;// = 11 units tall x 5vw
        // border-bottom:2px solid nth($scheme, 3);
        // border-top:2px solid nth($scheme, 3);
        z-index:4;//ensure below nav

            .helper-holder{
            position: absolute;
            display:block;       
            top: 0;
            bottom: 0;      
            z-index: 12;
            left: 0;
            right: 0;
            pointer-events: none;

                .helper-icon-wrapper{
                pointer-events: initial;
                position:absolute;
                z-index:2;
                bottom:5vw;
                left:5vw;

           /*     @include fluid-type(
                    left,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) *0.25,
                    map-get($lineheight,xxl) *0.25
                );
                */
                    .helper-icon{
                    pointer-events: initial;
                    border-radius: 50%;
                    border: 4px solid nth($scheme, 3);
                    float:left;
                    font-family:$bold-font-family;
                    color:nth($scheme, 3);
                    background:nth($scheme, 2);
                    text-align:center;
                    cursor:pointer;

                        @include fluid-type(
                            height width,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 1.5,
                            map-get($lineheight,xxl) * 1.5
                        );
                        @include fluid-type(
                            line-height,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($fontsize, xs) *1.625,
                            map-get($fontsize,xxl) *1.625
                        );
                        @include fluid-type(
                            font-size,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($fontsize, xs) *1,
                            map-get($fontsize,xxl) *1
                        );
              

                        .text{
                        pointer-events:none;

                            &.text-off{
                            display:block;
                            }
                            &.text-on{
                            display:none;
                            }

                        }

                        &.pulse {
                        animation: pulse 2s ease 0s infinite;
                        }
                            
                    }
                }
                .helper-window-wrapper{
                opacity:0px;
                position:relative;
                z-index:1;
                pointer-events: none;

                }

            }//helper-holder


            .reset-holder{
            position:absolute;
            top:0px;
            right:0px;
            width:100%;
            left:initial;
            @include fluid-type(
                top,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 0.125,
                map-get($lineheight,xxl) * 0.125
            );
            
            @include fluid-type(
                right,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($gutter, xs) * 1,
                map-get($gutter,xxl) * 1
            );  

                a{
                color: nth($scheme, 2);
                background:nth($scheme, 3);
                float: right;
                display: block;
                width: auto;
                    @include fluid-type(
                        padding-right padding-left,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($gutter, xs) * 1,
                        map-get($gutter,xxl) * 1
                    );  
                    @include fluid-type(
                        font-size,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($fontsize, xs) * 0.5,
                        map-get($fontsize,xxl) * 0.5
                        ); // fixed sizing
                        @include fluid-type(
                        line-height,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 1,
                        map-get($lineheight,xxl) * 1
                        ); // fixed sizing
 

                    .small{
                    display: block;
                    clear:both;

                        @include fluid-type(
                        font-size,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($fontsize, xs) * 0.5,
                        map-get($fontsize,xxl) * 0.5
                        ); // fixed sizing
                        @include fluid-type(
                        line-height,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 0.5,
                        map-get($lineheight,xxl) * 0.5
                        ); // fixed sizing
 
                    }//.small

                  
                    &:hover{
                    border: 1px solid nth($scheme, 2); 
                    background: nth($scheme, 3); 
                    color:nth($scheme, 2);         
                    }
              
                } //a         

            } //.reset-holder

            .grid-container{
               margin-top:15vw;// review 
            }

            #outer-front-layer{
                position:absolute;
                top:0px;
                width:100%;  
                pointer-events: none; 
                z-index: 9;//ensure above everything 
                // background:white;
    
                     //consider furher divs etc.
                    img{
                    position:relative;
                    pointer-events: none; 
                    width:100%;
                    height:auto;          
                    }

            }//  #outer-bg-layer
            

            #outer-bg-layer{
            position:absolute;
            top:0px;
            width:100%;  
            pointer-events: none; 
            z-index: -1; 
            background:white;

                 //consider furher divs etc.
                img{
                position:relative;
                width:100%;
                height:auto;          
                }
            }// #outer-bg-layer
        
        } //.grid-layer{


        @media (min-width: map-get($breakpoints, md)) {
       
            .layout-grid-item{
                // width: $width1;
                // height: $height1;
                width: $iconwidth1;
                height: $iconheight1;
            }

            .grid-item-width-2 {
                width: $width2;
                .inner-grid-item {
                    .image-wrap {
                        //  background: nth($scheme, 3)
                    }
                }
            }

            .grid-item-height-3 {
                height: $height3;
                .inner-grid-item {
                    .image-wrap {
                        // background: nth($scheme, 3)
                }
                }

                &.grid-item-width-2 {
                    .inner-grid-item {
                        .image-wrap {
                            //  background: nth($scheme, 3)
                        }
                    }
                }
            }

            .grid-item-height-2 {
                height: $height2;

                .inner-grid-item {
                    .image-wrap {
                        //  background: nth($scheme, 3)
                    }
                }

                &.grid-item-width-2 {
                    .inner-grid-item {
                        .image-wrap {
                            //  background: nth($scheme, 3)
                        }
                    }
                }
            }

            .grid-item-height-3 {
                height: $height3;

                .inner-grid-item {
                    .image-wrap {
                        // background: nth($scheme, 3)
                    }
                }
            }

            .grid-item-width-3 {
                width: $width3;

                .inner-grid-item {
                    .image-wrap {
                        //  background: nth($scheme, 3)
                    }
                }
            }

            .grid-item-height-4 {
                height: $height4;

                .inner-grid-item {
                    .image-wrap {
                        // background: nth($scheme, 3)
                    }
                }
            }

            .grid-item-width-4 {
                width: $width4;

                .inner-grid-item {
                    .image-wrap {
                        //  background: nth($scheme, 3)
                    }
                }
            }

            .gutter-sizer {
                // width: 2.5%;
            }
        } //breakpiotns

        //if can edit
        &.can-edit {        
 
            .layout-grid-item:hover {
                // background: nth($scheme, 3)
                @media (min-width: map-get($breakpoints, lg)) {
                 cursor: move;
                }

                .inner-grid-item {
                // opacity:1;
                // opacity:0.8;
                }
            }

            // START dev functions - this now part of the UI/UX for "starting the grid"
            .dev-layout-grid-toggle-wrap {
                pointer-events: none;
                // position: sticky;
                position: absolute;
                width:100%;
                height: 100%;
                z-index: 90; // review - ensure nav visble
                 background-color: nth($scheme,3);
                color: nth($scheme, 2);
                 // border-bottom: 1px solid nth($scheme, 3);
                display: none;
                left:0px;
                top:0px;
                text-align:center;
                
               /* @include fluid-type(
                    top,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 4.5,
                    map-get($lineheight,xxl) * 4.5
                );
                */

                @media (min-width: map-get($breakpoints, md)) {
                    display: block;

                     /*
                    @include fluid-type(
                        top,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 2.5,
                        map-get($lineheight,xxl) * 2.5
                    );
                    */
                }

                .dev-layout-grid-toggle {
                    pointer-events: none;
                   /* @include fluid-type(
                        line-height,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 1,
                        map-get($lineheight,xxl) * 1
                    );*/
                    // @include fluid-type(top, map-get($breakpoints, xs), map-get($breakpoints,xxl), map-get($lineheight, xs)*2, map-get($lineheight,xxl)*2);
                    text-align: center;
                    height: inherit;
                    // line-height: 55vw; // maybve needs reviewing

                    @media (min-width: map-get($breakpoints, xxs)) {
                        // text-align: right;
                    }

                    .is-on,
                    .is-off {
                        cursor: pointer;
                        pointer-events: initial;
                        // float: right;
                    }

                    .is-on {
                    display: none;
                    }

                    .is-off {
                    display: block;
                        .follow{
                        // background:green;
                        height: 55vw;

                          .inner-follow{
                            width:20vw;
                            height:5vw;
                            // background:red;
                            line-height:5vw;
                            position:relative;
                            margin-left:-10vw;
                            margin-top:-2.5vw;
                          }  
                        }
                    }
                } //.dev-layout-grid-toggle

            } //.dev-layout-grid-toggle-wrap

            // hide the form submission stuff until "dev-on"
            .submission-form-wrap{
            display:none;//
            @include fluid-type(
                padding-bottom,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 1,
                map-get($lineheight,xxl) * 1
            );
            }
            
            //submission loader - 
            .submission-loader-wrap{
            position: relative;
            width:100%;
            display:none;
            right:0px;
            background-color: nth($scheme, 3);
            z-index:20;// ensure above all else
            @include fluid-type(
                height,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2,
                map-get($lineheight,xxl) * 2
            );

            }//.submission-loader-wrap

        
            .submission-loader{
            // color: white;
            @include fluid-type(
                line-height,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 2,
                map-get($lineheight,xxl) * 2
            );
            text-align: center;
            color: nth($scheme, 2);
            width:100%;
            // @include center-align(absolute, 0);
            height:100%;
            font-family: $bold-font-family;

                &:after {
                content: ' .';
                animation: dots 1s steps(5, end) infinite;
                
                }
            
            }


        } //body.can-edit



        //&.logged-in.dev-layout-grid-on {
        &.can-edit.dev-layout-grid-on {

        // &.logged-in.dev-layout-grid-on {

            .grid-toggles {
                display: none;
            }
            .grid-options-wrap {
            display: block;


                .grid-options {
                    //packery input

                    label {
                    }
                    .coordinates {
                        width: 100%;
                    }
                }
            } //.grid-options-wrap

            .grid {
            // border-top:1px solid nth($scheme, 2)
            }

            .layout-grid-item{
                // border: 1px solid nth($scheme, 3);
                // background:nth($scheme, 3)
   
                .grid-item-options-toggle {
                display: none;
                // width:50%;


                    .is-on {
                        display: none;
                    }
                    .is-off {
                        display: block;
                    }


                    &.grid-item-options-toggle-rotate{
                        right:0px;
                    }

                 
                } //.grid-item-options-toggle

                .move-arrow-area{
                display:block;
                width:200%;
                left:-50%;
                position: absolute;
                height:100%;
                padding:30%;
                pointer-events:none;
                opacity: 0;
                z-index:9;//review this?

                    svg{
                    width:100%;
                    height:100%;
                    }

                }//.move-arrow-area

                //grid item on hover
                &:hover,
                &.item-edit-active 
                    {
                   border:1px solid $color-active-grid-item;
                
                   .move-arrow-area{
                     opacity:0.5; // turn on
                     pointer-events:initial;

                        &:hover{
                        opacity:1;
                        }
                    } //.move-arrow-area

                    .grid-item-options-toggle {
                    display: block;
                    color: nth($scheme, 2);
                    opacity:1;
                    width:200%;
                    height:200%;
                    bottom:-50%;
                    top:-50%;
                    left:-50%;
                    right:-50%;
                    position:absolute;
                    z-index:3;//above edit
                    background-color: nth($scheme, 3);
                    text-align:center;

                      

                        &.grid-item-options-toggle-rotate{
                        // right:0px;
                        width:200%;
                        height:50%;
                        // z-index:4;// 1 above edit
                        z-index:6;// above tree images aswell
                        top:initial;
                        background-color:initial;
                        overflow: hidden;
                        padding: 0;
                        border:none;
                        
                            .rotate{
                            margin: auto;
                            position: relative;
                            display: block;
                            width:100%;
                            height: 100%;
                            opacity:0.6;

                                @include fluid-type(
                                    padding,
                                    map-get($breakpoints, xs),
                                    map-get($breakpoints,xxl),
                                    map-get($lineheight, xs) * 0.125,
                                    map-get($lineheight,xxl) * 0.125
                                );

                                svg{
                                margin:auto;
                                display:block;
                                width:inherit;
                                height:100%;
                                position:relative;
                                }
                            }
 
                            &:hover {
                                .rotate{
                                opacity:1;
                                }
                            }

                        }//&.grid-item-options-toggle-rotate

                        &:hover {
                        color: nth($scheme, 2);
                        opacity:1;
                        }

                        .is-on,
                        .is-off {
                        height: 25%;
                        opacity:0.6;
                        // line-height: 25%;
                        @include fluid-type(
                            padding,
                            map-get($breakpoints, xs),
                            map-get($breakpoints,xxl),
                            map-get($lineheight, xs) * 0.125,
                            map-get($lineheight,xxl) * 0.125
                        );

                            &:hover {
                             opacity:1;
                            }
                        }
                        .is-on {
                            // display:none;
                        }
                        .is-off {
                            //  display:none;
                        }

                    } //.grid-item-options-toggle

                    .inner-grid-item{
                    background-color: nth($scheme, 3);
                    z-index:4;// 1 above controls; shocases the image
                    pointer-events: none;// don't allow clicking on it though

                        .image-wrap{
                        opacity: 1;
                        }

                    }//.inner-grid-item

                } // &:hover  //.grid-item:hover
             //this maybe the same as the hover state:
                &.item-edit-active {
                    // border: 1px solid $color-active-grid-item;

                    .grid-item-options-toggle {
                        display: block;
                        // color: $color-active-grid-item;
                        // background-color: nth($scheme, 2);
                     
                        .is-on {
                            display: block;
                        }
                        .is-off {
                            display: none;
                        }

                        &.grid-item-options-toggle-rotate{

                        }

                    } //.grid-item-options-toggle

                    .grid-item-options {
                        flex-wrap: inherit;
                        display: flex;
                        flex-flow: row wrap;
                        // justify-content: space-around; 
                        // max-height: 50vh;//review this after ui/ux of mapsegments complete
                        // min-height: 25vh;//review this after ui/ux of mapsegments complete
                        height: inherit;

                        left: -50%;
                        top: -50%;
                        right: -50%;
                        width: 200%;

                    }
                } // &.item-edit-active
                 
            } //.grid-item

            .dev-layout-grid-toggle-wrap {
             // I probably don't need to ever show his - so diplay none once its activated?

                // position: fixed;
                z-index: 99;  
                color: nth($scheme, 2);
                background-color: nth($scheme, 3);
                top: 0px;
                bottom:initial;
                height:auto;
                border-bottom: none;       
                left: initial;
                width: auto;
                right: 0;

                /* 
                @media (min-width: map-get($breakpoints, md)) {
                    @include fluid-type(
                        top,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 2.5,
                        map-get($lineheight,xxl) * 2.5
                    );
                }
                @media (min-width: map-get($breakpoints, lg)) {
                    @include fluid-type(
                        top,
                        map-get($breakpoints, xs),
                        map-get($breakpoints,xxl),
                        map-get($lineheight, xs) * 2.5,
                        map-get($lineheight,xxl) * 2.5
                    );
                }
                */
                .dev-layout-grid-toggle {
                    // @include fluid-type(top, map-get($breakpoints, xs), map-get($breakpoints,xxl), map-get($lineheight, xs)*2, map-get($lineheight,xxl)*2);
                    // background:yellow;
                    line-height: inherit; // so doesn't take up all space

                    .is-on {
                        display: block;
                    }

                    .is-off {
                        display: none;
                    }
                }

            } //.dev-layout-grid-toggle-wrap

            // we can now show the form submission stuff
            .submission-form-wrap{
            display:block;
            }

            .submission-loader-wrap{
            
               .submission-loader{
          
               }
                
            }//.submission-loader-wrap

            .export-options{
            // background:red;

                a#load-image{
                border: 1px solid $color-red; 
                color: $color-red;
                display:block;
                
                @include fluid-type(
                    height line-height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 1,
                    map-get($lineheight,xxl) * 1
                ); // fixed sizing
                  
                    &:hover{
                    border: 1px solid $color-red; 
                    background: $color-red; 
                    color:nth($scheme, 2);         
                    }
                }

                a#download-image{
                display: none;   
                }
                a#reload-page{
                display: none;   
                }

            }// .export-options

        } //body.dev-layout-grid-on


        //images loaded
        &:not(.images-loaded) {
           
            img {
            opacity: 0; // look to apply transitions on image elements
            }

        } //body:not(.images-loaded)

        &.images-loaded.page-template-page-grid {
    
            img {
            opacity: 1; // look to apply transitions on image elements
            }

        } //body.images-loaded.page-template-page-grid {
       

        &.page-content-loaded {
        overflow: initial;

            .page-loader-wrap{
            display:none;// freeling page loader
            }   
         
        } //body.page-content-loaded{


        //Ensure only images are visible when copying to canvas:
        &.capturing-image{
 
            .layout-grid-item{
            border:none!important;
            }
            .grid-item-options-toggle,
            .grid-item-options,
            .grid-options-wrap,
            .dev-layout-grid-toggle-wrap
            {
            z-index: -999;
            opacity:0;
            display:none!important;
            }

            .image-wrap{

                img{
                // width:10vw;//ensure image corect size
                }
             
            }//.image-wrap
        
            #export-image-wrap{
            border: 1px solid $color-red;
            
                .submission-loader{
                display:block;
                color:nth($scheme, 2);
                }

            }
            
            //only show this - on capturing (item hidden via js html2canvas options
            .submission-loader-wrap{
            display:block;

                .submission-loader{ 
           
                }            
                 
            }//.submission-loader-wrap

            &.submission-previewed{
                //no longer need to have big loader
                .submission-loader-wrap{
                display:none;         
                }//.submission-loader-wrap

            }//body.capturing-image..submission-previewed
    
        }//body.capturing-image
   
        &.helper-on{

            .grid-layer{

                .helper-holder{
                background:rgba(47,69,40,.5);
                     
                        .helper-icon-wrapper{
                        position:absolute;

                            .helper-icon{
                            
                                .text{
                                  
                                    &.text-off{
                                    display:none;
                                    }
                                    &.text-on{
                                    display:block;
                                    }

                                }
                          
                            }

                        }//.helper-icon-wrapper

                        .helper-window-wrapper{
                        opacity:1;
                        position:relative;
                        pointer-events: initial;
                        height:100%;

                            .helper-window{
                            width: 80vw;
                            margin: auto;
                            height:100%;
                            align-items: center;
                            display: flex;
                            flex-basis: 100%;


                                .helper-item{
                                // width:33.33%;
                                // float:left;
                                display:flex;
                                flex-basis: 100%;

                                width: 33.34%;
                                }

                                img{
                                    width: 100%;
                                    height:auto;
                                    margin: auto;
                                    display: block;
                                }

                                .help-text{
                                background-color:nth($scheme, 2);
                                color:nth($scheme, 3);
                                flex-basis: 100%;

                                    .svg-icon{
                                    display:initial;
 
                                    @include fluid-type(
                                        width height,
                                        map-get($breakpoints, xs),
                                        map-get($breakpoints,xxl),
                                        map-get($lineheight, xs) * 0.5,
                                        map-get($lineheight,xxl) * 0.5
                                    ); // fixed sizing
                                    
                                        svg{
                                            @include fluid-type(
                                                width height,
                                                map-get($breakpoints, xs),
                                                map-get($breakpoints,xxl),
                                                map-get($lineheight, xs) * 0.5,
                                                map-get($lineheight,xxl) * 0.5
                                            ); // fixed sizing

                                        }

                                    }
                                    
                                    svg,
                                    path,
                                    polygon{
                                    fill:nth($scheme, 3);
                                    }

                                }
                                .help-gif{
                                flex-basis: 100%;
                                background-color:nth($scheme, 2);   
                               }

                            }
                        }
                
                    }//helper-holder
                

            }//grid-layer


        }//body.helper-on

        #preview-label{
        font-family: $medium-font-family;
        opacity: 0;
        }

        //before submit possible; disable button:
        .wpuf-submit-button{
        opacity: 0.2;
        pointer-events: none;
        color: nth($scheme, 3);
        background-color: nth($scheme, 2);
        border:1px solid nth($scheme, 3);
        padding:0;
        width:49%;//50%; bit messy :(
        @include fluid-type(
            height line-height,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 1,
            map-get($lineheight,xxl) * 1
        ); // fixed sizing
        @include fluid-type(
            padding-left,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($gutter, xs) * 0.35, // bit messy ":(
            map-get($gutter,xxl) * 0.35
        ); // fixed sizing    
        
        @include fluid-type(
            margin-left margin-right,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($gutter, xs) * 0.35, // bit messy ":(
            map-get($gutter,xxl) * 0.35
        ); // fixed sizing
        }
         
        ul.wpuf-form .wpuf-fields{
        width: 75%;
        @include fluid-type(
            padding-left,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($gutter, xs) * 0.35, // bit messy ":(
            map-get($gutter,xxl) * 0.35
        ); // fixed sizing
       
        }
        //wpuf-form - additional styling related css over rides
    
        ul.wpuf-form li {
            margin-left: 0;
            padding: 0;
            @include fluid-type(
                margin-bottom,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 0.125,
                map-get($lineheight,xxl) * 0.125
            ); // fixed sizing
            @include fluid-type(
                padding-top,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($lineheight, xs) * 0.125,
                map-get($lineheight,xxl) * 0.125
            ); // fixed sizing
        }
        ul.wpuf-form li:after {
            clear: both;
            content: "";
            display: table;
        }

        ul.wpuf-form .wpuf-submit .wpuf-errors{
        float:left;
        font-size: inherit;
        width: 100%;
        text-align: center;
         @include fluid-type(
            padding-left,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($gutter, xs) * 0.35, // bit messy ":(
            map-get($gutter,xxl) * 0.35
        ); // fixed sizing
        background:$color-red;
        border:none;
        color:nth($scheme, 2);          
        }

        ul.wpuf-form li.has-error {
        background:transparent;
        border:none;

            .wpuf-label{
                @include fluid-type(
                padding-left,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($gutter, xs) * 0.25, // bit messy ":(
                map-get($gutter,xxl) * 0.25
            ); // fixed sizing 
            }

            .wpuf-fields{
            @include fluid-type(
                padding-right,
                map-get($breakpoints, xs),
                map-get($breakpoints,xxl),
                map-get($gutter, xs) * 0.25, // bit messy ":(
                map-get($gutter,xxl) * 0.25
            ); // fixed sizing 
            }

            input{
            border:1px solid $color-red;
          
                &:focus{
                border:2px solid $color-red;
                }
            
            }

        }// ul.wpuf-form li.has-error

        ul.wpuf-form .wpuf-error-msg{
        color: $color-red;
        @include fluid-type(
            font-size,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($fontsize, xs) * 0.5,
            map-get($fontsize,xxl) * 0.5
        ); // fixed sizing
        }

        ul.wpuf-form li .wp-editor-wrap {
        border: none;
        }
        ul.wpuf-form li.wpuf_hidden_field {
        display: none;
        }
        ul.wpuf-form li .wpuf-label {
        float: left;
        width: 25%;
        min-height: 1px;
        font-weight: bold;
        }
        
        .wpuf-fields input.textfield,
        .wpuf-fields input.email,
        .wpuf-fields textarea.textareafield {
        padding:0;
        background:transparent;
        border:1px solid nth($scheme, 3);
        width:100%;
        @include fluid-type(
            height line-height,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 1,
            map-get($lineheight,xxl) * 1
        ); // fixed sizing
        @include fluid-type(
            padding-left,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 0.125,
            map-get($lineheight,xxl) * 0.125
        ); // fixed sizing
       
            &:focus{
            border:2px solid nth($scheme, 3);
            outline: none;
            }
        }

        .wpuf-fields textarea.textareafield {
        resize: none;
        @include fluid-type(
            height,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 6,
            map-get($lineheight,xxl) * 6
        ); // fixed sizing
        }

        ul.wpuf-form li.post_title{
        display:none;// no need to show this 
        }

        ul.wpuf-form li .wpuf-label .required {
        color:$color-red;
        }
        
        ul.wpuf-form li .wpuf-fields .wpuf-help{
        margin:0;
        color: #666;
        margin: 2px 0 5px 0;
        // font-size: 12px;
        font-style: initial;
        font-family: $medium-font-family;
        display: block;
        @include fluid-type(
            font-size,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($fontsize, xs) * 0.5,
            map-get($fontsize,xxl) * 0.5
        ); // fixed sizing
        @include fluid-type(
            line-height,
            map-get($breakpoints, xs),
            map-get($breakpoints,xxl),
            map-get($lineheight, xs) * 0.5,
            map-get($lineheight,xxl) * 0.5
        ); // fixed sizing
        }

        .wpuf-success{
        text-align:center;
        background: nth($scheme, 3);
        color: nth($scheme, 2);     
        border:none;
        }
        // END wpuf-form - css over rides

        //submission previewed; change styles
        &.can-edit.dev-layout-grid-on.submission-previewed{  


            #preview-label{
            opacity: 1;
            }

            .exports{
            display:block;
            }
            //before submit possible; disable button:
            .wpuf-submit-button{
            opacity: 1;
            pointer-events: initial;
            cursor:pointer;
          
                &:hover{
                background: nth($scheme, 3);
                color: nth($scheme, 2);   
                }

                &.button-primary-disabled{ //when its submitting
                border: 1px solid $color-red;
                color: nth($scheme, 2)!important;
                background: $color-red!important;
                text-shadow:none!important;
                }

                .wpuf-loading{
                display:none!important;//removes that shitty gif
                }

            }// .wpuf-submit-button

            .export-options{
     
                a#load-image{
                border: 1px solid nth($scheme, 3);
                color: nth($scheme, 3);
                @include fluid-type(
                    margin-bottom,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 0.5,
                    map-get($lineheight,xxl) * 0.5
                ); // fixed sizing 
                
                     &:hover{
                    border: 1px solid nth($scheme, 2); 
                    background: nth($scheme, 3); 
                    color:nth($scheme, 2);         
                    }
                }
                a#download-image{

                border: 1px solid nth($scheme, 3);
               // display: block; 
                    //dont display yet?

                    display:none;
                @include fluid-type(
                    line-height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 1,
                    map-get($lineheight,xxl) * 1
                ); // fixed sizing
                @include fluid-type(
                    height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 1,
                    map-get($lineheight,xxl) * 1
                ); // fixed sizing  
                
                     &:hover{
                    border: 1px solid nth($scheme, 2); 
                    background: nth($scheme, 3); 
                    color:nth($scheme, 2);         
                    }
                
                }

            }// .export-options
        
        }//body.can-edit.dev-layout-grid-on.submission-previewed

        &.can-edit.dev-layout-grid-on.submission-previewed.update-available{ 
 
            .export-options{
     
                a#load-image{
                border: 1px solid $color-red;
                color: $color-red;  
                
                     &:hover{
                    background: $color-red; 
                    color:nth($scheme, 2);         
                    }
                }
                a#download-image{
                display:none;   
                }

            }// .export-options
        
            .wpuf-submit-button{
                // this way they can't submit any non updated images
            opacity: 0.2;
            pointer-events: none;
            }
        
        }//body.can-edit.dev-layout-grid-on.submission-previewed.update-available

        &.can-edit.dev-layout-grid-on.submission-previewed.form-submitted{  
 
            .grid-layer{
            display:none;
            }



            #preview-label{
            display:none
            }

            .exports{
            width: 100%;
            flex: 0 0 100%;
            float: right;
            margin-left: 0%;
            
                #export-image-wrap{
                border:none;

                    img{
                    width: 100%!important;
                    height: auto!important;
                    max-height: initial;
                    }
                }

            }// exports

            .export-options{
                width: 100%;
                flex: 0 0 100%;
                float: left;
                margin-left:0%;

                a#load-image{
                display: none;   
                }
     
                a#download-image{
                display: block; 
                border:1px solid $color-red;
                color:nth($scheme, 2);
                background: $color-red;

                    &:hover{
                    color: $color-red;
                    background:nth($scheme, 2);
                    }
             
                }

                a#reload-page{
                display: block; 
                border: 1px solid nth($scheme, 3);

                @include fluid-type(
                    margin-top,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 0.5,
                    map-get($lineheight,xxl) * 0.5
                ); // fixed sizing 
                @include fluid-type(
                    height line-height,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 1,
                    map-get($lineheight,xxl) * 1
                ); // fixed sizing  
                
                
                    &:hover{
                    border: 1px solid nth($scheme, 2); 
                    background: nth($scheme, 3); 
                    color:nth($scheme, 2);         
                    }
                }

            }// .export-options    


             .more-interaction{
                display:block!important;
                @include fluid-type(
                    margin-top,
                    map-get($breakpoints, xs),
                    map-get($breakpoints,xxl),
                    map-get($lineheight, xs) * 2,
                    map-get($lineheight,xxl) * 2
                ); // fixed sizing
      
            }

        }//body.can-edit.dev-layout-grid-on.submission-previewed.form-submitted



        //if edit active; ensure nothing obscured
        &.edit-active{

            #outer-front-layer{
            // opacity:0;
            mix-blend-mode: darken; // this work on all browser?
            }
        }// &.edit-active

    }//body.#{nth($scheme, 1)}:not(.wp-admin) // ensure we're not applying to admin 

}//scheme



//by default, don't display until the js adds the appropriate class
.touch-notification-wrapper,
.small-screen-notification-wrapper,
.grid-layer,
.submission-form-wrap,
.helper-holder{
display:none;  
}


//end by default, don't display until the js adds the appropriate class

body.is-not-touch {

    .touch-notification-wrapper{
    display:none;
    }
 
    .small-screen-notification-wrapper{
    display:block;
     
        @media (min-width: map-get($breakpoints, lg)) {
        display:none; 
        }      

    }
    .grid-layer,
    .submission-form-wrap{
    display:none;

        @media (min-width: map-get($breakpoints, lg)) {
        display:block; 
        }   
    }

}//body.is-not-touch

body.is-touch {

    .touch-notification-wrapper{
    display:block;
    }
    .small-screen-notification-wrapper{
    display:none;  
    }
    .grid-layer,
    .submission-form-wrap{
    display:none;
    }

}//body.is-touch

 

body.toggles-on {
    overflow: hidden;
} //body.toggles-active


body:not(.can-edit) {
    img {
        pointer-events: initial;
        cursor: inherit;
    }
} //body:not(.logged-in){


body:not(.logged-in){
//only show the coordiantes, toggles, options etc for logged in user

    // .dev-layout-grid-toggle-wrap
    .grid-options-wrap
    {
    display:none!important;
    }

    &.can-edit{

        .dev-layout-grid-toggle-wrap{
            background:red
        }

   }

}//body:not(.logged-in)


//Test
/* conditional CSS - https://adactio.com/journal/5429 */

body:after {
    content: 'default';
    display: block;
    visibility: hidden;
    height: 0;
    overflow:hidden;
}

/* widescreen */
@media (min-width: map-get($breakpoints, md)) {

    body:after {
        content: 'widescreen';
    }
}


 